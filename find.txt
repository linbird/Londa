tree 2d005d4b152c922f8ff8be745495829514270ea4

DS/
Function/
IO/
Tool/
log/

tree 5b6112a952d5522d179ebab0e3baca87183a18e1

.github/
.gitignore
C++å¹¶å‘.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit 41c265bb5f3f5ec4d04cf9e576842bb14adbe3f1
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:27:14 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

tree 4405fdd6535fd2952932cb56b341787d7b7efe12

.github/
.gitignore
C++å¹¶å‘.md
GITå‘½ä»¤è®°å½•.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit 7d05210e386b44557eccd95d3d615745a0998282
Merge: 3e6db26 dee6aab
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:16:34 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }

commit 7f66969b1efff66a69fb009befa7ac16326807dd
Merge: 3e6db26 703de11
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:13:07 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }

commit 92660780d7fe9f03ac6a46174ef9d3828a748464
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 16:59:42 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

commit dee6aab5cae439497df7e1c48644dcc26aedafcd
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:16:34 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

commit e2c7c700850e03665ba1106538254e69a562a4d6
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:00:53 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

commit f567369d0208a47fdf5351e504f4f99a4502f908
Merge: 3e6db26 9266078
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 16:59:42 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/Client.cpp
index 5bfb7d0,5bfb7d0..1bfbdc0
--- a/code/boost_doc/IO/Client.cpp
+++ b/code/boost_doc/IO/Client.cpp
@@@ -1,26 -1,26 +1,136 @@@
--#include <iostream>
--using namespace std;
++//
++// client.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Downloads stock quote information from a server.
++    class client
++    {
++        public:
++            /// Constructor starts the asynchronous connect operation.
++            client(boost::asio::io_service& io_service,
++                    const std::string& host, const std::string& service)
++                : connection_(io_service)
++            {
++                // Resolve the host name into an IP address.
++                boost::asio::ip::tcp::resolver resolver(io_service);
++                boost::asio::ip::tcp::resolver::query query(host, service);
++                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
++                    resolver.resolve(query);
++                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++
++                // Start an asynchronous connect operation.
++                connection_.socket().async_connect(endpoint,
++                        boost::bind(&client::handle_connect, this,
++                            boost::asio::placeholders::error, ++endpoint_iterator));
++            }
++
++            /// Handle completion of a connect operation.
++            void handle_connect(const boost::system::error_code& e,
++                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
++            {
++                if (!e)
++                {
++                    // Successfully established connection. Start operation to read the list
++                    // of stocks. The connection::async_read() function will automatically
++                    // decode the data that is read from the underlying socket.
++                    connection_.async_read(stocks_,
++                            boost::bind(&client::handle_read, this,
++                                boost::asio::placeholders::error));
++                }
++                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
++                {
++                    // Try the next endpoint.
++                    connection_.socket().close();
++                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++                    connection_.socket().async_connect(endpoint,
++                            boost::bind(&client::handle_connect, this,
++                                boost::asio::placeholders::error, ++endpoint_iterator));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // operation the io_service will run out of work to do and the client will
++                    // exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
++
++            /// Handle completion of a read operation.
++            void handle_read(const boost::system::error_code& e)
++            {
++                if (!e)
++                {
++                    // Print out the data that was received.
++                    for (std::size_t i = 0; i < stocks_.size(); ++i)
++                    {
++                        std::cout << "Stock number " << i << "\n";
++                        std::cout << "  code: " << stocks_[i].code << "\n";
++                        std::cout << "  name: " << stocks_[i].name << "\n";
++                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
++                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
++                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
++                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
++                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
++                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
++                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
++                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
++                    }
++                }
++                else
++                {
++                    // An error occurred.
++                    std::cerr << e.message() << std::endl;
++                }
  
--    udp_socket.open(local_add.protocol());
++                // Since we are not starting a new operation the io_service will run out of
++                // work to do and the client will exit.
++            }
  
--    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
--    while (1)
++        private:
++            /// The connection to the server.
++            connection connection_;
++
++            /// The data received from the server.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
--        string s;
--        cin >> s;
--        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
--        cout << "æ”¶åˆ°" << receive_str << endl;
--        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
++        // Check command line arguments.
++        if (argc != 3)
++        {
++            std::cerr << "Usage: client <host> <port>" << std::endl;
++            return 1;
++        }
++
++        boost::asio::io_service io_service;
++        s11n_example::client client(io_service, argv[1], argv[2]);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }
diff --cc code/boost_doc/IO/Server.cpp
index 356a6ad,356a6ad..9414436
--- a/code/boost_doc/IO/Server.cpp
+++ b/code/boost_doc/IO/Server.cpp
@@@ -1,26 -1,26 +1,130 @@@
--#include <iostream>
--using namespace std;
++//
++// server.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <boost/lexical_cast.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Serves stock quote information to any client that connects to it.
++    class server
++    {
++        public:
++            /// Constructor opens the acceptor and starts waiting for the first incoming
++            /// connection.
++            server(boost::asio::io_service& io_service, unsigned short port)
++                : acceptor_(io_service,
++                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
++        {
++            // Create the data to be sent to each client.
++            stock s;
++            s.code = "ABC";
++            s.name = "A Big Company";
++            s.open_price = 4.56;
++            s.high_price = 5.12;
++            s.low_price = 4.33;
++            s.last_price = 4.98;
++            s.buy_price = 4.96;
++            s.buy_quantity = 1000;
++            s.sell_price = 4.99;
++            s.sell_quantity = 2000;
++            stocks_.push_back(s);
++            s.code = "DEF";
++            s.name = "Developer Entertainment Firm";
++            s.open_price = 20.24;
++            s.high_price = 22.88;
++            s.low_price = 19.50;
++            s.last_price = 19.76;
++            s.buy_price = 19.72;
++            s.buy_quantity = 34000;
++            s.sell_price = 19.85;
++            s.sell_quantity = 45000;
++            stocks_.push_back(s);
++
++            // Start an accept operation for a new connection.
++            connection_ptr new_conn(new connection(acceptor_.io_service()));
++            acceptor_.async_accept(new_conn->socket(),
++                    boost::bind(&server::handle_accept, this,
++                        boost::asio::placeholders::error, new_conn));
++        }
++
++            /// Handle completion of a accept operation.
++            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
++            {
++                if (!e)
++                {
++                    // Successfully accepted a new connection. Send the list of stocks to the
++                    // client. The connection::async_write() function will automatically
++                    // serialize the data structure for us.
++                    conn->async_write(stocks_,
++                            boost::bind(&server::handle_write, this,
++                                boost::asio::placeholders::error, conn));
  
--    udp_socket.open(local_add.protocol());
--    udp_socket.bind(local_add);
++                    // Start an accept operation for a new connection.
++                    connection_ptr new_conn(new connection(acceptor_.io_service()));
++                    acceptor_.async_accept(new_conn->socket(),
++                            boost::bind(&server::handle_accept, this,
++                                boost::asio::placeholders::error, new_conn));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // accept operation the io_service will run out of work to do and the
++                    // server will exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
  
--    char receive_str[1024] = { 0 };
--    while (1)
++            /// Handle completion of a write operation.
++            void handle_write(const boost::system::error_code& e, connection_ptr conn)
++            {
++                // Nothing to do. The socket will be closed automatically when the last
++                // reference to the connection object goes away.
++            }
++
++        private:
++            /// The acceptor object used to accept incoming socket connections.
++            boost::asio::ip::tcp::acceptor acceptor_;
++
++            /// The data to be sent to each client.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--        boost::asio::ip::udp::endpoint  sendpoint;
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
--        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
--        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
--        memset(receive_str, 0, 1024);
++        // Check command line arguments.
++        if (argc != 2)
++        {
++            std::cerr << "Usage: server <port>" << std::endl;
++            return 1;
++        }
++        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
  
++        boost::asio::io_service io_service;
++        s11n_example::server server(io_service, port);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }
diff --cc è¯­è¨€åŸºç¡€.md
index 453babe,453babe..6d323cd
--- a/è¯­è¨€åŸºç¡€.md
+++ b/è¯­è¨€åŸºç¡€.md
@@@ -2,430 -2,430 +2,446 @@@
  
  <!-- vim-markdown-toc GFM -->
  
--* [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
--    * [æ ‡å‡†åº“æ”¯æŒ](#æ ‡å‡†åº“æ”¯æŒ)
--    * [new(new operator)çš„å®ç°](#newnew-operatorçš„å®ç°)
--        * [æ¦‚è¿°](#æ¦‚è¿°)
--        * [`operator new()`](#operator-new)
--            * [é‡è½½`operator new/new[]`](#é‡è½½operator-newnew)
--                * [å†…å­˜å¯¹é½](#å†…å­˜å¯¹é½)
--        * [`placement new`](#placement-new)
--            * [NOTE](#note)
--            * [ä½¿ç”¨](#ä½¿ç”¨)
--        * [`new`çš„åˆå§‹åŒ–](#newçš„åˆå§‹åŒ–)
--            * [`trivial && non-trivial`](#trivial--non-trivial)
--            * [`new`çš„ä½¿ç”¨](#newçš„ä½¿ç”¨)
--                * [åˆ†ç¦»åˆ†é…ä¸æ„é€ ](#åˆ†ç¦»åˆ†é…ä¸æ„é€ )
--    * [`malloc`çš„å®ç°](#mallocçš„å®ç°)
--        * [å†…å­˜åŒºåŸŸ](#å†…å­˜åŒºåŸŸ)
--            * [`bins`](#bins)
--            * [`fast_bin`](#fast_bin)
--            * [`unsorted_bin`](#unsorted_bin)
--            * [`top chunk`](#top-chunk)
--        * [åˆ†é…è¿‡ç¨‹](#åˆ†é…è¿‡ç¨‹)
--        * [é‡Šæ”¾è¿‡ç¨‹](#é‡Šæ”¾è¿‡ç¨‹)
--    * [`new` ä¸ `malloc` çš„åŒºåˆ«](#new-ä¸-malloc-çš„åŒºåˆ«)
--* [å¤šæ€](#å¤šæ€)
--    * [åŠ¨æ€å¤šæ€](#åŠ¨æ€å¤šæ€)
--        * [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³)
--        * [å®æ–½æ¡ä»¶](#å®æ–½æ¡ä»¶)
--        * [å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰](#å®æ–½æœºåˆ¶è™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨)
--            * [å†…å­˜æ¨¡å‹](#å†…å­˜æ¨¡å‹)
--                * [è™šè¡¨](#è™šè¡¨)
--            * [ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨](#ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨)
--            * [è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°](#è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°)
--                * [è™šå‡½æ•°](#è™šå‡½æ•°)
--                * [çº¯è™šå‡½æ•°](#çº¯è™šå‡½æ•°)
--        * [æ€»ç»“](#æ€»ç»“)
--            * [æ€§èƒ½](#æ€§èƒ½)
--    * [é™æ€å¤šæ€](#é™æ€å¤šæ€)
--        * [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³-1)
--* [æ™ºèƒ½æŒ‡é’ˆ](#æ™ºèƒ½æŒ‡é’ˆ)
--    * [`auto_ptr`(å·²å¼ƒç”¨)](#auto_ptrå·²å¼ƒç”¨)
--    * [`unique_ptr(boost::scoped_ptr)`](#unique_ptrboostscoped_ptr)
--    * [`shared_ptr`](#shared_ptr)
--        * [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
--            * [å¼•ç”¨è®¡æ•°](#å¼•ç”¨è®¡æ•°)
--        * [ç”¨æ³•](#ç”¨æ³•)
--            * [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
--        * [åˆ é™¤å™¨](#åˆ é™¤å™¨)
--        * [å¾ªç¯å¼•ç”¨](#å¾ªç¯å¼•ç”¨)
--            * [`weak_ptr`](#weak_ptr)
--        * [çº¿ç¨‹å®‰å…¨](#çº¿ç¨‹å®‰å…¨)
--    * [å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ](#å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ)
--* [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)
--    * [å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰](#å€¼ç±»åˆ«value-category)
--        * [ä¸¤ç§æ··åˆç±»åˆ«](#ä¸¤ç§æ··åˆç±»åˆ«)
--        * [ä¸‰ç§å…·ä½“ç±»åˆ«](#ä¸‰ç§å…·ä½“ç±»åˆ«)
--            * [`lvalue`ï¼ˆå·¦å€¼ï¼‰](#lvalueå·¦å€¼)
--            * [`prvalue`ï¼ˆçº¯å³å€¼ï¼‰](#prvalueçº¯å³å€¼)
--            * [`xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰](#xvaluec11å°†äº¡å€¼)
--    * [å€¼ç±»å‹ï¼ˆTypeï¼‰](#å€¼ç±»å‹type)
--        * [æŒ‡é’ˆ](#æŒ‡é’ˆ)
--        * [å¼•ç”¨](#å¼•ç”¨)
--            * [å·¦å€¼å¼•ç”¨](#å·¦å€¼å¼•ç”¨)
--            * [å³å€¼å¼•ç”¨](#å³å€¼å¼•ç”¨)
--                * [æ— åå³å€¼å¼•ç”¨](#æ— åå³å€¼å¼•ç”¨)
--                * [å…·åå³å€¼å¼•ç”¨](#å…·åå³å€¼å¼•ç”¨)
--                * [è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨](#è½¬å‘å‹ä¸‡èƒ½é€šç”¨å¼•ç”¨)
--                * [å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ](#å¼•ç”¨æŠ˜å å¼•ç”¨åå¡Œ)
--        * [å·¦å³å€¼é‡è½½ç­–ç•¥](#å·¦å³å€¼é‡è½½ç­–ç•¥)
--            * [ä¸€èˆ¬å‡½æ•°ç­–ç•¥](#ä¸€èˆ¬å‡½æ•°ç­–ç•¥)
--            * [ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘](#ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘)
--                * [ç§»åŠ¨è¯­ä¹‰`move`](#ç§»åŠ¨è¯­ä¹‰move)
--                    * [`move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#moveè¯­ä¹‰that-this)
--                    * [`copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#copyè¯­ä¹‰that-this)
--                * [å®Œç¾è½¬å‘`forward`](#å®Œç¾è½¬å‘forward)
--                    * [å«ä¹‰](#å«ä¹‰)
--                    * [å®ç°](#å®ç°)
--            * [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](#å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§)
--* [è¿”å›å€¼ä¼˜åŒ–](#è¿”å›å€¼ä¼˜åŒ–)
--    * [ç¼–è¯‘å™¨ä¼˜åŒ–](#ç¼–è¯‘å™¨ä¼˜åŒ–)
--        * [`RVO`è‡ªåŠ¨ä¼˜åŒ–](#rvoè‡ªåŠ¨ä¼˜åŒ–)
--        * [`NRVO`è‡ªåŠ¨ä¼˜åŒ–](#nrvoè‡ªåŠ¨ä¼˜åŒ–)
--    * [æ‰‹åŠ¨ä¼˜åŒ–](#æ‰‹åŠ¨ä¼˜åŒ–)
--* [String](#string)
--    * [ä¸‰ç§å®ç°æ–¹å¼](#ä¸‰ç§å®ç°æ–¹å¼)
--        * [Eager Copy](#eager-copy)
--        * [COW](#cow)
--        * [SSO](#sso)
--    * [æŸ¥æ‰¾ find](#æŸ¥æ‰¾-find)
--        * [ä¸€èˆ¬æŸ¥æ‰¾](#ä¸€èˆ¬æŸ¥æ‰¾)
--        * [é›†åˆæŸ¥æ‰¾](#é›†åˆæŸ¥æ‰¾)
--    * [NOTE](#note-1)
--* [éšæœºæ•°](#éšæœºæ•°)
--    * [ä¼ªéšæœºæ•°](#ä¼ªéšæœºæ•°)
--    * [çœŸéšæœºæ•°](#çœŸéšæœºæ•°)
--            * [Linux å†…æ ¸ç†µæ± ](#linux-å†…æ ¸ç†µæ± )
--    * [Cé£æ ¼éšæœºæ•°](#cé£æ ¼éšæœºæ•°)
--    * [C++11 random](#c11-random)
--        * [éšæœºæ•°å¼•æ“](#éšæœºæ•°å¼•æ“)
--        * [éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»](#éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»)
--        * [ä¸€èˆ¬æ­¥éª¤](#ä¸€èˆ¬æ­¥éª¤)
--* [STLå®¹å™¨](#stlå®¹å™¨)
--    * [é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)](#é¡ºåºå®¹å™¨çº¿æ€§ç»“æ„)
--        * [vector](#vector)
--        * [deque](#deque)
--    * [æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)](#æœ‰åºå…³è”å¼å®¹å™¨çº¢é»‘æ ‘)
--        * [ä¼˜ç‚¹](#ä¼˜ç‚¹)
--            * [RB VS AVL](#rb-vs-avl)
--    * [æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)](#æ— åºå…³è”å¼å®¹å™¨å“ˆå¸Œè¡¨)
--        * [æ‰©å®¹](#æ‰©å®¹)
--    * [å®¹å™¨é€‚é…å™¨](#å®¹å™¨é€‚é…å™¨)
--    * [å…¶å®ƒ](#å…¶å®ƒ)
--    * [å †](#å †)
--    * [è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ)
--        * [è¿­ä»£å™¨æ”¯æŒæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒæƒ…å†µ)
--        * [è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ)
--* [STLç®—æ³•](#stlç®—æ³•)
--    * [æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼](#æŸ¥æ‰¾ç®—æ³•13ä¸ªåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼)
--    * [æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥](#æ’åºå’Œé€šç”¨ç®—æ³•14ä¸ªæä¾›å…ƒç´ æ’åºç­–ç•¥)
--        * [`std::sort()`](#stdsort)
--    * [åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)](#åˆ é™¤å’Œæ›¿æ¢ç®—æ³•15ä¸ª)
--    * [æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ](#æ’åˆ—ç»„åˆç®—æ³•2ä¸ªæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ)
--    * [ç®—æœ¯ç®—æ³•(4ä¸ª)](#ç®—æœ¯ç®—æ³•4ä¸ª)
--    * [ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)](#ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•6ä¸ª)
--    * [å…³ç³»ç®—æ³•(8ä¸ª)](#å…³ç³»ç®—æ³•8ä¸ª)
--    * [é›†åˆç®—æ³•(4ä¸ª)](#é›†åˆç®—æ³•4ä¸ª)
--    * [å †ç®—æ³•(4ä¸ª)](#å †ç®—æ³•4ä¸ª)
--* [STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨](#stlä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨)
--    * [ä»¿å‡½æ•°](#ä»¿å‡½æ•°)
--    * [å‡½æ•°é€‚é…å™¨](#å‡½æ•°é€‚é…å™¨)
--* [STLç©ºé—´é…ç½®å™¨](#stlç©ºé—´é…ç½®å™¨)
--    * [é»˜è®¤é…ç½®å™¨](#é»˜è®¤é…ç½®å™¨)
--        * [ç±»å‹è¦æ±‚](#ç±»å‹è¦æ±‚)
--        * [ç»„æˆç»“æ„](#ç»„æˆç»“æ„)
--            * [ä¸€çº§ç©ºé—´é…ç½®å™¨](#ä¸€çº§ç©ºé—´é…ç½®å™¨)
--            * [äºŒçº§ç©ºé—´é…ç½®å™¨](#äºŒçº§ç©ºé—´é…ç½®å™¨)
--                * [åˆ†é…ç­–ç•¥](#åˆ†é…ç­–ç•¥)
--        * [ç¼ºç‚¹](#ç¼ºç‚¹)
--    * [è‡ªå®šä¹‰é…ç½®å™¨](#è‡ªå®šä¹‰é…ç½®å™¨)
--* [STLè¿­ä»£å™¨](#stlè¿­ä»£å™¨)
--    * [ç±»åˆ«](#ç±»åˆ«)
--        * [åŸºæœ¬è¿­ä»£å™¨ç±»å‹](#åŸºæœ¬è¿­ä»£å™¨ç±»å‹)
--        * [è¿­ä»£å™¨é€‚é…å™¨](#è¿­ä»£å™¨é€‚é…å™¨)
--            * [æ’å…¥é€‚é…å™¨](#æ’å…¥é€‚é…å™¨)
--            * [é€†å‘è¿­ä»£å™¨é€‚é…å™¨](#é€†å‘è¿­ä»£å™¨é€‚é…å™¨)
--            * [ç§»åŠ¨è¿­ä»£å™¨](#ç§»åŠ¨è¿­ä»£å™¨)
--    * [è¿­ä»£å™¨æ¨¡æ¿](#è¿­ä»£å™¨æ¨¡æ¿)
--        * [è¿­ä»£å™¨ç±»å‹èƒå–](#è¿­ä»£å™¨ç±»å‹èƒå–)
--    * [è¿­ä»£å™¨çš„ç§»åŠ¨](#è¿­ä»£å™¨çš„ç§»åŠ¨)
--    * [è¿­ä»£å™¨å¤±æ•ˆ](#è¿­ä»£å™¨å¤±æ•ˆ)
--    * [æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨](#æŒ‡é’ˆå¼•ç”¨å’Œè¿­ä»£å™¨)
--        * [æŒ‡é’ˆ](#æŒ‡é’ˆ-1)
--            * [constä¸æŒ‡é’ˆ](#constä¸æŒ‡é’ˆ)
--            * [æŒ‡é’ˆä¸æ•°ç»„](#æŒ‡é’ˆä¸æ•°ç»„)
--        * [å¼•ç”¨](#å¼•ç”¨-1)
--        * [è¿­ä»£å™¨](#è¿­ä»£å™¨)
--* [STLæ­£åˆ™è¡¨è¾¾å¼](#stlæ­£åˆ™è¡¨è¾¾å¼)
--    * [æ„æˆ](#æ„æˆ)
--        * [æ­£åˆ™è¡¨è¾¾å¼regex](#æ­£åˆ™è¡¨è¾¾å¼regex)
--        * [æœç´¢åŒ¹é…ç®—æ³•](#æœç´¢åŒ¹é…ç®—æ³•)
--        * [ç»“æœåŒ¹é…é›†](#ç»“æœåŒ¹é…é›†)
--    * [å®ä¾‹](#å®ä¾‹)
--* [CPP IOå¤„ç†](#cpp-ioå¤„ç†)
--    * [åŸºæœ¬æµå¯¹è±¡](#åŸºæœ¬æµå¯¹è±¡)
--        * [æ–‡ä»¶æµ](#æ–‡ä»¶æµ)
--            * [æµæŒ‡é’ˆ](#æµæŒ‡é’ˆ)
--            * [è¡Œç»“æŸæ ‡å¿—](#è¡Œç»“æŸæ ‡å¿—)
--    * [ç¼“å†²](#ç¼“å†²)
--        * [ç¼“å†²åŒº](#ç¼“å†²åŒº)
--        * [åº”ç”¨](#åº”ç”¨)
--            * [IOåŠ é€Ÿ](#ioåŠ é€Ÿ)
--            * [æµåŒæ­¥](#æµåŒæ­¥)
--            * [æµå…³è”](#æµå…³è”)
--        * [å½±å“](#å½±å“)
--            * [\nä¸ç¼“å†²åˆ·æ–°](#nä¸ç¼“å†²åˆ·æ–°)
--            * [è¯¡å¼‚çš„std::cin](#è¯¡å¼‚çš„stdcin)
--    * [æµç›¸å…³è¿­ä»£å™¨](#æµç›¸å…³è¿­ä»£å™¨)
--        * [è¾“å…¥æµè¿­ä»£å™¨istream_iterator](#è¾“å…¥æµè¿­ä»£å™¨istream_iterator)
--        * [è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator](#è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator)
--        * [è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator](#è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator)
--        * [è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator](#è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator)
--* [ç±»å‹æ¨å¯¼](#ç±»å‹æ¨å¯¼)
--    * [`auto`](#auto)
--        * [ç”¨æ³•](#ç”¨æ³•-1)
--        * [é™åˆ¶](#é™åˆ¶)
--    * [`decltype`](#decltype)
--        * [`decltype(exp)`æ¨å¯¼è§„åˆ™](#decltypeexpæ¨å¯¼è§„åˆ™)
--    * [autoä¸decltypeçš„ä¸åŒ](#autoä¸decltypeçš„ä¸åŒ)
--        * [å¯¹cvé™å®šç¬¦çš„å¤„ç†](#å¯¹cvé™å®šç¬¦çš„å¤„ç†)
--        * [å¯¹å¼•ç”¨çš„å¤„ç†](#å¯¹å¼•ç”¨çš„å¤„ç†)
--        * [æ€»ç»“](#æ€»ç»“-1)
--    * [traits(ç±»å‹èƒå–)](#traitsç±»å‹èƒå–)
--        * [è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–](#è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–)
--        * [åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°](#åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°)
--    * [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™)
--    * [`std::common_type`](#stdcommon_type)
--* [å¯è°ƒç”¨å¯¹è±¡](#å¯è°ƒç”¨å¯¹è±¡)
--    * [lambdaè¡¨è¾¾å¼/é—­åŒ…](#lambdaè¡¨è¾¾å¼é—­åŒ…)
--        * [é—­åŒ…](#é—­åŒ…)
--        * [å¤§è‡´åŸç†](#å¤§è‡´åŸç†)
--        * [å½¢å¼è¯´æ˜](#å½¢å¼è¯´æ˜)
--            * [æ•è·å˜é‡åˆ—è¡¨`capture`](#æ•è·å˜é‡åˆ—è¡¨capture)
--                * [å…¶ä»–è¯´æ˜](#å…¶ä»–è¯´æ˜)
--            * [`parameters`](#parameters)
--            * [`multable`](#multable)
--            * [`noexcept/throw()`](#noexceptthrow)
--            * [`attribute`](#attribute)
--            * [`return_type`](#return_type)
--        * [å…¶å®ƒ](#å…¶å®ƒ-1)
--            * [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#cpp14-lambdaè¡¨è¾¾å¼å¢å¼º)
--    * [ä»¿å‡½æ•°](#ä»¿å‡½æ•°-1)
--    * [`std::function`ä¸`std::bind`](#stdfunctionä¸stdbind)
--        * [`std::function`](#stdfunction)
--        * [`std::bind`](#stdbind)
--            * [å‚æ•°ç»‘å®š](#å‚æ•°ç»‘å®š)
--* [æ¨¡æ¿](#æ¨¡æ¿)
--    * [æ¨¡æ¿å‡½æ•°](#æ¨¡æ¿å‡½æ•°)
--        * [æ¨¡æ¿å‚æ•°](#æ¨¡æ¿å‚æ•°)
--            * [é»˜è®¤æ¨¡æ¿å‚æ•°](#é»˜è®¤æ¨¡æ¿å‚æ•°)
--            * [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°)
--            * [æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
--                * [è°ƒç”¨å‚æ•°](#è°ƒç”¨å‚æ•°)
--                * [è¿”å›å‚æ•°](#è¿”å›å‚æ•°)
--                    * [å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹](#å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹)
--            * [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
--                * [æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³`T`ï¼‰](#æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹å³t)
--                    * [æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰](#æ¨¡æ¿å®å‚éæŒ‡é’ˆè¡°å‡)
--                    * [æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ](#æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ)
--                * [æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³`T&ã€T&&`æˆ–`T*`ï¼‰](#æ¨¡æ¿å½¢å‚éå€¼ç±»å‹å³ttæˆ–t)
--        * [æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™](#æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™)
--        * [æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–)
--            * [æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–)
--            * [éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–](#éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–)
--    * [æ¨¡æ¿ç±»](#æ¨¡æ¿ç±»)
--        * [å®šä¹‰](#å®šä¹‰)
--        * [å®ä¾‹åŒ–](#å®ä¾‹åŒ–)
--        * [ç‰¹åŒ–](#ç‰¹åŒ–)
--        * [æ¨¡æ¿ç±»ä¸å‹å…ƒ](#æ¨¡æ¿ç±»ä¸å‹å…ƒ)
--    * [éç±»å‹æ¨¡æ¿å‚æ•°](#éç±»å‹æ¨¡æ¿å‚æ•°)
--    * [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™)
--    * [å¹²é¢„æ¨¡æ¿ç¼–è¯‘](#å¹²é¢„æ¨¡æ¿ç¼–è¯‘)
--        * [æ¨¡æ¿ç±»`enable_if<>/ enable_if_t<>`](#æ¨¡æ¿ç±»enable_if-enable_if_t)
--        * [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](#æ§åˆ¶æ¨¡æ¿ç¼–è¯‘)
--    * [ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜](#ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜)
--        * [ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶](#ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶)
--        * [é—®é¢˜ä¸æ–¹æ³•](#é—®é¢˜ä¸æ–¹æ³•)
--    * [`typename`ä¸`class`](#typenameä¸class)
--* [ç±»ç›¸å…³](#ç±»ç›¸å…³)
--    * [æƒé™æ§åˆ¶](#æƒé™æ§åˆ¶)
--        * [å¤–éƒ¨è®¿é—®æ§åˆ¶](#å¤–éƒ¨è®¿é—®æ§åˆ¶)
--        * [ç‰¹æ®Šæƒé™æ§åˆ¶](#ç‰¹æ®Šæƒé™æ§åˆ¶)
--            * [æ„é€ å‡½æ•°privateåŒ–](#æ„é€ å‡½æ•°privateåŒ–)
--                * [å½±å“](#å½±å“-1)
--            * [æ„é€ å‡½æ•°protectåŒ–](#æ„é€ å‡½æ•°protectåŒ–)
--                * [å½±å“](#å½±å“-2)
--            * [ææ„å‡½æ•°privateåŒ–](#ææ„å‡½æ•°privateåŒ–)
--                * [å½±å“](#å½±å“-3)
--    * [åˆå§‹åŒ–æ–¹æ³•](#åˆå§‹åŒ–æ–¹æ³•)
--        * [åˆå§‹åŒ–åˆ—è¡¨](#åˆå§‹åŒ–åˆ—è¡¨)
--        * [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)
--        * [åˆ—è¡¨åˆå§‹åŒ–list_initialization](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)
--            * [èšåˆä½“](#èšåˆä½“)
--            * [std::initializer_list](#stdinitializer_list)
--        * [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)
--            * [NOTE](#note-2)
--                * [ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°](#ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°)
--            * [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†)
--    * [å‡½æ•°](#å‡½æ•°)
--        * [The Big Three](#the-big-three)
--        * [ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)](#ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°42)
--            * [ç”Ÿæˆå†…å®¹](#ç”Ÿæˆå†…å®¹)
--            * [ç”Ÿæˆè§„åˆ™](#ç”Ÿæˆè§„åˆ™)
--            * [å‡½æ•°ç”Ÿæˆç®¡ç†](#å‡½æ•°ç”Ÿæˆç®¡ç†)
--                * [ä½¿ç”¨ç¼ºçœå‡½æ•°=default](#ä½¿ç”¨ç¼ºçœå‡½æ•°default)
--                * [ç¦æ­¢å‡½æ•°=delete](#ç¦æ­¢å‡½æ•°delete)
--                * [ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit](#ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit)
--        * [æ„é€ å‡½æ•°](#æ„é€ å‡½æ•°)
--        * [è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½](#è‡ªå¢å‡è¿ç®—ç¬¦é‡è½½)
--        * [`inline`å‡½æ•°](#inlineå‡½æ•°)
--    * [`friend`æˆå‘˜](#friendæˆå‘˜)
--    * [ç»§æ‰¿](#ç»§æ‰¿)
--        * [è™šå‡½æ•°](#è™šå‡½æ•°-1)
--        * [é™åˆ¶ç»§æ‰¿`final`](#é™åˆ¶ç»§æ‰¿final)
--        * [ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶](#ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶)
--        * [ç»§æ‰¿çš„å†…å®¹](#ç»§æ‰¿çš„å†…å®¹)
--                * [ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½](#ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½)
--                * [ç»§æ‰¿æ„é€ å‡½æ•°](#ç»§æ‰¿æ„é€ å‡½æ•°)
--        * [è™šç»§æ‰¿](#è™šç»§æ‰¿)
--            * [å®ç°åŸç†](#å®ç°åŸç†)
--                * [è™šåŸºç±»è¡¨](#è™šåŸºç±»è¡¨)
--            * [NOTE](#note-3)
--* [å‡½æ•°ä¸è¿ç®—ç¬¦](#å‡½æ•°ä¸è¿ç®—ç¬¦)
--    * [`sizeof`](#sizeof)
--* [ç±»å‹æ£€æŸ¥ä¸è½¬æ¢](#ç±»å‹æ£€æŸ¥ä¸è½¬æ¢)
--    * [ç±»å‹å¯¹æ¯”](#ç±»å‹å¯¹æ¯”)
--        * [`std::is_same<>`](#stdis_same)
--            * [`std::decay`ç±»å‹é€€åŒ–](#stddecayç±»å‹é€€åŒ–)
--    * [`std::common_type`](#stdcommon_type-1)
--    * [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
--        * [ä¼ ç»Ÿç±»å‹è½¬æ¢](#ä¼ ç»Ÿç±»å‹è½¬æ¢)
--            * [éšå¼ç±»å‹è½¬æ¢](#éšå¼ç±»å‹è½¬æ¢)
--            * [æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢](#æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢)
--        * [æ ‡å‡†ç±»å‹è½¬æ¢](#æ ‡å‡†ç±»å‹è½¬æ¢)
--            * [`static_cast<type-id>(expression)`](#static_casttype-idexpression)
--            * [`const_cast<type-id>(expression)`](#const_casttype-idexpression)
--            * [`reinterpret_cast<type-id>(expression)`](#reinterpret_casttype-idexpression)
--            * [`dynamic_cast<type-id>(expression)`](#dynamic_casttype-idexpression)
--        * [å»ºè®®](#å»ºè®®)
--* [å…³é”®å­—è¡¥å……è¯´æ˜](#å…³é”®å­—è¡¥å……è¯´æ˜)
--    * [cvé™å®šç¬¦](#cvé™å®šç¬¦)
--        * [`const`](#const)
--            * [`mutable`](#mutable)
--            * [`const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨](#constä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨)
--            * [`const`ä¿®é¥°å‡½æ•°](#constä¿®é¥°å‡½æ•°)
--            * [`const`ä¸`static`](#constä¸static)
--    * [`CPP14: constexpr `](#cpp14-constexpr-)
--        * [å¸¸é‡ä¸åªè¯»](#å¸¸é‡ä¸åªè¯»)
--        * [`constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼](#constexprä¿®é¥°å‡½æ•°è¡¨è¾¾å¼)
--        * [`constexpr`ä¿®é¥°å˜é‡](#constexprä¿®é¥°å˜é‡)
--        * [`constexpr`ä¿®é¥°æŒ‡é’ˆ](#constexprä¿®é¥°æŒ‡é’ˆ)
--    * [`volatile`](#volatile)
--        * [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
--* [é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)](#é‡è½½è¦†ç›–å’Œæ”¹å†™éšè—)
--    * [é‡è½½**overload**](#é‡è½½overload)
--        * [é‡è½½å†³è®®](#é‡è½½å†³è®®)
--            * [åå­—æŸ¥æ‰¾](#åå­—æŸ¥æ‰¾)
--            * [é‡è½½å†³è®®](#é‡è½½å†³è®®-1)
--                * [å‚æ•°ç±»å‹åŒ¹é…](#å‚æ•°ç±»å‹åŒ¹é…)
--                * [å‡½æ•°åŒ¹é…é¡ºåº](#å‡½æ•°åŒ¹é…é¡ºåº)
--            * [å¯è®¿é—®æ€§æ£€æŸ¥](#å¯è®¿é—®æ€§æ£€æŸ¥)
--    * [è¦†ç›–**override**](#è¦†ç›–override)
--    * [æ”¹å†™**overwrite**/éšè—](#æ”¹å†™overwriteéšè—)
--    * [æ€»ç»“](#æ€»ç»“-2)
--* [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†-1)
--    * [catchå—](#catchå—)
--        * [catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢](#catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢)
--    * [throw](#throw)
--    * [å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨](#å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨)
--    * [å¼‚å¸¸ç§ç±»](#å¼‚å¸¸ç§ç±»)
--        * [æ ‡å‡†å¼‚å¸¸](#æ ‡å‡†å¼‚å¸¸)
--        * [è‡ªå®šä¹‰å¼‚å¸¸](#è‡ªå®šä¹‰å¼‚å¸¸)
--* [çº¿ç¨‹ä¸åŸå­æ“ä½œ](#çº¿ç¨‹ä¸åŸå­æ“ä½œ)
--* [C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§](#cå…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§)
--    * [C++ 11](#c-11)
--        * [`tuple`å®¹å™¨(CPP11)](#tupleå®¹å™¨cpp11)
--        * [`decltype`åç½®è¿”å›ç±»å‹](#decltypeåç½®è¿”å›ç±»å‹)
--        * [æ–°åˆå§‹åŒ–æœºåˆ¶](#æ–°åˆå§‹åŒ–æœºåˆ¶)
--            * [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–-1)
--            * [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–)
--            * [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°-1)
--        * [å¤–éƒ¨æ¨¡æ¿(CPP11)](#å¤–éƒ¨æ¨¡æ¿cpp11)
--        * [ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·](#ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·)
--        * [ç±»å‹åˆ«å](#ç±»å‹åˆ«å)
--        * [`nullptr`](#nullptr)
--        * [å¯å˜å‚æ•°](#å¯å˜å‚æ•°)
--            * [å¯å˜å‡½æ•°å‚æ•°](#å¯å˜å‡½æ•°å‚æ•°)
--            * [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°-1)
--                * [å¯å˜å‚æ•°æ¨¡æ¿ç±»](#å¯å˜å‚æ•°æ¨¡æ¿ç±»)
--                    * [åç‰¹åŒ–å±•å¼€](#åç‰¹åŒ–å±•å¼€)
--                    * [ç»§æ‰¿å±•å¼€](#ç»§æ‰¿å±•å¼€)
--                * [å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°](#å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
--                    * [é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…](#é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…)
--                    * [é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…](#é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…)
--                * [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯-1)
--                    * [æ¶ˆé™¤ä»£ç å†—ä½™](#æ¶ˆé™¤ä»£ç å†—ä½™)
--                    * [å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰](#å®ç°cç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜delegate)
--            * [å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)](#å¯å˜æ™®é€šå‚æ•°å˜é•¿å‚æ•°)
--                * [`initializer_list`å®ç°](#initializer_listå®ç°)
--                * [`...`å®ç°](#å®ç°-1)
--            * [å¯å˜å‚æ•°åŸºç±»](#å¯å˜å‚æ•°åŸºç±»)
--        * [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](#sfinaeæ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯)
--        * [æ¨¡æ¿ç±»`enable_if`](#æ¨¡æ¿ç±»enable_if)
--            * [ç±»å‹åç‰¹åŒ–](#ç±»å‹åç‰¹åŒ–)
--            * [æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](#æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)
--            * [æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](#æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)
--        * [å¼ºåˆ¶å¼•ç”¨](#å¼ºåˆ¶å¼•ç”¨)
--        * [å­—é¢é‡](#å­—é¢é‡)
--            * [æ ‡å‡†å­—é¢é‡](#æ ‡å‡†å­—é¢é‡)
--                * [æ•´æ•°å­—é¢é‡](#æ•´æ•°å­—é¢é‡)
--                    * [å½¢å¼](#å½¢å¼)
--                    * [note](#note-4)
--            * [æµ®ç‚¹å­—é¢é‡](#æµ®ç‚¹å­—é¢é‡)
--            * [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡)
--            * [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡-1)
--            * [å¸ƒå°”å­—é¢é‡](#å¸ƒå°”å­—é¢é‡)
--            * [ç”¨æˆ·å®šä¹‰å­—é¢é‡](#ç”¨æˆ·å®šä¹‰å­—é¢é‡)
--                * [å‚æ•°ä¸åŒ¹é…](#å‚æ•°ä¸åŒ¹é…)
--                * [å®šä¹‰å­—é¢é‡](#å®šä¹‰å­—é¢é‡)
--    * [C++14](#c14)
--        * [autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼](#autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼)
--        * [lambdaè¡¨è¾¾å¼](#lambdaè¡¨è¾¾å¼)
--        * [`constexpr`](#constexpr)
--    * [C++17](#c17)
--        * [ç»“æ„åŒ–ç»‘å®š(CPP17)](#ç»“æ„åŒ–ç»‘å®šcpp17)
--            * [ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)](#ç»‘å®šæ–¹å¼æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)
--        * [æŠ˜å è¡¨è¾¾å¼](#æŠ˜å è¡¨è¾¾å¼)
--        * [æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼CTAD](#æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼ctad)
--            * [æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°](#æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°)
--            * [`auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°](#autoæ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°)
--        * [ç¼–è¯‘æœŸIF](#ç¼–è¯‘æœŸif)
--        * [æŠ˜å è¡¨è¾¾å¼è¡¥å……](#æŠ˜å è¡¨è¾¾å¼è¡¥å……)
--        * [å˜é•¿`using`å£°æ˜](#å˜é•¿usingå£°æ˜)
--    * [C++20](#c20)
--        * [Ranges](#ranges)
--        * [View](#view)
--        * [æ¨¡å—Modules](#æ¨¡å—modules)
--        * [åç¨‹(Coroutines)](#åç¨‹coroutines)
--* [æ–‡ä»¶ç³»ç»Ÿ](#æ–‡ä»¶ç³»ç»Ÿ)
--    * [åŸºæœ¬ç±»](#åŸºæœ¬ç±»)
--* [æ—¶é—´ä¸æ—¥æœŸ](#æ—¶é—´ä¸æ—¥æœŸ)
--    * [Cé£æ ¼](#cé£æ ¼)
--    * [`std::chrono`](#stdchrono)
--        * [`duration` æ—¶é•¿](#duration-æ—¶é•¿)
--            * [`std::ratio`](#stdratio)
--            * [`std::chrono::duration `](#stdchronoduration-)
--        * [`clock` æ—¶é’Ÿ](#clock-æ—¶é’Ÿ)
--        * [`time_point` æ—¶é—´ç‚¹](#time_point-æ—¶é—´ç‚¹)
--        * [`std::chrono_literals` (c++14)](#stdchrono_literals-c14)
--* [æ‚é¡¹](#æ‚é¡¹)
--    * [æƒ¯ç”¨æ³•](#æƒ¯ç”¨æ³•)
--        * [PIML(pointer to implementation)](#pimlpointer-to-implementation)
--    * [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](#ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ)
--        * [åå­—è§£æ](#åå­—è§£æ)
--    * [æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ](#æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ)
--* [å…¶ä»–æ¨è](#å…¶ä»–æ¨è)
++- [**ç›®å½•**](#ç›®å½•)
++- [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
++  - [æ ‡å‡†åº“æ”¯æŒ](#æ ‡å‡†åº“æ”¯æŒ)
++  - [new(new operator)çš„å®ç°](#newnew-operatorçš„å®ç°)
++    - [æ¦‚è¿°](#æ¦‚è¿°)
++    - [`operator new()`](#operator-new)
++      - [é‡è½½ `operator new/new[]`](#é‡è½½operator-newnew)
++        - [å†…å­˜å¯¹é½](#å†…å­˜å¯¹é½)
++    - [`placement new`](#placement-new)
++      - [NOTE](#note)
++      - [ä½¿ç”¨](#ä½¿ç”¨)
++    - [`new`çš„åˆå§‹åŒ–](#newçš„åˆå§‹åŒ–)
++      - [`trivial && non-trivial && POD`](#trivial--non-trivial--pod)
++        - [éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»](#éå¹³å‡¡non-trivialç±»)
++        - [å¹³å‡¡ï¼ˆ`trivial`ï¼‰ç±»](#å¹³å‡¡trivialç±»)
++        - [PODç±»](#podç±»)
++      - [`new`çš„ä½¿ç”¨](#newçš„ä½¿ç”¨)
++        - [åˆ†ç¦»åˆ†é…ä¸æ„é€ ](#åˆ†ç¦»åˆ†é…ä¸æ„é€ )
++  - [`malloc`çš„å®ç°](#mallocçš„å®ç°)
++    - [å†…å­˜åŒºåŸŸ](#å†…å­˜åŒºåŸŸ)
++      - [`bins`](#bins)
++      - [`fast_bin`](#fast_bin)
++      - [`unsorted_bin`](#unsorted_bin)
++      - [`top chunk`](#top-chunk)
++    - [åˆ†é…è¿‡ç¨‹](#åˆ†é…è¿‡ç¨‹)
++    - [é‡Šæ”¾è¿‡ç¨‹](#é‡Šæ”¾è¿‡ç¨‹)
++  - [`new` ä¸ `malloc` çš„åŒºåˆ«](#new-ä¸-malloc-çš„åŒºåˆ«)
++- [å¤šæ€](#å¤šæ€)
++  - [åŠ¨æ€å¤šæ€](#åŠ¨æ€å¤šæ€)
++    - [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³)
++    - [å®æ–½æ¡ä»¶](#å®æ–½æ¡ä»¶)
++    - [å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰](#å®æ–½æœºåˆ¶è™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨)
++      - [å†…å­˜æ¨¡å‹](#å†…å­˜æ¨¡å‹)
++        - [è™šè¡¨](#è™šè¡¨)
++      - [ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨](#ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨)
++      - [è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°](#è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°)
++        - [è™šå‡½æ•°](#è™šå‡½æ•°)
++        - [çº¯è™šå‡½æ•°](#çº¯è™šå‡½æ•°)
++    - [æ€»ç»“](#æ€»ç»“)
++      - [æ€§èƒ½](#æ€§èƒ½)
++  - [é™æ€å¤šæ€](#é™æ€å¤šæ€)
++    - [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³-1)
++- [æ™ºèƒ½æŒ‡é’ˆ](#æ™ºèƒ½æŒ‡é’ˆ)
++  - [`auto_ptr`(å·²å¼ƒç”¨)](#auto_ptrå·²å¼ƒç”¨)
++  - [`unique_ptr(boost::scoped_ptr)`](#unique_ptrboostscoped_ptr)
++  - [`shared_ptr`](#shared_ptr)
++    - [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
++      - [å¼•ç”¨è®¡æ•°](#å¼•ç”¨è®¡æ•°)
++    - [ç”¨æ³•](#ç”¨æ³•)
++      - [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
++    - [åˆ é™¤å™¨](#åˆ é™¤å™¨)
++    - [å¾ªç¯å¼•ç”¨](#å¾ªç¯å¼•ç”¨)
++      - [`weak_ptr`](#weak_ptr)
++    - [çº¿ç¨‹å®‰å…¨](#çº¿ç¨‹å®‰å…¨)
++  - [å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ](#å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ)
++- [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)
++  - [å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰](#å€¼ç±»åˆ«value-category)
++    - [ä¸¤ç§æ··åˆç±»åˆ«](#ä¸¤ç§æ··åˆç±»åˆ«)
++    - [ä¸‰ç§å…·ä½“ç±»åˆ«](#ä¸‰ç§å…·ä½“ç±»åˆ«)
++      - [`lvalue`ï¼ˆå·¦å€¼ï¼‰](#lvalueå·¦å€¼)
++      - [`prvalue`ï¼ˆçº¯å³å€¼ï¼‰](#prvalueçº¯å³å€¼)
++      - [`xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰](#xvaluec11å°†äº¡å€¼)
++  - [å€¼ç±»å‹ï¼ˆTypeï¼‰](#å€¼ç±»å‹type)
++    - [æŒ‡é’ˆ](#æŒ‡é’ˆ)
++    - [å¼•ç”¨](#å¼•ç”¨)
++      - [å·¦å€¼å¼•ç”¨](#å·¦å€¼å¼•ç”¨)
++      - [å³å€¼å¼•ç”¨](#å³å€¼å¼•ç”¨)
++        - [æ— åå³å€¼å¼•ç”¨](#æ— åå³å€¼å¼•ç”¨)
++- [**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚](#æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼æ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§å³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨çªƒå–)
++  - [å…·åå³å€¼å¼•ç”¨](#å…·åå³å€¼å¼•ç”¨)
++  - [è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨](#è½¬å‘å‹ä¸‡èƒ½é€šç”¨å¼•ç”¨)
++  - [å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ](#å¼•ç”¨æŠ˜å å¼•ç”¨åå¡Œ)
++  - [å·¦å³å€¼é‡è½½ç­–ç•¥](#å·¦å³å€¼é‡è½½ç­–ç•¥)
++    - [ä¸€èˆ¬å‡½æ•°ç­–ç•¥](#ä¸€èˆ¬å‡½æ•°ç­–ç•¥)
++    - [ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘](#ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘)
++- [**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forwaed`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚](#å³å€¼å¼•ç”¨æ˜¯moveå’Œforwaedçš„åŸºç¡€å…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰å…¶å®moveå’Œforwaedéƒ½æ˜¯static_castçš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…moveæ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿forwardæ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿)
++  - [ç§»åŠ¨è¯­ä¹‰ `move`](#ç§»åŠ¨è¯­ä¹‰move)
++  - [`move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#moveè¯­ä¹‰that-this)
++  - [`copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#copyè¯­ä¹‰that-this)
++  - [å®Œç¾è½¬å‘ `forward`](#å®Œç¾è½¬å‘forward)
++  - [å«ä¹‰](#å«ä¹‰)
++  - [å®ç°](#å®ç°)
++  - [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](#å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§)
++- [è¿”å›å€¼ä¼˜åŒ–](#è¿”å›å€¼ä¼˜åŒ–)
++  - [ç¼–è¯‘å™¨ä¼˜åŒ–](#ç¼–è¯‘å™¨ä¼˜åŒ–)
++    - [`RVO`è‡ªåŠ¨ä¼˜åŒ–](#rvoè‡ªåŠ¨ä¼˜åŒ–)
++    - [`NRVO`è‡ªåŠ¨ä¼˜åŒ–](#nrvoè‡ªåŠ¨ä¼˜åŒ–)
++  - [æ‰‹åŠ¨ä¼˜åŒ–](#æ‰‹åŠ¨ä¼˜åŒ–)
++- [String](#string)
++  - [ä¸‰ç§å®ç°æ–¹å¼](#ä¸‰ç§å®ç°æ–¹å¼)
++- [&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD](#-head)
++  - [Eager Copy](#eager-copy)
++  - [COW](#cow)
++  - [SSO](#sso)
++  - [æŸ¥æ‰¾ find](#æŸ¥æ‰¾-find)
++    - [ä¸€èˆ¬æŸ¥æ‰¾](#ä¸€èˆ¬æŸ¥æ‰¾)
++    - [é›†åˆæŸ¥æ‰¾](#é›†åˆæŸ¥æ‰¾)
++  - [NOTE](#note-1)
++- [éšæœºæ•°](#éšæœºæ•°)
++  - [ä¼ªéšæœºæ•°](#ä¼ªéšæœºæ•°)
++  - [çœŸéšæœºæ•°](#çœŸéšæœºæ•°)
++    - [Linux å†…æ ¸ç†µæ± ](#linux-å†…æ ¸ç†µæ± )
++  - [Cé£æ ¼éšæœºæ•°](#cé£æ ¼éšæœºæ•°)
++  - [C++11 random](#c11-random)
++    - [éšæœºæ•°å¼•æ“](#éšæœºæ•°å¼•æ“)
++    - [éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»](#éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»)
++    - [ä¸€èˆ¬æ­¥éª¤](#ä¸€èˆ¬æ­¥éª¤)
++- [STLå®¹å™¨](#stlå®¹å™¨)
++  - [é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)](#é¡ºåºå®¹å™¨çº¿æ€§ç»“æ„)
++    - [vector](#vector)
++    - [deque](#deque)
++  - [æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)](#æœ‰åºå…³è”å¼å®¹å™¨çº¢é»‘æ ‘)
++    - [ä¼˜ç‚¹](#ä¼˜ç‚¹)
++      - [RB VS AVL](#rb-vs-avl)
++  - [æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)](#æ— åºå…³è”å¼å®¹å™¨å“ˆå¸Œè¡¨)
++    - [æ‰©å®¹](#æ‰©å®¹)
++  - [å®¹å™¨é€‚é…å™¨](#å®¹å™¨é€‚é…å™¨)
++  - [å…¶å®ƒ](#å…¶å®ƒ)
++  - [å †](#å †)
++  - [è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ)
++    - [è¿­ä»£å™¨æ”¯æŒæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒæƒ…å†µ)
++    - [è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ)
++- [STLç®—æ³•](#stlç®—æ³•)
++  - [æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼](#æŸ¥æ‰¾ç®—æ³•13ä¸ªåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼)
++  - [æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥](#æ’åºå’Œé€šç”¨ç®—æ³•14ä¸ªæä¾›å…ƒç´ æ’åºç­–ç•¥)
++    - [`std::sort()`](#stdsort)
++  - [åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)](#åˆ é™¤å’Œæ›¿æ¢ç®—æ³•15ä¸ª)
++  - [æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ](#æ’åˆ—ç»„åˆç®—æ³•2ä¸ªæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ)
++  - [ç®—æœ¯ç®—æ³•(4ä¸ª)](#ç®—æœ¯ç®—æ³•4ä¸ª)
++  - [ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)](#ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•6ä¸ª)
++  - [å…³ç³»ç®—æ³•(8ä¸ª)](#å…³ç³»ç®—æ³•8ä¸ª)
++  - [é›†åˆç®—æ³•(4ä¸ª)](#é›†åˆç®—æ³•4ä¸ª)
++  - [å †ç®—æ³•(4ä¸ª)](#å †ç®—æ³•4ä¸ª)
++- [STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨](#stlä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨)
++  - [ä»¿å‡½æ•°](#ä»¿å‡½æ•°)
++  - [å‡½æ•°é€‚é…å™¨](#å‡½æ•°é€‚é…å™¨)
++- [STLç©ºé—´é…ç½®å™¨](#stlç©ºé—´é…ç½®å™¨)
++  - [é»˜è®¤é…ç½®å™¨](#é»˜è®¤é…ç½®å™¨)
++    - [ç±»å‹è¦æ±‚](#ç±»å‹è¦æ±‚)
++    - [ç»„æˆç»“æ„](#ç»„æˆç»“æ„)
++      - [ä¸€çº§ç©ºé—´é…ç½®å™¨](#ä¸€çº§ç©ºé—´é…ç½®å™¨)
++      - [äºŒçº§ç©ºé—´é…ç½®å™¨](#äºŒçº§ç©ºé—´é…ç½®å™¨)
++        - [åˆ†é…ç­–ç•¥](#åˆ†é…ç­–ç•¥)
++    - [ç¼ºç‚¹](#ç¼ºç‚¹)
++  - [è‡ªå®šä¹‰é…ç½®å™¨](#è‡ªå®šä¹‰é…ç½®å™¨)
++- [STLè¿­ä»£å™¨](#stlè¿­ä»£å™¨)
++  - [ç±»åˆ«](#ç±»åˆ«)
++    - [åŸºæœ¬è¿­ä»£å™¨ç±»å‹](#åŸºæœ¬è¿­ä»£å™¨ç±»å‹)
++    - [è¿­ä»£å™¨é€‚é…å™¨](#è¿­ä»£å™¨é€‚é…å™¨)
++      - [æ’å…¥é€‚é…å™¨](#æ’å…¥é€‚é…å™¨)
++      - [é€†å‘è¿­ä»£å™¨é€‚é…å™¨](#é€†å‘è¿­ä»£å™¨é€‚é…å™¨)
++      - [ç§»åŠ¨è¿­ä»£å™¨](#ç§»åŠ¨è¿­ä»£å™¨)
++  - [è¿­ä»£å™¨æ¨¡æ¿](#è¿­ä»£å™¨æ¨¡æ¿)
++    - [è¿­ä»£å™¨ç±»å‹èƒå–](#è¿­ä»£å™¨ç±»å‹èƒå–)
++  - [è¿­ä»£å™¨çš„ç§»åŠ¨](#è¿­ä»£å™¨çš„ç§»åŠ¨)
++  - [è¿­ä»£å™¨å¤±æ•ˆ](#è¿­ä»£å™¨å¤±æ•ˆ)
++  - [æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨](#æŒ‡é’ˆå¼•ç”¨å’Œè¿­ä»£å™¨)
++    - [æŒ‡é’ˆ](#æŒ‡é’ˆ-1)
++      - [constä¸æŒ‡é’ˆ](#constä¸æŒ‡é’ˆ)
++      - [æŒ‡é’ˆä¸æ•°ç»„](#æŒ‡é’ˆä¸æ•°ç»„)
++      - [ç±»æˆå‘˜æŒ‡é’ˆ](#ç±»æˆå‘˜æŒ‡é’ˆ)
++    - [å¼•ç”¨](#å¼•ç”¨-1)
++    - [è¿­ä»£å™¨](#è¿­ä»£å™¨)
++- [STLæ­£åˆ™è¡¨è¾¾å¼](#stlæ­£åˆ™è¡¨è¾¾å¼)
++  - [æ„æˆ](#æ„æˆ)
++    - [æ­£åˆ™è¡¨è¾¾å¼regex](#æ­£åˆ™è¡¨è¾¾å¼regex)
++    - [æœç´¢åŒ¹é…ç®—æ³•](#æœç´¢åŒ¹é…ç®—æ³•)
++    - [ç»“æœåŒ¹é…é›†](#ç»“æœåŒ¹é…é›†)
++  - [å®ä¾‹](#å®ä¾‹)
++- [CPP IOå¤„ç†](#cpp-ioå¤„ç†)
++  - [åŸºæœ¬æµå¯¹è±¡](#åŸºæœ¬æµå¯¹è±¡)
++    - [æ–‡ä»¶æµ](#æ–‡ä»¶æµ)
++      - [æµæŒ‡é’ˆ](#æµæŒ‡é’ˆ)
++      - [è¡Œç»“æŸæ ‡å¿—](#è¡Œç»“æŸæ ‡å¿—)
++  - [ç¼“å†²](#ç¼“å†²)
++    - [ç¼“å†²åŒº](#ç¼“å†²åŒº)
++    - [åº”ç”¨](#åº”ç”¨)
++      - [IOåŠ é€Ÿ](#ioåŠ é€Ÿ)
++      - [æµåŒæ­¥](#æµåŒæ­¥)
++      - [æµå…³è”](#æµå…³è”)
++    - [å½±å“](#å½±å“)
++      - [\nä¸ç¼“å†²åˆ·æ–°](#nä¸ç¼“å†²åˆ·æ–°)
++      - [è¯¡å¼‚çš„std::cin](#è¯¡å¼‚çš„stdcin)
++  - [æµç›¸å…³è¿­ä»£å™¨](#æµç›¸å…³è¿­ä»£å™¨)
++    - [è¾“å…¥æµè¿­ä»£å™¨istream_iterator](#è¾“å…¥æµè¿­ä»£å™¨istream_iterator)
++    - [è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator](#è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator)
++    - [è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator](#è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator)
++    - [è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator](#è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator)
++- [ç±»å‹æ¨å¯¼](#ç±»å‹æ¨å¯¼)
++  - [`auto`](#auto)
++    - [ç”¨æ³•](#ç”¨æ³•-1)
++    - [é™åˆ¶](#é™åˆ¶)
++  - [`decltype`](#decltype)
++    - [`decltype(exp)`æ¨å¯¼è§„åˆ™](#decltypeexpæ¨å¯¼è§„åˆ™)
++  - [autoä¸decltypeçš„ä¸åŒ](#autoä¸decltypeçš„ä¸åŒ)
++    - [å¯¹cvé™å®šç¬¦çš„å¤„ç†](#å¯¹cvé™å®šç¬¦çš„å¤„ç†)
++    - [å¯¹å¼•ç”¨çš„å¤„ç†](#å¯¹å¼•ç”¨çš„å¤„ç†)
++    - [æ€»ç»“](#æ€»ç»“-1)
++  - [traits(ç±»å‹èƒå–)](#traitsç±»å‹èƒå–)
++    - [è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–](#è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–)
++    - [åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°](#åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°)
++  - [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™-æ¨¡æ¿å‚æ•°ç±»å‹æ¨å¯¼)
++  - [`std::common_type`](#stdcommon_type-stdcommon_type)
++- [å¯è°ƒç”¨å¯¹è±¡](#å¯è°ƒç”¨å¯¹è±¡)
++  - [lambdaè¡¨è¾¾å¼/é—­åŒ…](#lambdaè¡¨è¾¾å¼é—­åŒ…)
++    - [é—­åŒ…](#é—­åŒ…)
++    - [å¤§è‡´åŸç†](#å¤§è‡´åŸç†)
++    - [å½¢å¼è¯´æ˜](#å½¢å¼è¯´æ˜)
++      - [æ•è·å˜é‡åˆ—è¡¨ `capture`](#æ•è·å˜é‡åˆ—è¡¨capture)
++        - [å…¶ä»–è¯´æ˜](#å…¶ä»–è¯´æ˜)
++      - [`parameters`](#parameters)
++      - [`multable`](#multable)
++      - [`noexcept/throw()`](#noexceptthrow)
++      - [`attribute`](#attribute)
++      - [`return_type`](#return_type)
++    - [å…¶å®ƒ](#å…¶å®ƒ-1)
++      - [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#cpp14-lambdaè¡¨è¾¾å¼å¢å¼º)
++  - [ä»¿å‡½æ•°](#ä»¿å‡½æ•°-1)
++  - [`std::function`ä¸ `std::bind`](#stdfunctionä¸stdbind)
++    - [`std::function`](#stdfunction)
++    - [`std::bind`](#stdbind)
++      - [å‚æ•°ç»‘å®š](#å‚æ•°ç»‘å®š)
++- [æ¨¡æ¿](#æ¨¡æ¿)
++  - [æ¨¡æ¿å‡½æ•°](#æ¨¡æ¿å‡½æ•°)
++    - [æ¨¡æ¿å‚æ•°](#æ¨¡æ¿å‚æ•°)
++      - [é»˜è®¤æ¨¡æ¿å‚æ•°](#é»˜è®¤æ¨¡æ¿å‚æ•°)
++      - [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°-å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
++      - [æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
++        - [è°ƒç”¨å‚æ•°](#è°ƒç”¨å‚æ•°)
++        - [è¿”å›å‚æ•°](#è¿”å›å‚æ•°)
++          - [å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹](#å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹)
++      - [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
++        - [æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³ `T`ï¼‰](#æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹å³t)
++          - [æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰](#æ¨¡æ¿å®å‚éæŒ‡é’ˆè¡°å‡)
++          - [æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ](#æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ)
++        - [æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³ `T&ã€T&&`æˆ– `T*`ï¼‰](#æ¨¡æ¿å½¢å‚éå€¼ç±»å‹å³ttæˆ–t)
++    - [æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™](#æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™)
++    - [æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–)
++      - [æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–)
++      - [éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–](#éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–)
++  - [æ¨¡æ¿ç±»](#æ¨¡æ¿ç±»)
++    - [å®šä¹‰](#å®šä¹‰)
++    - [å®ä¾‹åŒ–](#å®ä¾‹åŒ–)
++    - [ç‰¹åŒ–](#ç‰¹åŒ–)
++    - [æ¨¡æ¿ç±»ä¸å‹å…ƒ](#æ¨¡æ¿ç±»ä¸å‹å…ƒ)
++  - [éç±»å‹æ¨¡æ¿å‚æ•°](#éç±»å‹æ¨¡æ¿å‚æ•°)
++  - [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™)
++  - [å¹²é¢„æ¨¡æ¿ç¼–è¯‘](#å¹²é¢„æ¨¡æ¿ç¼–è¯‘)
++    - [æ¨¡æ¿ç±» `enable_if<>/ enable_if_t<>`](#æ¨¡æ¿ç±»enable_if-enable_if_t)
++    - [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](#æ§åˆ¶æ¨¡æ¿ç¼–è¯‘-æ¨¡æ¿ç±»enable_if)
++  - [ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜](#ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜)
++    - [ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶](#ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶)
++    - [é—®é¢˜ä¸æ–¹æ³•](#é—®é¢˜ä¸æ–¹æ³•)
++      - [`export`ï¼ˆC++11å‰ï¼‰](#exportc11å‰)
++  - [`typename`ä¸ `class`](#typenameä¸class)
++- [ç±»ç›¸å…³](#ç±»ç›¸å…³)
++  - [æƒé™æ§åˆ¶](#æƒé™æ§åˆ¶)
++    - [å¤–éƒ¨è®¿é—®æ§åˆ¶](#å¤–éƒ¨è®¿é—®æ§åˆ¶)
++    - [ç‰¹æ®Šæƒé™æ§åˆ¶](#ç‰¹æ®Šæƒé™æ§åˆ¶)
++      - [æ„é€ å‡½æ•°privateåŒ–](#æ„é€ å‡½æ•°privateåŒ–)
++        - [å½±å“](#å½±å“-1)
++      - [æ„é€ å‡½æ•°protectåŒ–](#æ„é€ å‡½æ•°protectåŒ–)
++        - [å½±å“](#å½±å“-2)
++      - [ææ„å‡½æ•°privateåŒ–](#ææ„å‡½æ•°privateåŒ–)
++        - [å½±å“](#å½±å“-3)
++  - [åˆå§‹åŒ–æ–¹æ³•](#åˆå§‹åŒ–æ–¹æ³•)
++    - [åˆå§‹åŒ–åˆ—è¡¨](#åˆå§‹åŒ–åˆ—è¡¨)
++    - [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)
++    - [åˆ—è¡¨åˆå§‹åŒ–list_initialization](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)
++      - [èšåˆä½“](#èšåˆä½“)
++      - [std::initializer_list](#stdinitializer_list)
++    - [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)
++      - [NOTE](#note-2)
++        - [ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°](#ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°)
++      - [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†)
++  - [å‡½æ•°](#å‡½æ•°)
++    - [The Big Three](#the-big-three)
++    - [ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)](#ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°42)
++      - [ç”Ÿæˆå†…å®¹](#ç”Ÿæˆå†…å®¹)
++      - [ç”Ÿæˆè§„åˆ™](#ç”Ÿæˆè§„åˆ™)
++      - [å‡½æ•°ç”Ÿæˆç®¡ç†](#å‡½æ•°ç”Ÿæˆç®¡ç†)
++        - [ä½¿ç”¨ç¼ºçœå‡½æ•°=default](#ä½¿ç”¨ç¼ºçœå‡½æ•°default)
++        - [ç¦æ­¢å‡½æ•°=delete](#ç¦æ­¢å‡½æ•°delete)
++        - [ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit](#ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit)
++    - [æ„é€ å‡½æ•°](#æ„é€ å‡½æ•°)
++      - [é»˜è®¤æ„é€ å‡½æ•°](#é»˜è®¤æ„é€ å‡½æ•°)
++        - [å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆtrivial constructorï¼‰](#å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°trivial-constructor)
++        - [éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆnon-trivial constructorï¼‰](#éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°non-trivial-constructor)
++    - [è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½](#è‡ªå¢å‡è¿ç®—ç¬¦é‡è½½)
++    - [`inline`å‡½æ•°](#inlineå‡½æ•°)
++      - [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹-1)
++  - [`friend`æˆå‘˜](#friendæˆå‘˜)
++  - [ç»§æ‰¿](#ç»§æ‰¿)
++    - [è™šå‡½æ•°](#è™šå‡½æ•°-1)
++    - [é™åˆ¶ç»§æ‰¿ `final`](#é™åˆ¶ç»§æ‰¿final)
++    - [ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶](#ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶)
++    - [ç»§æ‰¿çš„å†…å®¹](#ç»§æ‰¿çš„å†…å®¹)
++      - [ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½](#ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½)
++      - [ç»§æ‰¿æ„é€ å‡½æ•°](#ç»§æ‰¿æ„é€ å‡½æ•°)
++    - [è™šç»§æ‰¿](#è™šç»§æ‰¿)
++      - [å®ç°åŸç†](#å®ç°åŸç†)
++        - [è™šåŸºç±»è¡¨](#è™šåŸºç±»è¡¨)
++      - [NOTE](#note-3)
++- [å‡½æ•°ä¸è¿ç®—ç¬¦](#å‡½æ•°ä¸è¿ç®—ç¬¦)
++  - [`sizeof`](#sizeof)
++- [ç±»å‹æ£€æŸ¥ä¸è½¬æ¢](#ç±»å‹æ£€æŸ¥ä¸è½¬æ¢)
++  - [ç±»å‹å¯¹æ¯”](#ç±»å‹å¯¹æ¯”)
++    - [`std::is_same<>`](#stdis_same)
++      - [`std::decay`ç±»å‹é€€åŒ–](#stddecayç±»å‹é€€åŒ–)
++  - [`std::common_type`](#stdcommon_type)
++  - [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
++    - [ä¼ ç»Ÿç±»å‹è½¬æ¢](#ä¼ ç»Ÿç±»å‹è½¬æ¢)
++      - [éšå¼ç±»å‹è½¬æ¢](#éšå¼ç±»å‹è½¬æ¢)
++      - [æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢](#æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢)
++    - [æ ‡å‡†ç±»å‹è½¬æ¢](#æ ‡å‡†ç±»å‹è½¬æ¢)
++      - [`static_cast<type-id>(expression)`](#static_casttype-idexpression)
++      - [`const_cast<type-id>(expression)`](#const_casttype-idexpression)
++      - [`reinterpret_cast<type-id>(expression)`](#reinterpret_casttype-idexpression)
++      - [`dynamic_cast<type-id>(expression)`](#dynamic_casttype-idexpression)
++    - [å»ºè®®](#å»ºè®®)
++- [å…³é”®å­—è¡¥å……è¯´æ˜](#å…³é”®å­—è¡¥å……è¯´æ˜)
++  - [cvé™å®šç¬¦](#cvé™å®šç¬¦)
++    - [`const`](#const)
++      - [`mutable`](#mutable)
++      - [`const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨](#constä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨)
++      - [`const`ä¿®é¥°å‡½æ•°](#constä¿®é¥°å‡½æ•°)
++      - [`const`ä¸ `static`](#constä¸static)
++  - [`CPP14: constexpr `](#cpp14-constexpr-)
++    - [å¸¸é‡ä¸åªè¯»](#å¸¸é‡ä¸åªè¯»)
++    - [`constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼](#constexprä¿®é¥°å‡½æ•°è¡¨è¾¾å¼)
++    - [`constexpr`ä¿®é¥°å˜é‡](#constexprä¿®é¥°å˜é‡)
++    - [`constexpr`ä¿®é¥°æŒ‡é’ˆ](#constexprä¿®é¥°æŒ‡é’ˆ)
++  - [`volatile`](#volatile)
++    - [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
++- [é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)](#é‡è½½è¦†ç›–å’Œæ”¹å†™éšè—)
++  - [é‡è½½**overload**](#é‡è½½overload)
++    - [é‡è½½å†³è®®](#é‡è½½å†³è®®)
++      - [åå­—æŸ¥æ‰¾](#åå­—æŸ¥æ‰¾)
++      - [é‡è½½å†³è®®](#é‡è½½å†³è®®-1)
++        - [å‚æ•°ç±»å‹åŒ¹é…](#å‚æ•°ç±»å‹åŒ¹é…)
++        - [å‡½æ•°åŒ¹é…é¡ºåº](#å‡½æ•°åŒ¹é…é¡ºåº)
++      - [å¯è®¿é—®æ€§æ£€æŸ¥](#å¯è®¿é—®æ€§æ£€æŸ¥)
++  - [è¦†ç›–**override**](#è¦†ç›–override)
++  - [æ”¹å†™**overwrite**/éšè—](#æ”¹å†™overwriteéšè—)
++  - [æ€»ç»“](#æ€»ç»“-2)
++- [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†-1)
++  - [catchå—](#catchå—)
++    - [catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢](#catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢)
++  - [throw](#throw)
++  - [å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨](#å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨)
++  - [å¼‚å¸¸ç§ç±»](#å¼‚å¸¸ç§ç±»)
++    - [æ ‡å‡†å¼‚å¸¸](#æ ‡å‡†å¼‚å¸¸)
++    - [è‡ªå®šä¹‰å¼‚å¸¸](#è‡ªå®šä¹‰å¼‚å¸¸)
++- [çº¿ç¨‹ä¸åŸå­æ“ä½œ](#çº¿ç¨‹ä¸åŸå­æ“ä½œ)
++- [C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§](#cå…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§)
++  - [C++ 11](#c-11)
++    - [`tuple`å®¹å™¨(CPP11)](#tupleå®¹å™¨cpp11)
++    - [`decltype`åç½®è¿”å›ç±»å‹](#decltypeåç½®è¿”å›ç±»å‹)
++    - [æ–°åˆå§‹åŒ–æœºåˆ¶](#æ–°åˆå§‹åŒ–æœºåˆ¶)
++      - [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–-1)
++      - [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–)
++      - [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°-1)
++    - [å¤–éƒ¨æ¨¡æ¿(CPP11)](#å¤–éƒ¨æ¨¡æ¿cpp11)
++    - [ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·](#ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·)
++    - [ç±»å‹åˆ«å](#ç±»å‹åˆ«å)
++    - [`nullptr`](#nullptr)
++    - [å¯å˜å‚æ•°](#å¯å˜å‚æ•°)
++      - [å¯å˜å‡½æ•°å‚æ•°](#å¯å˜å‡½æ•°å‚æ•°)
++      - [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°)
++        - [å¯å˜å‚æ•°æ¨¡æ¿ç±»](#å¯å˜å‚æ•°æ¨¡æ¿ç±»)
++          - [åç‰¹åŒ–å±•å¼€](#åç‰¹åŒ–å±•å¼€)
++          - [ç»§æ‰¿å±•å¼€](#ç»§æ‰¿å±•å¼€)
++        - [å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°](#å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
++          - [é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…](#é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…)
++          - [é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…](#é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…)
++        - [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯-1)
++          - [æ¶ˆé™¤ä»£ç å†—ä½™](#æ¶ˆé™¤ä»£ç å†—ä½™)
++          - [å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰](#å®ç°cç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜delegate)
++      - [å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)](#å¯å˜æ™®é€šå‚æ•°å˜é•¿å‚æ•°)
++        - [`initializer_list`å®ç°](#initializer_listå®ç°)
++        - [`...`å®ç°](#å®ç°-1)
++      - [å¯å˜å‚æ•°åŸºç±»](#å¯å˜å‚æ•°åŸºç±»)
++    - [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](#sfinaeæ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯)
++    - [æ¨¡æ¿ç±» `enable_if`](#æ¨¡æ¿ç±»enable_if)
++      - [ç±»å‹åç‰¹åŒ–](#ç±»å‹åç‰¹åŒ–)
++      - [æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](#æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)
++      - [æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](#æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)
++    - [å¼ºåˆ¶å¼•ç”¨](#å¼ºåˆ¶å¼•ç”¨)
++    - [å­—é¢é‡](#å­—é¢é‡)
++      - [æ ‡å‡†å­—é¢é‡](#æ ‡å‡†å­—é¢é‡)
++        - [æ•´æ•°å­—é¢é‡](#æ•´æ•°å­—é¢é‡)
++          - [å½¢å¼](#å½¢å¼)
++          - [note](#note-4)
++      - [æµ®ç‚¹å­—é¢é‡](#æµ®ç‚¹å­—é¢é‡)
++      - [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡)
++      - [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡-1)
++      - [å¸ƒå°”å­—é¢é‡](#å¸ƒå°”å­—é¢é‡)
++      - [ç”¨æˆ·å®šä¹‰å­—é¢é‡](#ç”¨æˆ·å®šä¹‰å­—é¢é‡)
++        - [å‚æ•°ä¸åŒ¹é…](#å‚æ•°ä¸åŒ¹é…)
++        - [å®šä¹‰å­—é¢é‡](#å®šä¹‰å­—é¢é‡)
++  - [C++14](#c14)
++    - [autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼](#autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼)
++    - [lambdaè¡¨è¾¾å¼](#lambdaè¡¨è¾¾å¼)
++    - [`constexpr`](#constexpr-cpp14-constexpr-)
++  - [C++17](#c17)
++    - [ç»“æ„åŒ–ç»‘å®š(CPP17)](#ç»“æ„åŒ–ç»‘å®šcpp17)
++      - [ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)](#ç»‘å®šæ–¹å¼æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)
++    - [æŠ˜å è¡¨è¾¾å¼](#æŠ˜å è¡¨è¾¾å¼)
++    - [æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼CTAD](#æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼ctad)
++      - [æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°](#æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°)
++      - [`auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°](#autoæ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°)
++    - [ç¼–è¯‘æœŸIF](#ç¼–è¯‘æœŸif)
++    - [æŠ˜å è¡¨è¾¾å¼è¡¥å……](#æŠ˜å è¡¨è¾¾å¼è¡¥å……)
++    - [å˜é•¿ `using`å£°æ˜](#å˜é•¿usingå£°æ˜)
++  - [C++20](#c20)
++    - [Ranges](#ranges)
++    - [View](#view)
++    - [æ¨¡å—Modules](#æ¨¡å—modules)
++    - [åç¨‹(Coroutines)](#åç¨‹coroutines)
++- [æ–‡ä»¶ç³»ç»Ÿ](#æ–‡ä»¶ç³»ç»Ÿ)
++  - [åŸºæœ¬ç±»](#åŸºæœ¬ç±»)
++- [æ—¶é—´ä¸æ—¥æœŸ](#æ—¶é—´ä¸æ—¥æœŸ)
++  - [Cé£æ ¼](#cé£æ ¼)
++  - [`std::chrono`](#stdchrono)
++    - [`duration` æ—¶é•¿](#duration-æ—¶é•¿)
++      - [`std::ratio`](#stdratio)
++      - [`std::chrono::duration `](#stdchronoduration-)
++    - [`clock` æ—¶é’Ÿ](#clock-æ—¶é’Ÿ)
++    - [`time_point` æ—¶é—´ç‚¹](#time_point-æ—¶é—´ç‚¹)
++    - [`std::chrono_literals` (c++14)](#stdchrono_literals-c14)
++- [æ‚é¡¹](#æ‚é¡¹)
++  - [æƒ¯ç”¨æ³•](#æƒ¯ç”¨æ³•)
++    - [PIML(pointer to implementation)](#pimlpointer-to-implementation)
++    - [è®¾è®¡è§„åˆ™](#è®¾è®¡è§„åˆ™)
++      - [åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰](#åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰)
++        - [å¤´æ–‡ä»¶](#å¤´æ–‡ä»¶)
++  - [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](#ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ)
++    - [åå­—è§£æ](#åå­—è§£æ)
++  - [æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ](#æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ)
++- [å…¶ä»–æ¨è](#å…¶ä»–æ¨è)
  
  <!-- vim-markdown-toc -->
  
@@@ -433,8 -433,8 +449,8 @@@
  
  ## æ ‡å‡†åº“æ”¯æŒ
  
--+ æ ‡å‡†åº“ä¸º`operator new/new[]å’Œoperator delete/delete[]`åˆ†åˆ«æä¾›äº†æŠ›å‡ºå’Œä¸æŠ›å‡ºå¼‚å¸¸çš„é‡è½½ç‰ˆæœ¬ã€‚ç”¨æˆ·å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸæˆ–ç±»ä½œç”¨åŸŸå®šä¹‰è‡ªå·±çš„é‡è½½å¹¶å®ç°ã€‚
--+ noteï¼š`new[]`ä¸`delete[]`éœ€è¦æˆå¯¹ä½¿ç”¨ï¼ŒåŸå› åœ¨äºè¿™ä¸€å¯¹å‡½æ•°æ˜¯ä¸ºå¯¹è±¡æ•°ç»„æœåŠ¡çš„ã€‚`new[]`ä¸ºäº†ä¿å­˜æ•°ç»„çš„å¤§å°ä¿¡æ¯ï¼Œåœ¨ç”³è¯·å†…å­˜æ—¶**å¤šç”³è¯·äº†ä¸€ä¸ªåœ°å€é•¿åº¦**æ”¾åœ¨é¦–éƒ¨æ¥å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼Œè€Œ`delete`ä¹Ÿéœ€è¦é•¿åº¦ä¿¡æ¯æ¥ç¡®å®šè°ƒç”¨ææ„å‡½æ•°çš„æ¬¡æ•°
+++ æ ‡å‡†åº“ä¸º `operator new/new[]å’Œoperator delete/delete[]`åˆ†åˆ«æä¾›äº†æŠ›å‡ºå’Œä¸æŠ›å‡ºå¼‚å¸¸çš„é‡è½½ç‰ˆæœ¬ã€‚ç”¨æˆ·å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸæˆ–ç±»ä½œç”¨åŸŸå®šä¹‰è‡ªå·±çš„é‡è½½å¹¶å®ç°ã€‚
+++ noteï¼š`new[]`ä¸ `delete[]`éœ€è¦æˆå¯¹ä½¿ç”¨ï¼ŒåŸå› åœ¨äºè¿™ä¸€å¯¹å‡½æ•°æ˜¯ä¸ºå¯¹è±¡æ•°ç»„æœåŠ¡çš„ã€‚`new[]`ä¸ºäº†ä¿å­˜æ•°ç»„çš„å¤§å°ä¿¡æ¯ï¼Œåœ¨ç”³è¯·å†…å­˜æ—¶**å¤šç”³è¯·äº†ä¸€ä¸ªåœ°å€é•¿åº¦**æ”¾åœ¨é¦–éƒ¨æ¥å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼Œè€Œ `delete`ä¹Ÿéœ€è¦é•¿åº¦ä¿¡æ¯æ¥ç¡®å®šè°ƒç”¨ææ„å‡½æ•°çš„æ¬¡æ•°
  
  ## new(new operator)çš„å®ç°
  
@@@ -442,31 -442,31 +458,30 @@@
  
  + å…·ä½“å®ç°æ–¹æ³•æ²¡æœ‰ä¸€å®šä¹‹è§„ï¼Œä¸€èˆ¬è¦ç»å†ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š
  
--1. è°ƒç”¨`operator new`å‡½æ•°ï¼ˆ`new[]`è°ƒç”¨çš„æ—¶`operator new[]`å‡½æ•°ï¼‰åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„æœªå‘½åçš„åŸå§‹å†…å­˜ç©ºé—´ã€‚
++1. è°ƒç”¨ `operator new`å‡½æ•°ï¼ˆ`new[]`è°ƒç”¨çš„æ—¶ `operator new[]`å‡½æ•°ï¼‰åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„æœªå‘½åçš„åŸå§‹å†…å­˜ç©ºé—´ã€‚
  2. ç¼–è¯‘å™¨è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ„é€ å¯¹è±¡ï¼Œä¼ å…¥åˆå€¼ã€‚
  3. å®Œæˆå¯¹è±¡æ„é€ åè¿”å›å¯¹è±¡æŒ‡é’ˆã€‚
  
  ### `operator new()`
  
--+ `operator new()`åªåˆ†é…æ‰€è¦æ±‚çš„ç©ºé—´ï¼Œè°ƒç”¨ç›¸å…³å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–ç©ºé—´ç”±`new operator`åœ¨`operator new`è¿”å›ä¹‹åå®Œæˆã€‚
+++ `operator new()`åªåˆ†é…æ‰€è¦æ±‚çš„ç©ºé—´ï¼Œè°ƒç”¨ç›¸å…³å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–ç©ºé—´ç”± `new operator`åœ¨ `operator new`è¿”å›ä¹‹åå®Œæˆã€‚
+++ `operator new()`å¯ä»¥åœ¨ä¸èƒ½åˆ†é…å†…å­˜è€Œè¿”å›å¼‚å¸¸ï¼ˆæ˜¯å¦è¿”å›å¼‚å¸¸å–å†³äºæ˜¯å¦æœ‰ `nothrow`å‚æ•°ï¼‰ä¹‹å‰é€šè¿‡ `set_new_handler()`æŒ‡å®šçš„å›è°ƒå‡½æ•° `void new_handler(void)`å®Œæˆä¸€äº›æ“ä½œ(å¯ä»¥å…ˆé‡Šæ”¾ä¸€äº›ç©ºé—´ï¼Œç„¶åå†å°è¯•ç”³è¯·ç©ºé—´)ã€‚
  
--+ `operator new()`å¯ä»¥åœ¨ä¸èƒ½åˆ†é…å†…å­˜è€Œè¿”å›å¼‚å¸¸ï¼ˆæ˜¯å¦è¿”å›å¼‚å¸¸å–å†³äºæ˜¯å¦æœ‰`nothrow`å‚æ•°ï¼‰ä¹‹å‰é€šè¿‡`set_new_handler()`æŒ‡å®šçš„å›è°ƒå‡½æ•°`void new_handler(void)`å®Œæˆä¸€äº›æ“ä½œ(å¯ä»¥å…ˆé‡Šæ”¾ä¸€äº›ç©ºé—´ï¼Œç„¶åå†å°è¯•ç”³è¯·ç©ºé—´)ã€‚
--
--#### é‡è½½`operator new/new[]`
++#### é‡è½½ `operator new/new[]`
  
  è‹¥æƒ³å®ç°è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é‡è½½å’Œé‡å®šä¹‰ä¸¤ç§æ–¹å¼å®ç°ï¼Œä¸¤ç§æ–¹å¼éƒ½æœ‰å…¶é™åˆ¶ï¼š
  
--|  æ–¹æ³•  |      åŸç†      |               ç¼ºç‚¹               |
--| :----: | :------------: | :------------------------------: |
--|  é‡è½½  |    å‡½æ•°é‡è½½    |          ä¸åŒçš„å‡½æ•°ç­¾å          |
--| é‡å®šä¹‰ | åå­—æŸ¥æ‰¾çš„é¡ºåº | å¦‚æœå‡½æ•°å·²ç»`inline`åˆ™ä¸èƒ½é‡å®šä¹‰ |
++|  æ–¹æ³•  |      åŸç†      |                ç¼ºç‚¹                |
++| :----: | :------------: | :---------------------------------: |
++|  é‡è½½  |    å‡½æ•°é‡è½½    |           ä¸åŒçš„å‡½æ•°ç­¾å           |
++| é‡å®šä¹‰ | åå­—æŸ¥æ‰¾çš„é¡ºåº | å¦‚æœå‡½æ•°å·²ç» `inline`åˆ™ä¸èƒ½é‡å®šä¹‰ |
  
--+ C++æ ‡å‡†è§„å®š`new operator`ä¸`delete operator`çš„è¡Œä¸ºæ˜¯ä¸èƒ½å¤Ÿä¹Ÿä¸åº”è¯¥è¢«æ”¹å˜ï¼Œåªæœ‰`operator new`ä¸`operator delete`å…è®¸è¢«é‡è½½ã€‚
--+ è¦æ±‚ï¼šé‡è½½å¯ä»¥å¸¦å…¶ä»–å‚æ•°ã€ç¬¬ä¸€å‚æ•°å¿…é¡»æ˜¯è¡¨ç¤ºè¦æ±‚åˆ†é…çš„ç©ºé—´å¤§å°çš„`size_t`ç±»å‹ã€è¿”å›å€¼å¿…é¡»æ˜¯`void*`ç±»å‹ã€‚
+++ C++æ ‡å‡†è§„å®š `new operator`ä¸ `delete operator`çš„è¡Œä¸ºæ˜¯ä¸èƒ½å¤Ÿä¹Ÿä¸åº”è¯¥è¢«æ”¹å˜ï¼Œåªæœ‰ `operator new`ä¸ `operator delete`å…è®¸è¢«é‡è½½ã€‚
+++ è¦æ±‚ï¼šé‡è½½å¯ä»¥å¸¦å…¶ä»–å‚æ•°ã€ç¬¬ä¸€å‚æ•°å¿…é¡»æ˜¯è¡¨ç¤ºè¦æ±‚åˆ†é…çš„ç©ºé—´å¤§å°çš„ `size_t`ç±»å‹ã€è¿”å›å€¼å¿…é¡»æ˜¯ `void*`ç±»å‹ã€‚
  
  ##### å†…å­˜å¯¹é½
  
--ä¸åŒçš„ç¼–è¯‘å™¨ä¸€èˆ¬éƒ½ä¼šæœ‰é»˜è®¤çš„å¯¹é½é‡ï¼Œä¸€èˆ¬éƒ½ä¸º2çš„å¹‚æ¬¡ã€‚åœ¨Cä¸­å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤`#pragma pack(n)`ä¿®æ”¹å¯¹é½é‡ï¼ŒC++ä¸­æä¾›äº†**`alignas`**ç”¨äºæŒ‡å®šå¯¹é½é‡ï¼Œå¯ä»¥åº”ç”¨äºç±»/ç»“æ„ä½“/union/æšä¸¾çš„å£°æ˜/å®šä¹‰ã€éä½åŸŸçš„æˆå‘˜å˜é‡çš„å®šä¹‰ã€å˜é‡çš„å®šä¹‰ï¼ˆé™¤äº†å‡½æ•°å‚æ•°æˆ–å¼‚å¸¸æ•è·çš„å‚æ•°ï¼‰ï¼Œ`alignas`ä¼šå¯¹å¯¹é½é‡åšæ£€æŸ¥ï¼Œ**å¯¹é½é‡ä¸èƒ½å°äºé»˜è®¤å¯¹é½**ã€‚å¯¹åº”çš„C++è¿˜æä¾›äº†`alignof operator`ï¼Œæ“ä½œæ•°å¦‚æœæ˜¯å¼•ç”¨å°±è¿”å›å¼•ç”¨ç±»å‹çš„å¯¹é½æ–¹å¼ã€å¦‚æœæ˜¯æ•°ç»„åˆ™è¿”å›å…ƒç´ ç±»å‹çš„å¯¹é½æ–¹å¼ã€‚
++ä¸åŒçš„ç¼–è¯‘å™¨ä¸€èˆ¬éƒ½ä¼šæœ‰é»˜è®¤çš„å¯¹é½é‡ï¼Œä¸€èˆ¬éƒ½ä¸º2çš„å¹‚æ¬¡ã€‚åœ¨Cä¸­å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ `#pragma pack(n)`ä¿®æ”¹å¯¹é½é‡ï¼ŒC++ä¸­æä¾›äº†**`alignas`**ç”¨äºæŒ‡å®šå¯¹é½é‡ï¼Œå¯ä»¥åº”ç”¨äºç±»/ç»“æ„ä½“/union/æšä¸¾çš„å£°æ˜/å®šä¹‰ã€éä½åŸŸçš„æˆå‘˜å˜é‡çš„å®šä¹‰ã€å˜é‡çš„å®šä¹‰ï¼ˆé™¤äº†å‡½æ•°å‚æ•°æˆ–å¼‚å¸¸æ•è·çš„å‚æ•°ï¼‰ï¼Œ`alignas`ä¼šå¯¹å¯¹é½é‡åšæ£€æŸ¥ï¼Œ**å¯¹é½é‡ä¸èƒ½å°äºé»˜è®¤å¯¹é½**ã€‚å¯¹åº”çš„C++è¿˜æä¾›äº† `alignof operator`ï¼Œæ“ä½œæ•°å¦‚æœæ˜¯å¼•ç”¨å°±è¿”å›å¼•ç”¨ç±»å‹çš„å¯¹é½æ–¹å¼ã€å¦‚æœæ˜¯æ•°ç»„åˆ™è¿”å›å…ƒç´ ç±»å‹çš„å¯¹é½æ–¹å¼ã€‚
  
  ```c++
  struct Foo {
@@@ -483,7 -483,7 +498,7 @@@ cout << alignof(char) << alignof(int*) 
  
  ### `placement new`
  
--`placement new`æ˜¯æ ‡å‡†åº“æä¾›çš„**`operator new`çš„é‡è½½**ç‰ˆæœ¬ï¼Œå®ƒæœ¬èº«å¹¶ä¸åˆ†é…å†…å­˜ã€‚`placement new`æ‰§è¡Œæ—¶å¿½ç•¥äº†`size_t`å‚æ•°ï¼Œåªæ˜¯åœ¨ç¬¬äºŒå‚æ•°ä»£è¡¨çš„çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ ˆç”šè‡³é™æ€å­˜å‚¨åŒºï¼‰ä¸Šæ„é€ å¯¹è±¡ï¼Œè¿”å›æŒ‡å‘å·²ç»åˆ†é…å¥½çš„æŸæ®µå†…å­˜ï¼ˆæ­¤æ®µå†…å­˜å·²ç»è¢«å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–è¿‡ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚
++`placement new`æ˜¯æ ‡å‡†åº“æä¾›çš„**`operator new`çš„é‡è½½**ç‰ˆæœ¬ï¼Œå®ƒæœ¬èº«å¹¶ä¸åˆ†é…å†…å­˜ã€‚`placement new`æ‰§è¡Œæ—¶å¿½ç•¥äº† `size_t`å‚æ•°ï¼Œåªæ˜¯åœ¨ç¬¬äºŒå‚æ•°ä»£è¡¨çš„çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ ˆç”šè‡³é™æ€å­˜å‚¨åŒºï¼‰ä¸Šæ„é€ å¯¹è±¡ï¼Œè¿”å›æŒ‡å‘å·²ç»åˆ†é…å¥½çš„æŸæ®µå†…å­˜ï¼ˆæ­¤æ®µå†…å­˜å·²ç»è¢«å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–è¿‡ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚
  
  ```c++
  void *operator new( size_t, void * p ) throw() { return p; }///åŸå‹
@@@ -494,11 -494,11 +509,11 @@@ Object * p = new (address) ClassConstru
  
  #### NOTE
  
--+ åˆ©ç”¨`placement new`å®ç°çš„å¯¹è±¡ä¸ä¸€å®šèƒ½ä½¿ç”¨`delete`ç³»åˆ—å‡½æ•°é‡Šæ”¾ç©ºé—´(è¿™ä¸ªå†…å­˜ä¸ä¸€å®šæ˜¯`new`åŠ¨æ€ç”³è¯·çš„ï¼‰ï¼Œä½†æ˜¯è¿™ä¸€ç±»å¯¹è±¡**å¿…é¡»æ˜¾å¼è°ƒç”¨ç±»çš„ææ„å‡½æ•°**ã€‚ä½†æ˜¯å¦‚æœæ‰€ä½¿ç”¨çš„ç©ºé—´æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶ä¸€å®šè¦é‡Šæ”¾è¿™å—å †å†…å­˜ã€‚
+++ åˆ©ç”¨ `placement new`å®ç°çš„å¯¹è±¡ä¸ä¸€å®šèƒ½ä½¿ç”¨ `delete`ç³»åˆ—å‡½æ•°é‡Šæ”¾ç©ºé—´(è¿™ä¸ªå†…å­˜ä¸ä¸€å®šæ˜¯ `new`åŠ¨æ€ç”³è¯·çš„ï¼‰ï¼Œä½†æ˜¯è¿™ä¸€ç±»å¯¹è±¡**å¿…é¡»æ˜¾å¼è°ƒç”¨ç±»çš„ææ„å‡½æ•°**ã€‚ä½†æ˜¯å¦‚æœæ‰€ä½¿ç”¨çš„ç©ºé—´æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶ä¸€å®šè¦é‡Šæ”¾è¿™å—å †å†…å­˜ã€‚
  
  #### ä½¿ç”¨
  
--  ```cpp
++```cpp
  class X{
  public:
      X() { cout<<"constructor of X"<<endl; }
@@@ -514,28 -514,28 +529,65 @@@ int main()
      delete []buf;      //5:é‡Šæ”¾buf(å–å†³äº1)
      return 0;
  }
--  ```
++```
  
  ### `new`çš„åˆå§‹åŒ–
  
--å¯¹äº`new T initializer;`å½¢å¼çš„è°ƒç”¨ï¼ŒC++`new` è¡¨è¾¾å¼ä¼šå…ˆè°ƒç”¨ `operator new` åˆ†é…ä¸€å—è¶³ä»¥æ”¾ä¸‹ä¸€ä¸ª `T` ç±»å‹çš„å€¼çš„å†…å­˜ï¼Œç„¶åå†æ ¹æ® `initializer` å¯¹ `T` ç±»å‹çš„å€¼è¿›è¡Œ**åˆå§‹åŒ–**ã€‚C++ çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ª[ä¸“é—¨çš„å¤æ‚ä¸»é¢˜](https://zh.cppreference.com/w/cpp/language/initialization)ï¼Œä¸åŒçš„åœºæ™¯ã€ä¸åŒçš„è¯­æ³•å’Œä¸åŒçš„ç±»å‹ä¼šå¯¼è‡´å®Œå…¨ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼å’Œåˆå§‹åŒ–ç»“æœï¼Œè°ƒç”¨æ„é€ å™¨åªæ˜¯åˆå§‹åŒ–çš„å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä¸”åªé€‚ç”¨äº` class type` å’Œ` union type`ã€‚
++å¯¹äº `new T initializer;`å½¢å¼çš„è°ƒç”¨ï¼ŒC++`new` è¡¨è¾¾å¼ä¼šå…ˆè°ƒç”¨ `operator new` åˆ†é…ä¸€å—è¶³ä»¥æ”¾ä¸‹ä¸€ä¸ª `T` ç±»å‹çš„å€¼çš„å†…å­˜ï¼Œç„¶åå†æ ¹æ® `initializer` å¯¹ `T` ç±»å‹çš„å€¼è¿›è¡Œ**åˆå§‹åŒ–**ã€‚C++ çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ª[ä¸“é—¨çš„å¤æ‚ä¸»é¢˜](https://zh.cppreference.com/w/cpp/language/initialization)ï¼Œä¸åŒçš„åœºæ™¯ã€ä¸åŒçš„è¯­æ³•å’Œä¸åŒçš„ç±»å‹ä¼šå¯¼è‡´å®Œå…¨ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼å’Œåˆå§‹åŒ–ç»“æœï¼Œè°ƒç”¨æ„é€ å™¨åªæ˜¯åˆå§‹åŒ–çš„å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä¸”åªé€‚ç”¨äº ` class type` å’Œ ` union type`ã€‚
  
--åœ¨è¿™é‡Œç”¨çš„æ˜¯å…¶ä¸­ä¸€ç§å«åš` value initialization `çš„åˆå§‹åŒ–æ–¹å¼ã€‚C++ è§„å®š` value initialization `çš„è¡Œä¸ºä¸ºï¼š
++åœ¨è¿™é‡Œç”¨çš„æ˜¯å…¶ä¸­ä¸€ç§å«åš `value initialization`çš„åˆå§‹åŒ–æ–¹å¼ã€‚C++ è§„å®š `value initialization`çš„è¡Œä¸ºä¸ºï¼š
  
--*  `Tï¼š class type`ï¼Œä¸”å…·æœ‰ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„` default constructor`ï¼Œé‚£ä¹ˆå€¼å°†è¢«é»˜è®¤åˆå§‹åŒ–ï¼›
--* `Tï¼š class type`ï¼Œä¸”` default constructor `æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æˆ–è¢«æ ‡è®°ä¸º `default`ï¼Œé‚£ä¹ˆå€¼å°†è¢«ï¼š
--  * é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼Œå¦‚æœ` defaut constructor` æ˜¯ `trivial` çš„ï¼›
++* `Tï¼š class type`ï¼Œä¸”å…·æœ‰ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„ ` default constructor`ï¼Œé‚£ä¹ˆå€¼å°†è¢«é»˜è®¤åˆå§‹åŒ–ï¼›
++* `Tï¼š class type`ï¼Œä¸” `default constructor`æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æˆ–è¢«æ ‡è®°ä¸º `default`ï¼Œé‚£ä¹ˆå€¼å°†è¢«ï¼š
++
++  * é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼Œå¦‚æœ ` defaut constructor` æ˜¯ `trivial` çš„ï¼›
    * é»˜è®¤åˆå§‹åŒ–ï¼ˆ`default-initialized`ï¼‰ï¼Œå¦‚æœ `default constructor `ä¸æ˜¯ `trivial` çš„ï¼›
++* å¦‚æœ `T` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜å‡ä¼šè¢« ` value-initialized`ï¼›
++* å¦åˆ™å€¼å°†è¢«é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼›
  
--* å¦‚æœ `T` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜å‡ä¼šè¢«` value-initialized`ï¼›
++#### `trivial && non-trivial && POD`
  
--* å¦åˆ™å€¼å°†è¢«é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼›
++`trival`ï¼ˆå¹³å‡¡æ— æ„ä¹‰ï¼‰å’Œ `non-trivial`çš„æ¦‚å¿µæ˜¯å¯¹äºç±»æˆ–è€…ç±»çš„æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°å››ç§æˆå‘˜å‡½æ•°è€Œè¨€çš„ã€‚
++
++##### éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»
++
++éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ä¸­è‡³å°‘ä¸€æ¡ã€‚
++
++1. æ˜¾å¼ `explict`å®šä¹‰äº†è¿™å››ç§å‡½æ•°ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼›
++2. ç±»é‡Œæœ‰éé™æ€éPODçš„æ•°æ®æˆå‘˜ï¼›
++3. æœ‰åŸºç±»
++
++##### å¹³å‡¡ï¼ˆ`trivial`ï¼‰ç±»
++
++å¦‚æœè¿™ä¸ªç±»éƒ½æ˜¯ `trivial  ctor/dtor/copy/assignment`å‡½æ•°ï¼Œå¯¹è¿™ä¸ªç±»è¿›è¡Œæ„é€ ã€ææ„ã€æ‹·è´å’Œèµ‹å€¼æ—¶å¯ä»¥é‡‡ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ï¼ˆç›´æ¥é‡‡ç”¨å†…å­˜æ“ä½œå¦‚ `malloc()ã€memcpy()`ç­‰æé«˜æ€§èƒ½ï¼Œä¸è°ƒç”¨æ— æœ‰æ•ˆæ„ä¹‰çš„é‚£äº› `ctor/dtor`ç­‰ï¼Œè€Œè¿™ä¹Ÿæ˜¯SGI STLå†…éƒ¨å¹²çš„äº‹æƒ…ï¼‰ã€‚[æ¥æº](https://blog.csdn.net/zhangatm/article/details/77936101)
  
--#### `trivial && non-trivial`
++##### PODç±»
  
--`trival`ï¼ˆå¹³å‡¡æ— æ„ä¹‰ï¼‰çš„æ¦‚å¿µæ˜¯å¯¹äºæ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°è¿™å››ç§å‡½æ•°è€Œè¨€çš„ï¼Œå½“æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ä¸­ï¼ˆæ˜¾å¼`explict`å®šä¹‰äº†è¿™å››ç§å‡½æ•°ã€ç±»é‡Œæœ‰éé™æ€éPODçš„æ•°æ®æˆå‘˜ã€æœ‰åŸºç±»ï¼‰çš„ä»»æ„ä¸€æ¡å‡½æ•°éƒ½æ˜¯éå¹³å‡¡çš„ã€‚
++PODï¼ˆPlain Old Dataï¼‰æ˜¯æŒ‡Cé£æ ¼çš„structç»“æ„ä½“å®šä¹‰çš„æ•°æ®ç»“æ„æˆ–è€…C++çš„å†…å»ºç±»å‹ã€‚å¦‚æœä¸€ä¸ªç±»æˆ–ç»“æ„æ˜¯Trivialï¼ˆå¹³å‡¡ï¼‰çš„ï¼Œå…·æœ‰æ ‡å‡†å¸ƒå±€ä¸”ä¸åŒ…å«ä»»ä½•éPODçš„éé™æ€æˆå‘˜ï¼Œé‚£ä¹ˆå®ƒå°±è¢«è®¤å®šæ˜¯PODç±»å‹ã€‚
  
--å¦‚æœè¿™ä¸ªç±»éƒ½æ˜¯`trivial  ctor/dtor/copy/assignment`å‡½æ•°ï¼Œå¯¹è¿™ä¸ªç±»è¿›è¡Œæ„é€ ã€ææ„ã€æ‹·è´å’Œèµ‹å€¼æ—¶å¯ä»¥é‡‡ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ï¼ˆç›´æ¥é‡‡ç”¨å†…å­˜æ“ä½œå¦‚`malloc()ã€memcpy()`ç­‰æé«˜æ€§èƒ½ï¼Œä¸è°ƒç”¨æ— æœ‰æ•ˆæ„ä¹‰çš„é‚£äº›`ctor/dtor`ç­‰ï¼Œè€Œè¿™ä¹Ÿæ˜¯SGI STLå†…éƒ¨å¹²çš„äº‹æƒ…ï¼‰ã€‚[æ¥æº](https://blog.csdn.net/zhangatm/article/details/77936101)
++###### [æ ‡å‡†å¸ƒå±€](https://www.cnblogs.com/TinyGreen/p/9049898.html "Trivialã€Non-Trivialå’ŒPODç±»å‹")
++
++###### ç±»å‹å†…å­˜å¸ƒå±€
++
++å¸ƒå±€æ˜¯æŒ‡ç±»ã€ç»“æ„æˆ–è”åˆç±»å‹çš„å¯¹è±¡çš„æˆå‘˜åœ¨å†…å­˜ä¸­çš„æ’åˆ—æ–¹å¼ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¸ƒå±€ç”±è¯­è¨€è§„èŒƒæ˜ç¡®å®šä¹‰ã€‚ä½†æ˜¯ï¼Œå½“ç±»æˆ–ç»“æ„åŒ…å«æŸäº› C++ è¯­è¨€åŠŸèƒ½ï¼ˆå¦‚è™šæ‹ŸåŸºç±»ã€è™šæ‹Ÿå‡½æ•°ã€è®¿é—®æƒé™æ§åˆ¶ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±é€‰æ‹©å¸ƒå±€ï¼Œç”±äºç¼–è¯‘å™¨ä¼˜åŒ–è¡Œä¸ºçš„ä¸åŒï¼Œç»“æ„æˆ–ç±»çš„å¸ƒå±€ä¹Ÿä¼šä¸åŒï¼ŒæŸäº›æƒ…å†µä¸‹å¯¹è±¡ç”šè‡³å¯èƒ½ä¸ä¼šå ç”¨è¿ç»­å†…å­˜åŒºåŸŸï¼ˆåœ¨C++
++ä¸­å¾ˆå¸¸è§ï¼‰ã€‚
++
++ç”±äºç¼ºä¹ä¸€è‡´çš„å¸ƒå±€ï¼Œä¹Ÿå°±æ— æ³•å°†å…¶ä¼ é€’åˆ°ä½¿ç”¨å…¶ä»–è¯­è¨€ï¼ˆä¾‹å¦‚ Cï¼‰ç¼–å†™çš„ç¨‹åºï¼Œè€Œä¸”ç”±äºå†…å­˜ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨å¿«é€Ÿä½çº§å‡½æ•°ï¼ˆä¾‹å¦‚ `memcopy`ï¼‰å¯¹å…¶è¿›è¡Œå¯é å¤åˆ¶ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œå¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ã€‚ä¸ºä½¿ç¼–è¯‘å™¨ä»¥åŠ C++ ç¨‹åºå’Œå…ƒç¨‹åºèƒ½å¤Ÿæ¨æ–­å‡ºä»»ä½•ç»™å®šç±»å‹å¯¹äºä¾èµ–äºç‰¹å®šå†…å­˜å¸ƒå±€çš„æ“ä½œçš„é€‚ç”¨æ€§ï¼ŒC++14 å¼•å…¥äº†ä¸‰ç§ç±»åˆ«çš„ç®€å•ç±»å’Œç»“æ„ï¼šæ™®é€šã€æ ‡å‡†å¸ƒå±€å’Œ PODï¼ˆæˆ–ç®€å•æ—§æ•°æ®ï¼‰ã€‚ æ ‡å‡†åº“å…·æœ‰å‡½æ•°æ¨¡æ¿ `is_trivial<T>`ã€`is_standard_layout<T>` å’Œ `is_pod<T>`ï¼Œè¿™äº›æ¨¡æ¿å¯ä»¥ç¡®å®šæŸä¸€ç»™å®šç±»å‹æ˜¯å¦å±äºæŸä¸€ç»™å®šç±»åˆ«ã€‚
++
++
++1. æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å‡ä¸ºæ ‡å‡†å¸ƒå±€ç±»å‹
++2. æ‰€æœ‰åŸºç±»å‡ä¸ºæ ‡å‡†å¸ƒå±€ç±»å‹
++3. æ²¡æœ‰è™šå‡½æ•°
++4. æ²¡æœ‰è™šåŸºç±»
++5. æ‰€æœ‰éé™æ€æˆå‘˜çš„è®¿é—®æƒé™å‡ç›¸åŒ
++6. æ²¡æœ‰ä»»ä½•åŸºç±»çš„ç±»å‹ä¸ç±»ä¸­ç¬¬ä¸€ä¸ªéé™æ€æˆå‘˜ç›¸åŒ
++7. è¦ä¹ˆå…¨éƒ¨åŸºç±»éƒ½æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ï¼Œè¦ä¹ˆæœ€ä¸‹å±‚çš„å­ç±»æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ä¸”æœ€å¤šåªæœ‰ä¸€ä¸ªåŸºç±»æœ‰éé™æ€æ•°æ®æˆå‘˜ã€‚æ€»ä¹‹ç»§æ‰¿æ ‘ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªç±»æœ‰éé™æ€æ•°æ®æˆå‘˜ã€‚æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å¿…é¡»éƒ½æ˜¯æ ‡å‡†å¸ƒå±€ç±»å‹ã€‚
++
++###### **PODçš„ä¼˜ç‚¹**
++
++1. å­—èŠ‚èµ‹å€¼ï¼Œå…¶äºŒè¿›åˆ¶å†…å®¹æ˜¯å¯ä»¥éšä¾¿å¤åˆ¶çš„ï¼Œåœ¨ä»»ä½•åœ°æ–¹ï¼Œåªè¦å…¶äºŒè¿›åˆ¶å†…å®¹åœ¨ï¼Œå°±èƒ½è¿˜åŸå‡ºæ­£ç¡®æ— è¯¯çš„PODå¯¹è±¡ï¼Œå³å¯ä»¥å®‰å…¨çš„ä½¿ç”¨ `memset(),mercopy()`æˆ–å…¶ä»–ç±»ä¼¼çš„å†…å­˜åˆå§‹åŒ–å‡½æ•°å¯¹PODç±»å‹è¿›è¡Œåˆå§‹åŒ–å’Œæ‹·è´ç­‰æ“ä½œ
++2. æä¾›äº†å¯¹Cå†…å­˜å¸ƒå±€çš„å…¼å®¹ï¼ŒC++ç¨‹åºå¯ä»¥ä¸Cå‡½æ•°è¿›è¡Œç›¸äº’çš„æ“ä½œï¼Œå› ä¸ºPODç±»å‹çš„æ•°æ®åœ¨C++ä¸Cä¹‹é—´çš„æ“ä½œæ€»æ˜¯å®‰å…¨çš„
++3. ä¿è¯äº†**é™æ€åˆå§‹åŒ–**çš„å®‰å…¨æœ‰æ•ˆï¼Œé™æ€åˆå§‹åŒ–åœ¨å¾ˆå¤šæ—¶å€™èƒ½å¤Ÿæé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œè€ŒPODç±»å‹çš„å¯¹è±¡åˆå§‹åŒ–å¾€å¾€æ›´åŠ ç®€å•ï¼ˆæ¯”å¦‚æ”¾åœ¨ç›®æ ‡æ–‡ä»¶çš„.bssæ®µï¼Œåœ¨åˆå§‹åŒ–ä¸­ç›´æ¥è¢«èµ‹0ï¼‰
  
  #### `new`çš„ä½¿ç”¨
  
@@@ -558,7 -558,7 +610,7 @@@ auto p = new auto('c')
  
  ##### åˆ†ç¦»åˆ†é…ä¸æ„é€ 
  
--`new`æ“ä½œå°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ ç»„åˆåœ¨ä¸€èµ·ï¼Œåœ¨æ„é€ ç±»æ—¶å¯èƒ½é€ æˆåˆ›å»ºä¸€äº›ç”¨ä¸åˆ°çš„å¯¹è±¡ã€å¯¹è±¡è¢«èµ‹å€¼ä¸¤æ¬¡ã€æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ç”šè‡³ä¸èƒ½åŠ¨æ€åˆ†é…æ•°ç»„ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨`allocator`éš¾åº¦å®Œæˆå†…å­˜çš„åˆ†é…ã€‚
++`new`æ“ä½œå°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ ç»„åˆåœ¨ä¸€èµ·ï¼Œåœ¨æ„é€ ç±»æ—¶å¯èƒ½é€ æˆåˆ›å»ºä¸€äº›ç”¨ä¸åˆ°çš„å¯¹è±¡ã€å¯¹è±¡è¢«èµ‹å€¼ä¸¤æ¬¡ã€æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ç”šè‡³ä¸èƒ½åŠ¨æ€åˆ†é…æ•°ç»„ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨ `allocator`éš¾åº¦å®Œæˆå†…å­˜çš„åˆ†é…ã€‚
  
  ```c++
  allocator<string> alloc; // æ„é€ allocatorå¯¹è±¡
@@@ -575,15 -575,15 +627,11 @@@ while(q != p)//å°†å·²æ„é€ çš„stringé”€
  alloc.deallocate(p, n);//å°†åˆ†é…çš„nä¸ªstringå†…å­˜ç©ºé—´é‡Šæ”¾
  ```
  
--ä½†å®é™…ä¸Šå‡ ä¹å¾ˆå°‘ä½¿ç”¨`std::allocator`ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯`std::alloc`ã€‚ä¸»è¦æ˜¯ç”±äºå‰è€…æœ‰æ— æ³•æ§åˆ¶å†…å­˜å¯¹é½ã€éš¾ä»¥åº”ç”¨å†…å­˜æ± ä¹‹ç±»çš„ä¼˜åŒ–æœºåˆ¶ç­‰é—®é¢˜ã€‚
++ä½†å®é™…ä¸Šå‡ ä¹å¾ˆå°‘ä½¿ç”¨ `std::allocator`ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯ `std::alloc`ã€‚ä¸»è¦æ˜¯ç”±äºå‰è€…æœ‰æ— æ³•æ§åˆ¶å†…å­˜å¯¹é½ã€éš¾ä»¥åº”ç”¨å†…å­˜æ± ä¹‹ç±»çš„ä¼˜åŒ–æœºåˆ¶ç­‰é—®é¢˜ã€‚
  
  ## [`malloc`çš„å®ç°](https://zhuanlan.zhihu.com/p/57863097)
  
--<<<<<<< HEAD
--`malloc()`çš„å®ç°**ä¾èµ–äº`brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡`brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMA	P_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨`mmap`çš„åŒ¿åæ˜ å°„åœ¨`MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚
--=======
--`malloc()`çš„å®ç°**ä¾èµ–äº`brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡`brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMAP_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨`mmap`çš„åŒ¿åæ˜ å°„åœ¨`MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚
-->>>>>>> d6cc772463d7c322554dbca975fea31744a38242
++`malloc()`çš„å®ç°**ä¾èµ–äº `brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡ `brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMA	P_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨ `mmap`çš„åŒ¿åæ˜ å°„åœ¨ `MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚
  
  ![](img/lang/memary_pool.jpg)
  
@@@ -591,62 -591,62 +639,62 @@@
  
  ### å†…å­˜åŒºåŸŸ
  
--|  åç§°   |                 è§£é‡Š                 |
--| :-----: | :----------------------------------: |
--| `chunk` |   å°†å †å†…å­˜åˆ†æˆäº†å¤§å°ä¸åŒçš„`chunk`    |
--|  `bin`  |  ç”±åŒå‘é“¾è¡¨ç»„ç»‡çš„å¤§å°ç›¸ä¼¼çš„`chunk`   |
--| `bins`  | `bin`é“¾é¦–åœ°å€ç»„æˆçš„å¤§å°ä¸º`128`çš„æ•°ç»„ |
++|   åç§°   |                   è§£é‡Š                   |
++| :-------: | :---------------------------------------: |
++| `chunk` |    å°†å †å†…å­˜åˆ†æˆäº†å¤§å°ä¸åŒçš„ `chunk`    |
++|  `bin`  |   ç”±åŒå‘é“¾è¡¨ç»„ç»‡çš„å¤§å°ç›¸ä¼¼çš„ `chunk`   |
++| `bins` | `bin`é“¾é¦–åœ°å€ç»„æˆçš„å¤§å°ä¸º `128`çš„æ•°ç»„ |
  
  #### `bins`
  
--|   `bins`ç±»åˆ«   |   åŒºåŸŸ   |                           ç‰¹ç‚¹                           |      ä½œç”¨      |
--| :------------: | :------: | :------------------------------------------------------: | :------------: |
--|                |  [0,0]   |                          æœªä½¿ç”¨                          |                |
--| `unsorted bin` |  [1,1]   |          ç»´æŠ¤éƒ¨åˆ†`free`é‡Šæ”¾ä»¥åŠè¢«åˆ†å‰²çš„`chunk`           |  åŠ å¿«äºŒæ¬¡åˆ†é…  |
--|  `small bin`   |  [2,63]  |        æ¯ä¸ª`bin`ä¿å­˜æ‰€æœ‰å¤§å°ä¸º`index*8B`çš„`chunk`        | åˆ†é…`512B`ä»¥ä¸‹ |
--|  `large bin`   | [64,127] | `bin`å†…ä¸ºæŒ‡å®šèŒƒå›´å†…æŒ‰å¤§å°æ’åºçš„`chunk`ï¼Œç›¸é‚»`bin`å·®`64B` | åˆ†é…`512B`ä»¥ä¸Š |
++|   `bins`ç±»åˆ«   |   åŒºåŸŸ   |                                ç‰¹ç‚¹                                |       ä½œç”¨       |
++| :--------------: | :------: | :-----------------------------------------------------------------: | :---------------: |
++|                  |  [0,0]  |                               æœªä½¿ç”¨                               |                  |
++| `unsorted bin` |  [1,1]  |             ç»´æŠ¤éƒ¨åˆ† `free`é‡Šæ”¾ä»¥åŠè¢«åˆ†å‰²çš„ `chunk`             |   åŠ å¿«äºŒæ¬¡åˆ†é…   |
++|  `small bin`  |  [2,63]  |         æ¯ä¸ª `bin`ä¿å­˜æ‰€æœ‰å¤§å°ä¸º `index*8B`çš„ `chunk`         | åˆ†é… `512B`ä»¥ä¸‹ |
++|  `large bin`  | [64,127] | `bin`å†…ä¸ºæŒ‡å®šèŒƒå›´å†…æŒ‰å¤§å°æ’åºçš„ `chunk`ï¼Œç›¸é‚» `bin`å·® `64B` | åˆ†é… `512B`ä»¥ä¸Š |
  
  #### `fast_bin`
  
--ä¸ºäº†åŠ é€Ÿå°å¯¹è±¡çš„åˆ†é…ï¼Œé‡Šæ”¾ä¸å¤§äº `max_fast`ï¼ˆé»˜è®¤ `64B`ï¼‰çš„ `chunk` é¦–å…ˆå°†ä¼šè¢«æ”¾åˆ° `fast bins`ä¸­ï¼Œ`fast bins` ä¸­çš„ `chunk` å¹¶ä¸æ”¹å˜å®ƒçš„ä½¿ç”¨æ ‡å¿— Pï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•å°†å®ƒä»¬åˆå¹¶ã€‚`malloc` åœ¨æŸä¸ª**ç‰¹å®šçš„æ—¶å€™**ä¼šéå†` fast bins` ä¸­çš„ `chunk`ï¼Œå°†ç›¸é‚»çš„ç©ºé—² `chunk` è¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶åçš„ `chunk` åŠ å…¥ `unsorted bin` ä¸­ã€‚
++ä¸ºäº†åŠ é€Ÿå°å¯¹è±¡çš„åˆ†é…ï¼Œé‡Šæ”¾ä¸å¤§äº `max_fast`ï¼ˆé»˜è®¤ `64B`ï¼‰çš„ `chunk` é¦–å…ˆå°†ä¼šè¢«æ”¾åˆ° `fast bins`ä¸­ï¼Œ`fast bins` ä¸­çš„ `chunk` å¹¶ä¸æ”¹å˜å®ƒçš„ä½¿ç”¨æ ‡å¿— Pï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•å°†å®ƒä»¬åˆå¹¶ã€‚`malloc` åœ¨æŸä¸ª**ç‰¹å®šçš„æ—¶å€™**ä¼šéå† ` fast bins` ä¸­çš„ `chunk`ï¼Œå°†ç›¸é‚»çš„ç©ºé—² `chunk` è¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶åçš„ `chunk` åŠ å…¥ `unsorted bin` ä¸­ã€‚
  
  #### `unsorted_bin`
  
--ä¿å­˜è¢«ç”¨æˆ·é‡Šæ”¾çš„å¤§äº `max_fast`çš„ `chunk` ï¼Œæˆ–è€… `fast bins` ä¸­çš„ç©ºé—² `chunk` åˆå¹¶åäº§ç”Ÿçš„`chunk`ã€‚`unsorted bin` å¯ä»¥çœ‹åšæ˜¯ `bins` çš„ä¸€ä¸ª**ç¼“å†²åŒº**ï¼Œå¢åŠ å®ƒåªæ˜¯ä¸ºäº†åŠ å¿«åˆ†é…çš„é€Ÿåº¦ã€‚
++ä¿å­˜è¢«ç”¨æˆ·é‡Šæ”¾çš„å¤§äº `max_fast`çš„ `chunk` ï¼Œæˆ–è€… `fast bins` ä¸­çš„ç©ºé—² `chunk` åˆå¹¶åäº§ç”Ÿçš„ `chunk`ã€‚`unsorted bin` å¯ä»¥çœ‹åšæ˜¯ `bins` çš„ä¸€ä¸ª**ç¼“å†²åŒº**ï¼Œå¢åŠ å®ƒåªæ˜¯ä¸ºäº†åŠ å¿«åˆ†é…çš„é€Ÿåº¦ã€‚
  
  #### `top chunk`
  
--`top chunk`æ˜¯å †é¡¶çš„`chunk`ï¼Œå †é¡¶æŒ‡é’ˆ`brk`ä½äº`top chunk`çš„é¡¶éƒ¨ï¼Œä»–é€šè¿‡ä»`mmap`ç›´æ¥ä½¿ç”¨**å†…å­˜æ˜ å°„**æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´æ¨¡æ‹Ÿ`sub-heap`ï¼Œç”¨äºåˆ†é…æ¯”è¾ƒå¤§çš„å†…å­˜ã€‚ç§»åŠ¨`brk`æŒ‡é’ˆå³å¯æ‰©å……`top chunk`çš„å¤§å°ï¼Œ**å½“åœ¨é‡Šæ”¾å†…å­˜æˆ–è€…è°ƒæ•´`brk`é€ æˆ`top chunk`å¤§å°è¶…è¿‡`128k`ï¼ˆå¯é…ç½®ï¼‰æ—¶ï¼Œä¼šè§¦å‘`malloc_trim`æ“ä½œè°ƒç”¨`sbrk(-size)`å°†å†…å­˜å½’è¿˜æ“ä½œç³»ç»Ÿ**ã€‚
++`top chunk`æ˜¯å †é¡¶çš„ `chunk`ï¼Œå †é¡¶æŒ‡é’ˆ `brk`ä½äº `top chunk`çš„é¡¶éƒ¨ï¼Œä»–é€šè¿‡ä» `mmap`ç›´æ¥ä½¿ç”¨**å†…å­˜æ˜ å°„**æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´æ¨¡æ‹Ÿ `sub-heap`ï¼Œç”¨äºåˆ†é…æ¯”è¾ƒå¤§çš„å†…å­˜ã€‚ç§»åŠ¨ `brk`æŒ‡é’ˆå³å¯æ‰©å…… `top chunk`çš„å¤§å°ï¼Œ**å½“åœ¨é‡Šæ”¾å†…å­˜æˆ–è€…è°ƒæ•´ `brk`é€ æˆ `top chunk`å¤§å°è¶…è¿‡ `128k`ï¼ˆå¯é…ç½®ï¼‰æ—¶ï¼Œä¼šè§¦å‘ `malloc_trim`æ“ä½œè°ƒç”¨ `sbrk(-size)`å°†å†…å­˜å½’è¿˜æ“ä½œç³»ç»Ÿ**ã€‚
  
  ![](img/lang/chunk-layout.png)
  
  ### åˆ†é…è¿‡ç¨‹
  
--`glibc`åœ¨å†…å­˜æ± ä¸­æŸ¥æ‰¾åˆé€‚çš„`chunk`æ—¶é‡‡ç”¨äº†**æœ€ä½³é€‚åº”**ï¼ˆæ»¡è¶³æ‰€éœ€ç©ºé—´çš„æœ€å°å€¼ï¼‰ç®—æ³•ï¼Œå½“éœ€è¦ç»™ç”¨æˆ·åˆ†é…çš„ `chunk` å°äºæˆ–ç­‰äº `max_fast` æ—¶ï¼Œ`malloc` é¦–å…ˆä¼šåœ¨ `fast bins `ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç©ºé—²å—ï¼Œç„¶åå†åœ¨`unsorted bin`  ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœ` unsorted bin `ä¸èƒ½æ»¡è¶³åˆ†é…è¦æ±‚ï¼Œ `malloc`ä¾¿ä¼šå°† `unsorted bin` ä¸­çš„ `chunk` éƒ½å½’ç±»æ”¾åˆ°`smallbins`å’Œ`largebins`é‡Œé¢ï¼Œæœ€åæ‰ä¼šå»æŸ¥æ‰¾ `bins` ä¸­çš„ç©ºé—² `chunk`ã€‚
++`glibc`åœ¨å†…å­˜æ± ä¸­æŸ¥æ‰¾åˆé€‚çš„ `chunk`æ—¶é‡‡ç”¨äº†**æœ€ä½³é€‚åº”**ï¼ˆæ»¡è¶³æ‰€éœ€ç©ºé—´çš„æœ€å°å€¼ï¼‰ç®—æ³•ï¼Œå½“éœ€è¦ç»™ç”¨æˆ·åˆ†é…çš„ `chunk` å°äºæˆ–ç­‰äº `max_fast` æ—¶ï¼Œ`malloc` é¦–å…ˆä¼šåœ¨ `fast bins `ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç©ºé—²å—ï¼Œç„¶åå†åœ¨ `unsorted bin`  ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœ `unsorted bin`ä¸èƒ½æ»¡è¶³åˆ†é…è¦æ±‚ï¼Œ `malloc`ä¾¿ä¼šå°† `unsorted bin` ä¸­çš„ `chunk` éƒ½å½’ç±»æ”¾åˆ° `smallbins`å’Œ `largebins`é‡Œé¢ï¼Œæœ€åæ‰ä¼šå»æŸ¥æ‰¾ `bins` ä¸­çš„ç©ºé—² `chunk`ã€‚
  
--1. å°äº`512B`ï¼Œåˆ™`index = floor(size/8)`ï¼š
--   1. å¦‚æœ`smallbins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
--   2. å¦‚æœ`smallbins[index]`éç©ºï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª`chunk`
--2. å¤§äº`512B`ï¼Œåˆ™`index = 64 + floor((size-512)/64)`ï¼š
--   1. å¦‚æœ`largebins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
--   2. å¦‚æœ`largebins[index]`éç©ºï¼Œæ‰«æé“¾è¡¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äºè¦æ±‚å¤§å°çš„`chunk`ï¼Œå°†æ­¤`chunk`å‰©ä¸‹çš„ç©ºé—´æ”¾å…¥`unsorted bin`ä¸­
--3. `index++`ï¼šä»æ›´å¤§çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚å¤§å°çš„`chunk`ä¸ºæ­¢ï¼Œæ‰¾åˆ°åå°†`chunk`æ‹†åˆ†ï¼Œå¹¶å°†å‰©ä½™çš„åŠ å…¥åˆ°`unsorted_list`ä¸­
++1. å°äº `512B`ï¼Œåˆ™ `index = floor(size/8)`ï¼š
++   1. å¦‚æœ `smallbins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
++   2. å¦‚æœ `smallbins[index]`éç©ºï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª `chunk`
++2. å¤§äº `512B`ï¼Œåˆ™ `index = 64 + floor((size-512)/64)`ï¼š
++   1. å¦‚æœ `largebins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
++   2. å¦‚æœ `largebins[index]`éç©ºï¼Œæ‰«æé“¾è¡¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äºè¦æ±‚å¤§å°çš„ `chunk`ï¼Œå°†æ­¤ `chunk`å‰©ä¸‹çš„ç©ºé—´æ”¾å…¥ `unsorted bin`ä¸­
++3. `index++`ï¼šä»æ›´å¤§çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚å¤§å°çš„ `chunk`ä¸ºæ­¢ï¼Œæ‰¾åˆ°åå°† `chunk`æ‹†åˆ†ï¼Œå¹¶å°†å‰©ä½™çš„åŠ å…¥åˆ° `unsorted_list`ä¸­
  
--å½“`fast bin`å’Œ`bins`éƒ½ä¸èƒ½æ»¡è¶³å†…å­˜éœ€æ±‚æ—¶ï¼Œ`malloc`ä¼šè®¾æ³•åœ¨**`top chunk`**ä¸­åˆ†é…ä¸€å—å†…å­˜ç»™ç”¨æˆ·ï¼Œç”šè‡³`top chunk`éƒ½ä¸èƒ½æ»¡è¶³æ—¶ï¼Œ`malloc`ä¼šä»`mmap`æ¥ç›´æ¥ä½¿ç”¨å†…å­˜æ˜ å°„æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ã€‚
++å½“ `fast bin`å’Œ `bins`éƒ½ä¸èƒ½æ»¡è¶³å†…å­˜éœ€æ±‚æ—¶ï¼Œ`malloc`ä¼šè®¾æ³•åœ¨**`top chunk`**ä¸­åˆ†é…ä¸€å—å†…å­˜ç»™ç”¨æˆ·ï¼Œç”šè‡³ `top chunk`éƒ½ä¸èƒ½æ»¡è¶³æ—¶ï¼Œ`malloc`ä¼šä» `mmap`æ¥ç›´æ¥ä½¿ç”¨å†…å­˜æ˜ å°„æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ã€‚
  
  ### é‡Šæ”¾è¿‡ç¨‹
  
--é€šè¿‡`mmap`åˆ†é…çš„`chunk`åœ¨é‡Šæ”¾æ—¶å°†ç›´æ¥è§£é™¤æ˜ å°„å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚é‡Šæ”¾çš„`chunk`å¦‚æœå’Œ`top chunk`ç›¸é‚»ï¼Œåˆ™å’Œ`top chunk`åˆå¹¶ï¼ˆå¯èƒ½è§¦å‘`top chunk`çš„è°ƒæ•´ï¼‰ï¼Œå¦åˆ™ç›´æ¥æ’å…¥åˆ°`unsorted bin`ä¸­ã€‚
++é€šè¿‡ `mmap`åˆ†é…çš„ `chunk`åœ¨é‡Šæ”¾æ—¶å°†ç›´æ¥è§£é™¤æ˜ å°„å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚é‡Šæ”¾çš„ `chunk`å¦‚æœå’Œ `top chunk`ç›¸é‚»ï¼Œåˆ™å’Œ `top chunk`åˆå¹¶ï¼ˆå¯èƒ½è§¦å‘ `top chunk`çš„è°ƒæ•´ï¼‰ï¼Œå¦åˆ™ç›´æ¥æ’å…¥åˆ° `unsorted bin`ä¸­ã€‚
  
  ## `new` ä¸ `malloc` çš„åŒºåˆ«
  
--|            |         new operator          |      malloc      |
--| :--------: | :---------------------------: | :--------------: |
--|  åˆ†é…å¤§å°  |       è‡ªåŠ¨è®¡ç®—ç±»å‹å¤§å°        |     å‚æ•°æŒ‡å®š     |
--| å¯¹è±¡åˆå§‹åŒ– |     è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ      | ä¸æ”¯æŒè‡ªåŠ¨åˆå§‹åŒ– |
++|            |          new operator          |      malloc      |
++| :--------: | :-----------------------------: | :--------------: |
++|  åˆ†é…å¤§å°  |        è‡ªåŠ¨è®¡ç®—ç±»å‹å¤§å°        |     å‚æ•°æŒ‡å®š     |
++| å¯¹è±¡åˆå§‹åŒ– |      è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ      | ä¸æ”¯æŒè‡ªåŠ¨åˆå§‹åŒ– |
  |  å¼‚å¸¸å¤„ç†  | `bad_alloc`æˆ–è€…æ„é€ å‡½æ•°çš„å¼‚å¸¸ |      ä¸æ”¯æŒ      |
--|   è¿”å›å€¼   |     å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆæˆ–å¼‚å¸¸      | void\*æŒ‡é’ˆæˆ–null |
--|  å†…å­˜è°ƒæ•´  |       å€ŸåŠ©`realloc`å‡½æ•°       |      ä¸æ”¯æŒ      |
++|   è¿”å›å€¼   |      å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆæˆ–å¼‚å¸¸      | void\*æŒ‡é’ˆæˆ–null |
++|  å†…å­˜è°ƒæ•´  |      å€ŸåŠ© `realloc`å‡½æ•°      |      ä¸æ”¯æŒ      |
  
  `realloc`ï¼šå¦‚æœåŸæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´æœ‰è¶³å¤Ÿçš„è¿ç»­ç©ºé—´åˆ™åŸåœ°æ‰©å¤§å¯åˆ†é…çš„å†…å­˜åœ°å€è¿”å›åŸæŒ‡é’ˆï¼Œå¦åˆ™å¯»æ‰¾æ»¡è¶³é•¿åº¦çš„è¿ç»­å†…å­˜ç©ºé—´å¹¶å°†æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´è¿”å›æ–°ç©ºé—´é¦–åœ°å€å¹¶é‡Šæ”¾åŸåœ°å€ç©ºé—´
  
@@@ -673,7 -673,7 +721,7 @@@
  
  + å¯¹äºå«æœ‰è™šå‡½æ•°çš„åŸºç±»ï¼Œå…¶å¯¹è±¡çš„ç©ºé—´çš„æœ€å‰é¢ä¼šå ç”¨ä¸€ä¸ªåœ°å€é•¿åº¦æ¥ä¿å­˜ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨
  + ç¼–è¯‘å™¨åœ¨å¤„ç†éè™šå‡½æ•°æ—¶ï¼Œä¼šå°†å‡½æ•°åœ°å€æˆ–ç›¸å…³ä¿¡æ¯ç›´æ¥ç¼–ç åˆ°äºŒè¿›åˆ¶ä»£ç ä¸­ï¼Œåœ¨äºŒè¿›åˆ¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç›´æ¥è·³è½¬å¯¹åº”çš„ä»£ç æ®µï¼Œè€Œè™šå‡½æ•°åœ¨ç»‘å®šæ—¶ä¸ä¼šæ˜ç¡®ç»‘å®šåˆ°ä¸€ä¸ªå¯æ‰§è¡Œçš„åœ°å€ã€‚
--+ ä¸€ä¸ªåŸºç±»çš„å¤šä¸ªå­ç±»å®ä¾‹åœ¨è°ƒç”¨åŒä¸€å‡½æ•°æ—¶ä¹‹æ‰€ä»¥è¡¨ç°ä¸åŒï¼Œæ˜¯å› ä¸ºç±»çš„æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨è‡ªåŠ¨åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥äº†`this`æŒ‡é’ˆå‚æ•°ï¼Œä¸åŒå¯¹è±¡çš„`this`æŒ‡é’ˆå„ä¸ç›¸åŒï¼Œé€šè¿‡è™šå‡½æ•°è¡¨æœ€ç»ˆç¡®å®šçš„å‡½æ•°åœ°å€ä¹Ÿä¸ç›¸åŒã€‚
+++ ä¸€ä¸ªåŸºç±»çš„å¤šä¸ªå­ç±»å®ä¾‹åœ¨è°ƒç”¨åŒä¸€å‡½æ•°æ—¶ä¹‹æ‰€ä»¥è¡¨ç°ä¸åŒï¼Œæ˜¯å› ä¸ºç±»çš„æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨è‡ªåŠ¨åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥äº† `this`æŒ‡é’ˆå‚æ•°ï¼Œä¸åŒå¯¹è±¡çš„ `this`æŒ‡é’ˆå„ä¸ç›¸åŒï¼Œé€šè¿‡è™šå‡½æ•°è¡¨æœ€ç»ˆç¡®å®šçš„å‡½æ•°åœ°å€ä¹Ÿä¸ç›¸åŒã€‚
  
  #### [å†…å­˜æ¨¡å‹](https://jacktang816.github.io/post/virtualfunction/)
  
@@@ -691,27 -691,27 +739,26 @@@ int main()
  }
  ```
  
--æ¯ä¸ªç±»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè™šå‡½æ•°è¡¨ï¼ˆä¸åŒç¼–è¯‘å™¨å®ç°æœ‰å·®åˆ«ï¼‰ï¼Œå¯¹è±¡ A å®ä¾‹çš„å¤´éƒ¨æŒæœ‰`vtable` æŒ‡é’ˆï¼ˆæŒ‡å‘ä»£ç æ®µä¸­çš„ A ç±»å‹çš„è™šå‡½æ•°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè™šå‡½æ•°èµ·å§‹åœ°å€ï¼‰ï¼Œç´§æ¥ç€æ˜¯ A å¯¹è±¡æŒ‰ç…§å£°æ˜é¡ºåºæ’åˆ—çš„æˆå‘˜å˜é‡ã€‚
++æ¯ä¸ªç±»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè™šå‡½æ•°è¡¨ï¼ˆä¸åŒç¼–è¯‘å™¨å®ç°æœ‰å·®åˆ«ï¼‰ï¼Œå¯¹è±¡ A å®ä¾‹çš„å¤´éƒ¨æŒæœ‰ `vtable` æŒ‡é’ˆï¼ˆæŒ‡å‘ä»£ç æ®µä¸­çš„ A ç±»å‹çš„è™šå‡½æ•°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè™šå‡½æ•°èµ·å§‹åœ°å€ï¼‰ï¼Œç´§æ¥ç€æ˜¯ A å¯¹è±¡æŒ‰ç…§å£°æ˜é¡ºåºæ’åˆ—çš„æˆå‘˜å˜é‡ã€‚
  
  ![](img/lang/vptrLocation.png)
  
  ##### è™šè¡¨
  
--å­˜åœ¨äºåªè¯»æ•°æ®æ®µ`.rodata`ä¸­ï¼Œç”±**è¡¨å¤´å’Œè™šå‡½æ•°è¡¨**ä¸¤éƒ¨åˆ†ç»„æˆï¼š
++å­˜åœ¨äºåªè¯»æ•°æ®æ®µ `.rodata`ä¸­ï¼Œç”±**è¡¨å¤´å’Œè™šå‡½æ•°è¡¨**ä¸¤éƒ¨åˆ†ç»„æˆï¼š
  
--**`typeinfo`**ï¼šå­˜å‚¨äº†ä¸€ä¸ªç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç±»åä»¥åŠçˆ¶ç±»ï¼Œå¯¹äºæ²¡æœ‰çˆ¶ç±»çš„ A æ¥è¯´ï¼Œå½“å‰`tinfo`æ˜¯ `class_type_info` ç±»å‹çš„ï¼‰ï¼Œå…³é”®å­—`typeid`è¿”å›çš„å°±æ˜¯æ­¤å­—æ®µã€‚
++**`typeinfo`**ï¼šå­˜å‚¨äº†ä¸€ä¸ªç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç±»åä»¥åŠçˆ¶ç±»ï¼Œå¯¹äºæ²¡æœ‰çˆ¶ç±»çš„ A æ¥è¯´ï¼Œå½“å‰ `tinfo`æ˜¯ `class_type_info` ç±»å‹çš„ï¼‰ï¼Œå…³é”®å­— `typeid`è¿”å›çš„å°±æ˜¯æ­¤å­—æ®µã€‚
  
  **`offsets`ï¼š**å³ä¸‹å›¾ä¸­çš„ç´«è‰²æ¡†å†…å®¹ï¼Œè¯¥å†…å®¹**ä»…é™äºè™šç»§æ‰¿**çš„æƒ…å½¢ï¼ˆæ— è™šç»§æ‰¿åˆ™æ— æ­¤å†…å®¹ï¼‰
  
  **`offset to top`ï¼š**æŒ‡åˆ°å¯¹è±¡èµ·å§‹åœ°å€çš„åç§»å€¼ï¼Œåªæœ‰å¤šé‡ç»§æ‰¿çš„æƒ…å½¢æ‰æœ‰å¯èƒ½ä¸ä¸º0ï¼Œå•ç»§æ‰¿æˆ–æ— ç»§æ‰¿çš„æƒ…å½¢éƒ½ä¸º0ã€‚
  
--**`RTTI information`ï¼š**æ˜¯ä¸€ä¸ªæŒ‡å‘`typeinfo`å¯¹è±¡çš„æŒ‡é’ˆï¼ˆå³ä¸Šæ–‡æåˆ°çš„`typeinfo`æŒ‡é’ˆï¼‰ï¼Œå®ƒç”¨äºå”¯ä¸€åœ°æ ‡è¯†è¯¥ç±»å‹
++**`RTTI information`ï¼š**æ˜¯ä¸€ä¸ªæŒ‡å‘ `typeinfo`å¯¹è±¡çš„æŒ‡é’ˆï¼ˆå³ä¸Šæ–‡æåˆ°çš„ `typeinfo`æŒ‡é’ˆï¼‰ï¼Œå®ƒç”¨äºå”¯ä¸€åœ°æ ‡è¯†è¯¥ç±»å‹
  
  **`virtual function pointers`**ï¼šå³è™šå‡½æ•°è¡¨ï¼Œæ¯ä¸€ä¸ªè¡¨é¡¹**æŒ‰ç…§è™šå‡½æ•°çš„ç”³æ˜é¡ºåº**è®°å½•äº†ä¸€ä¸ªè™šå‡½æ•°çš„åœ°å€ï¼ˆ**æ¯ä¸ªè™šææ„å‡½æ•°åœ¨è™šå‡½æ•°è¡¨ä¸­ä¼šå­˜åœ¨ä¸¤ä¸ªè¡¨é¡¹**ï¼šåˆ†åˆ«å¯¹åº”æ ˆæ„é€ å’Œå †æ„é€ æ—¶çš„ææ„å‡½æ•°ï¼‰ï¼Œ**`vtable`æŒ‡å‘çš„æ˜¯ç¬¬ä¸€ä¸ªè¡¨é¡¹**ã€‚
  
  ![](img/lang/virtualTable.png)
  
--
  ```c++
  struct Base {
      Base() = default;
@@@ -755,17 -755,17 +802,17 @@@ clang -Xclang -fdump-vtable-layouts -st
  
  ### æ€»ç»“
  
--|               ä¼˜ç‚¹               |           ç¼ºç‚¹           |
--| :------------------------------: | :----------------------: |
--|  **åˆ†ç¦»äº†æ¥å£ä¸å®ç°**ï¼Œæ–¹ä¾¿å¤ç”¨  |     è¿è¡Œæ—¶ç»‘å®šæœ‰å¼€é”€     |
--| ä¾¿äºå¤„ç†åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„å¼‚è´¨å¯¹è±¡ | **ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–è™šå‡½æ•°** |
--|                                  |      ä¸æ–¹ä¾¿ä¿®æ”¹æ¥å£      |
++|                 ä¼˜ç‚¹                 |              ç¼ºç‚¹              |
++| :----------------------------------: | :----------------------------: |
++| **åˆ†ç¦»äº†æ¥å£ä¸å®ç°**ï¼Œæ–¹ä¾¿å¤ç”¨ |        è¿è¡Œæ—¶ç»‘å®šæœ‰å¼€é”€        |
++|   ä¾¿äºå¤„ç†åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„å¼‚è´¨å¯¹è±¡   | **ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–è™šå‡½æ•°** |
++|                                      |         ä¸æ–¹ä¾¿ä¿®æ”¹æ¥å£         |
  
  #### æ€§èƒ½
  
  **å•ç»§æ‰¿ï¼ˆå¼€é”€å¾ˆå°ï¼‰ï¼š**æ—¶é—´ä¸Šä»…ä»…åªæ˜¯å¢åŠ äº†å¾ˆå°‘å‡ æ¬¡å¯»å€çš„è¿‡ç¨‹ï¼Œè€Œä¸”éœ€è¦è·³è½¬çš„åœ°å€éƒ½æ˜¯ä¸éœ€è¦è®¡ç®—çš„ï¼Œå› æ­¤æ—¶é—´ä¸Šå¹¶ä¸ä¼šå¢åŠ å¤šå°‘å¼€é”€ã€‚
  
--**å¤šç»§æ‰¿ï¼š**ç”±äºä¼šæ ¹æ®å¤šä¸ªçˆ¶ç±»ç”Ÿæˆå¤šä¸ª`vptr`ï¼Œåœ¨å¯¹è±¡é‡Œä¸ºå¯»æ‰¾ `vptr` è€Œè¿›è¡Œçš„åç§»é‡è®¡ç®—ä¼šå˜å¾—å¤æ‚ä¸€äº›ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯è™šå‡½æ•°çš„æ€§èƒ½ç“¶é¢ˆã€‚**è™šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„ä»£ä»·ä¸»è¦æ˜¯è™šå‡½æ•°ä¸èƒ½æ˜¯å†…è”å‡½æ•°ï¼ˆä¸èƒ½è¿›è¡Œå†…è”å±•å¼€ï¼‰**
++**å¤šç»§æ‰¿ï¼š**ç”±äºä¼šæ ¹æ®å¤šä¸ªçˆ¶ç±»ç”Ÿæˆå¤šä¸ª `vptr`ï¼Œåœ¨å¯¹è±¡é‡Œä¸ºå¯»æ‰¾ `vptr` è€Œè¿›è¡Œçš„åç§»é‡è®¡ç®—ä¼šå˜å¾—å¤æ‚ä¸€äº›ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯è™šå‡½æ•°çš„æ€§èƒ½ç“¶é¢ˆã€‚**è™šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„ä»£ä»·ä¸»è¦æ˜¯è™šå‡½æ•°ä¸èƒ½æ˜¯å†…è”å‡½æ•°ï¼ˆä¸èƒ½è¿›è¡Œå†…è”å±•å¼€ï¼‰**
  
  **ç¼–è¯‘å™¨ä¼šç»™æ¯ä¸€ä¸ªåŒ…å«è™šå‡½æ•°æˆ–ç»§æ‰¿äº†è™šå‡½æ•°çš„ç±»è‡ªåŠ¨å»ºç«‹ä¸€ä¸ªè™šå‡½æ•°è¡¨**ï¼Œæ‰€ä»¥è™šå‡½æ•°çš„ä¸€ä¸ªä»£ä»·å°±æ˜¯ä¼šå¢åŠ ç±»çš„ä½“ç§¯ã€‚**å¦‚æœå­˜åœ¨å¤§é‡çš„å­ç±»ç»§æ‰¿ï¼Œä¸”é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°æ¥å£åªå æ€»æ•°çš„ä¸€å°éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå¤§é‡åœ°å€ç©ºé—´æµªè´¹ã€‚**
  
@@@ -778,11 -778,11 +825,11 @@@
  + å¯¹äºç›¸å…³çš„å¯¹è±¡ç±»å‹ï¼Œç›´æ¥å®ç°å®ƒä»¬å„è‡ªçš„å®šä¹‰ï¼Œä¸éœ€è¦å…±æœ‰åŸºç±»ï¼Œç”šè‡³å¯ä»¥æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚åªéœ€è¦å„ä¸ªå…·ä½“ç±»çš„å®ç°ä¸­è¦æ±‚ç›¸åŒçš„æ¥å£å£°æ˜ï¼Œè¿™é‡Œçš„æ¥å£ç§°ä¹‹ä¸ºéšå¼æ¥å£ã€‚å®¢æˆ·ç«¯æŠŠæ“ä½œè¿™äº›å¯¹è±¡çš„å‡½æ•°å®šä¹‰ä¸ºæ¨¡æ¿ï¼Œå½“éœ€è¦æ“ä½œä»€ä¹ˆç±»å‹çš„å¯¹è±¡æ—¶ï¼Œç›´æ¥å¯¹æ¨¡æ¿æŒ‡å®šè¯¥ç±»å‹å®å‚å³å¯ï¼ˆæˆ–é€šè¿‡å®å‚æ¼”ç»è·å¾—ï¼‰ã€‚
  + ç³»ç»Ÿåœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šç¨‹åºå°†è¦æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚
  
--|           ä¼˜ç‚¹           |                             ç¼ºç‚¹                             |
--| :----------------------: | :----------------------------------------------------------: |
--|      æ–¹ä¾¿äº†æ³›å‹ç¼–ç¨‹      |            æ¨¡æ¿å®ç°ï¼šä»£ç è†¨èƒ€ã€ç¼–è¯‘è€—æ—¶ã€è°ƒè¯•å›°éš¾            |
++|           ä¼˜ç‚¹           |                                  ç¼ºç‚¹                                  |
++| :----------------------: | :--------------------------------------------------------------------: |
++|      æ–¹ä¾¿äº†æ³›å‹ç¼–ç¨‹      |                 æ¨¡æ¿å®ç°ï¼šä»£ç è†¨èƒ€ã€ç¼–è¯‘è€—æ—¶ã€è°ƒè¯•å›°éš¾                 |
  |  æ•ˆç‡é«˜ï¼šç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–  | ä¸èƒ½å¤„ç†å¼‚è´¨å¯¹è±¡ï¼ˆå­˜å‚¨ã€æŒ‡å‘ç±»å‹ä¸ä¸€è‡´çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚åŸºç±»ä¸‹çš„å‡ ä¸ªå­ç±»ï¼‰ |
--| å¯ä»¥é€šè¿‡ç‰¹åŒ–å¤„ç†ç‰¹æ®Šç±»å‹ |                                                              |
++| å¯ä»¥é€šè¿‡ç‰¹åŒ–å¤„ç†ç‰¹æ®Šç±»å‹ |                                                                        |
  
  # [æ™ºèƒ½æŒ‡é’ˆ](https://www.cnblogs.com/ChinaHook/p/7684268.html)
  
@@@ -790,17 -790,17 +837,17 @@@
  2. è®¾è®¡æ€æƒ³ï¼š`RAII(Resource Acquisition is Initialization)`ä½¿ç”¨ç±»æ¥ç®¡ç†ï¼ˆè€Œéæ‹¥æœ‰ï¼‰èµ„æºï¼Œå°†èµ„æºå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ„é€ å‡½æ•°ä¸­ç”³è¯·åˆ†é…èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æºã€‚
  3. å®ç°åŸåˆ™ï¼šæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ä½œä¸ºæ™®é€šå˜é‡è¢«åˆ†é…åœ¨æ ˆç©ºé—´ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸæˆ–è€…å…¶å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°æ¥ç®¡ç†å¯¹è±¡æ‰€æŒæœ‰çš„èµ„æºã€‚
  
--ä¸æ™®é€šæŒ‡é’ˆç›¸æ¯”ï¼Œæ™ºèƒ½æŒ‡é’ˆä»…æä¾›`->` ã€`*`å’Œ`==`è¿ç®—ç¬¦ï¼Œæ²¡æœ‰`+`ã€`-`ã€`++`ã€`--`ã€`[]`ç­‰è¿ç®—ç¬¦ã€‚å¯¹äºæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ”¯æŒåŸç”ŸæŒ‡é’ˆçš„åˆ¤æ–­æ–¹å¼ï¼Œä¹Ÿæ”¯æŒé‡è½½`operator bool()`çš„åˆ¤ç©ºæ–¹å¼ã€‚
++ä¸æ™®é€šæŒ‡é’ˆç›¸æ¯”ï¼Œæ™ºèƒ½æŒ‡é’ˆä»…æä¾› `->` ã€`*`å’Œ `==`è¿ç®—ç¬¦ï¼Œæ²¡æœ‰ `+`ã€`-`ã€`++`ã€`--`ã€`[]`ç­‰è¿ç®—ç¬¦ã€‚å¯¹äºæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ”¯æŒåŸç”ŸæŒ‡é’ˆçš„åˆ¤æ–­æ–¹å¼ï¼Œä¹Ÿæ”¯æŒé‡è½½ `operator bool()`çš„åˆ¤ç©ºæ–¹å¼ã€‚
  
  ## `auto_ptr`(å·²å¼ƒç”¨)
  
--C++98çš„æ–¹æ¡ˆï¼ŒC++11å·²ç»æŠ›å¼ƒã€‚é‡‡ç”¨**æ’å®ƒæ‰€æœ‰æƒ**æ¨¡å¼ï¼Œå½“å‡ºç°è¯­æ³•ä¸­å…è®¸çš„æ‹·è´æ„é€ å’Œèµ‹å€¼æ—¶ï¼Œèµ„æºæ‰€æœ‰æƒä¼šç”±æºå¯¹è±¡è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œæ­¤æ—¶å†ä½¿ç”¨æºå¯¹è±¡æ—¶ä¼šç©ºå¼•ç”¨ï¼Œä¸ºäº†è§£å†³é—®é¢˜è®¾è®¡äº†`unique_ptr`ã€‚æ­¤å¤–`auto_ptr`åœ¨ææ„ä¸­ä½¿ç”¨çš„`delete`ä¹Ÿä¸èƒ½ç®¡ç†åŠ¨æ€å¼€è¾Ÿçš„æ•°ç»„ã€‚
++C++98çš„æ–¹æ¡ˆï¼ŒC++11å·²ç»æŠ›å¼ƒã€‚é‡‡ç”¨**æ’å®ƒæ‰€æœ‰æƒ**æ¨¡å¼ï¼Œå½“å‡ºç°è¯­æ³•ä¸­å…è®¸çš„æ‹·è´æ„é€ å’Œèµ‹å€¼æ—¶ï¼Œèµ„æºæ‰€æœ‰æƒä¼šç”±æºå¯¹è±¡è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œæ­¤æ—¶å†ä½¿ç”¨æºå¯¹è±¡æ—¶ä¼šç©ºå¼•ç”¨ï¼Œä¸ºäº†è§£å†³é—®é¢˜è®¾è®¡äº† `unique_ptr`ã€‚æ­¤å¤– `auto_ptr`åœ¨ææ„ä¸­ä½¿ç”¨çš„ `delete`ä¹Ÿä¸èƒ½ç®¡ç†åŠ¨æ€å¼€è¾Ÿçš„æ•°ç»„ã€‚
  
  ## `unique_ptr(boost::scoped_ptr)`
  
--**ç‹¬å èµ„æºæ‰€æœ‰æƒ**ï¼Œå®ç°ç‹¬å å¼æ‹¥æœ‰æˆ–ä¸¥æ ¼æ‹¥æœ‰æ¦‚å¿µï¼Œä¿è¯åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆåªå…è®¸ç”¨å³å€¼è¿›è¡Œèµ‹å€¼ï¼Œåœ¨è¯­ä¹‰ä¸Šç¦æ­¢äº†æ‹·è´æ„é€ å’Œèµ‹å€¼è¿ç®—ï¼šåº“ä¸­å°†å‡½æ•°ç”³æ˜ä¸º`private`ä¸”ä¸å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼‰ï¼Œä¸å…è®¸å…¶ä»–çš„æ™ºèƒ½æŒ‡é’ˆå…±äº«å…¶å†…éƒ¨çš„æŒ‡é’ˆã€‚
++**ç‹¬å èµ„æºæ‰€æœ‰æƒ**ï¼Œå®ç°ç‹¬å å¼æ‹¥æœ‰æˆ–ä¸¥æ ¼æ‹¥æœ‰æ¦‚å¿µï¼Œä¿è¯åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆåªå…è®¸ç”¨å³å€¼è¿›è¡Œèµ‹å€¼ï¼Œåœ¨è¯­ä¹‰ä¸Šç¦æ­¢äº†æ‹·è´æ„é€ å’Œèµ‹å€¼è¿ç®—ï¼šåº“ä¸­å°†å‡½æ•°ç”³æ˜ä¸º `private`ä¸”ä¸å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼‰ï¼Œä¸å…è®¸å…¶ä»–çš„æ™ºèƒ½æŒ‡é’ˆå…±äº«å…¶å†…éƒ¨çš„æŒ‡é’ˆã€‚
  
--`unique_ptr`æä¾›äº†å¯¹**æ•°ç»„ç®¡ç†**çš„æ”¯æŒï¼Œä¸”åŒæ ·**å¯ä»¥æŒ‡å®šåˆ é™¤å™¨**ï¼ˆæŒ‡å®šå½¢å¼å’Œ`shared_ptr`ä¸åŒï¼‰ã€‚
++`unique_ptr`æä¾›äº†å¯¹**æ•°ç»„ç®¡ç†**çš„æ”¯æŒï¼Œä¸”åŒæ ·**å¯ä»¥æŒ‡å®šåˆ é™¤å™¨**ï¼ˆæŒ‡å®šå½¢å¼å’Œ `shared_ptr`ä¸åŒï¼‰ã€‚
  
  ```c++
  //ç®¡ç†æ•°ç»„
@@@ -822,32 -822,32 +869,32 @@@ unique_ptr<int, void(*)(int *)> ptr2(ne
  
  #### å¼•ç”¨è®¡æ•°
  
--å¼•ç”¨è®¡æ•°`__shared_count`å†…éƒ¨çš„æ‹¥æœ‰`use_count`å’Œ`weak_count`ä¸¤ä¸ªå¼•ç”¨è®¡æ•°
++å¼•ç”¨è®¡æ•° `__shared_count`å†…éƒ¨çš„æ‹¥æœ‰ `use_count`å’Œ `weak_count`ä¸¤ä¸ªå¼•ç”¨è®¡æ•°
  
--|     æˆå‘˜     |             ä½œç”¨             |
--| :----------: | :--------------------------: |
--| `use_count`  | æ ‡è®°**è¢«ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ |
++|      æˆå‘˜      |                ä½œç”¨                |
++| :------------: | :--------------------------------: |
++| `use_count` | æ ‡è®°**è¢«ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ |
  | `weak_count` |  æ ‡è®°**ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ  |
  
  ### ç”¨æ³•
  
--**æ„é€ ï¼š**å¯ä»¥é€šè¿‡ä¼ å…¥`operator new`å¾—åˆ°çš„æ™®é€šæŒ‡é’ˆï¼ˆ ä¸èƒ½æ˜¯æ ˆæŒ‡é’ˆï¼Œå› ä¸ºææ„æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯`delete`ï¼‰ã€`auto_ptrã€unique_ptrã€weak_ptr`æ¥æ„é€ ï¼ˆ**æ™ºèƒ½æŒ‡é’ˆä¸æ”¯æŒç›´æ¥ä½¿ç”¨è£¸æŒ‡é’ˆèµ‹å€¼**ï¼‰ã€‚æ¨èä½¿ç”¨`make_shared<>()`æ„é€ `shared_ptr`ï¼Œå…¶ä¼ é€’çš„**å‚æ•°**å¿…é¡»èƒ½å¤Ÿä¸è¯¥ç±»å‹çš„æŸä¸ª**æ„é€ å‡½æ•°ç›¸åŒ¹é…**ã€‚
++**æ„é€ ï¼š**å¯ä»¥é€šè¿‡ä¼ å…¥ `operator new`å¾—åˆ°çš„æ™®é€šæŒ‡é’ˆï¼ˆ ä¸èƒ½æ˜¯æ ˆæŒ‡é’ˆï¼Œå› ä¸ºææ„æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯ `delete`ï¼‰ã€`auto_ptrã€unique_ptrã€weak_ptr`æ¥æ„é€ ï¼ˆ**æ™ºèƒ½æŒ‡é’ˆä¸æ”¯æŒç›´æ¥ä½¿ç”¨è£¸æŒ‡é’ˆèµ‹å€¼**ï¼‰ã€‚æ¨èä½¿ç”¨ `make_shared<>()`æ„é€  `shared_ptr`ï¼Œå…¶ä¼ é€’çš„**å‚æ•°**å¿…é¡»èƒ½å¤Ÿä¸è¯¥ç±»å‹çš„æŸä¸ª**æ„é€ å‡½æ•°ç›¸åŒ¹é…**ã€‚
  
--**ä¿®æ”¹ï¼š**`reset()`åŒ…å«ä¸¤ä¸ªæ“ä½œã€‚å½“æ™ºèƒ½æŒ‡é’ˆä¸­æœ‰å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨`reset()`ä¼šä½¿å¼•ç”¨è®¡æ•°å‡1ã€‚å½“è°ƒç”¨`reset(new  xxx()))`é‡æ–°èµ‹å€¼æ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆé¦–å…ˆæ˜¯ç”Ÿæˆæ–°å¯¹è±¡ï¼Œç„¶åå°†åŸå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼ˆå¦‚æœåŸå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåˆ™ææ„æ—§å¯¹è±¡ï¼‰ï¼Œæœ€åå°†æ–°å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™æ™ºèƒ½æŒ‡é’ˆä¿ç®¡ã€‚
++**ä¿®æ”¹ï¼š**`reset()`åŒ…å«ä¸¤ä¸ªæ“ä½œã€‚å½“æ™ºèƒ½æŒ‡é’ˆä¸­æœ‰å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨ `reset()`ä¼šä½¿å¼•ç”¨è®¡æ•°å‡1ã€‚å½“è°ƒç”¨ `reset(new  xxx()))`é‡æ–°èµ‹å€¼æ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆé¦–å…ˆæ˜¯ç”Ÿæˆæ–°å¯¹è±¡ï¼Œç„¶åå°†åŸå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼ˆå¦‚æœåŸå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåˆ™ææ„æ—§å¯¹è±¡ï¼‰ï¼Œæœ€åå°†æ–°å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™æ™ºèƒ½æŒ‡é’ˆä¿ç®¡ã€‚
  
--**åˆ é™¤ï¼š**è°ƒç”¨`release()`æ—¶å½“å‰æŒ‡é’ˆä¼šè®¡æ•°å‡ä¸€ï¼Œè®¡æ•°ç­‰äº0æ—¶é‡Šæ”¾èµ„æºï¼Œæ”¯æŒ**è‡ªå®šä¹‰åˆ é™¤å™¨**ã€‚
++**åˆ é™¤ï¼š**è°ƒç”¨ `release()`æ—¶å½“å‰æŒ‡é’ˆä¼šè®¡æ•°å‡ä¸€ï¼Œè®¡æ•°ç­‰äº0æ—¶é‡Šæ”¾èµ„æºï¼Œæ”¯æŒ**è‡ªå®šä¹‰åˆ é™¤å™¨**ã€‚
  
  #### æ³¨æ„äº‹é¡¹
  
--1. ä¸è¦ç”¨ä¸€ä¸ªåŸå§‹æŒ‡é’ˆåˆå§‹åŒ–å¤šä¸ª`shared_ptr`ï¼ŒåŸå› åœ¨äºä¼šé€ æˆäºŒæ¬¡é”€æ¯
--2. **ä¸è¦åœ¨å‡½æ•°å®å‚ä¸­åˆ›å»º`shared_ptr`**ã€‚å› ä¸ºC++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹æ˜¯ä¸åŒçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆåˆ›å»ºå¥½ï¼Œç„¶åå†ä¼ å…¥ã€‚
--3. ç¦æ­¢é€šè¿‡å°†`this`ä»¥`shared_ptr`è¿”å›ï¼Œå› ä¸º`this`æŒ‡é’ˆæœ¬è´¨æ˜¯ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´é‡å¤ææ„ã€‚è¿”å›æœ¬ç±»æŒ‡é’ˆåº”å½“ç»§æ‰¿`std::enable_shared_from_this<>`åä½¿ç”¨`shared_from_this()`ã€‚
--4. é¿å…å¾ªç¯å¼•ç”¨ï¼Œåº”å½“ä½¿ç”¨`weak_ptr`ã€‚
--5. **é¿å…ä½¿ç”¨`get`è¿”å›çš„åŸç”ŸæŒ‡é’ˆ**ï¼Œå› ä¸ºå½“æœ€åä¸€ä¸ªå¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆé”€æ¯åï¼Œ`get`çš„æŒ‡é’ˆå°±å˜ä¸ºæ— æ•ˆäº†ã€‚
++1. ä¸è¦ç”¨ä¸€ä¸ªåŸå§‹æŒ‡é’ˆåˆå§‹åŒ–å¤šä¸ª `shared_ptr`ï¼ŒåŸå› åœ¨äºä¼šé€ æˆäºŒæ¬¡é”€æ¯
++2. **ä¸è¦åœ¨å‡½æ•°å®å‚ä¸­åˆ›å»º `shared_ptr`**ã€‚å› ä¸ºC++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹æ˜¯ä¸åŒçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆåˆ›å»ºå¥½ï¼Œç„¶åå†ä¼ å…¥ã€‚
++3. ç¦æ­¢é€šè¿‡å°† `this`ä»¥ `shared_ptr`è¿”å›ï¼Œå› ä¸º `this`æŒ‡é’ˆæœ¬è´¨æ˜¯ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´é‡å¤ææ„ã€‚è¿”å›æœ¬ç±»æŒ‡é’ˆåº”å½“ç»§æ‰¿ `std::enable_shared_from_this<>`åä½¿ç”¨ `shared_from_this()`ã€‚
++4. é¿å…å¾ªç¯å¼•ç”¨ï¼Œåº”å½“ä½¿ç”¨ `weak_ptr`ã€‚
++5. **é¿å…ä½¿ç”¨ `get`è¿”å›çš„åŸç”ŸæŒ‡é’ˆ**ï¼Œå› ä¸ºå½“æœ€åä¸€ä¸ªå¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆé”€æ¯åï¼Œ`get`çš„æŒ‡é’ˆå°±å˜ä¸ºæ— æ•ˆäº†ã€‚
  
  ### [åˆ é™¤å™¨](https://blog.51cto.com/u_11142019/1846847)
  
--æ™ºèƒ½æŒ‡é’ˆæ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼ˆåŠ¨æ€å†…å­˜ã€æ–‡ä»¶ç­‰ï¼‰çš„ï¼Œå› æ­¤**å¯ä»¥ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†æ–‡ä»¶ç­‰å…¶ä»–èµ„æº**ï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨æ™ºèƒ½æŒ‡é’ˆé»˜è®¤çš„åˆ é™¤å™¨ï¼Œå› ä¸ºè¦ç®¡ç†æ–‡ä»¶çš„è¯æœ€åæ˜¯`fclose`è€Œä¸æ˜¯`delete`ï¼Œæ‰€ä»¥å°±å¿…é¡»è‡ªå·±å®šåˆ¶ä¸€ä¸ªåˆ é™¤å™¨ã€‚
++æ™ºèƒ½æŒ‡é’ˆæ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼ˆåŠ¨æ€å†…å­˜ã€æ–‡ä»¶ç­‰ï¼‰çš„ï¼Œå› æ­¤**å¯ä»¥ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†æ–‡ä»¶ç­‰å…¶ä»–èµ„æº**ï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨æ™ºèƒ½æŒ‡é’ˆé»˜è®¤çš„åˆ é™¤å™¨ï¼Œå› ä¸ºè¦ç®¡ç†æ–‡ä»¶çš„è¯æœ€åæ˜¯ `fclose`è€Œä¸æ˜¯ `delete`ï¼Œæ‰€ä»¥å°±å¿…é¡»è‡ªå·±å®šåˆ¶ä¸€ä¸ªåˆ é™¤å™¨ã€‚
  
  ```c++
  //è‡ªå®šä¹‰å†…å­˜ç®¡ç†æ—¶çš„åˆ é™¤å™¨
@@@ -892,9 -892,9 +939,9 @@@ struct B{shared_ptr<A> bpa}
  
  #### `weak_ptr`
  
--`weak_ptr`æŒ‡å‘ä¸€ä¸ª`shared_ptr`ç®¡ç†çš„å¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡è¿›è¡Œå†…å­˜ç®¡ç†çš„æ˜¯å¼ºå¼•ç”¨çš„`shared_ptr`ï¼Œ**`wake_ptr`ä½œä¸º`shared_ptr`çš„è§‚å¯Ÿè€…**ï¼Œå…¶æ„é€ å’Œææ„ä¸ä¼šæ”¹å˜å¼·å¼•ç”¨çš„è®¡æ•°ï¼Œå’Œ`shared_ptr`é…åˆç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚
++`weak_ptr`æŒ‡å‘ä¸€ä¸ª `shared_ptr`ç®¡ç†çš„å¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡è¿›è¡Œå†…å­˜ç®¡ç†çš„æ˜¯å¼ºå¼•ç”¨çš„ `shared_ptr`ï¼Œ**`wake_ptr`ä½œä¸º `shared_ptr`çš„è§‚å¯Ÿè€…**ï¼Œå…¶æ„é€ å’Œææ„ä¸ä¼šæ”¹å˜å¼·å¼•ç”¨çš„è®¡æ•°ï¼Œå’Œ `shared_ptr`é…åˆç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚
  
--ä½†ç”±äº`wake_ptr`æ²¡æœ‰é‡è½½`operator *`å’Œ`operator ->`ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨å…¶è®¿é—®æŒ‡å‘å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨`lock()`æ–¹æ³•ä»`wake_ptr`å¾—åˆ°`shared_ptr`åæ‰å¯ä»¥è®¿é—®èµ„æºã€‚åŒæ—¶ç”±äº`weak_ptr`ä¸æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œäºæ˜¯**å­˜åœ¨`weak_ptr`æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾è€Œ`weak_ptr`ä»å­˜åœ¨çš„æƒ…å†µ**ï¼Œæ­¤æ—¶`lock()`ä¼šè¿”å›ä¸€ä¸ªç©ºçš„`shared_ptr<>`å¯¹è±¡ï¼Œæ­¤å¤–`weak_ptr`è¿˜æä¾›äº†**`expired()`**æ¥åˆ¤æ–­æ‰€æŒ‡å¯¹è±¡æ˜¯å¦å·²ç»è¢«é”€æ¯ã€‚
++ä½†ç”±äº `wake_ptr`æ²¡æœ‰é‡è½½ `operator *`å’Œ `operator ->`ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨å…¶è®¿é—®æŒ‡å‘å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ `lock()`æ–¹æ³•ä» `wake_ptr`å¾—åˆ° `shared_ptr`åæ‰å¯ä»¥è®¿é—®èµ„æºã€‚åŒæ—¶ç”±äº `weak_ptr`ä¸æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œäºæ˜¯**å­˜åœ¨ `weak_ptr`æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾è€Œ `weak_ptr`ä»å­˜åœ¨çš„æƒ…å†µ**ï¼Œæ­¤æ—¶ `lock()`ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ `shared_ptr<>`å¯¹è±¡ï¼Œæ­¤å¤– `weak_ptr`è¿˜æä¾›äº†**`expired()`**æ¥åˆ¤æ–­æ‰€æŒ‡å¯¹è±¡æ˜¯å¦å·²ç»è¢«é”€æ¯ã€‚
  
  ```c++
  struct B;
@@@ -918,17 -918,17 +965,16 @@@ struct B{shared_ptr<A> bpa}
  
  ## å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ
  
--
--5. `scoped_arry`ï¼šåŠŸèƒ½å’Œ`scoped_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº†`operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
--6. `shared_arry`ï¼šåŠŸèƒ½å’Œ`shared_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº†`operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
++5. `scoped_arry`ï¼šåŠŸèƒ½å’Œ `scoped_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº† `operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
++6. `shared_arry`ï¼šåŠŸèƒ½å’Œ `shared_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº† `operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
  
  # è¡¨è¾¾å¼
  
--C++è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œæ“ä½œæ•°çš„ç»„æˆçš„åºåˆ—ï¼Œæ¯ä¸ªè¡¨è¾¾å¼å¯ä»¥å®ç°è®¡ç®—æ•°å€¼ã€æŒ‡æ˜æ•°æ®å¯¹è±¡æˆ–å‡½æ•°ã€äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆè¿è¡Œæ—¶å¯¹æ•°æ®å¯¹è±¡æˆ–æ–‡ä»¶çš„ä¿®æ”¹ï¼‰ç­‰ä¸€ä¸ªæˆ–å¤šä¸ªä½œç”¨ã€‚æ¯ä¸ªè¡¨è¾¾å¼æ±‚å€¼å°†å¾—åˆ°ä¸€ä¸ªç»“æœ`result`ï¼Œè¿™ä¸ªç»“æœæœ‰**ç±»å‹ï¼ˆtypeï¼‰å’Œå€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰**ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„å±æ€§ã€‚
++C++è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œæ“ä½œæ•°çš„ç»„æˆçš„åºåˆ—ï¼Œæ¯ä¸ªè¡¨è¾¾å¼å¯ä»¥å®ç°è®¡ç®—æ•°å€¼ã€æŒ‡æ˜æ•°æ®å¯¹è±¡æˆ–å‡½æ•°ã€äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆè¿è¡Œæ—¶å¯¹æ•°æ®å¯¹è±¡æˆ–æ–‡ä»¶çš„ä¿®æ”¹ï¼‰ç­‰ä¸€ä¸ªæˆ–å¤šä¸ªä½œç”¨ã€‚æ¯ä¸ªè¡¨è¾¾å¼æ±‚å€¼å°†å¾—åˆ°ä¸€ä¸ªç»“æœ `result`ï¼Œè¿™ä¸ªç»“æœæœ‰**ç±»å‹ï¼ˆtypeï¼‰å’Œå€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰**ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„å±æ€§ã€‚
  
  ## å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰
  
--å·¦å€¼ï¼ˆ`lvalue`ï¼‰å’Œå³å€¼ï¼ˆ`rvalue`ï¼‰è¿™ä¸¤ä¸ªæœ¯è¯­æºäºC++çš„ç¥–å…ˆè¯­è¨€[CPL](https://en.wikipedia.org/wiki/CPL_(programming_language))ã€‚åœ¨åæ¥çš„å‘å±•ä¸­ï¼Œ**`lvalue`ä»£è¡¨äº†`locator value`å¯¹åº”äº†å…·æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œå³å€¼ä»…ä»…æ˜¯ä¸´æ—¶ä½¿ç”¨çš„å€¼**ã€‚C++ä¸­çš„å€¼ç±»åˆ«ä¸»è¦ä»å…·åå’Œå¯ç§»åŠ¨æ€§ä¸¤æ–¹é¢åˆ’åˆ†ï¼Œç”±ä¸¤ä¸ªæ–¹é¢æ„æˆä¸‰ç§åŸå§‹å€¼ç±»åˆ«ï¼ˆæœ‰ä¸€ç§ç»„åˆä¸å­˜åœ¨ï¼‰ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å±äºä¸‰ç§å€¼ç±»åˆ«ï¼ˆ`prvalueï¼Œxvalueï¼Œlvalue`ï¼‰ä¸­çš„ä¸€ç§ï¼Œå€¼ç±»åˆ«ä¼šå½±å“è¡¨è¾¾å¼çš„å«ä¹‰ã€å½±å“å‡½æ•°çš„é‡è½½ï¼ˆå³å€¼å¼•ç”¨å’Œ`const`å·¦å€¼å¼•ç”¨æ—¶ï¼‰ã€‚
++å·¦å€¼ï¼ˆ`lvalue`ï¼‰å’Œå³å€¼ï¼ˆ`rvalue`ï¼‰è¿™ä¸¤ä¸ªæœ¯è¯­æºäºC++çš„ç¥–å…ˆè¯­è¨€[CPL](https://en.wikipedia.org/wiki/CPL_(programming_language))ã€‚åœ¨åæ¥çš„å‘å±•ä¸­ï¼Œ**`lvalue`ä»£è¡¨äº† `locator value`å¯¹åº”äº†å…·æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œå³å€¼ä»…ä»…æ˜¯ä¸´æ—¶ä½¿ç”¨çš„å€¼**ã€‚C++ä¸­çš„å€¼ç±»åˆ«ä¸»è¦ä»å…·åå’Œå¯ç§»åŠ¨æ€§ä¸¤æ–¹é¢åˆ’åˆ†ï¼Œç”±ä¸¤ä¸ªæ–¹é¢æ„æˆä¸‰ç§åŸå§‹å€¼ç±»åˆ«ï¼ˆæœ‰ä¸€ç§ç»„åˆä¸å­˜åœ¨ï¼‰ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å±äºä¸‰ç§å€¼ç±»åˆ«ï¼ˆ`prvalueï¼Œxvalueï¼Œlvalue`ï¼‰ä¸­çš„ä¸€ç§ï¼Œå€¼ç±»åˆ«ä¼šå½±å“è¡¨è¾¾å¼çš„å«ä¹‰ã€å½±å“å‡½æ•°çš„é‡è½½ï¼ˆå³å€¼å¼•ç”¨å’Œ `const`å·¦å€¼å¼•ç”¨æ—¶ï¼‰ã€‚
  
  **å…·åï¼ˆidentityï¼‰**ï¼šå¯ä»¥ç¡®å®šè¡¨è¾¾å¼æ˜¯å¦ä¸å¦ä¸€è¡¨è¾¾å¼æŒ‡ä»£åŒä¸€å®ä½“ã€‚
  
@@@ -936,22 -936,22 +982,22 @@@
  
  ### ä¸¤ç§æ··åˆç±»åˆ«
  
--**`glvalue`ï¼ˆæ³›å·¦å€¼ï¼‰**ï¼šå¯ä»¥è‡ªåŠ¨æ”¾å¼ƒèº«ä»½è½¬æ¢æˆ`xvalue`ï¼›**æ”¯æŒå¤šæ€**ï¼ˆåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ä¸ä¸€æ ·ï¼Œå¦‚æŒ‡å‘å­ç±»çš„çˆ¶ç±»æŒ‡é’ˆï¼‰ï¼›æ”¯æŒè¡¨è¾¾å¼å…è®¸ä¸‹çš„**ä¸å®Œæ•´ç±»å‹**ï¼ˆå¦‚ç”±å‰ç½®å£°æ˜ä½†æœªå®šä¹‰çš„ç±»ç±»å‹ï¼‰ã€‚
++**`glvalue`ï¼ˆæ³›å·¦å€¼ï¼‰**ï¼šå¯ä»¥è‡ªåŠ¨æ”¾å¼ƒèº«ä»½è½¬æ¢æˆ `xvalue`ï¼›**æ”¯æŒå¤šæ€**ï¼ˆåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ä¸ä¸€æ ·ï¼Œå¦‚æŒ‡å‘å­ç±»çš„çˆ¶ç±»æŒ‡é’ˆï¼‰ï¼›æ”¯æŒè¡¨è¾¾å¼å…è®¸ä¸‹çš„**ä¸å®Œæ•´ç±»å‹**ï¼ˆå¦‚ç”±å‰ç½®å£°æ˜ä½†æœªå®šä¹‰çš„ç±»ç±»å‹ï¼‰ã€‚
  
--**`rvalue`ï¼ˆå³å€¼ï¼‰**ï¼šä¸æ”¯æŒå¯¹å…¶å–å€å’Œä»»ä½•æ–¹å¼çš„èµ‹å€¼ï¼›å¯ä»¥ç”¨æ¥åˆå§‹åŒ–å³å€¼å¼•ç”¨å’Œ**`const`å·¦å€¼å¼•ç”¨**ï¼›å¯ä»¥å½±å“å‡½æ•°é‡è½½ï¼ˆä½œä¸ºå®å‚æ—¶**ä¼˜å…ˆåŒ¹é…å³å€¼å¼•ç”¨çš„å½¢å‚**è€Œé`const`å·¦å€¼å¼•ç”¨å½¢å‚ï¼‰ã€‚
++**`rvalue`ï¼ˆå³å€¼ï¼‰**ï¼šä¸æ”¯æŒå¯¹å…¶å–å€å’Œä»»ä½•æ–¹å¼çš„èµ‹å€¼ï¼›å¯ä»¥ç”¨æ¥åˆå§‹åŒ–å³å€¼å¼•ç”¨å’Œ**`const`å·¦å€¼å¼•ç”¨**ï¼›å¯ä»¥å½±å“å‡½æ•°é‡è½½ï¼ˆä½œä¸ºå®å‚æ—¶**ä¼˜å…ˆåŒ¹é…å³å€¼å¼•ç”¨çš„å½¢å‚**è€Œé `const`å·¦å€¼å¼•ç”¨å½¢å‚ï¼‰ã€‚
  
  ![äº”ç§è¡¨è¾¾å¼å€¼ç±»åˆ«](./img/lang/value_cat.png)
  
--|                        | æ‹¥æœ‰èº«ä»½ï¼ˆ`glvalue`ï¼‰ | ä¸æ‹¥æœ‰èº«ä»½ |
--| :--------------------: | :-------------------: | :--------: |
--| **å¯ç§»åŠ¨ï¼ˆ`rvalue`ï¼‰** |       `xvalue`        | `prvalue`  |
--|      **ä¸å¯ç§»åŠ¨**      |       `lvalue`        |   ä¸å­˜åœ¨   |
++|                                | æ‹¥æœ‰èº«ä»½ï¼ˆ`glvalue`ï¼‰ | ä¸æ‹¥æœ‰èº«ä»½ |
++| :----------------------------: | :---------------------: | :---------: |
++| **å¯ç§»åŠ¨ï¼ˆ`rvalue`ï¼‰** |       `xvalue`       | `prvalue` |
++|       **ä¸å¯ç§»åŠ¨**       |       `lvalue`       |   ä¸å­˜åœ¨   |
  
  ### ä¸‰ç§å…·ä½“ç±»åˆ«
  
  #### `lvalue`ï¼ˆå·¦å€¼ï¼‰
  
--ç‰¹å¾ï¼šå…·æœ‰`glvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›**æ”¯æŒå–å€**å’Œä»»ä½•å½¢å¼çš„èµ‹å€¼ï¼›å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰å·¦å€¼å¼•ç”¨ã€‚
++ç‰¹å¾ï¼šå…·æœ‰ `glvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›**æ”¯æŒå–å€**å’Œä»»ä½•å½¢å¼çš„èµ‹å€¼ï¼›å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰å·¦å€¼å¼•ç”¨ã€‚
  
  ä¾‹ï¼šå‡½æ•°åã€å˜é‡åã€**å­—ç¬¦ä¸²å­—é¢å€¼**ã€è¿”å›å·¦å€¼å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ã€å‰ç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç”±èµ‹å€¼è¿ç®—ç¬¦æˆ–å¤åˆèµ‹å€¼è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€è§£å¼•ç”¨è¡¨è¾¾å¼ç­‰ã€‚ä»–ä»¬çš„**æ±‚å€¼ç»“æœç›¸å½“äºå­—é¢å€¼æˆ–æ˜¯ä¸€ä¸ªä¸å…·åçš„ä¸´æ—¶å¯¹è±¡**ã€‚
  
@@@ -959,7 -959,7 +1005,7 @@@
  
  #### `prvalue`ï¼ˆçº¯å³å€¼ï¼‰
  
--ç‰¹å¾ï¼šå…·æœ‰`rvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›ä¸æ”¯æŒå¤šæ€ã€ä¸å®Œå…¨ç±»å‹ï¼›ä¸ä¼šæ˜¯æŠ½è±¡ç±»å‹æˆ–æ•°ç»„ã€‚
++ç‰¹å¾ï¼šå…·æœ‰ `rvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›ä¸æ”¯æŒå¤šæ€ã€ä¸å®Œå…¨ç±»å‹ï¼›ä¸ä¼šæ˜¯æŠ½è±¡ç±»å‹æˆ–æ•°ç»„ã€‚
  
  ä¾‹ï¼šé™¤å­—ç¬¦ä¸²å­—é¢å€¼ä»¥å¤–çš„å­—é¢å€¼ã€è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨ã€åç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç®—æœ¯è¡¨è¾¾å¼ã€é€»è¾‘è¡¨è¾¾å¼ã€æ¯”è¾ƒè¡¨è¾¾å¼ã€å–åœ°å€è¡¨è¾¾å¼ç­‰ã€‚
  
@@@ -967,7 -967,7 +1013,7 @@@
  
  å°†äº¡å€¼æ˜¯éšç€å³å€¼å¼•ç”¨çš„å¼•å…¥è€Œæ–°å¼•å…¥çš„ï¼Œä¸å³å€¼å¼•ç”¨æ¯æ¯ç›¸å…³
  
--ç‰¹å¾ï¼šå®ƒå…·æœ‰æ‰€æœ‰`rvalue`å’Œ`glvalue`æ‰€æœ‰çš„ç‰¹å¾ã€‚
++ç‰¹å¾ï¼šå®ƒå…·æœ‰æ‰€æœ‰ `rvalue`å’Œ `glvalue`æ‰€æœ‰çš„ç‰¹å¾ã€‚
  
  ä¾‹ï¼šè¿”å›å³å€¼å¼•ç”¨çš„å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼ã€è½¬æ¢ä¸ºå³å€¼å¼•ç”¨çš„è½¬æ¢å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼
  
@@@ -983,7 -983,7 +1029,7 @@@ C++ä¸­çš„å€¼ç±»å‹ï¼ˆè¿™é‡Œçš„å€¼ç±»å‹
  
  ã€Š`C++`çš„è®¾è®¡ä¸æ¼”åŒ–ã€‹ä¸­è¯´**åŠ å…¥â€œå¼•ç”¨â€è¿™ä¸ªè¯­è¨€ç‰¹æ€§çš„å¥‘æœºæ˜¯ä¸ºäº†æ–¹ä¾¿è¿ç®—ç¬¦é‡è½½**ï¼ˆä¸ºäº†è®©è¿ç®—ç¬¦é‡è½½çš„è¯­æ³•èƒ½å¤Ÿæ›´åŠ æ¥è¿‘å†…å»ºçš„è¿ç®—ç¬¦ï¼Œéœ€è¦å¯¹å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ï¼Œè¿™å°±è¦æ±‚å‡½æ•°è¿”å›ä¸€ä¸ªå·¦å€¼ï¼Œå½“ä½¿ç”¨æŒ‡é’ˆè¿”å›æ—¶åˆä¸å¤Ÿç®€æ´ï¼Œå› æ­¤å¼•å…¥äº†å¼•ç”¨è¿™ä¸€ç‰¹æ€§ï¼‰ã€‚
  
--å¼•ç”¨åˆæœ‰å·¦å€¼å¼•ç”¨ã€å³å€¼å¼•ç”¨ä¹‹åˆ†ã€‚å€ŸåŠ©åº“å‡½æ•°`is_lvalue_reference(),is_rvalue_reference(),is_reference()`åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚
++å¼•ç”¨åˆæœ‰å·¦å€¼å¼•ç”¨ã€å³å€¼å¼•ç”¨ä¹‹åˆ†ã€‚å€ŸåŠ©åº“å‡½æ•° `is_lvalue_reference(),is_rvalue_reference(),is_reference()`åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚
  
  #### å·¦å€¼å¼•ç”¨
  
@@@ -996,11 -996,11 +1042,19 @@@
  ##### æ— åå³å€¼å¼•ç”¨
  
  <<<<<<< HEAD
--æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼Œå¦‚`static_cast<T&&>(t)`ï¼‰
++æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼Œå¦‚ `static_cast<T&&>(t)`ï¼‰
  **æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
--=======
--æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡å¦‚`static_cast<T&&>(t)`è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼‰ã€‚**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
++================================================================================================================
++
++æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡å¦‚ `static_cast<T&&>(t)`è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼‰ã€‚**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
++
  >>>>>>> d6cc772463d7c322554dbca975fea31744a38242
++>>>>>>>
++>>>>>>
++>>>>>
++>>>>
++>>>
++>>
  
  ##### [å…·åå³å€¼å¼•ç”¨](https://juejin.cn/post/6860648369695260680)
  
@@@ -1016,21 -1016,21 +1070,21 @@@ mov     QWORD PTR [rbp-8], ra
  
  ##### è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨
  
--**å½¢å¦‚`T&&`ä¸”åŒ…å«ç±»å‹æ¨å¯¼çš„å¼•ç”¨å½¢å¼**å¯ä»¥è¢«ç§°ä¸ºé€šç”¨å¼•ç”¨ï¼ˆå¦‚`auto&&`ä»¥åŠæŸäº›æ¨¡æ¿ç±»/å‡½æ•°çš„å‚æ•°ï¼‰ï¼Œå¦åˆ™å°±æ˜¯å³å€¼å¼•ç”¨ã€‚ä¸‡èƒ½å¼•ç”¨å³å¯ä»¥ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨åˆå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼Œå…¶**å®é™…å¼•ç”¨æ–¹å¼å–å†³äºå…¶è¢«åˆå§‹åŒ–æ—¶æ‰€ä½¿ç”¨çš„å¯¹è±¡çš„å¼•ç”¨ç±»å‹**ã€‚
++**å½¢å¦‚ `T&&`ä¸”åŒ…å«ç±»å‹æ¨å¯¼çš„å¼•ç”¨å½¢å¼**å¯ä»¥è¢«ç§°ä¸ºé€šç”¨å¼•ç”¨ï¼ˆå¦‚ `auto&&`ä»¥åŠæŸäº›æ¨¡æ¿ç±»/å‡½æ•°çš„å‚æ•°ï¼‰ï¼Œå¦åˆ™å°±æ˜¯å³å€¼å¼•ç”¨ã€‚ä¸‡èƒ½å¼•ç”¨å³å¯ä»¥ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨åˆå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼Œå…¶**å®é™…å¼•ç”¨æ–¹å¼å–å†³äºå…¶è¢«åˆå§‹åŒ–æ—¶æ‰€ä½¿ç”¨çš„å¯¹è±¡çš„å¼•ç”¨ç±»å‹**ã€‚
  
  1. ç”±äºä¸‡èƒ½å¼•ç”¨æ—¢èƒ½å¤Ÿç»‘å®šå³å€¼å¼•ç”¨ä¹Ÿå¯ä»¥ç»‘å®šå·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è¢«è®¾è®¡ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥é¿å…ä¸ºä¸åŒçš„å‚æ•°ç±»å‹åˆ†åˆ«å®šä¹‰å®ç°ä¸åŒçš„é‡è½½å‡½æ•°ã€‚
  2. å½“åº”ç”¨1æ—¶åˆ°å‡½æ•°é‡è½½æ—¶åˆä¼šé€ æˆé—®é¢˜ï¼Œç”±äºé€šç”¨å¼•ç”¨çš„ç±»å‹æ¨å¯¼å¯ä»¥åŒ¹é…åˆ°å¤§é‡çš„ç±»å‹ï¼ˆé‡è½½æ—¶ç²¾ç¡®åŒ¹é…ä¼˜å…ˆäºç±»å‹æå‡è½¬æ¢ï¼‰ï¼Œç”±äºè¿™ç§è´ªå©ªæ€§è´¨ï¼Œä¸‡èƒ½å¼•ç”¨å’Œé‡è½½ç»“åˆä¼šé€ æˆé—®é¢˜ã€‚
  
  ##### å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ
  
--ç”±äºC++ç¦æ­¢å¼•ç”¨çš„å¼•ç”¨ï¼Œåœ¨å¼•å…¥äº†å³å€¼å¼•ç”¨åï¼Œå¯èƒ½å­˜åœ¨å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨ä¹‹é—´çš„æŠ˜å ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨éœ€è¦å¯¹å››ç§æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯`L2L,L2R,R2L,R2R`ï¼‰æŠ˜å /åç¼©æˆä¸€ç§å•ä¸€çš„å¼•ç”¨ã€‚C++ç¡®å®šäº†å…¶è§„åˆ™ä¸º**å·¦å€¼å¼•ç”¨ä¼šä¼ æŸ“**ï¼šåªæœ‰å³å€¼å¼•ç”¨å åŠ åˆ°å³å€¼å¼•ç”¨ä¸Šä»æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å·¦å€¼å¼•ç”¨ã€‚
++ç”±äºC++ç¦æ­¢å¼•ç”¨çš„å¼•ç”¨ï¼Œåœ¨å¼•å…¥äº†å³å€¼å¼•ç”¨åï¼Œå¯èƒ½å­˜åœ¨å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨ä¹‹é—´çš„æŠ˜å ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨éœ€è¦å¯¹å››ç§æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯ `L2L,L2R,R2L,R2R`ï¼‰æŠ˜å /åç¼©æˆä¸€ç§å•ä¸€çš„å¼•ç”¨ã€‚C++ç¡®å®šäº†å…¶è§„åˆ™ä¸º**å·¦å€¼å¼•ç”¨ä¼šä¼ æŸ“**ï¼šåªæœ‰å³å€¼å¼•ç”¨å åŠ åˆ°å³å€¼å¼•ç”¨ä¸Šä»æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å·¦å€¼å¼•ç”¨ã€‚
  
  | å½¢å‚çš„å£°æ˜ç±»å‹ | è°ƒç”¨æ—¶çš„å‚æ•°ç±»å‹ | æ¨å¯¼å‡ºçš„å½¢å‚ç±»å‹ | æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ |
  | :------------: | :--------------: | :--------------: | :------------------: |
--|      `T&`      |       `t&`       |       `t&`       |         `t`          |
--|     `T&&`      |       `t&`       |       `t&`       |         `t&`         |
--|      `T&`      |      `t&&`       |       `t&`       |         `t`          |
--|     `T&&`      |      `t&&`       |      `t&&`       |         `t`          |
++|     `T&`     |      `t&`      |      `t&`      |        `t`        |
++|    `T&&`    |      `t&`      |      `t&`      |        `t&`        |
++|     `T&`     |     `t&&`     |      `t&`      |        `t`        |
++|    `T&&`    |     `t&&`     |     `t&&`     |        `t`        |
  
  ### å·¦å³å€¼é‡è½½ç­–ç•¥
  
@@@ -1049,42 -1049,42 +1103,50 @@@ f(X());          //è°ƒç”¨å³å€¼ç‰ˆæœ
  f(std::move(a)); //è°ƒç”¨å³å€¼ç‰ˆæœ¬
  ```
  
--| é‡è½½ç‰ˆæœ¬ |  å‡½æ•°å‚æ•°  |                              æ³¨                              |
--| :------: | :--------: | :----------------------------------------------------------: |
--|   å·¦å€¼   | `const T&` |        åœ¨æ²¡æœ‰å³å€¼ç‰ˆæœ¬çš„é‡è½½æ—¶å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ä½¿ç”¨æ­¤ç‰ˆæœ¬        |
--|   å³å€¼   |   `T&&`    | æ ‡å‡†è§„å®š**åœ¨ç»‘å®šå³å€¼æ—¶å³å€¼å¼•ç”¨å‚æ•°çš„ä¼˜å…ˆçº§é«˜äº`const`å·¦å€¼å¼•ç”¨å‚æ•°** |
++| é‡è½½ç‰ˆæœ¬ |   å‡½æ•°å‚æ•°   |                                      æ³¨                                      |
++| :------: | :----------: | :--------------------------------------------------------------------------: |
++|   å·¦å€¼   | `const T&` |                åœ¨æ²¡æœ‰å³å€¼ç‰ˆæœ¬çš„é‡è½½æ—¶å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ä½¿ç”¨æ­¤ç‰ˆæœ¬                |
++|   å³å€¼   |   `T&&`   | æ ‡å‡†è§„å®š**åœ¨ç»‘å®šå³å€¼æ—¶å³å€¼å¼•ç”¨å‚æ•°çš„ä¼˜å…ˆçº§é«˜äº `const`å·¦å€¼å¼•ç”¨å‚æ•°** |
  
  #### ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘
  
  <<<<<<< HEAD
--**å³å€¼å¼•ç”¨æ˜¯`move`å’Œ`forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ`forwaed`éƒ½æ˜¯`static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
--=======
--**å³å€¼å¼•ç”¨æ˜¯`move`å’Œ`forward`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ`forward`éƒ½æ˜¯`static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
++**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forwaed`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
++================================================================================================================================================================================================
++
++**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forward`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forward`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
++
  >>>>>>> d6cc772463d7c322554dbca975fea31744a38242
++>>>>>>>
++>>>>>>
++>>>>>
++>>>>
++>>>
++>>
  
--##### ç§»åŠ¨è¯­ä¹‰`move`
++##### ç§»åŠ¨è¯­ä¹‰ `move`
  
  ç§»åŠ¨è¯­ä¹‰æŒ‡çš„æ˜¯é€šè¿‡ç§»åŠ¨ï¼ˆçªƒå–ï¼‰å…¶ä»–å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºæ¥å®ŒæˆæŸä¸ªå¯¹è±¡**æ¥ç®¡å¦ä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰çš„å¤–éƒ¨èµ„æºçš„æ‰€æœ‰æƒ**çš„è¿‡ç¨‹ã€‚å…¶å®ç°**ä¾èµ–äºæ— åå³å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨**ï¼ˆ`move<>`äº§ç”Ÿæ— åå³å€¼å¼•ç”¨ï¼Œå…·åå³å€¼å¼•ç”¨æ¥æ”¶æ— åå³å€¼å¼•ç”¨ï¼‰ã€‚
  
  ###### `move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰
  
--**â‘ **ï¼šé‡Šæ”¾`this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚ç§»åŠ¨èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœ`this`å¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº
++**â‘ **ï¼šé‡Šæ”¾ `this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚ç§»åŠ¨èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœ `this`å¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº
  
--**â‘¡**ï¼šç§»åŠ¨`that` ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘thatå¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº
++**â‘¡**ï¼šç§»åŠ¨ `that` ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘thatå¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº
  
--**â‘¢**ï¼šæ ‡è®°`that`ï¼šå°†`that`å¯¹è±¡åŸæœ¬æŒ‡å‘è¯¥èµ„æºçš„æŒ‡é’ˆæˆ–å¥æŸ„è®¾ä¸ºç©ºå€¼
++**â‘¢**ï¼šæ ‡è®° `that`ï¼šå°† `that`å¯¹è±¡åŸæœ¬æŒ‡å‘è¯¥èµ„æºçš„æŒ‡é’ˆæˆ–å¥æŸ„è®¾ä¸ºç©ºå€¼
  
  ###### `copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰
  
--**â‘ **ï¼šé‡Šæ”¾`this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚æ‹·è´èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœthiså¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº
++**â‘ **ï¼šé‡Šæ”¾ `this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚æ‹·è´èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœthiså¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº
  
--**â‘¡**ï¼šæ‹·è´`that`ï¼šæ‹·è´ï¼ˆå¤åˆ¶ï¼‰`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº
++**â‘¡**ï¼šæ‹·è´ `that`ï¼šæ‹·è´ï¼ˆå¤åˆ¶ï¼‰`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº
  
--**â‘¢**ï¼šè®¾ç½®`this`ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘æ–°ç”Ÿçš„èµ„æº
++**â‘¢**ï¼šè®¾ç½® `this`ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘æ–°ç”Ÿçš„èµ„æº
  
--**â‘£**ï¼šé‡Šæ”¾`that`ï¼ˆ`that`ä¸ºå³å€¼æ—¶ï¼‰ï¼šå¦‚æœ`that`å¯¹è±¡ä¸ºä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œé‚£ä¹ˆæ‹·è´å®Œæˆä¹‹å`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºå°†ä¼šå› `that`å¯¹è±¡è¢«é”€æ¯è€Œå³åˆ»å¾—ä»¥é‡Šæ”¾
++**â‘£**ï¼šé‡Šæ”¾ `that`ï¼ˆ`that`ä¸ºå³å€¼æ—¶ï¼‰ï¼šå¦‚æœ `that`å¯¹è±¡ä¸ºä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œé‚£ä¹ˆæ‹·è´å®Œæˆä¹‹å `that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºå°†ä¼šå›  `that`å¯¹è±¡è¢«é”€æ¯è€Œå³åˆ»å¾—ä»¥é‡Šæ”¾
  
--**ä¼ é€’`move`åŒ…è£…è¿‡çš„å‚æ•°ä¸ä¸€å®šå‘ç”Ÿäº†ç§»åŠ¨**ï¼Œåªæœ‰è¢«`move`æ“ä½œçš„å€¼ç±»å‹ï¼ˆå®ç°äº†ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼å‡½æ•°çš„ç±»ï¼‰æœ¬èº«æ”¯æŒ`move`æ“ä½œæ—¶æ‰å‘ç”Ÿ`move`ï¼Œå¦åˆ™å‘ç”Ÿçš„ä»»ç„¶æ˜¯`copy`ï¼ˆå¦‚åŸºæœ¬ç±»å‹ï¼‰ã€‚
++**ä¼ é€’ `move`åŒ…è£…è¿‡çš„å‚æ•°ä¸ä¸€å®šå‘ç”Ÿäº†ç§»åŠ¨**ï¼Œåªæœ‰è¢« `move`æ“ä½œçš„å€¼ç±»å‹ï¼ˆå®ç°äº†ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼å‡½æ•°çš„ç±»ï¼‰æœ¬èº«æ”¯æŒ `move`æ“ä½œæ—¶æ‰å‘ç”Ÿ `move`ï¼Œå¦åˆ™å‘ç”Ÿçš„ä»»ç„¶æ˜¯ `copy`ï¼ˆå¦‚åŸºæœ¬ç±»å‹ï¼‰ã€‚
  
  ```C++
  template<typename _Tp> constexpr typename std::remove_reference<_Tp>::type&& move(_Tp&& __t) noexcept{
@@@ -1092,7 -1092,7 +1154,7 @@@
  }///Convert a value to an rvalue.
  ```
  
--##### [å®Œç¾è½¬å‘`forward`](https://blog.csdn.net/zwvista/article/details/12306283)
++##### [å®Œç¾è½¬å‘ `forward`](https://blog.csdn.net/zwvista/article/details/12306283)
  
  ###### å«ä¹‰
  
@@@ -1100,15 -1100,15 +1162,15 @@@
  
  ###### å®ç°
  
--**é—®é¢˜**ï¼šè¦æƒ³åœ¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸­è½¬å‘å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œå‚æ•°å°±å¿…é¡»å…·æœ‰åŒæ—¶æ¥æ”¶å·¦å³å€¼å±æ€§çš„èƒ½åŠ›ï¼Œå³æ¨¡æ¿å‚æ•°å¿…é¡»è¢«å£°æ˜ä¸º**è½¬å‘å‹å¼•ç”¨`T&&`**ï¼ŒæŒ‰ç…§è½¬å‘å‹å¼•ç”¨çš„ç‰¹ç‚¹ï¼Œè¯¥å½¢å‚å°†æ ¹æ®å®å‚çš„å·¦å³å€¼å±æ€§è€Œåˆ†åˆ«èœ•å˜æˆå·¦å³å€¼å¼•ç”¨ï¼Œè€Œè¯¥**å½¢å‚åœ¨æ¨¡æ¿å‡½æ•°å†…éƒ¨æ°¸è¿œæ˜¯å·¦å€¼**ï¼ˆå·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½æ˜¯å·¦å€¼ï¼‰ï¼Œå¦‚æœåœ¨æ¨¡æ¿ç±»åŸæ ·è½¬å‘è¯¥å‚æ•°ï¼Œé‚£ä¹ˆ**è½¬å‘çš„å°†æ°¸è¿œæ˜¯å·¦å€¼**ã€‚å› æ­¤å•çº¯ä¾é è½¬å‘å‹å¼•ç”¨ä¹Ÿå°±æ— æ³•å®ç°å®Œç¾è½¬å‘çš„ä»»åŠ¡ã€‚
++**é—®é¢˜**ï¼šè¦æƒ³åœ¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸­è½¬å‘å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œå‚æ•°å°±å¿…é¡»å…·æœ‰åŒæ—¶æ¥æ”¶å·¦å³å€¼å±æ€§çš„èƒ½åŠ›ï¼Œå³æ¨¡æ¿å‚æ•°å¿…é¡»è¢«å£°æ˜ä¸º**è½¬å‘å‹å¼•ç”¨ `T&&`**ï¼ŒæŒ‰ç…§è½¬å‘å‹å¼•ç”¨çš„ç‰¹ç‚¹ï¼Œè¯¥å½¢å‚å°†æ ¹æ®å®å‚çš„å·¦å³å€¼å±æ€§è€Œåˆ†åˆ«èœ•å˜æˆå·¦å³å€¼å¼•ç”¨ï¼Œè€Œè¯¥**å½¢å‚åœ¨æ¨¡æ¿å‡½æ•°å†…éƒ¨æ°¸è¿œæ˜¯å·¦å€¼**ï¼ˆå·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½æ˜¯å·¦å€¼ï¼‰ï¼Œå¦‚æœåœ¨æ¨¡æ¿ç±»åŸæ ·è½¬å‘è¯¥å‚æ•°ï¼Œé‚£ä¹ˆ**è½¬å‘çš„å°†æ°¸è¿œæ˜¯å·¦å€¼**ã€‚å› æ­¤å•çº¯ä¾é è½¬å‘å‹å¼•ç”¨ä¹Ÿå°±æ— æ³•å®ç°å®Œç¾è½¬å‘çš„ä»»åŠ¡ã€‚
  
--è¦æƒ³å®ç°æ­¤åŠŸèƒ½ï¼Œéœ€è¦å€ŸåŠ©åº“å‡½æ•°`std::forward<T>(t)`å¹¶**å°†æ¨¡æ¿å‚æ•°è®¾ç½®ä¸ºè½¬å‘å‹å¼•ç”¨**ï¼Œé€šè¿‡ä½¿ç”¨`forard<T>`å°è£…çš„`static_cast<T>`å¯ä»¥å®ç°å°†å‚æ•°`t`è½¬å‘ä¸º`T&&`ç±»å‹ï¼ˆå®é™…ä½¿ç”¨æ—¶æ­¤å¤„æœ‰å¼•ç”¨æŠ˜å ã€è¯¦æƒ…è§ä»£ç ï¼‰ã€‚
++è¦æƒ³å®ç°æ­¤åŠŸèƒ½ï¼Œéœ€è¦å€ŸåŠ©åº“å‡½æ•° `std::forward<T>(t)`å¹¶**å°†æ¨¡æ¿å‚æ•°è®¾ç½®ä¸ºè½¬å‘å‹å¼•ç”¨**ï¼Œé€šè¿‡ä½¿ç”¨ `forard<T>`å°è£…çš„ `static_cast<T>`å¯ä»¥å®ç°å°†å‚æ•° `t`è½¬å‘ä¸º `T&&`ç±»å‹ï¼ˆå®é™…ä½¿ç”¨æ—¶æ­¤å¤„æœ‰å¼•ç”¨æŠ˜å ã€è¯¦æƒ…è§ä»£ç ï¼‰ã€‚
  
  |    `t`çš„å®å‚ç±»å‹    | `T&&`è¢«æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ | `t`åœ¨æ¨¡æ¿å‚æ•°ä¸­çš„ç±»å‹ | `std::forward<T>(t)`çš„ç±»å‹ |
--| :-----------------: | :-------------------------: | :-------------------: | :------------------------: |
--| å·¦å€¼ï¼ˆç±»å‹ä¸º`U&`ï¼‰  |      `U&`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |     å…·åå·¦å€¼å¼•ç”¨      |        æ— åå·¦å€¼å¼•ç”¨        |
--| å³å€¼ï¼ˆç±»å‹ä¸º`U&&`ï¼‰ |       `U`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |     å…·åå³å€¼å¼•ç”¨      |        æ— åå³å€¼å¼•ç”¨        |
--|  å³å€¼ï¼ˆç±»å‹ä¸º`U`ï¼‰  |            `U&&`            |     å…·åå³å€¼å¼•ç”¨      |        æ— åå³å€¼å¼•ç”¨        |
++| :--------------------: | :---------------------------: | :---------------------: | :--------------------------: |
++| å·¦å€¼ï¼ˆç±»å‹ä¸º `U&`ï¼‰ |      `U&`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰      |      å…·åå·¦å€¼å¼•ç”¨      |         æ— åå·¦å€¼å¼•ç”¨         |
++| å³å€¼ï¼ˆç±»å‹ä¸º `U&&`ï¼‰ |       `U`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |      å…·åå³å€¼å¼•ç”¨      |         æ— åå³å€¼å¼•ç”¨         |
++|  å³å€¼ï¼ˆç±»å‹ä¸º `U`ï¼‰  |            `U&&`            |      å…·åå³å€¼å¼•ç”¨      |         æ— åå³å€¼å¼•ç”¨         |
  
  ```c++
  struct X {};
@@@ -1136,52 -1136,52 +1198,59 @@@ template<typename _Tp> constexpr _Tp&& 
  
  #### [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](https://juejin.cn/post/6860648369695260680)
  
--| å®å‚`argument` \ å½¢å‚`parameter` | `T&` | `const T&` | `T&&` | `const T&&`ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰ |
--| :------------------------------: | :--: | :--------: | :---: | :---------------------: |
--|           **`lvalue`**           |  1   |     2      |   -   |            -            |
--|        **`const lvalue`**        |  -   |     1      |   -   |            -            |
--|           **`rvalue`**           |  -   |     3      |   1   |            2            |
--|        **`const rvalue`**        |  -   |     2      |   -   |            1            |
++| å®å‚ `argument` \ å½¢å‚ `parameter` | `T&` | `const T&` | `T&&` | `const T&&`ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰ |
++| :------------------------------------: | :----: | :----------: | :-----: | :-----------------------: |
++|          **`lvalue`**          |   1   |      2      |    -    |             -             |
++|       **`const lvalue`**       |   -   |      1      |    -    |             -             |
++|          **`rvalue`**          |   -   |      3      |    1    |             2             |
++|       **`const rvalue`**       |   -   |      2      |    -    |             1             |
  
--æ•°å€¼è¶Šå°ä»£è¡¨è¶Šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä»£è¡¨ä¸åŒ¹é…ï¼ˆ`const`å·¦å€¼å¼•ç”¨å¯ä»¥ç»“åˆä»»ä½•ç±»å‹çš„å®å‚ï¼‰ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ ä¼ å€¼`(by value) `é‡è½½ï¼ˆæ¥å—å€¼ç±»å‹å‚æ•° `T`ï¼‰ï¼Œä¼šå’Œä¸Šè¿°ä¼ å¼•ç”¨`(by reference) `é‡è½½äº§ç”Ÿæ­§ä¹‰ï¼Œç¼–è¯‘å¤±è´¥ã€‚
++æ•°å€¼è¶Šå°ä»£è¡¨è¶Šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä»£è¡¨ä¸åŒ¹é…ï¼ˆ`const`å·¦å€¼å¼•ç”¨å¯ä»¥ç»“åˆä»»ä½•ç±»å‹çš„å®å‚ï¼‰ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ ä¼ å€¼ `(by value) `é‡è½½ï¼ˆæ¥å—å€¼ç±»å‹å‚æ•° `T`ï¼‰ï¼Œä¼šå’Œä¸Šè¿°ä¼ å¼•ç”¨ `(by reference) `é‡è½½äº§ç”Ÿæ­§ä¹‰ï¼Œç¼–è¯‘å¤±è´¥ã€‚
  
  # è¿”å›å€¼ä¼˜åŒ–
  
  ## ç¼–è¯‘å™¨ä¼˜åŒ–
  
--ä¸€ä¸ªå‡½æ•°è‹¥ç›´æ¥è¿”å›ç±»å¯¹è±¡ï¼Œä¸€èˆ¬ä¼šç”Ÿæˆä¸´æ—¶ç±»å¯¹è±¡å˜é‡ï¼Œéœ€å¤šæ¬¡è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰é€ æˆæ•ˆç‡ä½ä¸‹ï¼Œç¼–è¯‘å™¨å¯¹æ­¤ä¼˜åŒ–ï¼Œçœç•¥å…¶ä¸­çš„æ‹·è´æ„é€ ç¯èŠ‚ï¼Œè¾¾åˆ°æå‡æ•ˆç‡çš„ç›®çš„ï¼ˆå°¤å…¶æ˜¯å¯¹éœ€è¦åˆ†é…å¤§é‡å†…å­˜çš„ç±»å¯¹è±¡å…¶å€¼å¤åˆ¶è¿‡ç¨‹ã€‚è¿™ä¸€ç±»ä¼˜åŒ–é€šå¸¸ç§°ä¸º**[å¤åˆ¶çœç•¥/æ¶ˆé™¤ï¼ˆCopy elisionï¼‰](https://en.cppreference.com/w/cpp/language/copy_elision)**ï¼Œ`GCC`é»˜è®¤å¯ç”¨äº†è¯¥ä¼˜åŒ–ï¼Œé€šè¿‡`-fno-elide-constructors`å¯ä»¥å…³é—­ã€‚`RVO`ä¸`NRVO`éƒ½æ˜¯å¤åˆ¶æ¶ˆé™¤çš„å®ç°ã€‚
++ä¸€ä¸ªå‡½æ•°è‹¥ç›´æ¥è¿”å›ç±»å¯¹è±¡ï¼Œä¸€èˆ¬ä¼šç”Ÿæˆä¸´æ—¶ç±»å¯¹è±¡å˜é‡ï¼Œéœ€å¤šæ¬¡è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰é€ æˆæ•ˆç‡ä½ä¸‹ï¼Œç¼–è¯‘å™¨å¯¹æ­¤ä¼˜åŒ–ï¼Œçœç•¥å…¶ä¸­çš„æ‹·è´æ„é€ ç¯èŠ‚ï¼Œè¾¾åˆ°æå‡æ•ˆç‡çš„ç›®çš„ï¼ˆå°¤å…¶æ˜¯å¯¹éœ€è¦åˆ†é…å¤§é‡å†…å­˜çš„ç±»å¯¹è±¡å…¶å€¼å¤åˆ¶è¿‡ç¨‹ã€‚è¿™ä¸€ç±»ä¼˜åŒ–é€šå¸¸ç§°ä¸º**[å¤åˆ¶çœç•¥/æ¶ˆé™¤ï¼ˆCopy elisionï¼‰](https://en.cppreference.com/w/cpp/language/copy_elision)**ï¼Œ`GCC`é»˜è®¤å¯ç”¨äº†è¯¥ä¼˜åŒ–ï¼Œé€šè¿‡ `-fno-elide-constructors`å¯ä»¥å…³é—­ã€‚`RVO`ä¸ `NRVO`éƒ½æ˜¯å¤åˆ¶æ¶ˆé™¤çš„å®ç°ã€‚
  
  ### `RVO`è‡ªåŠ¨ä¼˜åŒ–
  
  ç¼–è¯‘å™¨å¼€å¯**`RVO`ï¼ˆè¿”å›å€¼ä¼˜åŒ–ï¼‰**éœ€è¦æ»¡è¶³ä»¥ä¸‹**ä¸‰ç‚¹**ï¼šè¿”å›çš„æ˜¯**å€¼ç±»å‹**ï¼ˆä¸æ”¯æŒä»»ä½•å¼•ç”¨ç±»å‹ï¼‰ã€è¿”å›çš„æ˜¯**åŒ¿åå±€éƒ¨å¯¹è±¡**ã€è¿”å›çš„å€¼ç±»å‹ä¸å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ç›¸åŒã€‚`RVO`**ä¸æ”¯æŒ**å‡½æ•°å¯èƒ½è¿”å›å…·æœ‰ä¸åŒå˜é‡åçš„å¯¹è±¡ä»¥åŠå‡½æ•°æœ‰å¤šä¸ªè¿”å›å‡ºå£çš„æƒ…å†µã€‚
  
--å…¶å…·ä½“å®ç°æ˜¯ç¼–è¯‘å™¨è®©**è¢«è°ƒå‡½æ•°å°†è¿”å›å€¼æ„å»ºåœ¨è°ƒç”¨è€…çš„æ ˆä¸Š**ï¼šè°ƒç”¨å‡½æ•°åœ¨å…¶æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åå°†è¿™å—å†…å­˜çš„åœ°å€ä¼ é€’ç»™è¢«è°ƒå‡½æ•°ï¼Œè¢«è°ƒå‡½æ•°ç›´æ¥åœ¨è¿™å—å†…å­˜ä¸Šæ„é€ è¿”å›å€¼ï¼Œ è¿™æ ·å°±æ¶ˆé™¤ä»å‡½æ•°å†…éƒ¨`return`å‡ºæ¥æ—¶ä¸´æ—¶å¯¹è±¡çš„å¤åˆ¶é—®é¢˜ã€‚
++å…¶å…·ä½“å®ç°æ˜¯ç¼–è¯‘å™¨è®©**è¢«è°ƒå‡½æ•°å°†è¿”å›å€¼æ„å»ºåœ¨è°ƒç”¨è€…çš„æ ˆä¸Š**ï¼šè°ƒç”¨å‡½æ•°åœ¨å…¶æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åå°†è¿™å—å†…å­˜çš„åœ°å€ä¼ é€’ç»™è¢«è°ƒå‡½æ•°ï¼Œè¢«è°ƒå‡½æ•°ç›´æ¥åœ¨è¿™å—å†…å­˜ä¸Šæ„é€ è¿”å›å€¼ï¼Œ è¿™æ ·å°±æ¶ˆé™¤ä»å‡½æ•°å†…éƒ¨ `return`å‡ºæ¥æ—¶ä¸´æ—¶å¯¹è±¡çš„å¤åˆ¶é—®é¢˜ã€‚
  
  ### `NRVO`è‡ªåŠ¨ä¼˜åŒ–
  
--`NRVO`ï¼ˆ`Named Return Value Optimization`ï¼šå…·åè¿”å›å€¼ä¼˜åŒ–ï¼‰ä¸`RVO`çš„åŒºåˆ«åœ¨äºå‡½æ•°è¿”å›çš„ä¸´æ—¶å€¼æ˜¯å¦æ˜¯å…·åçš„ï¼Œå½“æ“ä½œæ•°æ˜¯æ‹¥æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„**å…·åé`volatile`å¯¹è±¡**ã€ä¸”å…·æœ‰å’Œå£°æ˜çš„å‡½æ•°è¿”å›ç±»å‹ç›¸åŒçš„ç±»å‹æ—¶ï¼Œè¿™ç§å¤åˆ¶æ¶ˆé™¤çš„å˜ä½“ç§°ä¸º`NRVO`ã€‚
++`NRVO`ï¼ˆ`Named Return Value Optimization`ï¼šå…·åè¿”å›å€¼ä¼˜åŒ–ï¼‰ä¸ `RVO`çš„åŒºåˆ«åœ¨äºå‡½æ•°è¿”å›çš„ä¸´æ—¶å€¼æ˜¯å¦æ˜¯å…·åçš„ï¼Œå½“æ“ä½œæ•°æ˜¯æ‹¥æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„**å…·åé `volatile`å¯¹è±¡**ã€ä¸”å…·æœ‰å’Œå£°æ˜çš„å‡½æ•°è¿”å›ç±»å‹ç›¸åŒçš„ç±»å‹æ—¶ï¼Œè¿™ç§å¤åˆ¶æ¶ˆé™¤çš„å˜ä½“ç§°ä¸º `NRVO`ã€‚
  
  ## æ‰‹åŠ¨ä¼˜åŒ–
  
--1. ä½¿ç”¨`const`å¼•ç”¨`const Foo& foo = f()`
--
--2. ä½¿ç”¨å³å€¼å¼•ç”¨`Foo&& foo = f()`ï¼Œæ­¤æ—¶è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°
++1. ä½¿ç”¨ `const`å¼•ç”¨ `const Foo& foo = f()`
++2. ä½¿ç”¨å³å€¼å¼•ç”¨ `Foo&& foo = f()`ï¼Œæ­¤æ—¶è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°
  
  # String
  
--C++ä¸­`string`åªæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„æ¨¡æ¿ç±»ï¼ˆ`typedef basic_string<char>`)ï¼Œç±»ä¼¼çš„è¿˜æœ‰`wstringã€u8stringã€u16strinã€u32string`ã€‚å®ƒå°†å­—ç¬¦å­˜å‚¨ä¸º**å­—èŠ‚åºåˆ—è€Œéå­—ç¬¦åºåˆ—**å¹¶æä¾›**è®¿é—®å•å­—èŠ‚å­—ç¬¦çš„åŠŸèƒ½**ã€‚
++C++ä¸­ `string`åªæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„æ¨¡æ¿ç±»ï¼ˆ`typedef basic_string<char>`)ï¼Œç±»ä¼¼çš„è¿˜æœ‰ `wstringã€u8stringã€u16strinã€u32string`ã€‚å®ƒå°†å­—ç¬¦å­˜å‚¨ä¸º**å­—èŠ‚åºåˆ—è€Œéå­—ç¬¦åºåˆ—**å¹¶æä¾›**è®¿é—®å•å­—èŠ‚å­—ç¬¦çš„åŠŸèƒ½**ã€‚
  
  ## ä¸‰ç§å®ç°æ–¹å¼
  
  `string`ä¸­ä¸€èˆ¬å«æœ‰è‡³å°‘ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µï¼š`char *data`ï¼ˆæŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²çš„é¦–åœ°å€ï¼Œ`SSO`ä¸­å¯èƒ½æ²¡æœ‰ï¼‰ï¼Œ`size_t size`ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ã€‚ï¼‰ï¼Œ`size_t capacity`ï¼ˆå­—ç¬¦ä¸²å®¹é‡ï¼‰ã€‚
  
  <<<<<<< HEAD
--=======
++============
++
  ```c++
  sizeof(string);//32, stlä¸­çš„stringæœ‰çŸ­å­—ç¬¦ä¸²ä¼˜åŒ–ï¼Œéµå¾ªå’Œvectorä¸€æ ·çš„æ‰©å®¹æœºåˆ¶ï¼Œåˆå§‹å®¹é‡ä¸º15
  ```
  
  >>>>>>> d6cc772463d7c322554dbca975fea31744a38242
++>>>>>>>
++>>>>>>
++>>>>>
++>>>>
++>>>
++>>
++
  ### Eager Copy
  
  åœ¨æ¯æ¬¡æ‹·è´æ—¶å°†åŸ string å¯¹åº”çš„å†…å­˜ä»¥åŠæ‰€æŒæœ‰çš„åŠ¨æ€èµ„æºå®Œæ•´åœ°å¤åˆ¶ä¸€ä»½ï¼Œæ¯ä¸ªå¯¹è±¡äº’ç›¸ç‹¬ç«‹çš„æ‹¥æœ‰èµ„æºã€‚
@@@ -1190,7 -1190,7 +1259,7 @@@
  
  **å†™æ—¶å¤åˆ¶**ï¼ˆCopy-On-Writeï¼‰ï¼šæ ¸å¿ƒåœ¨äº**æƒ°æ€§å¤„ç†å¤šä¸ªå®ä½“çš„èµ„æºè¯·æ±‚**ï¼Œå³åœ¨å¤šä¸ªå®ä½“ä¹‹é—´å…±äº«æŸäº›èµ„æºï¼Œç›´åˆ°æœ‰å®ä½“éœ€è¦å¯¹èµ„æºè¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰çœŸæ­£ä¸ºè¯¥å®ä½“åˆ†é…ç§æœ‰çš„èµ„æºã€‚è¯¥æ–¹æ³•æ—¢å¯ä»¥å‡å°‘ä¸å¿…è¦çš„èµ„æºåˆ†é…ï¼ˆæ–°å®ä½“ä¸ä¿®æ”¹èµ„æºæ—¶ï¼‰ï¼Œåˆå°†åˆ†é…å’Œå¤åˆ¶å¤§é‡èµ„æºå¸¦æ¥çš„ç¬é—´å»¶è¿Ÿè¿›è¡Œäº†**å»¶å**ã€‚
  
--æ­¤æ–¹æ¡ˆä¸‹åªæœ‰åœ¨æŸä¸ª string è¦å¯¹å…±äº«å¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œæ‹·è´ï¼Œå› æ­¤å­˜åœ¨å…±äº«æœºåˆ¶ï¼ˆéœ€è¦ä¸€ä¸ª`std::atomic<size_t> refcount`è¡¨ç¤ºèµ„æºè¢«å¤šå°‘å¯¹è±¡å…±äº«ï¼Œæ­¤æ—¶æ¶‰åŠåˆ°**çº¿ç¨‹å®‰å…¨**çš„é—®é¢˜ï¼‰ã€‚è¯¥æ–¹æ¡ˆä¸‹`lazy-copy`è¡Œä¸ºåªå‘ç”Ÿåœ¨**ä¸¤ä¸ªstringå¯¹è±¡ä¹‹é—´**çš„æ‹·è´æ„é€ ï¼Œèµ‹å€¼å’Œassign()æ“ä½œä¸Šã€‚
++æ­¤æ–¹æ¡ˆä¸‹åªæœ‰åœ¨æŸä¸ª string è¦å¯¹å…±äº«å¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œæ‹·è´ï¼Œå› æ­¤å­˜åœ¨å…±äº«æœºåˆ¶ï¼ˆéœ€è¦ä¸€ä¸ª `std::atomic<size_t> refcount`è¡¨ç¤ºèµ„æºè¢«å¤šå°‘å¯¹è±¡å…±äº«ï¼Œæ­¤æ—¶æ¶‰åŠåˆ°**çº¿ç¨‹å®‰å…¨**çš„é—®é¢˜ï¼‰ã€‚è¯¥æ–¹æ¡ˆä¸‹ `lazy-copy`è¡Œä¸ºåªå‘ç”Ÿåœ¨**ä¸¤ä¸ªstringå¯¹è±¡ä¹‹é—´**çš„æ‹·è´æ„é€ ï¼Œèµ‹å€¼å’Œassign()æ“ä½œä¸Šã€‚
  
  ![COW](img/lang/string-cow.jpg)
  
@@@ -1216,39 -1216,39 +1285,38 @@@ class string 
  
  ## æŸ¥æ‰¾ find
  
--æ‰€æœ‰æŸ¥æ‰¾æ–¹æ³•è¿”å›çš„å€¼çš„ç±»å‹éƒ½æ˜¯è¯¥æ¨¡æ¿ç±»å†…éƒ¨å®šä¹‰çš„`size_type`ç±»å‹ï¼ˆä¸€èˆ¬ä¸ºintç±»å‹ï¼‰ï¼Œè¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å¯¹è±¡åœ¨stringä¸­çš„ä½ç½®ï¼ˆæœªæ‰¾åˆ°è¿”å›å€¼ä¸º-1çš„`string::npos`ï¼‰ï¼›æ‰€æœ‰6ä¸ªæŸ¥æ‰¾å‡½æ•°ä¸­æ¯ä¸ªå‡½æ•°éƒ½æä¾›äº†å››ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€å…±24ä¸ªæŸ¥æ‰¾å‡½æ•°ã€‚
++æ‰€æœ‰æŸ¥æ‰¾æ–¹æ³•è¿”å›çš„å€¼çš„ç±»å‹éƒ½æ˜¯è¯¥æ¨¡æ¿ç±»å†…éƒ¨å®šä¹‰çš„ `size_type`ç±»å‹ï¼ˆä¸€èˆ¬ä¸ºintç±»å‹ï¼‰ï¼Œè¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å¯¹è±¡åœ¨stringä¸­çš„ä½ç½®ï¼ˆæœªæ‰¾åˆ°è¿”å›å€¼ä¸º-1çš„ `string::npos`ï¼‰ï¼›æ‰€æœ‰6ä¸ªæŸ¥æ‰¾å‡½æ•°ä¸­æ¯ä¸ªå‡½æ•°éƒ½æä¾›äº†å››ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€å…±24ä¸ªæŸ¥æ‰¾å‡½æ•°ã€‚
++
  ```cpp
  size_type find_first_of(const basic_string& s, size_type pos = 0)
  size_type find_first_of(const charT* s, size_type pos, size_type n)
  size_type find_first_of(const charT* s, size_type pos = 0)
  size_type find_first_of(charT c, size_type pos = 0)
  ```
++
  æ ‡å‡†åº“ä¸­çš„æŸ¥æ‰¾ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼ˆè¯¦è§[çŸ¥ä¹](https://www.zhihu.com/question/392846851)ï¼‰ï¼Œåœ¨ä¸åŒå¹³å°ä¸‹å®ç°ä¸ä¸€æ ·ã€‚è¦æƒ³å®ç°é«˜æ•ˆçš„æœç´¢æ¨èä½¿ç”¨æ³›å‹ç®—æ³•**`std::search()`**ï¼Œè¯¥ç®—æ³•æä¾›äº†[default_searcher](https://zh.cppreference.com/w/cpp/utility/functional/default_searcher)ã€[boyer_moore_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_searcher)ã€[boyer_moore_horspool_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_horspool_searcher)ä¸‰ç§æœç´¢ç®—æ³•ã€‚
  
  ### ä¸€èˆ¬æŸ¥æ‰¾
  
--å³`string::find()ã€string::rfind()`ï¼Œæ”¯æŒæ­£ã€åå‘åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ã€‚
++å³ `string::find()ã€string::rfind()`ï¼Œæ”¯æŒæ­£ã€åå‘åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ã€‚
  
  ### é›†åˆæŸ¥æ‰¾
  
  æ”¯æŒåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼š
  
--|         å‡½æ•°          |                       ä½œç”¨                       |
--| :-------------------: | :----------------------------------------------: |
++|          å‡½æ•°          |                          ä½œç”¨                          |
++| :---------------------: | :----------------------------------------------------: |
  |   `find_first_of()`   |   æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®   |
  | `find_first_not_of()` |  æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®  |
--|   `find_last_of()`    |  æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½®  |
--| `find_last_not_of()`  | æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½® |
++|   `find_last_of()`   |  æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½®  |
++| `find_last_not_of()` | æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½® |
  
  ## NOTE
  
  1. `const char* string::data()`å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²æŒ‡é’ˆä¸ä¼šä»¥'\0'ç»“æŸï¼Œå…¶å¤§å°ä¸ºsize()çš„è¿”å›å€¼ã€‚`const char* string::c_str()`è¿”å›ä¸€ä¸ªä»¥â€œ\0â€ç»“å°¾çš„å­—ç¬¦ä¸²æŒ‡é’ˆã€‚
--
--2. ç”±äº`data()å’Œc_str()`å‡½æ•°è¿”å›çš„æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç”±stringæ‹¥æœ‰ï¼ŒæŒ‡é’ˆåœ¨`string`æ›´æ”¹å**å¯èƒ½ä¼šå¤±æ•ˆ**ã€‚
--
--3. å¯ä»¥ä½¿ç”¨facebookå¼€æºçš„[`FBString`](https://github.com/facebook/folly/blob/master/folly/docs/FBString.md)(æŸ¥æ‰¾ä½¿ç”¨äº†æ›´é«˜æ•ˆçš„BMç®—æ³•)æ›¿ä»£`string`ã€‚
--
--4. å¤šæ•°stringçš„å®ç°é‡‡ç”¨çš„æ˜¯SSOæ–¹å¼ï¼ŒCOWä¸­â€å…±äº«â€œçš„å®ç°å½±å“äº†**å¤šçº¿ç¨‹ç¯å¢ƒä¸‹**stringâ€æ‹·è´â€œçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯COWå®ç°çš„æ­£ç¡®æ€§ï¼Œstringè®¤å®š`operator[]ã€at()`å…·æœ‰ä¿®æ”¹çš„è¯­ä¹‰ï¼ˆä½†å®é™…å¯èƒ½å¹¶æ²¡æœ‰ï¼‰ã€‚
++2. ç”±äº `data()å’Œc_str()`å‡½æ•°è¿”å›çš„æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç”±stringæ‹¥æœ‰ï¼ŒæŒ‡é’ˆåœ¨ `string`æ›´æ”¹å**å¯èƒ½ä¼šå¤±æ•ˆ**ã€‚
++3. å¯ä»¥ä½¿ç”¨facebookå¼€æºçš„[`FBString`](https://github.com/facebook/folly/blob/master/folly/docs/FBString.md)(æŸ¥æ‰¾ä½¿ç”¨äº†æ›´é«˜æ•ˆçš„BMç®—æ³•)æ›¿ä»£ `string`ã€‚
++4. å¤šæ•°stringçš„å®ç°é‡‡ç”¨çš„æ˜¯SSOæ–¹å¼ï¼ŒCOWä¸­â€å…±äº«â€œçš„å®ç°å½±å“äº†**å¤šçº¿ç¨‹ç¯å¢ƒä¸‹**stringâ€æ‹·è´â€œçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯COWå®ç°çš„æ­£ç¡®æ€§ï¼Œstringè®¤å®š `operator[]ã€at()`å…·æœ‰ä¿®æ”¹çš„è¯­ä¹‰ï¼ˆä½†å®é™…å¯èƒ½å¹¶æ²¡æœ‰ï¼‰ã€‚
  
  # éšæœºæ•°
  
@@@ -1260,7 -1260,7 +1328,7 @@@
  
  #### Linux å†…æ ¸ç†µæ± 
  
--è™½ç„¶è®¡ç®—æœºæœ¬èº«å¯é¢„æµ‹ï¼Œä½†è®¡ç®—æœºçš„è¿è¡Œç¯å¢ƒä¸­å……æ»¡äº†å„ç§ä¸å¯é¢„çŸ¥çš„å™ªå£°ï¼Œä¾‹å¦‚æ¥è‡ªè®¾å¤‡é©±åŠ¨çš„å™ªå£°ã€éšæœºçš„é¼ æ ‡ç‚¹å‡»é—´éš”ã€ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ç­‰ç­‰ã€‚Linux ç³»ç»Ÿç»´æŠ¤äº†ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¶é›†ä¸Šè¿°å™ªå£°çš„**ç†µæ± **ï¼ˆentropy poolï¼‰ï¼Œ**åˆ©ç”¨ç†µæ± å¯ä»¥äº§ç”Ÿäº§ç”ŸçœŸéšæœºæ•°**ã€‚Linuxå‘å¤–éƒ¨æš´éœ²äº†**`/dev/randomã€/dev/urandom`**ä¸¤ä¸ªå­—ç¬¦æ–‡ä»¶æ¥å£ç”¨äºè·å–ç†µæ± çš„ä¿¡æ¯ï¼Œå…¶ä¸­**å‰è€…åœ¨ç†µæ± è€—å°½æ—¶ä¼šé˜»å¡**å¯¹å…¶çš„æ‰€æœ‰æ“ä½œç›´åˆ°æ”¶é›†è¶³å¤Ÿå¤šçš„ç¯å¢ƒå™ªå£°ã€‚åè€…å‡†ç¡®è¯´å®ƒæ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒçš„éšæœºæ•°ç§å­æ¥è‡ªäºç†µæ± ï¼Œä¸å­˜åœ¨é˜»å¡çš„é—®é¢˜ï¼ˆå³ä½¿ç†µæ± ä¸ºç©º`/dev/urandom`ä»ç„¶èƒ½äº§ç”Ÿéšæœºæ•°ï¼‰ã€‚
++è™½ç„¶è®¡ç®—æœºæœ¬èº«å¯é¢„æµ‹ï¼Œä½†è®¡ç®—æœºçš„è¿è¡Œç¯å¢ƒä¸­å……æ»¡äº†å„ç§ä¸å¯é¢„çŸ¥çš„å™ªå£°ï¼Œä¾‹å¦‚æ¥è‡ªè®¾å¤‡é©±åŠ¨çš„å™ªå£°ã€éšæœºçš„é¼ æ ‡ç‚¹å‡»é—´éš”ã€ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ç­‰ç­‰ã€‚Linux ç³»ç»Ÿç»´æŠ¤äº†ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¶é›†ä¸Šè¿°å™ªå£°çš„**ç†µæ± **ï¼ˆentropy poolï¼‰ï¼Œ**åˆ©ç”¨ç†µæ± å¯ä»¥äº§ç”Ÿäº§ç”ŸçœŸéšæœºæ•°**ã€‚Linuxå‘å¤–éƒ¨æš´éœ²äº†**`/dev/randomã€/dev/urandom`**ä¸¤ä¸ªå­—ç¬¦æ–‡ä»¶æ¥å£ç”¨äºè·å–ç†µæ± çš„ä¿¡æ¯ï¼Œå…¶ä¸­**å‰è€…åœ¨ç†µæ± è€—å°½æ—¶ä¼šé˜»å¡**å¯¹å…¶çš„æ‰€æœ‰æ“ä½œç›´åˆ°æ”¶é›†è¶³å¤Ÿå¤šçš„ç¯å¢ƒå™ªå£°ã€‚åè€…å‡†ç¡®è¯´å®ƒæ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒçš„éšæœºæ•°ç§å­æ¥è‡ªäºç†µæ± ï¼Œä¸å­˜åœ¨é˜»å¡çš„é—®é¢˜ï¼ˆå³ä½¿ç†µæ± ä¸ºç©º `/dev/urandom`ä»ç„¶èƒ½äº§ç”Ÿéšæœºæ•°ï¼‰ã€‚
  
  ## Cé£æ ¼éšæœºæ•°
  
@@@ -1280,11 -1280,11 +1348,11 @@@ int random_variable = std::rand();///ra
  
  ### éšæœºæ•°å¼•æ“
  
--éšæœºæ•°å¼•æ“ä»¥ç§å­æ•°æ®ä¸ºç†µæºç”Ÿæˆä¼ªéšæœºæ•°ï¼ŒC++æä¾›äº†ä¸‰ç§ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•/å¼•æ“ï¼ˆçº¿æ€§åŒä½™ã€æ¢…æ£®æ—‹è½¬ã€æ»åFibonacciï¼‰ï¼Œä¸‰ä¸ªå¼•æ“é€‚é…å™¨å’Œ9ä¸ªé¢„å®šä¹‰çš„å®ä¾‹åŒ–çš„ç”Ÿæˆå™¨ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„`default_random_engine`ç±»ï¼ˆå®ç°ç”±ç¼–è¯‘å™¨å‚å®¶å†³å®šï¼‰ï¼Œå…¶äº§ç”Ÿçš„éšæœºæ•°èŒƒå›´æ˜¯åœ¨`[default_random_engine::min()ï¼Œ default_random_engine::max()]`ä¹‹é—´ã€‚
++éšæœºæ•°å¼•æ“ä»¥ç§å­æ•°æ®ä¸ºç†µæºç”Ÿæˆä¼ªéšæœºæ•°ï¼ŒC++æä¾›äº†ä¸‰ç§ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•/å¼•æ“ï¼ˆçº¿æ€§åŒä½™ã€æ¢…æ£®æ—‹è½¬ã€æ»åFibonacciï¼‰ï¼Œä¸‰ä¸ªå¼•æ“é€‚é…å™¨å’Œ9ä¸ªé¢„å®šä¹‰çš„å®ä¾‹åŒ–çš„ç”Ÿæˆå™¨ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„ `default_random_engine`ç±»ï¼ˆå®ç°ç”±ç¼–è¯‘å™¨å‚å®¶å†³å®šï¼‰ï¼Œå…¶äº§ç”Ÿçš„éšæœºæ•°èŒƒå›´æ˜¯åœ¨ `[default_random_engine::min()ï¼Œ default_random_engine::max()]`ä¹‹é—´ã€‚
  
  ![C++éšæœºæ•°å¼•æ“](/home/linbird/Londa/img/lang/random-engine.jpg)
  
--**`random_device`ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§éšæœºæ•°å¼•æ“**ï¼Œå™¨å™ªå£°æ¥æºå¯ç”±æ„é€ å‡½æ•°æŒ‡å®šï¼ˆåœ¨Linuxä¸‹è¯»å–çš„æ˜¯`/dev/urandom`è®¾å¤‡ï¼ŒWindowsä¸‹çš„å®ç°æ˜¯ç”¨`rand_s`ï¼‰ã€‚ç”±äºæ¯æ¬¡å»è°ƒç”¨`random_device`è¯»å–æ–‡ä»¶çš„ä»£ä»·è¾ƒå¤§ï¼Œè€Œä¸”åœ¨ç”Ÿæˆå¤§é‡éšæœºæ•°æ—¶ä¼šé€ æˆæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤`random_device`ä¸€èˆ¬éƒ½ä½œä¸ºéšæœºæ•°ç§å­è€Œééšæœºæ•°å¼•æ“ä½¿ç”¨ã€‚
++**`random_device`ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§éšæœºæ•°å¼•æ“**ï¼Œå™¨å™ªå£°æ¥æºå¯ç”±æ„é€ å‡½æ•°æŒ‡å®šï¼ˆåœ¨Linuxä¸‹è¯»å–çš„æ˜¯ `/dev/urandom`è®¾å¤‡ï¼ŒWindowsä¸‹çš„å®ç°æ˜¯ç”¨ `rand_s`ï¼‰ã€‚ç”±äºæ¯æ¬¡å»è°ƒç”¨ `random_device`è¯»å–æ–‡ä»¶çš„ä»£ä»·è¾ƒå¤§ï¼Œè€Œä¸”åœ¨ç”Ÿæˆå¤§é‡éšæœºæ•°æ—¶ä¼šé€ æˆæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤ `random_device`ä¸€èˆ¬éƒ½ä½œä¸ºéšæœºæ•°ç§å­è€Œééšæœºæ•°å¼•æ“ä½¿ç”¨ã€‚
  
  ### éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»
  
@@@ -1314,15 -1314,15 +1382,15 @@@ for(int i=0; i<100; i++)///ç”Ÿæˆ100ä¸ª
  
  ### vector
  
--1. `vector`çš„ç†è®ºå­˜å‚¨ä¸Šé™å¯ä»¥è°ƒç”¨`vector<>::max_size`å¾—åˆ°ã€‚
++1. `vector`çš„ç†è®ºå­˜å‚¨ä¸Šé™å¯ä»¥è°ƒç”¨ `vector<>::max_size`å¾—åˆ°ã€‚
  
--+ `vector<bool>`æœ¬èº«æ˜¯å®éªŒäº§ç‰©å¹¶ä¸æ˜¯ä¸€ä¸ªSTLå®¹å™¨ï¼Œåº•å±‚å­˜å‚¨çš„å¹¶ä¸æ˜¯`bool`ç±»å‹å€¼ï¼Œæ¯ä¸ª`bool`å€¼éƒ½åªä½¿ç”¨ä¸€ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨ï¼Œåœ¨`for`å¾ªç¯ä¸­ä½¿ç”¨`auto`å¯¹`vector<bool>`éå†æ—¶ï¼Œ`auto`ä¸ä¼šè¢«æ¨å¯¼ä¸º`bool`ã€‚ã€‚`vector<bool>`çš„`operator[]`è¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¸æ»¡è¶³å®¹å™¨è¦æ±‚çš„`opertor[]`è¿”å›æŒ‡å‘å…ƒç´ çš„åœ°å€çš„è¦æ±‚ã€‚
+++ `vector<bool>`æœ¬èº«æ˜¯å®éªŒäº§ç‰©å¹¶ä¸æ˜¯ä¸€ä¸ªSTLå®¹å™¨ï¼Œåº•å±‚å­˜å‚¨çš„å¹¶ä¸æ˜¯ `bool`ç±»å‹å€¼ï¼Œæ¯ä¸ª `bool`å€¼éƒ½åªä½¿ç”¨ä¸€ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨ï¼Œåœ¨ `for`å¾ªç¯ä¸­ä½¿ç”¨ `auto`å¯¹ `vector<bool>`éå†æ—¶ï¼Œ`auto`ä¸ä¼šè¢«æ¨å¯¼ä¸º `bool`ã€‚ã€‚`vector<bool>`çš„ `operator[]`è¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¸æ»¡è¶³å®¹å™¨è¦æ±‚çš„ `opertor[]`è¿”å›æŒ‡å‘å…ƒç´ çš„åœ°å€çš„è¦æ±‚ã€‚
  
  ### deque
  
  1. `deque`æ˜¯**åŠ¨æ€çš„ä»¥åˆ†æ®µè¿ç»­ç©ºé—´ç»„åˆè€Œæˆ**ï¼Œéšæ—¶å¯ä»¥å¢åŠ ä¸€æ®µæ–°çš„ç©ºé—´å¹¶é“¾æ¥èµ·æ¥ï¼Œ`deque`æœ€å¤§çš„å·¥ä½œå°±æ˜¯ç»´æŠ¤è¿™äº›åˆ†æ®µè¿ç»­çš„å†…å­˜ç©ºé—´çš„æ•´ä½“æ€§çš„å‡è±¡ï¼Œå¹¶æä¾›éšæœºå­˜å–çš„æ¥å£ï¼Œé¿å¼€äº†é‡æ–°é…ç½®ç©ºé—´ï¼Œå¤åˆ¶ï¼Œé‡Šæ”¾çš„è½®å›ã€‚
--2. `deque`ç”±ä¸»æ§å’Œå­˜å‚¨åŒºæ„æˆï¼Œé€šè¿‡ä¸»æ§ç»´æŒæ•´ä½“è¿ç»­çš„å‡è±¡ã€‚æ‰€è°“çš„ä¸»æ§æ˜¯ä¸€å°å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ (æ­¤å¤„æˆä¸ºä¸€ä¸ªç»“ç‚¹)éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¦ä¸€æ®µç§°ä½œç¼“å†²åŒºçš„è¿ç»­æ€§å†…å­˜ç©ºé—´çš„æŒ‡é’ˆï¼Œç¼“å†²åŒºæ‰æ˜¯`deque`çš„å­˜å‚¨ç©ºé—´çš„ä¸»ä½“ã€‚
--3. `deque`çš„å®ç°å†³å®šäº†å…¶è¿­ä»£å™¨å¤æ‚åº¦å’Œ`vector`ä¸æ˜¯ä¸€ä¸ªé‡çº§ï¼Œå¹¶ä¸é€‚åˆç›´æ¥ä½¿ç”¨ç®—æ³•ä¸­éœ€è¦éšæœºè¿­ä»£å™¨æ”¯æŒçš„ç®—æ³•ã€‚
++2. `deque`ç”±ä¸»æ§å’Œå­˜å‚¨åŒºæ„æˆï¼Œé€šè¿‡ä¸»æ§ç»´æŒæ•´ä½“è¿ç»­çš„å‡è±¡ã€‚æ‰€è°“çš„ä¸»æ§æ˜¯ä¸€å°å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ (æ­¤å¤„æˆä¸ºä¸€ä¸ªç»“ç‚¹)éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¦ä¸€æ®µç§°ä½œç¼“å†²åŒºçš„è¿ç»­æ€§å†…å­˜ç©ºé—´çš„æŒ‡é’ˆï¼Œç¼“å†²åŒºæ‰æ˜¯ `deque`çš„å­˜å‚¨ç©ºé—´çš„ä¸»ä½“ã€‚
++3. `deque`çš„å®ç°å†³å®šäº†å…¶è¿­ä»£å™¨å¤æ‚åº¦å’Œ `vector`ä¸æ˜¯ä¸€ä¸ªé‡çº§ï¼Œå¹¶ä¸é€‚åˆç›´æ¥ä½¿ç”¨ç®—æ³•ä¸­éœ€è¦éšæœºè¿­ä»£å™¨æ”¯æŒçš„ç®—æ³•ã€‚
  
  ## æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)
  
@@@ -1332,8 -1332,8 +1400,8 @@@
  
  1. è¿­ä»£å™¨ï¼šç”±äºçº¢é»‘æ ‘æœ¬èº«æœ‰åºï¼Œå› æ­¤å…¶è¿­ä»£å™¨å¯ä»¥è§†ä½œå¯¹æ ‘çš„ä¸€ç§éå†æ–¹æ³•ã€‚
  2. ç”±äºçº¢é»‘æ ‘ä»»ä½•ä¸€ä¸ªç»“ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å…ƒç´ åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œæ‰€ä»¥å¯¹äºå…³è”å®¹å™¨æ’å…¥åˆ é™¤éƒ½ä¸ä¼šå¯¼è‡´ä»»ä½•è¿­ä»£å™¨å¤±æ•ˆï¼Œé™¤äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨ã€‚
--3. `set`ä¸`map`çš„åŒºåˆ«åœ¨äºæ‰€ä½¿ç”¨çš„çº¢é»‘æ ‘çš„èŠ‚ç‚¹çš„å…·ä½“ç±»å‹æœ‰æ‰€ä¸åŒï¼Œ`map`ä½¿ç”¨äº†`pair`ç»“æ„ã€‚
--4. çº¢é»‘æ ‘æä¾›çš„`insert_unique`å’Œ`insert`æä¾›äº†`multi`ç³»åˆ—çš„æ”¯æŒã€‚
++3. `set`ä¸ `map`çš„åŒºåˆ«åœ¨äºæ‰€ä½¿ç”¨çš„çº¢é»‘æ ‘çš„èŠ‚ç‚¹çš„å…·ä½“ç±»å‹æœ‰æ‰€ä¸åŒï¼Œ`map`ä½¿ç”¨äº† `pair`ç»“æ„ã€‚
++4. çº¢é»‘æ ‘æä¾›çš„ `insert_unique`å’Œ `insert`æä¾›äº† `multi`ç³»åˆ—çš„æ”¯æŒã€‚
  
  ### ä¼˜ç‚¹
  
@@@ -1347,45 -1347,45 +1415,45 @@@ AVLæ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œé¢‘ç¹çš„æ’
  
  * `unordered_setã€unordered_multisetã€unordered_mapã€unordered_multimap`
  
--+ ä¸Šè¿°å››ä¸ªå®¹å™¨çš„åº•å±‚å®ç°éƒ½ä¾é STLä¸­çš„`hash_table`ä¸`hase_table_node`ç»“æ„ï¼Œå…¶ä¸­`hash_table`æä¾›çš„`insert_unique`å’Œ`insert_equal`ä¸º`multi`ç³»åˆ—ä¾é `hash`çš„å®¹å™¨æä¾›äº†æ”¯æŒã€‚
+++ ä¸Šè¿°å››ä¸ªå®¹å™¨çš„åº•å±‚å®ç°éƒ½ä¾é STLä¸­çš„ `hash_table`ä¸ `hase_table_node`ç»“æ„ï¼Œå…¶ä¸­ `hash_table`æä¾›çš„ `insert_unique`å’Œ `insert_equal`ä¸º `multi`ç³»åˆ—ä¾é  `hash`çš„å®¹å™¨æä¾›äº†æ”¯æŒã€‚
  
  1. æ ‡å‡†åº“ä¸­å“ˆå¸Œå†²çªçš„é»˜è®¤è§£å†³æ–¹æ³•ä¸ºé“¾æ¥æ³•ã€‚
  2. hashå‡½æ•°:[å¸¸è§å“ˆå¸Œå‡½æ•°](https://blog.csdn.net/AlburtHoffman/article/details/19641123)ï¼Œ[å„ç§å­—ç¬¦ä¸²Hashå‡½æ•°æ¯”è¾ƒ](https://byvoid.com/zhs/blog/string-hash-compare/)
--    - `SGI STL`çš„å®ç°ä¸­å®šä¹‰äº†`hash<>()`æ¨¡æ¿çš„ä»¿å‡½æ•°ï¼Œå¯¹`intã€longã€char\*`ç­‰åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†ç‰¹åŒ–ï¼Œå…¶ä¸­æ•´æ•°`hash`ä¸ºæ’ç­‰æ˜ å°„ï¼Œå¯¹äº`char*`ç±»å‹æ‰€æŒ‡çš„å­—ç¬¦ä¸²çš„äº”è¿›åˆ¶ï¼ˆæ¯ä¸ªs[i]æ˜¯s[i]çš„`ansic`å€¼ï¼‰æ•´æ•°è¡¨ç¤ºåšå…¶`hash`ç»“æœ[è¯¦æƒ…](https://blog.csdn.net/jmh1996/article/details/103763028)
--    - `VS STL`çš„å®ç°ä¸­ç¡¬ç¼–ç äº†å‡ ä¸ªé­”æ•°ï¼Œå…·ä½“è§£é‡Šå¯å‚çœ‹[é“¾æ¥](https://blog.csdn.net/jmh1996/article/details/103763028)
--3. å“ˆå¸Œè¡¨ä¸­æ¯ä¸ªå…ƒç´ ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼ˆ`bucket`ï¼‰ï¼Œæ¯ä¸ªè¢«æ’å…¥çš„å…ƒç´ åˆ©ç”¨å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å¯¹åº”çš„æ¡¶ã€‚ä¸ºæ±‚å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œæ¡¶æ•°é‡é€šå¸¸æ˜¯è´¨æ•°ï¼ˆä½¿ç”¨è´¨æ•°ä½œä¸ºæ¡¶æ•°ï¼Œä¿è¯äº†å³ä½¿æ˜¯å¾ˆç®€å•çš„å“ˆå¸Œå‡½æ•°æ•´ä¸ª`hashteble`çš„æ•ˆç‡ä¹Ÿä¸ä¼šå¤ªä½ï¼‰ï¼Œåº“é€šè¿‡æ‰“è¡¨åŠ é€Ÿè´¨æ•°çš„é€‰æ‹©ã€‚
++   - `SGI STL`çš„å®ç°ä¸­å®šä¹‰äº† `hash<>()`æ¨¡æ¿çš„ä»¿å‡½æ•°ï¼Œå¯¹ `intã€longã€char\*`ç­‰åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†ç‰¹åŒ–ï¼Œå…¶ä¸­æ•´æ•° `hash`ä¸ºæ’ç­‰æ˜ å°„ï¼Œå¯¹äº `char*`ç±»å‹æ‰€æŒ‡çš„å­—ç¬¦ä¸²çš„äº”è¿›åˆ¶ï¼ˆæ¯ä¸ªs[i]æ˜¯s[i]çš„ `ansic`å€¼ï¼‰æ•´æ•°è¡¨ç¤ºåšå…¶ `hash`ç»“æœ[è¯¦æƒ…](https://blog.csdn.net/jmh1996/article/details/103763028)
++   - `VS STL`çš„å®ç°ä¸­ç¡¬ç¼–ç äº†å‡ ä¸ªé­”æ•°ï¼Œå…·ä½“è§£é‡Šå¯å‚çœ‹[é“¾æ¥](https://blog.csdn.net/jmh1996/article/details/103763028)
++3. å“ˆå¸Œè¡¨ä¸­æ¯ä¸ªå…ƒç´ ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼ˆ`bucket`ï¼‰ï¼Œæ¯ä¸ªè¢«æ’å…¥çš„å…ƒç´ åˆ©ç”¨å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å¯¹åº”çš„æ¡¶ã€‚ä¸ºæ±‚å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œæ¡¶æ•°é‡é€šå¸¸æ˜¯è´¨æ•°ï¼ˆä½¿ç”¨è´¨æ•°ä½œä¸ºæ¡¶æ•°ï¼Œä¿è¯äº†å³ä½¿æ˜¯å¾ˆç®€å•çš„å“ˆå¸Œå‡½æ•°æ•´ä¸ª `hashteble`çš„æ•ˆç‡ä¹Ÿä¸ä¼šå¤ªä½ï¼‰ï¼Œåº“é€šè¿‡æ‰“è¡¨åŠ é€Ÿè´¨æ•°çš„é€‰æ‹©ã€‚
  4. æ‰€æ”¯æŒçš„éƒ½æ˜¯å‰å‘è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨åªæ”¯æŒoperator++æ“ä½œã€‚
  
  ### æ‰©å®¹
  
--ä¸ºäº†èƒ½è®©æ¡¶æ•°é‡åŠ¨æ€å¢é•¿ï¼Œç”¨`vector`ä½œä¸ºæ¡¶çš„å®¹å™¨ã€‚æ‰©å®¹çš„å®ç°æ–¹æ³•å¯ä»¥å‚ç…§`redis`çš„`rehash`ï¼Œ`stl`ä¸­çš„`rehash`æš‚æœªäº†è§£ã€‚
++ä¸ºäº†èƒ½è®©æ¡¶æ•°é‡åŠ¨æ€å¢é•¿ï¼Œç”¨ `vector`ä½œä¸ºæ¡¶çš„å®¹å™¨ã€‚æ‰©å®¹çš„å®ç°æ–¹æ³•å¯ä»¥å‚ç…§ `redis`çš„ `rehash`ï¼Œ`stl`ä¸­çš„ `rehash`æš‚æœªäº†è§£ã€‚
  
  ## å®¹å™¨é€‚é…å™¨
  
  * `stackã€queueã€priority_queue`
  
  1. å®¹å™¨é€‚é…å™¨æœ¬è´¨ä¸Šè¿˜æ˜¯å®¹å™¨ï¼Œåªæ˜¯ä¸ºäº†ç‰¹å®šçš„ä½¿ç”¨åŠŸèƒ½å°†åŸºç¡€å®¹å™¨ä¸­çš„å‡½æ•°å®ç°è¿›è¡Œäº†ç»„åˆã€ä¼˜åŒ–æˆ–è€…é‡å†™ã€‚
--2. å®¹å™¨é€‚é…å™¨çš„åº•å±‚å®¹å™¨å¹¶ä¸æ˜¯å›ºå®šçš„ï¼ŒSTLå¯¹**`stack`å’Œ`queue`é»˜è®¤ä½¿ç”¨`deque`å®ç°ï¼Œ`priority_queue`é»˜è®¤ä½¿ç”¨`vector`å®ç°**;
++2. å®¹å™¨é€‚é…å™¨çš„åº•å±‚å®¹å™¨å¹¶ä¸æ˜¯å›ºå®šçš„ï¼ŒSTLå¯¹**`stack`å’Œ `queue`é»˜è®¤ä½¿ç”¨ `deque`å®ç°ï¼Œ`priority_queue`é»˜è®¤ä½¿ç”¨ `vector`å®ç°**;
  
  ## å…¶å®ƒ
  
--1. `assign`ä¸`operator=`ï¼šå…¶åŸºæœ¬ä½œç”¨éƒ½æ˜¯ä¸ºå®¹å™¨èµ‹å€¼ï¼Œ`assign`çš„ä½¿ç”¨æ›´å¹¿ä¸€äº›ã€‚
--2. `at`ä¸`operator[]`ï¼š`at`æä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œè¶Šç•Œä¼šæŠ›å‡º`out_of_range`å¼‚å¸¸ã€‚
++1. `assign`ä¸ `operator=`ï¼šå…¶åŸºæœ¬ä½œç”¨éƒ½æ˜¯ä¸ºå®¹å™¨èµ‹å€¼ï¼Œ`assign`çš„ä½¿ç”¨æ›´å¹¿ä¸€äº›ã€‚
++2. `at`ä¸ `operator[]`ï¼š`at`æä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œè¶Šç•Œä¼šæŠ›å‡º `out_of_range`å¼‚å¸¸ã€‚
  3. `arrayã€vectorã€string`**`deque`**æä¾›äº†éšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒçš„å®¹å™¨
--4. `map`ç³»åˆ—çš„å®¹å™¨æ”¯æŒæŒ‰ç…§`key`å€¼åˆ é™¤å…ƒç´ 
++4. `map`ç³»åˆ—çš„å®¹å™¨æ”¯æŒæŒ‰ç…§ `key`å€¼åˆ é™¤å…ƒç´ 
  5. ç®—æ³•çš„åŒºé—´é‡‡ç”¨å‰å¼€åé—­çš„åŸå› ï¼šå¯ä»¥ç»Ÿä¸€ç©ºé›†çš„è¡¨ç¤º
--6. `list`å’Œ`forward_list`å®¹å™¨éƒ½æ ¹æ®è‡ªèº«å®ç°æä¾›äº†`sort`æˆå‘˜å‡½æ•°æ¥åŠ é€Ÿæ’åºã€‚
--7. `string`çš„`size`å’Œ`length`æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œ`length`æ˜¯ä¸ºäº†ä¿æŒCé£æ ¼è€Œä¿ç•™çš„è€å¼å‡½æ•°ã€‚
++6. `list`å’Œ `forward_list`å®¹å™¨éƒ½æ ¹æ®è‡ªèº«å®ç°æä¾›äº† `sort`æˆå‘˜å‡½æ•°æ¥åŠ é€Ÿæ’åºã€‚
++7. `string`çš„ `size`å’Œ `length`æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œ`length`æ˜¯ä¸ºäº†ä¿æŒCé£æ ¼è€Œä¿ç•™çš„è€å¼å‡½æ•°ã€‚
  8. `erase`æ–¹æ³•è¿”å›äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚
--9. `vector`å’Œ`deque`æ”¯æŒ`shrink_to_fit()`è‡ªåŠ¨ç´§ç¼©å†…å­˜
++9. `vector`å’Œ `deque`æ”¯æŒ `shrink_to_fit()`è‡ªåŠ¨ç´§ç¼©å†…å­˜
  
  ## å †
  
--STLä¸­å¹¶æ²¡æœ‰ç›´æ¥çš„æ•°æ®ç»“æ„å®ç°äº†å †ï¼Œä½†å´åœ¨`vector`çš„ç»“æ„ä¸Šå®ç°äº†å †çš„ä¸€ç³»åˆ—æ“ä½œã€‚
++STLä¸­å¹¶æ²¡æœ‰ç›´æ¥çš„æ•°æ®ç»“æ„å®ç°äº†å †ï¼Œä½†å´åœ¨ `vector`çš„ç»“æ„ä¸Šå®ç°äº†å †çš„ä¸€ç³»åˆ—æ“ä½œã€‚
  
  1. åŸºäºvectorå»ºå †ï¼š`make_heap`
--2. å†å¯¹vectoræ„æˆçš„å †å˜åŠ¨ä¹‹åçš„è°ƒæ•´ï¼š`push`ä¹‹åçš„`push_heap`ï¼Œ`pop`ä¹‹åçš„`pop_heap`;
--3. å¯¹vectoræ˜¯å¦æ„æˆå †çš„åˆ¤åˆ«æ“ä½œï¼š`is_heap`ä»¥åŠæ‰¾åˆ°ç ´åå †çš„`is_heap_until`
++2. å†å¯¹vectoræ„æˆçš„å †å˜åŠ¨ä¹‹åçš„è°ƒæ•´ï¼š`push`ä¹‹åçš„ `push_heap`ï¼Œ`pop`ä¹‹åçš„ `pop_heap`;
++3. å¯¹vectoræ˜¯å¦æ„æˆå †çš„åˆ¤åˆ«æ“ä½œï¼š`is_heap`ä»¥åŠæ‰¾åˆ°ç ´åå †çš„ `is_heap_until`
  
  ## è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ
  
@@@ -1393,8 -1393,8 +1461,8 @@@
  
  ### è¿­ä»£å™¨æ”¯æŒæƒ…å†µ
  
--|            ä¸æ”¯æŒ            |                             å‰å‘                             |                åŒå‘                |            éšæœº             |
--| :--------------------------: | :----------------------------------------------------------: | :--------------------------------: | :-------------------------: |
++|             ä¸æ”¯æŒ             |                                        å‰å‘                                        |                 åŒå‘                 |             éšæœº             |
++| :----------------------------: | :--------------------------------------------------------------------------------: | :----------------------------------: | :---------------------------: |
  | `stack,queue,priority_queue` | `forward_list,unordered_map,unordered_set,unordered_multimap,unordered_multiset` | `list,map,set,multi_map,multi_set` | `vector,string,array,deque` |
  
  ### è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ
@@@ -1413,14 -1413,14 +1481,14 @@@
  2. `binary_search`ï¼š åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾valueï¼Œæ‰¾åˆ°è¿”å›trueã€‚é‡è½½çš„ç‰ˆæœ¬å®ç”¨æŒ‡å®šçš„æ¯”è¾ƒå‡½æ•°å¯¹è±¡æˆ–å‡½æ•°æŒ‡é’ˆæ¥åˆ¤æ–­ç›¸ç­‰ã€‚
  3. `count`ï¼šåˆ©ç”¨ç­‰äºæ“ä½œç¬¦ï¼ŒæŠŠæ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼æ¯”è¾ƒï¼Œè¿”å›ç›¸ç­‰å…ƒç´ ä¸ªæ•°ã€‚
  4. `count_if`ï¼šåˆ©ç”¨è¾“å…¥çš„æ“ä½œç¬¦ï¼Œå¯¹æ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œè¿”å›ç»“æœä¸ºtrueçš„ä¸ªæ•°ã€‚
--5. `equal_range`ï¼š åŠŸèƒ½ç±»ä¼¼`equal`ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºlower_boundï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºupper_boundã€‚
--6. `find`ï¼šåˆ©ç”¨åº•å±‚å…ƒç´ çš„ç­‰äºæ“ä½œç¬¦ï¼Œå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼è¿›è¡Œæ¯”è¾ƒã€‚å½“åŒ¹é…æ—¶ï¼Œç»“æŸæœç´¢ï¼Œè¿”å›è¯¥å…ƒç´ çš„ä¸€ä¸ª`InputIterator`ã€‚
--7. `find_end`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"çš„æœ€åä¸€æ¬¡å‡ºç°ã€‚æ‰¾åˆ°åˆ™è¿”å›æœ€åä¸€å¯¹çš„ç¬¬ä¸€ ä¸ª`ForwardIterator`ï¼Œå¦åˆ™è¿”å›è¾“å…¥çš„"å¦å¤–ä¸€å¯¹"çš„ç¬¬ä¸€ä¸ª`ForwardIterator`ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿ç­‰äºæ“ä½œã€‚
++5. `equal_range`ï¼š åŠŸèƒ½ç±»ä¼¼ `equal`ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºlower_boundï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºupper_boundã€‚
++6. `find`ï¼šåˆ©ç”¨åº•å±‚å…ƒç´ çš„ç­‰äºæ“ä½œç¬¦ï¼Œå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼è¿›è¡Œæ¯”è¾ƒã€‚å½“åŒ¹é…æ—¶ï¼Œç»“æŸæœç´¢ï¼Œè¿”å›è¯¥å…ƒç´ çš„ä¸€ä¸ª `InputIterator`ã€‚
++7. `find_end`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"çš„æœ€åä¸€æ¬¡å‡ºç°ã€‚æ‰¾åˆ°åˆ™è¿”å›æœ€åä¸€å¯¹çš„ç¬¬ä¸€ ä¸ª `ForwardIterator`ï¼Œå¦åˆ™è¿”å›è¾“å…¥çš„"å¦å¤–ä¸€å¯¹"çš„ç¬¬ä¸€ä¸ª `ForwardIterator`ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿ç­‰äºæ“ä½œã€‚
  8. `find_first_of`ï¼š åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ç¬¬ä¸€æ¬¡å‡ºç°ã€‚é‡è½½ç‰ˆæœ¬ä¸­ä½¿ç”¨äº†ç”¨æˆ·è‡ªå®šä¹‰æ“ä½œç¬¦ã€‚
  9. `find_if`ï¼šä½¿ç”¨è¾“å…¥çš„å‡½æ•°ä»£æ›¿ç­‰äºæ“ä½œç¬¦æ‰§è¡Œfindã€‚
--10. `lower_bound`ï¼š   è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…çš„å¯ä»¥æ’å…¥æŒ‡å®šå€¼è€Œä¸ç ´åå®¹å™¨é¡ºåºçš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
--11. `upper_bound`ï¼š  è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…æ’å…¥valueè€Œä¸ç ´åå®¹å™¨é¡ºåºçš„æœ€åä¸€ä¸ªä½ç½®ï¼Œè¯¥ä½ç½®æ ‡å¿—ä¸€ä¸ªå¤§äºvalueçš„å€¼ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
--12. `search`ï¼š  ç»™å‡ºä¸¤ä¸ªèŒƒå›´ï¼Œè¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŸ¥æ‰¾æˆåŠŸæŒ‡å‘ç¬¬ä¸€ä¸ªèŒƒå›´å†…ç¬¬ä¸€æ¬¡å‡ºç°å­åºåˆ—(ç¬¬äºŒä¸ªèŒƒå›´)çš„ä½ç½®ï¼ŒæŸ¥æ‰¾å¤±è´¥æŒ‡å‘last1ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
++10. `lower_bound`ï¼š   è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…çš„å¯ä»¥æ’å…¥æŒ‡å®šå€¼è€Œä¸ç ´åå®¹å™¨é¡ºåºçš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
++11. `upper_bound`ï¼š  è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…æ’å…¥valueè€Œä¸ç ´åå®¹å™¨é¡ºåºçš„æœ€åä¸€ä¸ªä½ç½®ï¼Œè¯¥ä½ç½®æ ‡å¿—ä¸€ä¸ªå¤§äºvalueçš„å€¼ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
++12. `search`ï¼š  ç»™å‡ºä¸¤ä¸ªèŒƒå›´ï¼Œè¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŸ¥æ‰¾æˆåŠŸæŒ‡å‘ç¬¬ä¸€ä¸ªèŒƒå›´å†…ç¬¬ä¸€æ¬¡å‡ºç°å­åºåˆ—(ç¬¬äºŒä¸ªèŒƒå›´)çš„ä½ç½®ï¼ŒæŸ¥æ‰¾å¤±è´¥æŒ‡å‘last1ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
  13. `search_n`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾valå‡ºç°næ¬¡çš„å­åºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
  
  ## æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥
@@@ -1429,46 -1429,46 +1497,46 @@@
  2. `merge`ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—ï¼Œå­˜æ”¾åˆ°å¦ä¸€ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒã€‚
  3. `nth_element`ï¼š  å°†èŒƒå›´å†…çš„åºåˆ—é‡æ–°æ’åºï¼Œä½¿æ‰€æœ‰å°äºç¬¬nä¸ªå…ƒç´ çš„å…ƒç´ éƒ½å‡ºç°åœ¨å®ƒå‰é¢ï¼Œè€Œå¤§äºå®ƒçš„éƒ½å‡ºç°åœ¨åé¢ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
  4. `partial_sort`ï¼šå¯¹åºåˆ—åšéƒ¨åˆ†æ’åºï¼Œè¢«æ’åºå…ƒç´ ä¸ªæ•°æ­£å¥½å¯ä»¥è¢«æ”¾åˆ°èŒƒå›´å†…ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
--5. `partial_sort_copy`ï¼š ä¸`partial_sort`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»è¿‡æ’åºçš„åºåˆ—å¤åˆ¶åˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
++5. `partial_sort_copy`ï¼š ä¸ `partial_sort`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»è¿‡æ’åºçš„åºåˆ—å¤åˆ¶åˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
  6. `partition`ï¼š å¯¹æŒ‡å®šèŒƒå›´å†…å…ƒç´ åˆ’åˆ†ï¼Œä½¿ç”¨è¾“å…¥çš„å‡½æ•°æŠŠç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ æ”¾åœ¨å‰åŠéƒ¨åˆ†ï¼Œ**è¿”å›ååŠéƒ¨åˆ†ç¬¬ä¸€ä¸ªå€¼çš„è¿­ä»£å™¨**ã€‚
  7. `random_shuffle`ï¼šå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åºã€‚é‡è½½ç‰ˆæœ¬è¾“å…¥ä¸€ä¸ªéšæœºæ•°äº§ç”Ÿæ“ä½œã€‚
  8. `reverse`ï¼š  å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ é‡æ–°ååºæ’åºã€‚
--9. `reverse_copy`ï¼šä¸`reverse`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
++9. `reverse_copy`ï¼šä¸ `reverse`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
  10. `rotate`ï¼š å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ ç§»åˆ°å®¹å™¨æœ«å°¾ï¼Œç”±middleæŒ‡å‘çš„å…ƒç´ æˆä¸ºå®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
--11. `rotate_copy`ï¼š   ä¸`rotate`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
++11. `rotate_copy`ï¼š   ä¸ `rotate`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
  12. `sort`ï¼š ä»¥å‡åºé‡æ–°æ’åˆ—æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
--13. `stable_sort`ï¼šä¸`sort`ç±»ä¼¼ï¼Œä¸è¿‡ä¿ç•™ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚
--14. `stable_partition`ï¼šä¸`partition`ç±»ä¼¼ï¼Œä¸è¿‡ä¸ä¿è¯ä¿ç•™å®¹å™¨ä¸­çš„ç›¸å¯¹é¡ºåºã€‚
++13. `stable_sort`ï¼šä¸ `sort`ç±»ä¼¼ï¼Œä¸è¿‡ä¿ç•™ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚
++14. `stable_partition`ï¼šä¸ `partition`ç±»ä¼¼ï¼Œä¸è¿‡ä¸ä¿è¯ä¿ç•™å®¹å™¨ä¸­çš„ç›¸å¯¹é¡ºåºã€‚
  
  ### `std::sort()`
  
--éœ€è¦æ³¨æ„çš„æ˜¯**STLä¸­çš„`sort()`ç®—æ³•ä¸ºå†…çœå¼æ’åºï¼Œæ˜¯ä¸€ç§æ··åˆå¼çš„æ’åºç®—æ³•**ã€‚ç»¼åˆä½¿ç”¨äº†å¿«é€Ÿæ’åºç®—æ³•ã€å †æ’åºç®—æ³•ã€æ’å…¥æ’åºç®—æ³•ï¼š
++éœ€è¦æ³¨æ„çš„æ˜¯**STLä¸­çš„ `sort()`ç®—æ³•ä¸ºå†…çœå¼æ’åºï¼Œæ˜¯ä¸€ç§æ··åˆå¼çš„æ’åºç®—æ³•**ã€‚ç»¼åˆä½¿ç”¨äº†å¿«é€Ÿæ’åºç®—æ³•ã€å †æ’åºç®—æ³•ã€æ’å…¥æ’åºç®—æ³•ï¼š
  
  - åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶é‡‡ç”¨æ­£å¸¸çš„å¿«é€Ÿæ’åºï¼Œæ­¤æ—¶æ•ˆç‡ä¸ºO(logN)ã€‚
  - ä¸€æ—¦åˆ†æ®µåçš„æ•°æ®é‡å°äºæŸä¸ª**é˜ˆå€¼ï¼ˆ16ï¼‰**ï¼Œå°±æ”¹ç”¨æ’å…¥æ’åºï¼Œå› ä¸ºæ­¤æ—¶è¿™ä¸ªåˆ†æ®µæ˜¯åŸºæœ¬æœ‰åºçš„ï¼Œè¿™æ—¶æ•ˆç‡å¯è¾¾O(N)ã€‚
  - åœ¨é€’å½’è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¾¦æµ‹**é€’å½’å±‚æ¬¡ï¼ˆ$2*log(N)$ï¼‰**æ˜¯å¦è¿‡æ·±ï¼Œè¿‡æ·±é‡‡ç”¨å †æ’åºå¤„ç†ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ï¼Œä½¿å…¶æ•ˆç‡ç»´æŒåœ¨å †æ’åºçš„O(N logN)ï¼Œä½†è¿™åˆæ¯”ä¸€å¼€å§‹ä½¿ç”¨å †æ’åºå¥½ã€‚
  
--STLä¸­çš„[`sort(`)æ’åºå®ç°](https://feihu.me/blog/2014/sgi-std-sort/)è¿˜é‡‡ç”¨äº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼šé€šè¿‡å¾ªç¯å‡å°‘ä¸€åŠçš„é€’å½’å‡½æ•°è°ƒç”¨ï¼Œä¸‰ç‚¹ä¸­å€¼æ³•ç¡®å®š`privot`ï¼Œé«˜æ•ˆçš„åˆ’åˆ†ç®—æ³•ã€‚
++STLä¸­çš„[`sort(`)æ’åºå®ç°](https://feihu.me/blog/2014/sgi-std-sort/)è¿˜é‡‡ç”¨äº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼šé€šè¿‡å¾ªç¯å‡å°‘ä¸€åŠçš„é€’å½’å‡½æ•°è°ƒç”¨ï¼Œä¸‰ç‚¹ä¸­å€¼æ³•ç¡®å®š `privot`ï¼Œé«˜æ•ˆçš„åˆ’åˆ†ç®—æ³•ã€‚
  
--åœ¨å…¶ä»–å¿«é€Ÿæ’åºå®ç°é‡Œï¼Œå½“åŒ…å«è®¸å¤šé‡å¤çš„å…ƒç´ æ—¶é€šå¸¸ä½¿ç”¨[**ä¸‰è·¯åˆ’åˆ†ç®—æ³•**](https://blog.csdn.net/jlqCloud/article/details/46939703)æ¥ä¼˜åŒ–å¿«é€Ÿæ’åºçš„è¡¨ç°ï¼Œä¸‰è·¯åˆ’åˆ†ç®—æ³•å°†æ•°ç»„åˆ’åˆ†ä¸ºå°äºã€ç­‰äºã€å¤§äº`provit`çš„ä¸‰éƒ¨åˆ†ã€‚
++åœ¨å…¶ä»–å¿«é€Ÿæ’åºå®ç°é‡Œï¼Œå½“åŒ…å«è®¸å¤šé‡å¤çš„å…ƒç´ æ—¶é€šå¸¸ä½¿ç”¨[**ä¸‰è·¯åˆ’åˆ†ç®—æ³•**](https://blog.csdn.net/jlqCloud/article/details/46939703)æ¥ä¼˜åŒ–å¿«é€Ÿæ’åºçš„è¡¨ç°ï¼Œä¸‰è·¯åˆ’åˆ†ç®—æ³•å°†æ•°ç»„åˆ’åˆ†ä¸ºå°äºã€ç­‰äºã€å¤§äº `provit`çš„ä¸‰éƒ¨åˆ†ã€‚
  
  ## åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)
  
  1. `copy`ï¼šå¤åˆ¶åºåˆ—
--2. `copy_backward`ï¼š ä¸`copy`ç›¸åŒï¼Œä¸è¿‡å…ƒç´ æ˜¯ä»¥ç›¸åé¡ºåºè¢«æ‹·è´ã€‚
--3. `iter_swap`ï¼š   äº¤æ¢ä¸¤ä¸ª`ForwardIterator`çš„å€¼ã€‚
--4. `remove`ï¼šåˆ é™¤æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºæŒ‡å®šå…ƒç´ çš„å…ƒç´ ã€‚æ³¨æ„ï¼Œè¯¥å‡½æ•°ä¸æ˜¯çœŸæ­£åˆ é™¤å‡½æ•°ã€‚å†…ç½®å‡½æ•°ä¸é€‚åˆä½¿ç”¨`remove`å’Œ`remove_if`å‡½æ•°ã€‚
--5. `remove_copy`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªåˆ¶å®šå®¹å™¨ï¼Œè¿”å›`OutputIterator`æŒ‡å‘è¢«æ‹·è´çš„æœ«å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚
++2. `copy_backward`ï¼š ä¸ `copy`ç›¸åŒï¼Œä¸è¿‡å…ƒç´ æ˜¯ä»¥ç›¸åé¡ºåºè¢«æ‹·è´ã€‚
++3. `iter_swap`ï¼š   äº¤æ¢ä¸¤ä¸ª `ForwardIterator`çš„å€¼ã€‚
++4. `remove`ï¼šåˆ é™¤æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºæŒ‡å®šå…ƒç´ çš„å…ƒç´ ã€‚æ³¨æ„ï¼Œè¯¥å‡½æ•°ä¸æ˜¯çœŸæ­£åˆ é™¤å‡½æ•°ã€‚å†…ç½®å‡½æ•°ä¸é€‚åˆä½¿ç”¨ `remove`å’Œ `remove_if`å‡½æ•°ã€‚
++5. `remove_copy`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªåˆ¶å®šå®¹å™¨ï¼Œè¿”å› `OutputIterator`æŒ‡å‘è¢«æ‹·è´çš„æœ«å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚
  6. `remove_if`ï¼š   åˆ é™¤æŒ‡å®šèŒƒå›´å†…è¾“å…¥æ“ä½œç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ ã€‚
  7. `remove_copy_if`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ æ‹·è´åˆ°ä¸€ä¸ªæŒ‡å®šå®¹å™¨ã€‚
  8. `replace`ï¼šå°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºvoldçš„å…ƒç´ éƒ½ç”¨vnewä»£æ›¿ã€‚
--9. `replace_copy`ï¼š ä¸`replace`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
++9. `replace_copy`ï¼š ä¸ `replace`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
  10. `replace_if`ï¼š   å°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰æ“ä½œç»“æœä¸ºtrueçš„å…ƒç´ ç”¨æ–°å€¼ä»£æ›¿ã€‚
--11. `replace_copy_if`ï¼š ä¸`replace_if`ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
++11. `replace_copy_if`ï¼š ä¸ `replace_if`ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
  12. `swap`ï¼š   äº¤æ¢å­˜å‚¨åœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„å€¼ã€‚
  13. `swap_range`ï¼šå°†æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸å¦ä¸€ä¸ªåºåˆ—å…ƒç´ å€¼è¿›è¡Œäº¤æ¢ã€‚
--14. `unique`ï¼šæ¸…é™¤åºåˆ—ä¸­é‡å¤å…ƒç´ ï¼Œå’Œ`remove`ç±»ä¼¼ï¼Œå®ƒä¹Ÿä¸èƒ½çœŸæ­£åˆ é™¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
--15. `unique_copy`ï¼š  ä¸`unique`ç±»ä¼¼ï¼Œä¸è¿‡æŠŠç»“æœè¾“å‡ºåˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
++14. `unique`ï¼šæ¸…é™¤åºåˆ—ä¸­é‡å¤å…ƒç´ ï¼Œå’Œ `remove`ç±»ä¼¼ï¼Œå®ƒä¹Ÿä¸èƒ½çœŸæ­£åˆ é™¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
++15. `unique_copy`ï¼š  ä¸ `unique`ç±»ä¼¼ï¼Œä¸è¿‡æŠŠç»“æœè¾“å‡ºåˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
  
  ## æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ
  
@@@ -1497,9 -1497,9 +1565,9 @@@
  2. `includes`ï¼š åˆ¤æ–­ç¬¬ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½è¢«ç¬¬äºŒä¸ªèŒƒå›´åŒ…å«ï¼Œä½¿ç”¨åº•å±‚å…ƒç´ çš„<æ“ä½œç¬¦ï¼ŒæˆåŠŸè¿”å›trueã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„å‡½æ•°ã€‚>
  3. `lexicographical_compare`ï¼š æ¯”è¾ƒä¸¤ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
  4. `max`ï¼š è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå¤§ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
--5. `max_element`ï¼š  è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
++5. `max_element`ï¼š  è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
  6. `min`ï¼š  è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå°ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
--7. `min_element`ï¼šè¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å°çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
++7. `min_element`ï¼šè¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å°çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
  8. `mismatch`ï¼šå¹¶è¡Œæ¯”è¾ƒä¸¤ä¸ªåºåˆ—ï¼ŒæŒ‡å‡ºç¬¬ä¸€ä¸ªä¸åŒ¹é…çš„ä½ç½®ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œæ ‡å¿—ç¬¬ä¸€ä¸ªä¸åŒ¹é…å…ƒç´ ä½ç½®ã€‚å¦‚æœéƒ½åŒ¹é…ï¼Œè¿”å›æ¯ä¸ªå®¹å™¨çš„lastã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
  
  ## é›†åˆç®—æ³•(4ä¸ª)
@@@ -1526,7 -1526,7 +1594,7 @@@
  
  ## å‡½æ•°é€‚é…å™¨
  
--+ èƒ½å¤Ÿå°†ä»¿å‡½æ•°å’Œå¦ä¸€ä¸ªä»¿å‡½æ•°ï¼ˆæˆ–æŸä¸ªå€¼ï¼Œæˆ–æŸä¸€ä¸ªå‡½æ•°ï¼‰ç»“åˆèµ·æ¥çš„ä»¿å‡½æ•°ã€‚å£°æ˜äº<functional>ä¸­ã€‚
+++ èƒ½å¤Ÿå°†ä»¿å‡½æ•°å’Œå¦ä¸€ä¸ªä»¿å‡½æ•°ï¼ˆæˆ–æŸä¸ªå€¼ï¼Œæˆ–æŸä¸€ä¸ªå‡½æ•°ï¼‰ç»“åˆèµ·æ¥çš„ä»¿å‡½æ•°ã€‚å£°æ˜äº`<functional>`ä¸­ã€‚
  + `C++11/C++17/C++2x`å¼ƒç”¨äº†å¤§é‡çš„å‡½æ•°é€‚é…å™¨
  
  # STLç©ºé—´é…ç½®å™¨
@@@ -1536,9 -1536,9 +1604,9 @@@ STL**ç©ºé—´é…ç½®å™¨**å¯ä»¥é…ç½®åŒ…å
  ## é»˜è®¤é…ç½®å™¨
  
  1. å‡ºç°èƒŒæ™¯ï¼šå¤§é‡ä¸”é¢‘ç¹çš„å°å—å†…å­˜éé…å¸¦æ¥äº†å¤§é‡ç¢ç‰‡ï¼Œä»¥åŠç”³è¯·é‡Šæ”¾æ—¶çš„ç³»ç»Ÿè°ƒç”¨é€ æˆçš„æ€§èƒ½æŸå¤±ã€‚
--2. å†…å­˜æ± ï¼šç¼“è§£å°å—å†…å­˜åˆ†é…å¸¦æ¥çš„é—®é¢˜ï¼ŒåŸºæœ¬çš„æ€æƒ³æ˜¯ä¸€æ¬¡å‘`heap`ç”³è¯·ä¸€å—å¾ˆå¤§çš„å†…å­˜ï¼ˆå†…å­˜æ± ï¼‰ï¼Œå¦‚æœç”³è¯·å°å—å†…å­˜çš„è¯å°±ç›´æ¥åˆ°å†…å­˜æ± ä¸­å»å–ã€‚
--3. ä½œç”¨ï¼šå®Œæˆå†…å­˜é…ç½®ä¸é‡Šæ”¾ï¼Œå¯¹è±¡æ„é€ å’Œææ„çš„å·¥ä½œã€‚è´£ä»»ä¸»ä½“ä¸º`allocator`ï¼Œå…¶å››å¤§åŠ©æ‰‹ä¸º`allocate`ï¼Œ`deallocate`ï¼Œ`construct`å’Œ`destroy`ã€‚
--4. STLå®ç°äº†`std::allocator`ï¼ˆæ•ˆç‡ä½ï¼Œç®€å•åŒ…è£…äº†`new`å’Œ`delete`ï¼Œåªä¸ºå…¼å®¹è€ä»£ç ï¼‰å’Œ`std::alloc`ï¼ˆå®é™…ä½¿ç”¨çš„ç‰ˆæœ¬ï¼‰
++2. å†…å­˜æ± ï¼šç¼“è§£å°å—å†…å­˜åˆ†é…å¸¦æ¥çš„é—®é¢˜ï¼ŒåŸºæœ¬çš„æ€æƒ³æ˜¯ä¸€æ¬¡å‘ `heap`ç”³è¯·ä¸€å—å¾ˆå¤§çš„å†…å­˜ï¼ˆå†…å­˜æ± ï¼‰ï¼Œå¦‚æœç”³è¯·å°å—å†…å­˜çš„è¯å°±ç›´æ¥åˆ°å†…å­˜æ± ä¸­å»å–ã€‚
++3. ä½œç”¨ï¼šå®Œæˆå†…å­˜é…ç½®ä¸é‡Šæ”¾ï¼Œå¯¹è±¡æ„é€ å’Œææ„çš„å·¥ä½œã€‚è´£ä»»ä¸»ä½“ä¸º `allocator`ï¼Œå…¶å››å¤§åŠ©æ‰‹ä¸º `allocate`ï¼Œ`deallocate`ï¼Œ`construct`å’Œ `destroy`ã€‚
++4. STLå®ç°äº† `std::allocator`ï¼ˆæ•ˆç‡ä½ï¼Œç®€å•åŒ…è£…äº† `new`å’Œ `delete`ï¼Œåªä¸ºå…¼å®¹è€ä»£ç ï¼‰å’Œ `std::alloc`ï¼ˆå®é™…ä½¿ç”¨çš„ç‰ˆæœ¬ï¼‰
  
  ### [ç±»å‹è¦æ±‚](https://zh.cppreference.com/w/cpp/named_req/Allocator)
  
@@@ -1546,32 -1546,32 +1614,32 @@@
  
  ### ç»„æˆç»“æ„
  
--1. æ¦‚è¿°ï¼šä¸€çº§ç©ºé—´é…ç½®å™¨ï¼ˆå¤§äº128Bçš„å¤§å—å†…å­˜åˆ†é…ï¼Œå°è£…äº†`malloc`ä¸`free`ï¼‰å’ŒäºŒçº§ç©ºé—´é…ç½®å™¨ï¼ˆä¸å¤§äº128Bçš„å°å—åœ¨å†…å­˜æ± åˆ†é…ï¼‰ã€‚
++1. æ¦‚è¿°ï¼šä¸€çº§ç©ºé—´é…ç½®å™¨ï¼ˆå¤§äº128Bçš„å¤§å—å†…å­˜åˆ†é…ï¼Œå°è£…äº† `malloc`ä¸ `free`ï¼‰å’ŒäºŒçº§ç©ºé—´é…ç½®å™¨ï¼ˆä¸å¤§äº128Bçš„å°å—åœ¨å†…å­˜æ± åˆ†é…ï¼‰ã€‚
  
  ![STLä¸¤çº§ç©ºé—´é…ç½®å™¨](/home/linbird/Londa/img/lang/2layer-allocater.png)
  
  #### ä¸€çº§ç©ºé—´é…ç½®å™¨
  
--1. é¦–å…ˆå°è¯•ä½¿ç”¨`malloc`åˆ†é…å†…å­˜
++1. é¦–å…ˆå°è¯•ä½¿ç”¨ `malloc`åˆ†é…å†…å­˜
  2. å¦‚æœç©ºé—´ä¸æ»¡è¶³è°ƒç”¨å†…å­˜ä¸è¶³å¤„ç†å‡½æ•°
--3. å†…å­˜å¤„ç†å‡½æ•°å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œåˆ™æŠ›å‡º`bad_alloc`å¼‚å¸¸ã€‚å¦åˆ™å¾ªç¯è°ƒç”¨å¤„ç†å‡½æ•°ç›´åˆ°æˆåŠŸã€‚
++3. å†…å­˜å¤„ç†å‡½æ•°å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œåˆ™æŠ›å‡º `bad_alloc`å¼‚å¸¸ã€‚å¦åˆ™å¾ªç¯è°ƒç”¨å¤„ç†å‡½æ•°ç›´åˆ°æˆåŠŸã€‚
  
  + **æ³¨æ„**ï¼š"å†…å­˜ä¸è¶³å¤„ç†æœºåˆ¶"æ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ï¼Œè®¾ç½®"å†…å­˜ä¸è¶³å¤„ç†ä»‹è´¨"ä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ã€‚
  
  #### äºŒçº§ç©ºé—´é…ç½®å™¨
  
--1. æ”¯æŒç»“æ„ï¼š**å †å†…å­˜æ± ä¸`free_list`**ã€‚
--   1. `free_list`ï¼š16ä¸ªé“¾è¡¨é¦–æŒ‡é’ˆæ„æˆ`free_list`æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨åˆ†åˆ«ç»„ç»‡å·²ä»å†…å­˜æ± åˆ†é…çš„$NÃ—8B$â€‹çš„ç©ºé—²å†…å­˜å—ï¼ˆä¸ºäº†ä¾¿äºç®¡ç†ï¼Œåœ¨**å†…å­˜æ± ä¸Šçš„åˆ†é…ä»¥`8B`ä¸ºåŸºæœ¬å•ä½**ï¼‰ã€‚
--   2. å †å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜ï¼‰ï¼šä»¥`start_free`å¼€å§‹ã€`end_free`ç»“æŸçš„ä¸€æ®µè¿ç»­çš„æœªè¢«ä½¿ç”¨çš„å†…å­˜
++1. æ”¯æŒç»“æ„ï¼š**å †å†…å­˜æ± ä¸ `free_list`**ã€‚
++   1. `free_list`ï¼š16ä¸ªé“¾è¡¨é¦–æŒ‡é’ˆæ„æˆ `free_list`æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨åˆ†åˆ«ç»„ç»‡å·²ä»å†…å­˜æ± åˆ†é…çš„$NÃ—8B$çš„ç©ºé—²å†…å­˜å—ï¼ˆä¸ºäº†ä¾¿äºç®¡ç†ï¼Œåœ¨**å†…å­˜æ± ä¸Šçš„åˆ†é…ä»¥ `8B`ä¸ºåŸºæœ¬å•ä½**ï¼‰ã€‚
++   2. å †å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜ï¼‰ï¼šä»¥ `start_free`å¼€å§‹ã€`end_free`ç»“æŸçš„ä¸€æ®µè¿ç»­çš„æœªè¢«ä½¿ç”¨çš„å†…å­˜
  
  ![](/home/linbird/Londa/img/lang/second_layer.png)
  
  ##### [åˆ†é…ç­–ç•¥](https://blog.csdn.net/GyafdxIs/article/details/48010869)
  
--1. é¦–å…ˆå°è¯•åœ¨`free_list`ä¸Šå¯»æ‰¾æœ€å°å¯æ»¡è¶³å†…å­˜å—ï¼ˆå…¶å¤§å°ä¸ºnï¼‰è¿”å›ï¼Œå¦‚æœä¸æ»¡è¶³è°ƒç”¨`refill`ä»å†…å­˜æ± ç”³è¯·
--2. `refill`å°è¯•ä»å†…å­˜æ± åˆ†é…**è‡³å°‘1ä¸ªã€è‡³å¤š20ä¸ª**ï¼ˆSTLé»˜è®¤ï¼‰å¤§å°ä¸ºnçš„å†…å­˜å—ï¼Œå¦‚æœå¾—åˆ°æ»¡è¶³ï¼Œé¦–å…ˆè¿”å›ä¸€ä¸ªç»™ä¸Šå±‚è°ƒç”¨ï¼Œå…¶ä½™çš„æŒ‚åˆ°å¤§å°ä¸ºnçš„`free_list`çš„å…ƒç´ çš„é“¾è¡¨åé¢ã€‚
--3. å¦‚æœç¬¬äºŒæ­¥å¾—ä¸åˆ°æ»¡è¶³ï¼ˆå†…å­˜æ± å¯ç”¨å°äºnï¼‰ï¼Œå…ˆå°†å†…å­˜æ± ä¸­çš„å‰©ä½™å¯ç”¨å—æŒ‚åˆ°ç›¸åº”çš„`free_list`çš„ç›¸åº”èŠ‚ç‚¹é“¾è¡¨åé¢ï¼Œ**å†å‘å †ç©ºé—´**ç”³è¯·å†…å­˜ã€‚
--4. å¦‚æœç¬¬ä¸‰æ­¥æˆåŠŸï¼Œå†æ¬¡æ‰§è¡Œç¬¬äºŒæ­¥ã€‚å¦åˆ™åœ¨`free_list`å¯»æ‰¾**å¤§äºn**çš„å†…å­˜ï¼Œæœ‰åˆ™å°†è¿™ä¸€å—å†…å­˜å½’è¿˜åˆ°å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜åŒºï¼‰ï¼Œä¹‹åè¿›è¡Œç¬¬äºŒæ­¥ï¼Œå¦åˆ™è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨ã€‚
++1. é¦–å…ˆå°è¯•åœ¨ `free_list`ä¸Šå¯»æ‰¾æœ€å°å¯æ»¡è¶³å†…å­˜å—ï¼ˆå…¶å¤§å°ä¸ºnï¼‰è¿”å›ï¼Œå¦‚æœä¸æ»¡è¶³è°ƒç”¨ `refill`ä»å†…å­˜æ± ç”³è¯·
++2. `refill`å°è¯•ä»å†…å­˜æ± åˆ†é…**è‡³å°‘1ä¸ªã€è‡³å¤š20ä¸ª**ï¼ˆSTLé»˜è®¤ï¼‰å¤§å°ä¸ºnçš„å†…å­˜å—ï¼Œå¦‚æœå¾—åˆ°æ»¡è¶³ï¼Œé¦–å…ˆè¿”å›ä¸€ä¸ªç»™ä¸Šå±‚è°ƒç”¨ï¼Œå…¶ä½™çš„æŒ‚åˆ°å¤§å°ä¸ºnçš„ `free_list`çš„å…ƒç´ çš„é“¾è¡¨åé¢ã€‚
++3. å¦‚æœç¬¬äºŒæ­¥å¾—ä¸åˆ°æ»¡è¶³ï¼ˆå†…å­˜æ± å¯ç”¨å°äºnï¼‰ï¼Œå…ˆå°†å†…å­˜æ± ä¸­çš„å‰©ä½™å¯ç”¨å—æŒ‚åˆ°ç›¸åº”çš„ `free_list`çš„ç›¸åº”èŠ‚ç‚¹é“¾è¡¨åé¢ï¼Œ**å†å‘å †ç©ºé—´**ç”³è¯·å†…å­˜ã€‚
++4. å¦‚æœç¬¬ä¸‰æ­¥æˆåŠŸï¼Œå†æ¬¡æ‰§è¡Œç¬¬äºŒæ­¥ã€‚å¦åˆ™åœ¨ `free_list`å¯»æ‰¾**å¤§äºn**çš„å†…å­˜ï¼Œæœ‰åˆ™å°†è¿™ä¸€å—å†…å­˜å½’è¿˜åˆ°å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜åŒºï¼‰ï¼Œä¹‹åè¿›è¡Œç¬¬äºŒæ­¥ï¼Œå¦åˆ™è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨ã€‚
  
  ### ç¼ºç‚¹
  
@@@ -1580,7 -1580,7 +1648,7 @@@
  
  ## è‡ªå®šä¹‰é…ç½®å™¨
  
--å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨åªéœ€è¦å®ç°`STL allocator`çš„è§„èŒƒå³å¯ã€‚é€šå¸¸åªéœ€è¦ç»§æ‰¿`std::allocator`æ¨¡æ¿ç±»å³å¯ï¼Œåœ¨å­ç±»é‡Œå®ç°è‡ªå·±çš„æ–¹æ³•å°±å¯ä»¥å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨ã€‚
++å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨åªéœ€è¦å®ç° `STL allocator`çš„è§„èŒƒå³å¯ã€‚é€šå¸¸åªéœ€è¦ç»§æ‰¿ `std::allocator`æ¨¡æ¿ç±»å³å¯ï¼Œåœ¨å­ç±»é‡Œå®ç°è‡ªå·±çš„æ–¹æ³•å°±å¯ä»¥å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨ã€‚
  
  ```c++
  template<class T> struct Allocator : public allocator<T> {
@@@ -1630,7 -1630,7 +1698,7 @@@ for(int i = 0; i < 100; ++i)
  
  è¿­ä»£å™¨æ˜¯ä¸€ç§æŠ½è±¡çš„è®¾è®¡æ¦‚å¿µï¼Œå®ƒæä¾›ä¸€ç§æ–¹æ³•ä½¿å¤–ç•Œèƒ½å¤Ÿä¾åºè®¿é—®æŸä¸ªèšåˆç‰©æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€æš´éœ²è¯¥èšåˆç‰©çš„å†…éƒ¨è¡¨è¿°æ–¹å¼ã€‚å› æ­¤è¿­ä»£å™¨çš„å†…éƒ¨å¿…é¡»ä¿å­˜ä¸€ä¸ªä¸å®¹å™¨ç›¸å…³è”çš„æŒ‡é’ˆï¼Œç„¶åé‡è½½å„ç§è¿ç®—æ“ä½œæ¥æ–¹ä¾¿éå†ã€‚
  
--**ä¼˜åŒ–æ€æƒ³**ï¼šåˆ©ç”¨C++é‡è½½æœºåˆ¶å’Œå‚æ•°æ¨å¯¼æœºåˆ¶ï¼ˆ`traits`ï¼šç±»å‹èƒå–ï¼‰**å°†è¿è¡ŒæœŸå†³è®®é—®é¢˜æå‰åˆ°ç¼–è¯‘æœŸå†³è®®**ï¼ˆ**æ¯ä¸ªè¿­ä»£å™¨éƒ½å¿…é¡»å®šä¹‰å‹åˆ«`iterator_category`**ï¼‰ï¼Œå®ç°äº†**é¿å…åœ¨è¿è¡Œæ—¶åˆ¤æ–­è¿­ä»£å™¨çš„ç±»å‹**ã€‚[æ¥æº](https://ivanzz1001.github.io/records/post/cplusplus/2018/03/14/cpluscplus_stl_iterator)
++**ä¼˜åŒ–æ€æƒ³**ï¼šåˆ©ç”¨C++é‡è½½æœºåˆ¶å’Œå‚æ•°æ¨å¯¼æœºåˆ¶ï¼ˆ`traits`ï¼šç±»å‹èƒå–ï¼‰**å°†è¿è¡ŒæœŸå†³è®®é—®é¢˜æå‰åˆ°ç¼–è¯‘æœŸå†³è®®**ï¼ˆ**æ¯ä¸ªè¿­ä»£å™¨éƒ½å¿…é¡»å®šä¹‰å‹åˆ« `iterator_category`**ï¼‰ï¼Œå®ç°äº†**é¿å…åœ¨è¿è¡Œæ—¶åˆ¤æ–­è¿­ä»£å™¨çš„ç±»å‹**ã€‚[æ¥æº](https://ivanzz1001.github.io/records/post/cplusplus/2018/03/14/cpluscplus_stl_iterator)
  
  ## ç±»åˆ«
  
@@@ -1638,18 -1638,18 +1706,18 @@@
  
  ![è¿­ä»£å™¨ç±»å‹](/home/linbird/Londa/img/lang/cpp_iterator_top.jpg)
  
--|     è¾“å…¥å‹     |     è¾“å‡ºå‹     |                  å‰å‘å‹                   |         åŒå‘å‹          |             éšæœºè·å–å‹              |
--| :------------: | :------------: | :---------------------------------------: | :---------------------: | :---------------------------------: |
--| å•æ­¥å‘å‰ã€åªè¯» | å•æ­¥å‘å‰ã€åªå†™ |            å•æ­¥å‘å‰ã€åŒºé—´è¯»å†™             |   åŒå‘å•æ­¥ã€åŒºé—´è¯»å†™    |           éšæœºè·³è½¬ã€è¯»å†™            |
--|   `istream`    |   `ostream`    | `forward_list,unordered_<multi>[map|set]` | `list,<multi>[map|set]` | `vector,array,string,deque,pointer` |
++|     è¾“å…¥å‹     |     è¾“å‡ºå‹     |                 å‰å‘å‹                 |       åŒå‘å‹       |      éšæœºè·å–å‹      |
++| :------------: | :------------: | :-------------------------------------: | :----------------: | :-------------------: |
++| å•æ­¥å‘å‰ã€åªè¯» | å•æ­¥å‘å‰ã€åªå†™ |           å•æ­¥å‘å‰ã€åŒºé—´è¯»å†™           | åŒå‘å•æ­¥ã€åŒºé—´è¯»å†™ |    éšæœºè·³è½¬ã€è¯»å†™    |
++|  `istream`  |  `ostream`  | `forward_list,unordered_`<multi>`[map |       set]`       | `list,`<multi>`[map |
  
  ### è¿­ä»£å™¨é€‚é…å™¨
  
  #### æ’å…¥é€‚é…å™¨
  
--1. æ’å…¥é€‚é…å™¨`inserter`ï¼šè¦æ±‚å®¹å™¨æœ‰`insert`æˆå‘˜å‡½æ•°ï¼Œå¦‚`vector`ï¼Œ`list`ï¼Œ`map`ï¼Œ`set`ï¼Œ`deque`(æœ‰ç‚¹ç ´å`deque`æ•°æ®ç»“æ„)ï¼Œ `inserter()`å¯ä»¥å¿«é€Ÿåˆ›å»ºè¯¥ç±»å‹è¿­ä»£å™¨ï¼Œå‚æ•°ä¸­çš„ä½ç½®å‚æ•°ä»…åšæŒ‡ç¤ºä½œç”¨ã€‚
--2. å‰å‘æ’å…¥é€‚é…å™¨`front_insert_iterator`ï¼šè¦æ±‚ç±»æœ‰`push_front`å‡½æ•°æ”¯æŒï¼Œå¦‚`list`å’Œ`deque`ã€‚å¯ä»¥å€ŸåŠ©`front_inserter()`å¿«é€Ÿåˆ›å»ºã€‚
--3. åå‘æ’å…¥è¿­ä»£å™¨`back_insert_iterator`ï¼šè¦æ±‚æˆå‘˜å‡½æ•°`push_back`æ”¯æŒï¼Œå¦‚`vector`ã€listã€`deque`ã€‚å¯ä»¥å€ŸåŠ©`back_inserter()`åˆ›å»ºã€‚
++1. æ’å…¥é€‚é…å™¨ `inserter`ï¼šè¦æ±‚å®¹å™¨æœ‰ `insert`æˆå‘˜å‡½æ•°ï¼Œå¦‚ `vector`ï¼Œ`list`ï¼Œ`map`ï¼Œ`set`ï¼Œ`deque`(æœ‰ç‚¹ç ´å `deque`æ•°æ®ç»“æ„)ï¼Œ `inserter()`å¯ä»¥å¿«é€Ÿåˆ›å»ºè¯¥ç±»å‹è¿­ä»£å™¨ï¼Œå‚æ•°ä¸­çš„ä½ç½®å‚æ•°ä»…åšæŒ‡ç¤ºä½œç”¨ã€‚
++2. å‰å‘æ’å…¥é€‚é…å™¨ `front_insert_iterator`ï¼šè¦æ±‚ç±»æœ‰ `push_front`å‡½æ•°æ”¯æŒï¼Œå¦‚ `list`å’Œ `deque`ã€‚å¯ä»¥å€ŸåŠ© `front_inserter()`å¿«é€Ÿåˆ›å»ºã€‚
++3. åå‘æ’å…¥è¿­ä»£å™¨ `back_insert_iterator`ï¼šè¦æ±‚æˆå‘˜å‡½æ•° `push_back`æ”¯æŒï¼Œå¦‚ `vector`ã€listã€`deque`ã€‚å¯ä»¥å€ŸåŠ© `back_inserter()`åˆ›å»ºã€‚
  
  #### é€†å‘è¿­ä»£å™¨é€‚é…å™¨
  
@@@ -1659,19 -1659,19 +1727,16 @@@
  
  1. `move_inserter`ï¼šC++11å¼•å…¥ã€‚å¯ä»¥å®ç°ä»¥ç§»åŠ¨è€Œéå¤åˆ¶çš„æ–¹å¼ï¼Œå°†æŸä¸ªåŒºåŸŸç©ºé—´ä¸­çš„å…ƒç´ ç§»åŠ¨è‡³å¦ä¸€ä¸ªæŒ‡å®šçš„ç©ºé—´ã€‚
  
--+ è°ƒç”¨`make_move_iterator`å‡½æ•°å¯ä»¥ç”±åŸºç¡€è¿­ä»£å™¨å¿«é€Ÿåˆ›å»º`move_iterator`è¿­ä»£å™¨.
--
+++ è°ƒç”¨ `make_move_iterator`å‡½æ•°å¯ä»¥ç”±åŸºç¡€è¿­ä»£å™¨å¿«é€Ÿåˆ›å»º `move_iterator`è¿­ä»£å™¨.
  + æ­¤åŸºç¡€è¿­ä»£å™¨çš„ç±»å‹è™½ç„¶æ²¡æœ‰æ˜ç¡®è¦æ±‚ï¼Œä½†è¯¥æ¨¡æ¿ç±»ä¸­æŸäº›æˆå‘˜æ–¹æ³•çš„åº•å±‚å®ç°ï¼Œéœ€è¦æ­¤åŸºç¡€è¿­ä»£å™¨ä¸ºåŒå‘è¿­ä»£å™¨æˆ–è€…éšæœºè®¿é—®è¿­ä»£å™¨ã€‚
--
  + é€šè¿‡ç§»åŠ¨è¿­ä»£å™¨å°†å®¹å™¨ä¸­æŸåŒºåŸŸçš„å…ƒç´ ç§»åŠ¨åˆ°äº†å…¶ä»–å®¹å™¨ä¸­ï¼Œè¯¥åŒºåŸŸå†…ä»å¯èƒ½æ®‹ç•™æœ‰ä¹‹å‰å­˜å‚¨çš„å…ƒç´ ï¼Œä½†è¿™äº›å…ƒç´ æ˜¯ä¸èƒ½å†è¢«ä½¿ç”¨çš„ï¼Œå¦åˆ™ææœ‰å¯èƒ½ä½¿ç¨‹åºäº§ç”Ÿå„ç§å…¶ä»–é”™è¯¯ã€‚
--
--  |                         è¿­ä»£å™¨é€‚é…å™¨                         |                           åˆ›å»ºå‡½æ•°                           |    è¦æ±‚    |
--  | :----------------------------------------------------------: | :----------------------------------------------------------: | :--------: |
--  | [`reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/reverse_iterator) | [`make_reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_reverse_iterator) |            |
--  | [`move_iterator`](https://zh.cppreference.com/w/cpp/iterator/move_iterator) | [`make_move_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_move_iterator) |            |
--  | [`back_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/back_insert_iterator) | [`back_inserter`](https://zh.cppreference.com/w/cpp/iterator/back_inserter) | `push_back` |
--  | [`front_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/front_insert_iterator) | [`front_inserter`](https://zh.cppreference.com/w/cpp/iterator/front_inserter) | `push_front` |
--  | [`insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/insert_iterator) | [`inserter`](https://zh.cppreference.com/w/cpp/iterator/inserter) |   `insert`   |
++  |                                        è¿­ä»£å™¨é€‚é…å™¨                                        |                                          åˆ›å»ºå‡½æ•°                                          |      è¦æ±‚      |
++  | :----------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------: | :------------: |
++  |      [`reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/reverse_iterator)      | [`make_reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_reverse_iterator) |                |
++  |         [`move_iterator`](https://zh.cppreference.com/w/cpp/iterator/move_iterator)         |    [`make_move_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_move_iterator)    |                |
++  |  [`back_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/back_insert_iterator)  |         [`back_inserter`](https://zh.cppreference.com/w/cpp/iterator/back_inserter)         | `push_back` |
++  | [`front_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/front_insert_iterator) |        [`front_inserter`](https://zh.cppreference.com/w/cpp/iterator/front_inserter)        | `push_front` |
++  |       [`insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/insert_iterator)       |              [`inserter`](https://zh.cppreference.com/w/cpp/iterator/inserter)              |   `insert`   |
  
  ## è¿­ä»£å™¨æ¨¡æ¿
  
@@@ -1774,13 -1774,13 +1839,13 @@@ template <class _Iterator> struct itera
  
  å¯¹å®¹å™¨çš„**æ“ä½œæ”¹å˜äº†å…ƒç´ çš„å­˜æ”¾ä½ç½®**ï¼Œä½¿ä¹‹å‰å­˜å‚¨äº†å­˜å‚¨ä½ç½®çš„è¿­ä»£å™¨æ— æ³•è®¿é—®åˆ°æ­£ç¡®æ•°æ®çš„ç°è±¡ã€‚[å‚è€ƒ](https://blog.csdn.net/richenyunqi/article/details/86563479)
  
--|                          åº•å±‚ï¼šç»“æ„                          |  æ’å…¥  |     åˆ é™¤     |
--| :----------------------------------------------------------: | :----: | :----------: |
--|          æ•°ç»„è¿ç»­å†…å­˜ï¼š`vector,deque,string,array`           | åå¤±æ•ˆ |    åå¤±æ•ˆ    |
--|             é“¾è¡¨ä¸è¿ç»­å†…å­˜ï¼š`list,forward_list`              | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
--|        çº¢é»‘æ ‘ä¸è¿ç»­å†…å­˜ï¼š`map,multimap,set,multiset`         | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
++|                                 åº•å±‚ï¼šç»“æ„                                 |  æ’å…¥  |     åˆ é™¤     |
++| :-------------------------------------------------------------------------: | :----: | :----------: |
++|                 æ•°ç»„è¿ç»­å†…å­˜ï¼š`vector,deque,string,array`                 | åå¤±æ•ˆ |    åå¤±æ•ˆ    |
++|                    é“¾è¡¨ä¸è¿ç»­å†…å­˜ï¼š`list,forward_list`                    | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
++|               çº¢é»‘æ ‘ä¸è¿ç»­å†…å­˜ï¼š`map,multimap,set,multiset`               | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
  | å“ˆå¸Œï¼š`unordered_map,unordered_multimap,unordered_set,unordered_multiset` | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
--|              å †æ ˆï¼š`stack,priority_queue,queue`              | ä¸æ”¯æŒ |    ä¸æ”¯æŒ    |
++|                    å †æ ˆï¼š`stack,priority_queue,queue`                    | ä¸æ”¯æŒ |    ä¸æ”¯æŒ    |
  
  ## æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨
  
@@@ -1790,7 -1790,7 +1855,7 @@@
  
  #### constä¸æŒ‡é’ˆ
  
--ä»å³å‘å·¦è¯»ç”³æ˜ï¼Œé‡åˆ°*ç¿»è¯‘ä¸º`pointer to`
++ä»å³å‘å·¦è¯»ç”³æ˜ï¼Œé‡åˆ°*ç¿»è¯‘ä¸º `pointer to`
  
  ```c
  char * const p; // p is a const pointer to char;
@@@ -1809,7 -1809,7 +1874,7 @@@ auto c = &a;//å¯¹æ•°ç»„åè¿›è¡Œå–åœ°å
  ```
  
  1. æ•°ç»„åçš„å†…æ¶µåœ¨äºå…¶æŒ‡ä»£å®ä½“æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯æ•°ç»„ï¼›
--2. æ•°ç»„åçš„å¤–å»¶åœ¨äºå…¶å¯ä»¥è½¬æ¢ä¸ºæŒ‡å‘å…¶æŒ‡ä»£å®ä½“çš„æŒ‡é’ˆï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªåªè¯»æŒ‡é’ˆå˜é‡`T* const`ï¼ˆç”±äºç¼–è¯‘å™¨ä¼šé˜»æ­¢æ‰€æœ‰å¯¹åªè¯»å˜é‡çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°ç»„åä¸èƒ½è¿›è¡Œè‡ªå¢è‡ªå‡çš„æ“ä½œï¼‰ï¼Œå¯¹å…¶è¿›è¡Œ`sizeof`æ“ä½œæ—¶å¾—åˆ°çš„æ˜¯æ•°ç»„æ•´ä½“çš„ç©ºé—´çš„å¤§å°.
++2. æ•°ç»„åçš„å¤–å»¶åœ¨äºå…¶å¯ä»¥è½¬æ¢ä¸ºæŒ‡å‘å…¶æŒ‡ä»£å®ä½“çš„æŒ‡é’ˆï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªåªè¯»æŒ‡é’ˆå˜é‡ `T* const`ï¼ˆç”±äºç¼–è¯‘å™¨ä¼šé˜»æ­¢æ‰€æœ‰å¯¹åªè¯»å˜é‡çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°ç»„åä¸èƒ½è¿›è¡Œè‡ªå¢è‡ªå‡çš„æ“ä½œï¼‰ï¼Œå¯¹å…¶è¿›è¡Œ `sizeof`æ“ä½œæ—¶å¾—åˆ°çš„æ˜¯æ•°ç»„æ•´ä½“çš„ç©ºé—´çš„å¤§å°.
  3. å½“æ•°ç»„åä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’æ—¶ï¼Œä½œä¸ºå¸¸é‡æŒ‡é’ˆçš„æ•°ç»„åçš„å€¼è¢«èµ‹å€¼åˆ°ä¸€ä¸ªæŒ‡é’ˆå˜é‡
  4. æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆåˆ™æ˜¯å¦å¤–ä¸€ç§å˜é‡ç±»å‹ï¼ˆåœ¨WIN32å¹³å°ä¸‹ï¼Œé•¿åº¦ä¸º4ï¼‰ï¼Œä»…ä»…æ„å‘³ç€æ•°ç»„çš„å­˜æ”¾åœ°å€ï¼
  
@@@ -1819,14 -1819,14 +1884,13 @@@
  
  è¦ä½¿ç”¨ï¼ˆ&ç±»å::æˆå‘˜åï¼‰è·å–æŒ‡å‘æˆå‘˜çš„æŒ‡é’ˆè¿™ä¸ªæˆå‘˜å¿…é¡»æ˜¯å¯¹å¤–å¯è§çš„ï¼š
  
--|      æŒ‡å‘      |                    ç”³æ˜æ–¹å¼                    |                   èµ‹å€¼                   |                             è°ƒç”¨                             |
--| :------------: | :--------------------------------------------: | :--------------------------------------: | :----------------------------------------------------------: |
--|  ç±»çš„æ™®é€šæˆå‘˜  | `typedef è¿”å›å€¼ (ç±»å::*æŒ‡é’ˆç±»å‹å)(å‚æ•°åˆ—è¡¨)` | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å‡½æ•°å` | `(ç±»å¯¹è±¡.*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)`æˆ–è€…`(ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)` |
--| ç±»æ™®é€šæ•°æ®æˆå‘˜ |    `typedef æ•°æ®ç±»å‹å (ç±»å::*æŒ‡é’ˆç±»å‹å)`    | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å˜é‡å` |            `ç±»å¯¹è±¡.*æŒ‡é’ˆå`æˆ–è€…`ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå`             |
++|      æŒ‡å‘      |                     ç”³æ˜æ–¹å¼                     |                    èµ‹å€¼                    |                                è°ƒç”¨                                |
++| :------------: | :----------------------------------------------: | :----------------------------------------: | :----------------------------------------------------------------: |
++|  ç±»çš„æ™®é€šæˆå‘˜  | `typedef è¿”å›å€¼ (ç±»å::*æŒ‡é’ˆç±»å‹å)(å‚æ•°åˆ—è¡¨)` | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å‡½æ•°å` | `(ç±»å¯¹è±¡.*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)`æˆ–è€… `(ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)` |
++| ç±»æ™®é€šæ•°æ®æˆå‘˜ |    `typedef æ•°æ®ç±»å‹å (ç±»å::*æŒ‡é’ˆç±»å‹å)`    | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å˜é‡å` |             `ç±»å¯¹è±¡.*æŒ‡é’ˆå`æˆ–è€… `ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå`             |
  
  ç±»çš„é™æ€æˆå‘˜å’Œæ™®é€šæˆå‘˜çš„åŒºåˆ«åœ¨äºï¼Œä»–ä»¬æ˜¯ä¸ä¾èµ–äºå…·ä½“å¯¹è±¡çš„ï¼Œæ‰€æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½å…±äº«åŒä¸€ä¸ªé™æ€æˆå‘˜ï¼Œæ‰€ä»¥é™æ€æˆå‘˜ä¹Ÿæ²¡æœ‰thisæŒ‡é’ˆçš„æ¦‚å¿µï¼Œæ‰€ä»¥æŒ‡å‘ç±»çš„é™æ€æˆå‘˜çš„æŒ‡é’ˆå°±æ˜¯æ™®é€šçš„æŒ‡é’ˆã€‚
  
--
  ### å¼•ç”¨
  
  **å¼•ç”¨åªæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡çš„åˆ«åï¼Œå®ƒæŒ‡å‘å¯¹è±¡æœ¬èº«**ï¼Œåœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–å¼•ç”¨ï¼Œä¸”ä¸€æ—¦å®šä¹‰äº†å¼•ç”¨å°±æ— æ³•å†ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ï¼Œä¹‹åæ¯æ¬¡ä½¿ç”¨è¿™ä¸ªå¼•ç”¨è®¿é—®çš„éƒ½æ˜¯æœ€åˆç»‘å®šçš„å¯¹è±¡ï¼Œ**å·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½å æœ‰å­˜å‚¨ç©ºé—´**ã€‚
@@@ -1834,7 -1834,7 +1898,8 @@@
  ```c++
  class Test{char& b};//64bit:sizeof(b) == 8
  ```
--å¼•ç”¨å¤§å¤šæ•°æ—¶è¡¨ç°ä¸ºä¸€ä¸ªè¢«æ–½åŠ äº†è®¸å¤šé™åˆ¶çš„æŒ‡é’ˆï¼ˆå¯ä»¥çœ‹ä½œ`const`æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡è¿™äº›è¯­æ³•ä¸Šçš„é™åˆ¶è§„é¿äº†ä½¿ç”¨è£¸æŒ‡é’ˆæ—¶çš„ä¸€äº›å±é™©è¡Œä¸ºï¼Œå…¶æ•ˆç‡å’Œè£¸æŒ‡é’ˆç›¸åŒã€‚
++
++å¼•ç”¨å¤§å¤šæ•°æ—¶è¡¨ç°ä¸ºä¸€ä¸ªè¢«æ–½åŠ äº†è®¸å¤šé™åˆ¶çš„æŒ‡é’ˆï¼ˆå¯ä»¥çœ‹ä½œ `const`æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡è¿™äº›è¯­æ³•ä¸Šçš„é™åˆ¶è§„é¿äº†ä½¿ç”¨è£¸æŒ‡é’ˆæ—¶çš„ä¸€äº›å±é™©è¡Œä¸ºï¼Œå…¶æ•ˆç‡å’Œè£¸æŒ‡é’ˆç›¸åŒã€‚
  
  ### è¿­ä»£å™¨
  
@@@ -1861,11 -1861,11 +1926,11 @@@
  1. `regex_match()`:ä¼šåœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­å°è¯•å®Œå…¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚
  2. `regex_search()`:åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­æœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†,æŸ¥æ‰¾ç»“æœåŒ…å«äº†åŒ¹é…çš„å­ä¸²å’Œå­ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹å’Œç»“æŸåœ°å€ã€‚
  3. `regex_replace()`:æŸ¥æ‰¾ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²å¹¶æ›¿æ¢ã€‚
--4. `sregex_iterator()`:è¿­ä»£å™¨é€‚é…å™¨ï¼Œè°ƒç”¨`regex_search`æ¥éå†ä¸€ä¸ªstringä¸­æ‰€æœ‰åŒ¹é…çš„å­ä¸²
++4. `sregex_iterator()`:è¿­ä»£å™¨é€‚é…å™¨ï¼Œè°ƒç”¨ `regex_search`æ¥éå†ä¸€ä¸ªstringä¸­æ‰€æœ‰åŒ¹é…çš„å­ä¸²
  
  ### ç»“æœåŒ¹é…é›†
  
--1. smatch/cmatch:ä»¥`string/const char*`æ ¼å¼ä¿å­˜åŒ¹é…é›†åˆ
++1. smatch/cmatch:ä»¥ `string/const char*`æ ¼å¼ä¿å­˜åŒ¹é…é›†åˆ
  
  ## å®ä¾‹
  
@@@ -1875,71 -1875,71 +1940,68 @@@
  
  + C++åŒ…å«ä¸¤ä¸ªè¾“å…¥/è¾“å‡ºåº“ï¼šç°ä»£çš„ã€åŸºäºæµçš„I/Oåº“å’ŒCé£æ ¼I/Oå‡½æ•°çš„æ ‡å‡†é›†åˆã€‚
  + åŸºäºæµçš„IOå›´ç»•æŠ½è±¡çš„è¾“å…¥/è¾“å‡ºè®¾å¤‡ã€‚é€šè¿‡è¿™äº›æŠ½è±¡å¯ä»¥ä»¥ç›¸åŒçš„ä»£ç æ¥å¤„ç†é¢å‘æ–‡ä»¶ã€å†…å­˜æµæˆ–å…¶ä»–è‡ªå®šä¹‰çš„é€‚é…å™¨è®¾å¤‡æ‰§è¡ŒIOæ“ä½œã€‚
--+ æ¯ä¸ªCæµä¸å¤–éƒ¨ç‰©ç†è®¾å¤‡ï¼ˆæ–‡ä»¶ã€æ ‡å‡†è¾“å…¥æµã€æ‰“å°æœºã€åºåˆ—ç«¯å£ç­‰ï¼‰å…³è”ï¼Œåªèƒ½é€šè¿‡`std::FILE*`ç±»å‹æŒ‡é’ˆè®¿é—®åŠæ“ä½œ
+++ æ¯ä¸ªCæµä¸å¤–éƒ¨ç‰©ç†è®¾å¤‡ï¼ˆæ–‡ä»¶ã€æ ‡å‡†è¾“å…¥æµã€æ‰“å°æœºã€åºåˆ—ç«¯å£ç­‰ï¼‰å…³è”ï¼Œåªèƒ½é€šè¿‡ `std::FILE*`ç±»å‹æŒ‡é’ˆè®¿é—®åŠæ“ä½œ
  
  ## åŸºæœ¬æµå¯¹è±¡
  
  ![æµå¯¹è±¡ç»§æ‰¿å…³ç³»](img/lang/io.svg)
  
--|                              ç±»                              |                        ä½œç”¨                        |
--| :----------------------------------------------------------: | :------------------------------------------------: |
--| [`ios_base`](https://zh.cppreference.com/w/cpp/io/ios_base)  |     çŠ¶æ€ä¿¡æ¯ã€æ§åˆ¶ä¿¡æ¯ã€å†…éƒ¨å­˜å‚¨ã€å›è°ƒã€å¼‚å¸¸ç­‰     |
--| [`basic_ios`](https://zh.cppreference.com/w/cpp/io/basic_ios) | æä¾›äº†`std::basic_streambuf`çš„æ¥å£ï¼Œç®¡ç†ä»»æ„æµç¼“å†² |
++|                              ç±»                              |                         ä½œç”¨                         |
++| :----------------------------------------------------------: | :---------------------------------------------------: |
++|  [`ios_base`](https://zh.cppreference.com/w/cpp/io/ios_base)  |      çŠ¶æ€ä¿¡æ¯ã€æ§åˆ¶ä¿¡æ¯ã€å†…éƒ¨å­˜å‚¨ã€å›è°ƒã€å¼‚å¸¸ç­‰      |
++| [`basic_ios`](https://zh.cppreference.com/w/cpp/io/basic_ios) | æä¾›äº† `std::basic_streambuf`çš„æ¥å£ï¼Œç®¡ç†ä»»æ„æµç¼“å†² |
  
  `cinã€coutã€cerrã€clog`éƒ½æ˜¯é¢„å…ˆå·²ç»å®šä¹‰çš„å…¨å±€å¯¹è±¡ã€‚æ¯ä¸ªIO å¯¹è±¡éƒ½ç»´æŠ¤ä¸€ç»„æ¡ä»¶çŠ¶æ€ï¼Œç”¨æ¥æŒ‡å‡ºæ­¤å¯¹è±¡ä¸Šæ˜¯å¦å¯ä»¥è¿›è¡Œ IO æ“ä½œã€‚å¦‚æœé‡åˆ°é”™è¯¯ï¼ˆä¾‹å¦‚è¾“å…¥æµé‡åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼‰ï¼Œåˆ™å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºæ˜¯å¤±æ•ˆï¼Œæ‰€æœ‰çš„åç»­è¾“å…¥æ“ä½œéƒ½ä¸èƒ½æ‰§è¡Œï¼Œç›´åˆ°é”™è¯¯çº æ­£ã€‚
  
--| çŠ¶æ€æ ‡è®°ä½å¸¸é‡ |                           å«ä¹‰                           |  `good()`  |  `eof()`   |  `fail()`  |  `bad()`   |
--| :------------: | :------------------------------------------------------: | :--------: | :--------: | :--------: | :--------: |
--| `ios::goodbit` |                         æ²¡æœ‰é”™è¯¯                         | **`true`** |  `false`   |  `false`   |  `false`   |
--| `ios::eofbit`  |                       å·²åˆ°è¾¾æ–‡ä»¶å°¾                       |  `false`   | **`true`** |  `false`   |  `false`   |
--| `ios::failbit` | éè‡´å‘½å¯æŒ½å›çš„**é€»è¾‘é”™è¯¯(å¦‚è¯»æ•°å­—é‡åˆ°å­—æ¯)ï¼Œå¯ç»§ç»­ä½¿ç”¨** |  `false`   |  `false`   | **`true`** |  `false`   |
--| `ios::badbit`  |   è‡´å‘½æ€§ä¸å¯æŒ½å›çš„**ç‰©ç†é”™è¯¯(å¦‚ç‰©ç†ä¸Š)ï¼Œä¸å¯ç»§ç»­ä½¿ç”¨**   |  `false`   |  `false`   | **`true`** | **`true`** |
++|  çŠ¶æ€æ ‡è®°ä½å¸¸é‡  |                              å«ä¹‰                              |     `good()`     |     `eof()`     |     `fail()`     |     `bad()`     |
++| :--------------: | :------------------------------------------------------------: | :----------------: | :----------------: | :----------------: | :----------------: |
++| `ios::goodbit` |                            æ²¡æœ‰é”™è¯¯                            | **`true`** |     `false`     |     `false`     |     `false`     |
++| `ios::eofbit` |                          å·²åˆ°è¾¾æ–‡ä»¶å°¾                          |     `false`     | **`true`** |     `false`     |     `false`     |
++| `ios::failbit` | éè‡´å‘½å¯æŒ½å›çš„**é€»è¾‘é”™è¯¯(å¦‚è¯»æ•°å­—é‡åˆ°å­—æ¯)ï¼Œå¯ç»§ç»­ä½¿ç”¨** |     `false`     |     `false`     | **`true`** |     `false`     |
++| `ios::badbit` |   è‡´å‘½æ€§ä¸å¯æŒ½å›çš„**ç‰©ç†é”™è¯¯(å¦‚ç‰©ç†ä¸Š)ï¼Œä¸å¯ç»§ç»­ä½¿ç”¨**   |     `false`     |     `false`     | **`true`** | **`true`** |
  
--æµå¯¹è±¡è¿˜æä¾›äº†**é€»è¾‘åˆ¤æ–­çš„è¿ç®—ç¬¦é‡è½½**`ios::operator!() ã€ios::operator bool()`ï¼Œå½“æµå¯¹è±¡å•ç‹¬å‡ºç°åœ¨æ¡ä»¶è¯­å¥ä¸­æ—¶ï¼Œå°±é—´æ¥è°ƒç”¨å¸ƒå°”è¿ç®—ï¼Œå¸ƒå°”è¿ç®—ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç”¨æ³•å°±æ˜¯æ£€æµ‹æ–‡ä»¶ç»“æŸã€‚
++æµå¯¹è±¡è¿˜æä¾›äº†**é€»è¾‘åˆ¤æ–­çš„è¿ç®—ç¬¦é‡è½½** `ios::operator!() ã€ios::operator bool()`ï¼Œå½“æµå¯¹è±¡å•ç‹¬å‡ºç°åœ¨æ¡ä»¶è¯­å¥ä¸­æ—¶ï¼Œå°±é—´æ¥è°ƒç”¨å¸ƒå°”è¿ç®—ï¼Œå¸ƒå°”è¿ç®—ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç”¨æ³•å°±æ˜¯æ£€æµ‹æ–‡ä»¶ç»“æŸã€‚
  
  ### æ–‡ä»¶æµ
  
--`fstream`å¤´æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æµå¯¹è±¡ï¼ˆ`ifstreamã€ofstreamã€fstreamã€filebuf`ï¼‰ã€‚ä½†è¦æ³¨æ„çš„æ˜¯`ofstreamã€fstreamã€ifstream`ä¹‹é—´æ²¡æœ‰ç»§æ‰¿çš„å…³ç³»ï¼Œä½¿ç”¨`fstream`ä¹Ÿå¹¶ä¸æ˜¯ä½¿ç”¨äº†`ifstream`ä¸`ofstream`çš„äº¤é›†ã€‚
++`fstream`å¤´æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æµå¯¹è±¡ï¼ˆ`ifstreamã€ofstreamã€fstreamã€filebuf`ï¼‰ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ `ofstreamã€fstreamã€ifstream`ä¹‹é—´æ²¡æœ‰ç»§æ‰¿çš„å…³ç³»ï¼Œä½¿ç”¨ `fstream`ä¹Ÿå¹¶ä¸æ˜¯ä½¿ç”¨äº† `ifstream`ä¸ `ofstream`çš„äº¤é›†ã€‚
  
--|   æµå¯¹è±¡   | é»˜è®¤IOæ–¹å¼ |        æ–‡ä»¶ä¸å­˜åœ¨çš„åŠ¨ä½œ        |
--| :--------: | :--------: | :----------------------------: |
++|    æµå¯¹è±¡    | é»˜è®¤IOæ–¹å¼ |        æ–‡ä»¶ä¸å­˜åœ¨çš„åŠ¨ä½œ        |
++| :----------: | :--------: | :----------------------------: |
  | `ifstream` |    åªè¯»    |             ä¸åˆ›å»º             |
  | `ofstream` |    åªå†™    |              åˆ›å»º              |
--| `fstream`  |    è¯»å†™    | åªå†™æ–¹å¼æ‰“å¼€æ‰åˆ›å»ºï¼Œå¦åˆ™ä¸åˆ›å»º |
++| `fstream` |    è¯»å†™    | åªå†™æ–¹å¼æ‰“å¼€æ‰åˆ›å»ºï¼Œå¦åˆ™ä¸åˆ›å»º |
  
--|     æ“ä½œæ ‡å¿—     |                  æ“ä½œæ–¹å¼                  |
--| :--------------: | :----------------------------------------: |
--|  `ios::in/out`   |       ä¸ºè¾“å…¥(è¯»)/è¾“å‡º(å†™)è€Œæ‰“å¼€æ–‡ä»¶        |
--|  `ios::binary`   |       ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€       |
++|      æ“ä½œæ ‡å¿—      |                  æ“ä½œæ–¹å¼                  |
++| :----------------: | :----------------------------------------: |
++|  `ios::in/out`  |       ä¸ºè¾“å…¥(è¯»)/è¾“å‡º(å†™)è€Œæ‰“å¼€æ–‡ä»¶       |
++|  `ios::binary`  |       ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€       |
  |    `ios::ate`    |              åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾              |
  |    `ios::app`    |           æ‰€æœ‰è¾“å‡ºé™„åŠ åœ¨æ–‡ä»¶æœ«å°¾           |
  |   `ios::trunc`   |        å¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™å…ˆåˆ é™¤è¯¥æ–‡ä»¶        |
--| `ios::nocreate`  |    ä¸å»ºç«‹æ–‡ä»¶ï¼Œæ‰€ä»¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ‰“å¼€å¤±è´¥    |
++| `ios::nocreate` |    ä¸å»ºç«‹æ–‡ä»¶ï¼Œæ‰€ä»¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ‰“å¼€å¤±è´¥    |
  | `ios::noreplace` | ä¸è¦†ç›–æ–‡ä»¶ï¼Œæ‰€ä»¥æ‰“å¼€æ–‡ä»¶æ—¶å¦‚æœæ–‡ä»¶å­˜åœ¨å¤±è´¥ |
  
--|    0     |    1     |    2     |    3     |
++|    0    |    1    |    2    |    3    |
  | :------: | :------: | :------: | :------: |
  | æ™®é€šæ–‡ä»¶ | åªè¯»æ–‡ä»¶ | éšè—æ–‡ä»¶ | ç³»ç»Ÿæ–‡ä»¶ |
  
--|        æ“ä½œç¬¦         |           æ ¼å¼           |    åœºæ™¯    |
--| :-------------------: | :----------------------: | :--------: |
++|         æ“ä½œç¬¦         |           æ ¼å¼           |    åœºæ™¯    |
++| :---------------------: | :----------------------: | :--------: |
  |     `dec/hex/oct`     | æ ¼å¼åŒ–ä¸ºåã€åå…­ã€å…«è¿›åˆ¶ | è¾“å…¥å’Œè¾“å‡º |
  | `setpxecision(int p)` |   è®¾ç½®æµ®ç‚¹æ•°çš„ç²¾åº¦ä½æ•°   |    è¾“å‡º    |
  
  #### æµæŒ‡é’ˆ
  
  + æ‰€æœ‰è¾“å…¥/è¾“å‡ºæµå¯¹è±¡éƒ½æœ‰è‡³å°‘ä¸€ä¸ªæµæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆåœ¨è¾“å…¥æµå¯¹è±¡ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªå°†è¢«è¯»å–çš„å…ƒç´ ï¼Œåœ¨è¾“å‡ºæµå¯¹è±¡ä¸­æŒ‡å‘å†™å…¥ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚
--
--+ è·å–æµæŒ‡é’ˆï¼š`tellg(void)`æˆ–` tellp(void)`è¿”å›`pos_type` ç±»å‹çš„å€¼`(int)`ä»£è¡¨å½“å‰`get` æµæŒ‡é’ˆçš„ä½ç½®æˆ– `put` æµæŒ‡é’ˆçš„ä½ç½®ã€‚
--
--+ æ”¹å˜æµæŒ‡é’ˆï¼š`seekg()` æˆ–`seekp()`å¯ä»¥ä»¥ç»å¯¹(ä»æ–‡ä»¶å¼€å§‹è®¡ç®—)æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ”¹å˜æµæŒ‡é’ˆget å’Œputçš„ä½ç½®ã€‚
--
+++ è·å–æµæŒ‡é’ˆï¼š`tellg(void)`æˆ– ` tellp(void)`è¿”å› `pos_type` ç±»å‹çš„å€¼ `(int)`ä»£è¡¨å½“å‰ `get` æµæŒ‡é’ˆçš„ä½ç½®æˆ– `put` æµæŒ‡é’ˆçš„ä½ç½®ã€‚
+++ æ”¹å˜æµæŒ‡é’ˆï¼š`seekg()` æˆ– `seekp()`å¯ä»¥ä»¥ç»å¯¹(ä»æ–‡ä»¶å¼€å§‹è®¡ç®—)æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ”¹å˜æµæŒ‡é’ˆget å’Œputçš„ä½ç½®ã€‚
  
  |  ios::beg  |    ios::cur    | ios::end |
  | :--------: | :------------: | :------: |
  | æµå¼€å§‹ä½ç½® | æµæŒ‡é’ˆå½“å‰ä½ç½® |  æµæœ«å°¾  |
  
--+ **NOTE:**å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æµæŒ‡é’ˆçš„è®¡ç®—æ–¹æ³•æ˜¯ä¸åŒçš„ã€‚ç”±äºæ–‡æœ¬æ¨¡å¼çš„æ–‡ä»¶ä¸­æŸäº›ç‰¹æ®Šå­—ç¬¦å¯èƒ½è¢«ä¿®æ”¹ï¼Œå»ºè®®å¯¹ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æ€»æ˜¯ä½¿ç”¨`seekg`å’Œseekp`çš„`ç»å¯¹ä½ç½®ç‰ˆæœ¬ï¼Œè€Œä¸”ä¸è¦å¯¹`tellg` æˆ– `tellp` çš„è¿”å›å€¼è¿›è¡Œä¿®æ”¹ã€‚å¯¹äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥ä»»æ„ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»»ä½•æ„å¤–çš„è¡Œä¸ºäº§ç”Ÿã€‚
+++ **NOTE:**å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æµæŒ‡é’ˆçš„è®¡ç®—æ–¹æ³•æ˜¯ä¸åŒçš„ã€‚ç”±äºæ–‡æœ¬æ¨¡å¼çš„æ–‡ä»¶ä¸­æŸäº›ç‰¹æ®Šå­—ç¬¦å¯èƒ½è¢«ä¿®æ”¹ï¼Œå»ºè®®å¯¹ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æ€»æ˜¯ä½¿ç”¨ `seekg`å’Œseekp `çš„`ç»å¯¹ä½ç½®ç‰ˆæœ¬ï¼Œè€Œä¸”ä¸è¦å¯¹ `tellg` æˆ– `tellp` çš„è¿”å›å€¼è¿›è¡Œä¿®æ”¹ã€‚å¯¹äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥ä»»æ„ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»»ä½•æ„å¤–çš„è¡Œä¸ºäº§ç”Ÿã€‚
  
  #### è¡Œç»“æŸæ ‡å¿—
  
@@@ -1956,21 -1956,21 +2018,20 @@@
  + **NOTE**ï¼šä¸Šè¿°ä¸¤ä¸ªå‡½æ•°è®¾ç½®çš„æ˜¯**Cçš„è¾“å…¥è¾“å‡ºç¼“å†²åŒº**ï¼Œå› ä¸ºc++å’Œcçš„ç¼“å†²åŒºé»˜è®¤æ˜¯åŒæ­¥çš„ï¼Œæ‰€æœ‰è¯¥å‡½æ•°ä¼šå¯¹c++æœ‰å½±å“ã€‚
  + ç¼“å†²åˆ·æ–°/åŒæ­¥
    1. æ—¶æœºï¼šç¼“å†²æ»¡ã€**è¡Œç¼“å†²åŒº**é‡å›è½¦ã€å…¶ä»–ç›´æ¥æˆ–é—´æ¥è°ƒç”¨flushçš„å‡½æ•°ã€è°ƒç”¨æ— å‚ç‰ˆæœ¬å‡½æ•°sync()ã€è¿›ç¨‹ç»“æŸ(æµå…³é—­ã€æ–‡ä»¶å…³é—­)
--  2. åŠ¨ä½œï¼šè¾“å‡ºç¼“å†²åŒºçš„åˆ·æ–°åŠ¨ä½œä¸€èˆ¬å¯¼è‡´ç¼“å†²åŒºå†…çš„å†…å®¹è¢«æ‰§è¡ŒIOåˆ°å…¶å…³è”çš„æ–‡ä»¶æè¿°ç¬¦ä¸­ï¼Œç„¶åæ¸…ç©ºç¼“å†²åŒºã€‚è€Œå¯¹äºè¾“å…¥ç¼“å†²åŒºï¼Œä¸å¯èƒ½å¼ºåˆ¶å®ç°å°†è¾“å…¥ç¼“å†²åŒºå¼ºåˆ¶æ³¨å…¥åˆ°å…³è”çš„å®ä½“ä¸­ï¼Œå› ä¸ºè¾“å…¥æ˜¯ä¸å¯é¢„æµ‹æŒæ§çš„ï¼Œæ‰€ä»¥å¯¹è¾“å…¥ç¼“å†²åŒºçš„åˆ·æ–°è¡¨ç°ä¸ºæ¸…ç©ºç¼“å†²åŒºé‡Œçš„å½“å‰å†…å®¹ï¼Œç­‰å¾…è¾“å…¥è¿›å…¥è¾“å…¥ç¼“å†²åŒºã€‚
--| ç¼“å†²ç±»å‹ |                      ç‰¹ç‚¹                       |    å…¸å‹ä»£è¡¨    |
--| :------: | :---------------------------------------------: | :------------: |
--|  è¡Œç¼“å†²  | å½“ç¼“å†²åŒºå†…å®¹é‡åˆ°**æ¢è¡Œ**æ—¶ï¼Œå³è¿›è¡Œå®é™…çš„I/Oæ“ä½œ |  è¯»å†™ç£ç›˜æ–‡ä»¶  |
--|  å…¨ç¼“å†²  |      å¡«æ»¡æ ‡å‡†I/Oç¼“å†²åŒºæ‰è¿›è¡Œå®é™…çš„I/Oæ“ä½œ       | æ ‡å‡†è¾“å…¥å’Œè¾“å‡º |
--|  æ— ç¼“å†²  |                   ç›´æ¥I/Oæ“ä½œ                   |    æ ‡å‡†é”™è¯¯    |
--
--| ç¼“å†²æ“ä½œå‡½æ•° |                      ä½œç”¨                      |
--| :----------: | :--------------------------------------------: |
--|     endl     |         æ·»åŠ æ¢è¡Œlineã€è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº         |
--|     ends     |     æ·»åŠ ç©ºæ ¼spaceã€è¾“å‡ºã€‚**ä¸åˆ·æ–°ç¼“å†²åŒº**      |
--|    flush     |                è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº                |
--|   **sync**   | åˆ·æ–°**è¾“å…¥**ç¼“å†²åŒº(æ¸…é™¤è¾“å…¥ç¼“å†²åŒº)æˆ–è¾“å‡ºç¼“å†²åŒº |
--|   unitbuf    |      å¯ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåéƒ½è‡ªåŠ¨åˆ·æ–°      |
--|  ununitbuf   |      ç¦ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåçš„è‡ªåŠ¨åˆ·æ–°      |
++  2. åŠ¨ä½œï¼šè¾“å‡ºç¼“å†²åŒºçš„åˆ·æ–°åŠ¨ä½œä¸€èˆ¬å¯¼è‡´ç¼“å†²åŒºå†…çš„å†…å®¹è¢«æ‰§è¡ŒIOåˆ°å…¶å…³è”çš„æ–‡ä»¶æè¿°ç¬¦ä¸­ï¼Œç„¶åæ¸…ç©ºç¼“å†²åŒºã€‚è€Œå¯¹äºè¾“å…¥ç¼“å†²åŒºï¼Œä¸å¯èƒ½å¼ºåˆ¶å®ç°å°†è¾“å…¥ç¼“å†²åŒºå¼ºåˆ¶æ³¨å…¥åˆ°å…³è”çš„å®ä½“ä¸­ï¼Œå› ä¸ºè¾“å…¥æ˜¯ä¸å¯é¢„æµ‹æŒæ§çš„ï¼Œæ‰€ä»¥å¯¹è¾“å…¥ç¼“å†²åŒºçš„åˆ·æ–°è¡¨ç°ä¸ºæ¸…ç©ºç¼“å†²åŒºé‡Œçš„å½“å‰å†…å®¹ï¼Œç­‰å¾…è¾“å…¥è¿›å…¥è¾“å…¥ç¼“å†²åŒºã€‚| ç¼“å†²ç±»å‹ |                         ç‰¹ç‚¹                         |    å…¸å‹ä»£è¡¨    |
++     | :------: | :---------------------------------------------------: | :------------: |
++     |  è¡Œç¼“å†²  | å½“ç¼“å†²åŒºå†…å®¹é‡åˆ°**æ¢è¡Œ**æ—¶ï¼Œå³è¿›è¡Œå®é™…çš„I/Oæ“ä½œ |  è¯»å†™ç£ç›˜æ–‡ä»¶  |
++     |  å…¨ç¼“å†²  |         å¡«æ»¡æ ‡å‡†I/Oç¼“å†²åŒºæ‰è¿›è¡Œå®é™…çš„I/Oæ“ä½œ         | æ ‡å‡†è¾“å…¥å’Œè¾“å‡º |
++     |  æ— ç¼“å†²  |                      ç›´æ¥I/Oæ“ä½œ                      |    æ ‡å‡†é”™è¯¯    |
++
++|  ç¼“å†²æ“ä½œå‡½æ•°  |                         ä½œç”¨                         |
++| :------------: | :--------------------------------------------------: |
++|      endl      |            æ·»åŠ æ¢è¡Œlineã€è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº            |
++|      ends      |     æ·»åŠ ç©ºæ ¼spaceã€è¾“å‡ºã€‚**ä¸åˆ·æ–°ç¼“å†²åŒº**     |
++|     flush     |                   è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº                   |
++| **sync** | åˆ·æ–°**è¾“å…¥**ç¼“å†²åŒº(æ¸…é™¤è¾“å…¥ç¼“å†²åŒº)æˆ–è¾“å‡ºç¼“å†²åŒº |
++|    unitbuf    |      å¯ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåéƒ½è‡ªåŠ¨åˆ·æ–°      |
++|   ununitbuf   |      ç¦ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåçš„è‡ªåŠ¨åˆ·æ–°      |
  
  ### åº”ç”¨
  
@@@ -1990,13 -1990,13 +2051,13 @@@
  1. æ ‡å‡†åº“é»˜è®¤æŠŠcinå’Œcoutå…³è”åœ¨ä¸€èµ·ï¼Œcin ä¼šåˆ·æ–°coutçš„ç¼“å†²åŒºï¼Œå¯ä»¥ç”¨å‡½æ•°cin.tie(nullptr)æ¥è§£é™¤å…³è”ã€‚
  2. å®ç°æµåº•å±‚çš„streambufåœ¨ä¸åŒæµä¹‹é—´çš„å…³è”ç»‘å®š
  
-- ```cpp
++```cpp
  std::ifstream fin{"oj.test.txt"};
  auto cin_buf = std::cin.rdbuf(fin.rdbuf()); //è¿”å›å…³è”å‰çš„ç¼“å†²åŒºï¼Œç»‘å®šfinçš„ç¼“å†²åˆ°cin
  std::cin.tie(nullptr);     					//è§£é™¤cinå’Œcoutçš„ç¼“å†²åŒºç»‘å®š
  std::string temp;
  std::getline(std::cin, temp);
-- ```
++```
  
  ### å½±å“
  
@@@ -2007,18 -2007,18 +2068,18 @@@
    + endlé™¤äº†è¾“å‡ºæ¢è¡Œä¹‹å¤–ï¼Œè¿˜åˆ·æ–°è¾“å‡ºæµæˆ–é”™è¯¯æµç¼“å†²åŒºã€‚
    + \nå¯¼è‡´çš„è¡Œä¸ºåœ¨æ ‡å‡†è¾“å‡ºå’Œéæ ‡å‡†è¾“å‡ºè¡¨ç°å¹¶ä¸ä¸€è‡´(åœ¨manjaro linux5.10 gcc10.2ä¸‹éªŒè¯)
      1. éæ ‡å‡†è¾“å‡ºï¼Œ\nåªä¼šè¾“å‡ºå¸¦æ¢è¡Œçš„å†…å®¹ï¼Œå¹¶ä¸ä¼šå»åˆ·æ–°æµã€‚
--    2. **å¤šæ•°å®ç°ä¸­**æ ‡å‡†è¾“å‡ºæ˜¯è¡Œç¼“å†²çš„ï¼Œé™¤éæ‰§è¡Œ`std::ios::sync_with_stdio(false)`å¦åˆ™'\n'ä¼šå¯¼è‡´ç¼“å†²åˆ·æ–°ã€‚[æ¥æº](https://zh.cppreference.com/w/cpp/io/manip/endl)
++    2. **å¤šæ•°å®ç°ä¸­**æ ‡å‡†è¾“å‡ºæ˜¯è¡Œç¼“å†²çš„ï¼Œé™¤éæ‰§è¡Œ `std::ios::sync_with_stdio(false)`å¦åˆ™'\n'ä¼šå¯¼è‡´ç¼“å†²åˆ·æ–°ã€‚[æ¥æº](https://zh.cppreference.com/w/cpp/io/manip/endl)
  
  #### è¯¡å¼‚çš„std::cin
  
  + æ ¹æœ¬åŸå› :cinèƒŒåæ˜¯ä¸€ä¸ªè¡Œç¼“å†²ï¼Œä»é‡Œé¢å–èµ°æ•°æ®ä¹‹åå¹¶æ²¡æœ‰å–èµ°å…¨éƒ¨æ•°æ®(ç•™ä¸‹äº†æ ‡å¿—ã€æ¢è¡Œç¬¦ç­‰)è€Œä¸”ä¹Ÿæ²¡æœ‰åˆ·æ–°ç¼“å†²ï¼Œé€ æˆç¼“å†²ä¸å¹²å‡€è€Œå½±å“ä¸‹ä¸€æ¬¡è¯»å–ç¼“å†²ã€‚
  + æ ‡å‡†è¾“å…¥æµçš„â€œæ–‡ä»¶æœ«å°¾â€ï¼šwinä¸‹ctrl+zè¡¨ç¤ºè¾“å…¥ç»“æŸï¼Œlinuxä¸‹ctrl+dè¡¨ç¤ºè¾“å…¥ç»“æŸ
  
--|       æ–¹æ³•       |                ä½œç”¨                 |
++|       æ–¹æ³•       |                ä½œç”¨                |
  | :--------------: | :---------------------------------: |
--|   cin.clear()    |     æ¸…ç©ºæµä¸­çš„æ ‡å¿—(EOFã€é”™è¯¯ç­‰)     |
++|   cin.clear()   |     æ¸…ç©ºæµä¸­çš„æ ‡å¿—(EOFã€é”™è¯¯ç­‰)     |
  | cin.ingore(a,ch) | å¿½ç•¥æµä¸­çš„å­—ç¬¦ç¬¬ä¸€ä¸ªchæˆ–aä¸ªä»»æ„å­—ç¬¦ |
--|    cin.sync()    |         æ¸…é™¤ç¼“å­˜åŒºçš„æ•°æ®æµ          |
++|    cin.sync()    |         æ¸…é™¤ç¼“å­˜åŒºçš„æ•°æ®æµ         |
  
  ## æµç›¸å…³è¿­ä»£å™¨
  
@@@ -2031,16 -2031,16 +2092,16 @@@
  + `istream_iterator<T,CharT=char>(istream)`åœ¨**æ–‡æœ¬æ¨¡å¼(charã€wcharç­‰ï¼Œä¸æ”¯æŒäºŒè¿›åˆ¶)**ä¸‹ä»istreamæµä¸­æå–æ•°æ®ã€‚
  + è¦æ±‚Tç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å®ç°äº†å°†è¾“å‡ºæµå†™å…¥Tä¸­çš„operator >>()æ–¹æ³•ã€‚
  + **NOTE**:
--    1. é»˜è®¤è·³è¿‡ç©ºç™½å­—ç¬¦(é™¤éæ˜ç¡®ç¦æ­¢)
--    2. å½“å¤šä¸ªè¾“å…¥æµè¿­ä»£å™¨æŒ‡å‘åŒä¸€ä¸ªè¾“å…¥æµæ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªè¿­ä»£å™¨ä½ç½®çš„æ”¹å˜ä¹Ÿä¼šä½¿å¦ä¸€ä¸ªè¿­ä»£å™¨çš„ä½ç½®æ”¹å˜(ä»–ä»¬ç›¸å½“äºå…±äº«äº†ä¸€ä¸ªåº•å±‚ç»“æ„)
++  1. é»˜è®¤è·³è¿‡ç©ºç™½å­—ç¬¦(é™¤éæ˜ç¡®ç¦æ­¢)
++  2. å½“å¤šä¸ªè¾“å…¥æµè¿­ä»£å™¨æŒ‡å‘åŒä¸€ä¸ªè¾“å…¥æµæ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªè¿­ä»£å™¨ä½ç½®çš„æ”¹å˜ä¹Ÿä¼šä½¿å¦ä¸€ä¸ªè¿­ä»£å™¨çš„ä½ç½®æ”¹å˜(ä»–ä»¬ç›¸å½“äºå…±äº«äº†ä¸€ä¸ªåº•å±‚ç»“æ„)
  
  ### è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator
  
--+ `ostream_iterator<T, CharT=char>(ostream <,const CharT* delim>)`:ä»¥`CharT`çš„å½¢å¼`(charã€wchar)`å°†è‹¥å¹²ä¸ªTå†™å…¥åˆ°è¾“å‡ºæµ`ostream`ï¼Œæ¯å†™ä¸€ä¸ªTå¯¹è±¡è¿½åŠ ä¸€ä¸ª`delim`ã€‚
--+ è¦æ±‚Tç±»å‹æ˜¯å®ç°äº†å°†Tå¯¹è±¡å†™å…¥æµä¸­çš„`operator <<()`æ–¹æ³•æ•°æ®ç»“æ„æˆ–è€…æ™®é€šæ•°æ®ç±»å‹ã€‚
--+ å…¶`operator *()ã€++()ã€++(int)`æ–¹æ³•å§‹ç»ˆè¿”å›å½“å‰æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸åŒ…å«å…¶ä»–ä»»ä½•æ“ä½œã€‚è¿™äº›å‡½æ•°çš„å­˜åœ¨åªæ˜¯ä¸ºäº†æ»¡è¶³è¿­ä»£å™¨çš„è§„èŒƒã€‚
+++ `ostream_iterator<T, CharT=char>(ostream <,const CharT* delim>)`:ä»¥ `CharT`çš„å½¢å¼ `(charã€wchar)`å°†è‹¥å¹²ä¸ªTå†™å…¥åˆ°è¾“å‡ºæµ `ostream`ï¼Œæ¯å†™ä¸€ä¸ªTå¯¹è±¡è¿½åŠ ä¸€ä¸ª `delim`ã€‚
+++ è¦æ±‚Tç±»å‹æ˜¯å®ç°äº†å°†Tå¯¹è±¡å†™å…¥æµä¸­çš„ `operator <<()`æ–¹æ³•æ•°æ®ç»“æ„æˆ–è€…æ™®é€šæ•°æ®ç±»å‹ã€‚
+++ å…¶ `operator *()ã€++()ã€++(int)`æ–¹æ³•å§‹ç»ˆè¿”å›å½“å‰æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸åŒ…å«å…¶ä»–ä»»ä½•æ“ä½œã€‚è¿™äº›å‡½æ•°çš„å­˜åœ¨åªæ˜¯ä¸ºäº†æ»¡è¶³è¿­ä»£å™¨çš„è§„èŒƒã€‚
  + **NOTE:**
--    1. è¾“å‡ºæµè¿­ä»£å™¨çš„è¾“å‡ºæ›´æ–°æœ¬è´¨ä¸Šæœ€ç»ˆéƒ½æ˜¯é€šè¿‡operator =()å‡½æ•°å®ç°ã€‚
++  1. è¾“å‡ºæµè¿­ä»£å™¨çš„è¾“å‡ºæ›´æ–°æœ¬è´¨ä¸Šæœ€ç»ˆéƒ½æ˜¯é€šè¿‡operator =()å‡½æ•°å®ç°ã€‚
  
  ### è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator
  
@@@ -2050,19 -2050,19 +2111,19 @@@
  
  ## `auto`
  
--+ èƒŒæ™¯ï¼š`auto`ä½œä¸ºå˜é‡å­˜å‚¨å…³é”®å­—é•¿æœŸä»¥æ¥å¹¶æ²¡æœ‰å‘æŒ¥å¤§çš„ä½œç”¨ï¼ŒC++11å†³å®šç”¨`auto`ä¾æ®åˆå§‹å€¼å®ç°ç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼
+++ èƒŒæ™¯ï¼š`auto`ä½œä¸ºå˜é‡å­˜å‚¨å…³é”®å­—é•¿æœŸä»¥æ¥å¹¶æ²¡æœ‰å‘æŒ¥å¤§çš„ä½œç”¨ï¼ŒC++11å†³å®šç”¨ `auto`ä¾æ®åˆå§‹å€¼å®ç°ç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼
  + **NOTEï¼š**
    1. `auto`ä»…ä»…æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨ç¼–è¯‘æœŸé—´ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼ŒC++ä¸­çš„å˜é‡ä¾ç„¶æœ‰æ˜ç¡®çš„ç±»å‹ã€‚
--  2. `auto`è¡¨è¾¾å¼æ¨å¯¼å‡ºçš„ç±»å‹å’Œ`auto`è¢«æ›¿æ¢æ—¶çš„ç±»å‹ä¸åŒï¼Œè¢«æ›¿æ¢æˆçš„å­—ç¬¦åªæ˜¯æœ€ç»ˆç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚
++  2. `auto`è¡¨è¾¾å¼æ¨å¯¼å‡ºçš„ç±»å‹å’Œ `auto`è¢«æ›¿æ¢æ—¶çš„ç±»å‹ä¸åŒï¼Œè¢«æ›¿æ¢æˆçš„å­—ç¬¦åªæ˜¯æœ€ç»ˆç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚
  
  ### ç”¨æ³•
  
--+ ç”±äº`auto`ç”¨æ¥åšç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥`auto`ç±»å‹çš„å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ã€‚
+++ ç”±äº `auto`ç”¨æ¥åšç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥ `auto`ç±»å‹çš„å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ã€‚
  
--1. å½“ä¸€ä¸ª`auto`ä¿®é¥°å¤šä¸ªå˜é‡æ—¶ï¼Œå˜é‡æ¨å¯¼å‡ºçš„ç±»å‹ä¸èƒ½æœ‰å†²çªã€‚
--2. `auto`ä¸*å’Œ&æ··ç”¨ï¼šæ­¤æ—¶`auto`è¢«æ¨å¯¼ä¸ºä¸å¸¦æŒ‡é’ˆæˆ–å¼•ç”¨çš„ç±»å‹ï¼Œä½†æ˜¯`auto`å£°æ˜çš„å˜é‡çš„ç±»å‹ä¸º`auto+cv`é™å®šç¬¦ã€‚
--3. å½“`auto`çš„=å³è¾¹çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ—¶ï¼Œ`auto` ä¼šæŠŠå¼•ç”¨æŠ›å¼ƒï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚
--4. `auto`ä¸`const`çš„ç»“åˆï¼šå½“å·¦è¾¹çš„ç±»å‹å£°æ˜å«æœ‰å¼•ç”¨æˆ–è€…æŒ‡é’ˆç¬¦å·æ—¶ï¼Œæ¨å¯¼å‡ºçš„æœ€ç»ˆç±»å‹å«æœ‰`const`å±æ€§ï¼Œå¦åˆ™`const`è¢«å»é™¤ã€‚
++1. å½“ä¸€ä¸ª `auto`ä¿®é¥°å¤šä¸ªå˜é‡æ—¶ï¼Œå˜é‡æ¨å¯¼å‡ºçš„ç±»å‹ä¸èƒ½æœ‰å†²çªã€‚
++2. `auto`ä¸*å’Œ&æ··ç”¨ï¼šæ­¤æ—¶ `auto`è¢«æ¨å¯¼ä¸ºä¸å¸¦æŒ‡é’ˆæˆ–å¼•ç”¨çš„ç±»å‹ï¼Œä½†æ˜¯ `auto`å£°æ˜çš„å˜é‡çš„ç±»å‹ä¸º `auto+cv`é™å®šç¬¦ã€‚
++3. å½“ `auto`çš„=å³è¾¹çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ—¶ï¼Œ`auto` ä¼šæŠŠå¼•ç”¨æŠ›å¼ƒï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚
++4. `auto`ä¸ `const`çš„ç»“åˆï¼šå½“å·¦è¾¹çš„ç±»å‹å£°æ˜å«æœ‰å¼•ç”¨æˆ–è€…æŒ‡é’ˆç¬¦å·æ—¶ï¼Œæ¨å¯¼å‡ºçš„æœ€ç»ˆç±»å‹å«æœ‰ `const`å±æ€§ï¼Œå¦åˆ™ `const`è¢«å»é™¤ã€‚
  5. å°å¿ƒç”¨äºåªæ”¯æŒç§»åŠ¨è¯­ä¹‰çš„ç±»å‹ï¼ˆå› ä¸ºæŸäº›æ¨å¯¼å‡ºçš„ç±»å‹å¯èƒ½è§¦å‘å¤åˆ¶æ“ä½œï¼‰
  
  ```c++
@@@ -2085,15 -2085,15 +2146,15 @@@ auto f = e;//is_reference<decltype(f)>:
  
  ### `decltype(exp)`æ¨å¯¼è§„åˆ™
  
--1. å¦‚æœ`exp`æ˜¯ä¸€ä¸ªä¸è¢«æ‹¬å·`( )`åŒ…å›´çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª**å•ç‹¬çš„**å˜é‡ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±å’Œ`exp`ä¸€è‡´ã€‚
--2. å¦‚æœ`exp`æ˜¯å‡½æ•°è°ƒç”¨ï¼ˆå½¢å¼è¦æ»¡è¶³å‡½æ•°è°ƒç”¨ï¼Œä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸€è‡´ã€‚
--3. å¦‚æœ`exp`æ˜¯ä¸€ä¸ªå·¦å€¼è¡¨è¾¾å¼ï¼ˆæ³¨æ„ä¸1ä¸­çš„å•ç‹¬çš„å˜é‡åŒºåˆ†ï¼‰ï¼Œæˆ–è€…è¢«æ‹¬å·( )åŒ…å›´ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±æ˜¯expçš„å¼•ç”¨ã€‚
++1. å¦‚æœ `exp`æ˜¯ä¸€ä¸ªä¸è¢«æ‹¬å· `( )`åŒ…å›´çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª**å•ç‹¬çš„**å˜é‡ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±å’Œ `exp`ä¸€è‡´ã€‚
++2. å¦‚æœ `exp`æ˜¯å‡½æ•°è°ƒç”¨ï¼ˆå½¢å¼è¦æ»¡è¶³å‡½æ•°è°ƒç”¨ï¼Œä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸€è‡´ã€‚
++3. å¦‚æœ `exp`æ˜¯ä¸€ä¸ªå·¦å€¼è¡¨è¾¾å¼ï¼ˆæ³¨æ„ä¸1ä¸­çš„å•ç‹¬çš„å˜é‡åŒºåˆ†ï¼‰ï¼Œæˆ–è€…è¢«æ‹¬å·( )åŒ…å›´ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±æ˜¯expçš„å¼•ç”¨ã€‚
  
  ## autoä¸decltypeçš„ä¸åŒ
  
  ### å¯¹cvé™å®šç¬¦çš„å¤„ç†
  
--+ `decltype`ï¼šä¿ç•™`cv`é™å®šç¬¦
+++ `decltype`ï¼šä¿ç•™ `cv`é™å®šç¬¦
  + `auto`ï¼šå¦‚æœè¡¨è¾¾å¼çš„ç±»å‹æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œä¿ç•™cvé™å®šç¬¦ï¼Œå¦åˆ™ä¸¢å¼ƒé™å®šç¬¦ã€‚
  
  ### å¯¹å¼•ç”¨çš„å¤„ç†
@@@ -2109,8 -2109,8 +2170,8 @@@
  
  + æå‡ºèƒŒæ™¯ï¼š
  
-- 1. `template`å‚æ•°æ¨å¯¼ï¼šæ— æ³•ç”¨äºå‡½æ•°è¿”å›ç±»å‹
-- 2. å†…åµŒå£°æ˜å‹åˆ«ï¼šæ— æ³•å¤„ç†åŸç”ŸæŒ‡é’ˆ
++1. `template`å‚æ•°æ¨å¯¼ï¼šæ— æ³•ç”¨äºå‡½æ•°è¿”å›ç±»å‹
++2. å†…åµŒå£°æ˜å‹åˆ«ï¼šæ— æ³•å¤„ç†åŸç”ŸæŒ‡é’ˆ
  
  + æ€æƒ³ï¼šåŠ å…¥ä¸­é—´å±‚ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£å¯ä»¥è·å–å¯¹è±¡/æ•°æ®çš„ç±»å‹ï¼Œå…¶ä»–çš„å®¹å™¨å®ç°è¿™ä¸€æ¥å£
  
@@@ -2118,13 -2118,13 +2179,13 @@@
  
  1. `value_type`ï¼š ä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„ç±»å‹ã€‚
  2. `difference_type`ï¼šä»£è¡¨ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»
--3. `reference_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨ç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯`operator*()`çš„è¿”å›ç±»å‹
--4. `pointer_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€è‡´å¯¹è±¡çš„æŒ‡é’ˆç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯`operator->()`çš„è¿”å›ç±»å‹
++3. `reference_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨ç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯ `operator*()`çš„è¿”å›ç±»å‹
++4. `pointer_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€è‡´å¯¹è±¡çš„æŒ‡é’ˆç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯ `operator->()`çš„è¿”å›ç±»å‹
  5. `iterator_category`ï¼šä»£è¡¨1ä¸­æå‡ºçš„äº”ç§è¿­ä»£å™¨çš„ç±»å‹æ ‡è¯†
  
  ### åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°
  
--1. åŸç”ŸæŒ‡é’ˆï¼šåˆ©ç”¨æ¨¡æ¿ç±»çš„åç‰¹åŒ–ï¼Œä¸ºåŸç”Ÿçš„æŒ‡é’ˆå’Œ`const`æŒ‡é’ˆæä¾›`iterator_traits`ã€‚
++1. åŸç”ŸæŒ‡é’ˆï¼šåˆ©ç”¨æ¨¡æ¿ç±»çš„åç‰¹åŒ–ï¼Œä¸ºåŸç”Ÿçš„æŒ‡é’ˆå’Œ `const`æŒ‡é’ˆæä¾› `iterator_traits`ã€‚
  2. ä¸€èˆ¬è¿­ä»£å™¨ï¼šåœ¨æ•°æ®ç»“æ„ä¸­çš„å®ç°é‡Œï¼Œç»Ÿä¸€æä¾›ä¸€ä¸ªæ¥å£æ¥æ ‡æ˜è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä¾›å¤–éƒ¨è®¿é—®ã€‚
  
  ## [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](# æ¨¡æ¿å‚æ•°ç±»å‹æ¨å¯¼)
@@@ -2133,7 -2133,7 +2194,7 @@@
  
  # å¯è°ƒç”¨å¯¹è±¡
  
--C++ä¸­çš„å¯è°ƒç”¨å¯¹è±¡å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ï¼šå‡½æ•°æŒ‡é’ˆã€å…·æœ‰`operator()`æˆå‘˜å‡½æ•°çš„ç±»çš„å¯¹è±¡ï¼ˆä»¿å‡½æ•°ã€`lambda`è¡¨è¾¾å¼ï¼‰ã€å¯è¢«è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆçš„ç±»å¯¹è±¡ã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€‚
++C++ä¸­çš„å¯è°ƒç”¨å¯¹è±¡å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ï¼šå‡½æ•°æŒ‡é’ˆã€å…·æœ‰ `operator()`æˆå‘˜å‡½æ•°çš„ç±»çš„å¯¹è±¡ï¼ˆä»¿å‡½æ•°ã€`lambda`è¡¨è¾¾å¼ï¼‰ã€å¯è¢«è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆçš„ç±»å¯¹è±¡ã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€‚
  
  ## lambdaè¡¨è¾¾å¼/é—­åŒ…
  
@@@ -2156,16 -2156,16 +2217,16 @@@ printer();///è°ƒç”¨é—­åŒ
  
  ### å¤§è‡´åŸç†
  
--  åœ¨C++ä¸­ï¼Œlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°å¯¹è±¡çš„è¯­æ³•ç³–ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ª`lambda`è¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé‡è½½äº†`operatr ()`çš„åŒ¿åç±»/é—­åŒ…ç±»å‹ï¼ˆclosure typeï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œlambdaè¡¨è¾¾å¼å°±ä¼šè¿”å›ä¸€ä¸ªåŒ¿åçš„é—­åŒ…å®ä¾‹ã€‚
++  åœ¨C++ä¸­ï¼Œlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°å¯¹è±¡çš„è¯­æ³•ç³–ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ª `lambda`è¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé‡è½½äº† `operatr ()`çš„åŒ¿åç±»/é—­åŒ…ç±»å‹ï¼ˆclosure typeï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œlambdaè¡¨è¾¾å¼å°±ä¼šè¿”å›ä¸€ä¸ªåŒ¿åçš„é—­åŒ…å®ä¾‹ã€‚
  
  ### å½¢å¼è¯´æ˜
  
--`[capture] <(parameters) mutable noexcpt/throw() attribute -> return_type> { body }`ï¼Œå°–æ‹¬å·å†…å¯é€‰ï¼Œä½†`param`å’Œ`mutable`ä»¥åŠå¼‚å¸¸ç®¡ç†ä¸­çš„ä»»æ„å¤šä¸ªå¿…é¡»åŒæ—¶å‡ºç°ã€‚
++`[capture] <(parameters) mutable noexcpt/throw() attribute -> return_type> { body }`ï¼Œå°–æ‹¬å·å†…å¯é€‰ï¼Œä½† `param`å’Œ `mutable`ä»¥åŠå¼‚å¸¸ç®¡ç†ä¸­çš„ä»»æ„å¤šä¸ªå¿…é¡»åŒæ—¶å‡ºç°ã€‚
  
--#### æ•è·å˜é‡åˆ—è¡¨`capture`
++#### æ•è·å˜é‡åˆ—è¡¨ `capture`
  
--1. [<[ ï¼Œ=ï¼Œ&][var]>]ï¼š<>å†…å‰åŠéƒ¨åˆ†çš„ä¸‰ä¸ªç¬¦å·å¯ä»¥ä¸`var`éšæ„ç»“åˆ/ä¸ç»“åˆç”¨æ¥è¡¨ç¤ºæ•è·å˜é‡çš„æ–¹å¼ã€‚ä¸ºç©ºåˆ™ä¸æ•è·ä»»ä½•å˜é‡ï¼Œ=è¡¨ç¤ºå€¼æ•è·ï¼Œ&ä¸ºå¼•ç”¨æ•è·ï¼Œä¸varç»“åˆè¡¨ç¤ºå¯¹è¯¥å˜é‡ä½¿ç”¨ç»“åˆçš„æ•è·æ–¹å¼ï¼Œä¸ç»“åˆè¡¨ç¤ºæ•è·åœ¨è¡¨è¾¾å¼å†…éƒ¨è¢«ç”¨åˆ°çš„å…¨éƒ¨å˜é‡ï¼Œå•ç‹¬varè¡¨ç¤ºå€¼æ•è·ã€‚é€šç”¨çš„æ•è·åœ¨æ•è·åˆ—è¡¨å‰éƒ¨ï¼Œç‰¹æ®Šæ•è·åœ¨åï¼Œä»¥é€—å·åˆ†å‰²ã€‚
--2. å˜é‡æ¥æºï¼šä½¿ç”¨é‚£äº›**åˆ°å®šä¹‰`Lambda`ä¸ºæ­¢æ—¶**`Lambda`æ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡(åŒ…æ‹¬`Lambda`æ‰€åœ¨ç±»çš„`this`)ã€‚éå±€éƒ¨å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å…¨å±€å˜é‡ç­‰å¯ä»¥ä¸ç»æ•è·ï¼Œç›´æ¥ä½¿ç”¨ï¼›
++1. [<[ ï¼Œ=ï¼Œ&][var]>]ï¼š<>å†…å‰åŠéƒ¨åˆ†çš„ä¸‰ä¸ªç¬¦å·å¯ä»¥ä¸ `var`éšæ„ç»“åˆ/ä¸ç»“åˆç”¨æ¥è¡¨ç¤ºæ•è·å˜é‡çš„æ–¹å¼ã€‚ä¸ºç©ºåˆ™ä¸æ•è·ä»»ä½•å˜é‡ï¼Œ=è¡¨ç¤ºå€¼æ•è·ï¼Œ&ä¸ºå¼•ç”¨æ•è·ï¼Œä¸varç»“åˆè¡¨ç¤ºå¯¹è¯¥å˜é‡ä½¿ç”¨ç»“åˆçš„æ•è·æ–¹å¼ï¼Œä¸ç»“åˆè¡¨ç¤ºæ•è·åœ¨è¡¨è¾¾å¼å†…éƒ¨è¢«ç”¨åˆ°çš„å…¨éƒ¨å˜é‡ï¼Œå•ç‹¬varè¡¨ç¤ºå€¼æ•è·ã€‚é€šç”¨çš„æ•è·åœ¨æ•è·åˆ—è¡¨å‰éƒ¨ï¼Œç‰¹æ®Šæ•è·åœ¨åï¼Œä»¥é€—å·åˆ†å‰²ã€‚
++2. å˜é‡æ¥æºï¼šä½¿ç”¨é‚£äº›**åˆ°å®šä¹‰ `Lambda`ä¸ºæ­¢æ—¶** `Lambda`æ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡(åŒ…æ‹¬ `Lambda`æ‰€åœ¨ç±»çš„ `this`)ã€‚éå±€éƒ¨å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å…¨å±€å˜é‡ç­‰å¯ä»¥ä¸ç»æ•è·ï¼Œç›´æ¥ä½¿ç”¨ï¼›
  3. æ•è·æ—¶æœºï¼š`lambda`è¢«å£°æ˜æ—¶è€Œéè¿è¡Œæ—¶ï¼Œå¯¹äºå¼•ç”¨åˆ™æ˜¯è¿è¡Œæ—¶åœ¨è®¿é—®å¤–éƒ¨ã€‚
  4. æ•è·thisï¼šåªæœ‰åŒ…å«ä¸”æœ€é è¿‘lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä¸æ˜¯é™æ€æˆå‘˜å‡½æ•°æ—¶æ‰èƒ½è¢«æ•è·thisã€‚åœ¨C++17ä¹‹å‰åªèƒ½é€šè¿‡å¼•[this]ä»¥å¼•ç”¨æ•è·å½“å‰å¯¹è±¡ï¼ˆå…¶å®æ˜¯å¤åˆ¶æŒ‡é’ˆï¼‰ï¼Œc++17ä»¥åå¯ä»¥é€šè¿‡[*this]è¿›è¡Œå€¼æ•è·ã€‚æ•è·ä¹‹ålambda è¡¨è¾¾å¼æ‹¥æœ‰å’Œå½“å‰ç±»æˆå‘˜å‡½æ•°åŒæ ·çš„è®¿é—®æƒé™ã€æ§åˆ¶æƒé™å’Œè®¿é—®æ–¹å¼ã€‚
  
@@@ -2181,7 -2181,7 +2242,7 @@@
  #### `multable`
  
  1. èƒŒæ™¯ï¼šå¯¹äºå€¼æ•æ‰æ–¹å¼ï¼Œç±»ä¼šç›¸åº”æ·»åŠ å¯¹åº”ç±»å‹çš„éé™æ€æ•°æ®æˆå‘˜ï¼Œåœ¨è¿è¡Œæ—¶ä¼šç”¨å¤åˆ¶çš„å€¼åˆå§‹åŒ–è¿™äº›æˆå‘˜å˜é‡ï¼Œä»å¯¹äºå¼•ç”¨æ•è·çš„å˜é‡ï¼Œæ ‡å‡†ä¸­æ²¡æœ‰è§„å®šå…¶åœ¨ç±»ä¸­çš„è¡¨ç¤ºæ–¹æ³•ï¼ˆclangçš„å®ç°å¤§æ¦‚æ˜¯åœ¨é—­åŒ…ä¸­æ”¾äº†ä¸ªæŒ‡é’ˆï¼‰ã€‚
--2. é‡è½½çš„`operator()`é»˜è®¤çš„å‡½æ•°ç­¾åæ˜¯`const operator()`é™ï¼Œå› æ­¤æ— æ³•ä¿®æ”¹å€¼ä¼ é€’åæ„å»ºçš„æˆå‘˜ã€‚è€Œå¯¹äºå¼•ç”¨çš„ä¼ é€’æ–¹å¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜å¼•ç”¨æœ¬èº«ï¼Œè€Œåªä¼šæ”¹å˜å¼•ç”¨çš„å€¼ï¼Œå› æ­¤å°±å¯ä»¥æ”¹å˜ã€‚
++2. é‡è½½çš„ `operator()`é»˜è®¤çš„å‡½æ•°ç­¾åæ˜¯ `const operator()`é™ï¼Œå› æ­¤æ— æ³•ä¿®æ”¹å€¼ä¼ é€’åæ„å»ºçš„æˆå‘˜ã€‚è€Œå¯¹äºå¼•ç”¨çš„ä¼ é€’æ–¹å¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜å¼•ç”¨æœ¬èº«ï¼Œè€Œåªä¼šæ”¹å˜å¼•ç”¨çš„å€¼ï¼Œå› æ­¤å°±å¯ä»¥æ”¹å˜ã€‚
  3. ä½œç”¨ï¼šmutableå…³é”®å­—å¯ä»¥ä½¿é‡è½½çš„operator()å‡½æ•°ä¸¢å¼ƒå‡½æ•°å£°æ˜æœ«å°¾çš„consté™å®šç¬¦ï¼Œä»è€Œä¿®æ”¹ä¼ é€’è¿›æ¥çš„æ‹·è´ã€‚
  
  #### `noexcept/throw()`
@@@ -2194,7 -2194,7 +2255,7 @@@
  
  #### `return_type`
  
--å½“è¿”å›å€¼ä¸º `void`ï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„`return`ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚
++å½“è¿”å›å€¼ä¸º `void`ï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„ `return`ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚
  
  ### å…¶å®ƒ
  
@@@ -2208,13 -2208,13 +2269,13 @@@
  
  ## ä»¿å‡½æ•°
  
--## `std::function`ä¸`std::bind`
++## `std::function`ä¸ `std::bind`
  
--C++ä¸­**å¯è°ƒç”¨å¯¹è±¡**çš„è™½ç„¶éƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒç»Ÿä¸€çš„æ“ä½œå½¢å¼ï¼Œä½†æ˜¯å®šä¹‰æ–¹æ³•äº”èŠ±å…«é—¨ï¼Œè¿™æ ·å°±å¯¼è‡´ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼ä¿å­˜å¯è°ƒç”¨å¯¹è±¡æˆ–è€…ä¼ é€’å¯è°ƒç”¨å¯¹è±¡æ—¶ï¼Œä¼šååˆ†ç¹çã€‚C++11ä¸­æä¾›äº†`std::function`å’Œ`std::bind`ç»Ÿä¸€äº†å¯è°ƒç”¨å¯¹è±¡çš„å„ç§æ“ä½œã€‚
++C++ä¸­**å¯è°ƒç”¨å¯¹è±¡**çš„è™½ç„¶éƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒç»Ÿä¸€çš„æ“ä½œå½¢å¼ï¼Œä½†æ˜¯å®šä¹‰æ–¹æ³•äº”èŠ±å…«é—¨ï¼Œè¿™æ ·å°±å¯¼è‡´ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼ä¿å­˜å¯è°ƒç”¨å¯¹è±¡æˆ–è€…ä¼ é€’å¯è°ƒç”¨å¯¹è±¡æ—¶ï¼Œä¼šååˆ†ç¹çã€‚C++11ä¸­æä¾›äº† `std::function`å’Œ `std::bind`ç»Ÿä¸€äº†å¯è°ƒç”¨å¯¹è±¡çš„å„ç§æ“ä½œã€‚
  
  ### `std::function`
  
--æ¨¡æ¿`std::function<å‡½æ•°ç±»å‹>`æ˜¯ä¸€ä¸ª**å¯è°ƒç”¨å¯¹è±¡åŒ…è£…å™¨**ï¼Œå¯ä»¥å®¹çº³**é™¤äº†ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆ**ä¹‹å¤–çš„æ‰€æœ‰å¯è°ƒç”¨å¯¹è±¡ï¼Œç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å‡½æ•°ã€å‡½æ•°å¯¹è±¡ã€å‡½æ•°æŒ‡é’ˆï¼Œå¹¶å…è®¸ä¿å­˜å’Œå»¶è¿Ÿå®ƒä»¬çš„æ‰§è¡Œï¼ˆé€‚åˆå›è°ƒå‡½æ•°ï¼‰ã€‚
++æ¨¡æ¿ `std::function<å‡½æ•°ç±»å‹>`æ˜¯ä¸€ä¸ª**å¯è°ƒç”¨å¯¹è±¡åŒ…è£…å™¨**ï¼Œå¯ä»¥å®¹çº³**é™¤äº†ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆ**ä¹‹å¤–çš„æ‰€æœ‰å¯è°ƒç”¨å¯¹è±¡ï¼Œç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å‡½æ•°ã€å‡½æ•°å¯¹è±¡ã€å‡½æ•°æŒ‡é’ˆï¼Œå¹¶å…è®¸ä¿å­˜å’Œå»¶è¿Ÿå®ƒä»¬çš„æ‰§è¡Œï¼ˆé€‚åˆå›è°ƒå‡½æ•°ï¼‰ã€‚
  
  ```c++
  int add(int a, int b){return a+b;}
@@@ -2230,7 -2230,7 +2291,7 @@@ vector<std::function<int(int ,int)>> fu
  
  ### `std::bind`
  
--`std::bind`å‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª**é€šç”¨çš„å‡½æ•°é€‚é…å™¨**ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å’Œä¸€äº›å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ï¼ˆå‚æ•°ä¸ªæ•°å’Œé¡ºåºï¼ˆé€šè¿‡å ä½ç¬¦å®ç°ï¼‰éƒ½å¯æ”¹å˜ï¼‰å¯è°ƒç”¨å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡çš„`operator()`å®ç°å®é™…çš„å‡½æ•°è°ƒç”¨ï¼‰æ¥é€‚åº”åŸå¯¹è±¡çš„å‚æ•°åˆ—è¡¨ã€‚å³å¯ä»¥æ”¹å˜å‡½æ•°çš„å‡½æ•°ç­¾åè€Œä¸å½±å“å…¶ä½œç”¨ã€‚
++`std::bind`å‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª**é€šç”¨çš„å‡½æ•°é€‚é…å™¨**ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å’Œä¸€äº›å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ï¼ˆå‚æ•°ä¸ªæ•°å’Œé¡ºåºï¼ˆé€šè¿‡å ä½ç¬¦å®ç°ï¼‰éƒ½å¯æ”¹å˜ï¼‰å¯è°ƒç”¨å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡çš„ `operator()`å®ç°å®é™…çš„å‡½æ•°è°ƒç”¨ï¼‰æ¥é€‚åº”åŸå¯¹è±¡çš„å‚æ•°åˆ—è¡¨ã€‚å³å¯ä»¥æ”¹å˜å‡½æ•°çš„å‡½æ•°ç­¾åè€Œä¸å½±å“å…¶ä½œç”¨ã€‚
  
  ```c++
  auto newCallable = std::bind(callable, arg_list);
@@@ -2240,7 -2240,7 +2301,7 @@@ std::is_bind_expression<T>::value == tr
  
  #### å‚æ•°ç»‘å®š
  
--é»˜è®¤æƒ…å†µä¸‹ï¼Œ`bind`çš„**å‚æ•°é‡‡ç”¨å€¼æ‹·è´**çš„æ–¹å¼è¿›å…¥å¯è°ƒç”¨å¯¹è±¡ï¼Œè‹¥å¸Œæœ›ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼ˆæ•°æ®ä¸å…è®¸æ‹·è´ç­‰æƒ…å†µï¼‰ï¼Œåˆ™éœ€å€ŸåŠ©`std::ref()ã€std::cfref()`ä¼ é€’å‚æ•°ã€‚å¯¹äºå½“å‰ä¸èƒ½ç¡®å®šä¸‹æ¥çš„å‚æ•°ï¼Œæ ‡å‡†åº“æ”¯æŒå ä½ç¬¦å®ç°å‚æ•°çš„è°ƒç”¨æ—¶ä¼ é€’ï¼ˆå ä½ç¬¦`_1ã€_2ã€...`ç­‰ä½äºå¤´æ–‡ä»¶`functional`çš„`std::placeholders`å‘½åç©ºé—´ä¸‹ï¼‰ã€‚
++é»˜è®¤æƒ…å†µä¸‹ï¼Œ`bind`çš„**å‚æ•°é‡‡ç”¨å€¼æ‹·è´**çš„æ–¹å¼è¿›å…¥å¯è°ƒç”¨å¯¹è±¡ï¼Œè‹¥å¸Œæœ›ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼ˆæ•°æ®ä¸å…è®¸æ‹·è´ç­‰æƒ…å†µï¼‰ï¼Œåˆ™éœ€å€ŸåŠ© `std::ref()ã€std::cfref()`ä¼ é€’å‚æ•°ã€‚å¯¹äºå½“å‰ä¸èƒ½ç¡®å®šä¸‹æ¥çš„å‚æ•°ï¼Œæ ‡å‡†åº“æ”¯æŒå ä½ç¬¦å®ç°å‚æ•°çš„è°ƒç”¨æ—¶ä¼ é€’ï¼ˆå ä½ç¬¦ `_1ã€_2ã€...`ç­‰ä½äºå¤´æ–‡ä»¶ `functional`çš„ `std::placeholders`å‘½åç©ºé—´ä¸‹ï¼‰ã€‚
  
  ```c++
  double my_divide (double x, double y) {return x/y;}
@@@ -2316,7 -2316,7 +2377,7 @@@ template <typename T1, typename T2> std
  
  ###### å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹
  
--`std::remove_reference<>`å¯ä»¥å°†å¼•ç”¨ç±»å‹å˜ä¸ºå€¼ç±»å‹ã€ä¹Ÿå¯ä»¥åˆ©ç”¨`auto`æ¨å¯¼è§„åˆ™ä¸­ä¸¢å¤±å¼•ç”¨çš„ç‰¹æ€§è¿”å›å€¼ç±»å‹ã€‚
++`std::remove_reference<>`å¯ä»¥å°†å¼•ç”¨ç±»å‹å˜ä¸ºå€¼ç±»å‹ã€ä¹Ÿå¯ä»¥åˆ©ç”¨ `auto`æ¨å¯¼è§„åˆ™ä¸­ä¸¢å¤±å¼•ç”¨çš„ç‰¹æ€§è¿”å›å€¼ç±»å‹ã€‚
  
  ```c++
  template<typename T> T retV(T p) { return T{...};} /// retV<int&>(x)å°†æ— æ³•è¿”å›å€¼ç±»å‹
@@@ -2341,7 -2341,7 +2402,7 @@@ const int* q
  f(expr); // iï¼šæ¨¡æ¿å®å‚ï¼Œint
  ```
  
--##### æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³`T`ï¼‰
++##### æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³ `T`ï¼‰
  
  ```c++
  template<typename T> void f(T param);///æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹
@@@ -2356,11 -2356,11 +2417,10 @@@ f(q); // Tå’Œxéƒ½æ˜¯const int
  
  ###### æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰
  
--å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºéæŒ‡é’ˆæ—¶ä¼šé€ æˆæ¨æ–­å‡ºçš„æ¨¡æ¿å‚æ•°**è¡°å‡(decaying)**ï¼ˆæ¨¡æ¿å®å‚ä¸æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ä¸åŒï¼šå¦‚æ•°ç»„å’Œå‡½æ•°ç±»å‹é€€åŒ–ä¸ºæ™®é€šæŒ‡é’ˆã€**ä¸¢å¤±`const`å’Œ`volatile`å±æ€§ã€ä¸¢å¤±å¼•ç”¨ç±»å‹**ï¼‰ã€‚ä¸ºäº†ç¼“è§£æ¨¡æ¿å‚æ•°ä¼ é€’çš„è¡°å‡ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š
--
--* [**ä½¿ç”¨`std::ref()`å’Œ`std::cref()`**]()å‘åŸæœ¬ä»¥å€¼æ–¹å¼æ¥å—å‚æ•°çš„æ¨¡æ¿å‡½æ•°å®ç°ä¼ é€’å¼•ç”¨çš„æ•ˆæœã€‚
++å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºéæŒ‡é’ˆæ—¶ä¼šé€ æˆæ¨æ–­å‡ºçš„æ¨¡æ¿å‚æ•°**è¡°å‡(decaying)**ï¼ˆæ¨¡æ¿å®å‚ä¸æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ä¸åŒï¼šå¦‚æ•°ç»„å’Œå‡½æ•°ç±»å‹é€€åŒ–ä¸ºæ™®é€šæŒ‡é’ˆã€**ä¸¢å¤± `const`å’Œ `volatile`å±æ€§ã€ä¸¢å¤±å¼•ç”¨ç±»å‹**ï¼‰ã€‚ä¸ºäº†ç¼“è§£æ¨¡æ¿å‚æ•°ä¼ é€’çš„è¡°å‡ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š
  
--* ä½¿ç”¨`enable_if`åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„ï¼šä¸ç¬¦åˆ`enable_if`è®¾ç½®çš„æ¡ä»¶çš„å®ä¾‹åŒ–è¯·æ±‚ä¸ä¼šè¢«æ‰§è¡Œ:
++* [**ä½¿ç”¨ `std::ref()`å’Œ `std::cref()`**]()å‘åŸæœ¬ä»¥å€¼æ–¹å¼æ¥å—å‚æ•°çš„æ¨¡æ¿å‡½æ•°å®ç°ä¼ é€’å¼•ç”¨çš„æ•ˆæœã€‚
++* ä½¿ç”¨ `enable_if`åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„ï¼šä¸ç¬¦åˆ `enable_if`è®¾ç½®çš„æ¡ä»¶çš„å®ä¾‹åŒ–è¯·æ±‚ä¸ä¼šè¢«æ‰§è¡Œ:
  
  ```c++
  template<class T, typename = std::enable_if_t<std::is_array<T>::value> > void destroy(T* t) {
@@@ -2372,9 -2372,9 +2432,9 @@@
  
  å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºæŒ‡é’ˆæ—¶æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°å’Œæ¨¡æ¿å‡½æ•°å€¼ç±»å‹å°†ä¿ç•™è¡¨è¾¾å¼ä¸­çš„cvé™å®šç¬¦å’ŒæŒ‡é’ˆç±»å‹ã€‚
  
--##### æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³`T&ã€T&&`æˆ–`T*`ï¼‰
++##### æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³ `T&ã€T&&`æˆ– `T*`ï¼‰
  
--æ¨å¯¼å‡ºçš„**æ¨¡æ¿å‚æ•°å€¼ç±»å‹å°†**ä¸€å®šä¿ç•™è¡¨è¾¾å¼ä¸­çš„`cv`é™å®šç¬¦ã€‚å¯¹äº`T*`ä¿ç•™æŒ‡é’ˆï¼›å¯¹äº`T&`ï¼Œå¦‚æœ**è¡¨è¾¾å¼æœ¬èº«å’Œå½¢å‚ä¸­å«æœ‰ä»»æ„ä¸ªå³å€¼å¼•ç”¨ä¼šæ¶‰åŠåˆ°å¼•ç”¨æŠ˜å **ï¼Œå¦åˆ™ä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ç±»å‹ã€‚
++æ¨å¯¼å‡ºçš„**æ¨¡æ¿å‚æ•°å€¼ç±»å‹å°†**ä¸€å®šä¿ç•™è¡¨è¾¾å¼ä¸­çš„ `cv`é™å®šç¬¦ã€‚å¯¹äº `T*`ä¿ç•™æŒ‡é’ˆï¼›å¯¹äº `T&`ï¼Œå¦‚æœ**è¡¨è¾¾å¼æœ¬èº«å’Œå½¢å‚ä¸­å«æœ‰ä»»æ„ä¸ªå³å€¼å¼•ç”¨ä¼šæ¶‰åŠåˆ°å¼•ç”¨æŠ˜å **ï¼Œå¦åˆ™ä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ç±»å‹ã€‚
  
  ```c++
  int i, &r, &&rr, *p;
@@@ -2412,8 -2412,8 +2472,8 @@@ f2(q); // xæ˜¯const int* => T*æ˜¯const 
  
  #### æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–
  
--|          |                 æ¨¡æ¿                 |                      å‡½æ•°é‡è½½                      |
--| :------: | :----------------------------------: | :------------------------------------------------: |
++|                |                 æ¨¡æ¿                 |                      å‡½æ•°é‡è½½                      |
++| :------------: | :----------------------------------: | :------------------------------------------------: |
  | **å¤ç”¨** | å®šä¹‰åŠŸèƒ½ç›¸ä¼¼çš„åŒåå‡½æ•°ï¼ˆå‡½æ•°åå¤ç”¨ï¼‰ | å®ç°é€»è¾‘ä¸€æ ·åªæ˜¯å‚æ•°ç±»å‹ä¸åŒçš„ä¸€ç±»å‡½æ•°ï¼ˆé€»è¾‘å¤ç”¨ï¼‰ |
  | **ç›®çš„** |           æé«˜å‡½æ•°çš„æ˜“ç”¨æ€§           |                 æé«˜å‡½æ•°ç¼–å†™çš„æ•ˆç‡                 |
  
@@@ -2470,7 -2470,7 +2530,7 @@@ f(1, 1.0);///f<int, float>()->f<int, in
  
  ### å®šä¹‰
  
--é€šå¸¸ç±»æ¨¡æ¿åªèƒ½å®šä¹‰åœ¨`global/namespace `ä½œç”¨åŸŸï¼Œæˆ–è€…æ˜¯å…¶å®ƒç±»çš„å£°æ˜é‡Œé¢ï¼Œä¸å¯ä»¥å°†ç±»æ¨¡æ¿å£°æ˜æˆ–å®šä¹‰åœ¨å‡½æ•°æˆ–è€…å—ä½œç”¨åŸŸå†…ã€‚åœ¨æ¨¡æ¿ç±»ä½¿ç”¨è¯¥ç±»çš„æ¨¡æ¿å‡½æ•°å’Œæ™®é€šå‡½æ•°ä¸éœ€è¦å¸¦æ¨¡æ¿å‚æ•°ã€‚
++é€šå¸¸ç±»æ¨¡æ¿åªèƒ½å®šä¹‰åœ¨ `global/namespace `ä½œç”¨åŸŸï¼Œæˆ–è€…æ˜¯å…¶å®ƒç±»çš„å£°æ˜é‡Œé¢ï¼Œä¸å¯ä»¥å°†ç±»æ¨¡æ¿å£°æ˜æˆ–å®šä¹‰åœ¨å‡½æ•°æˆ–è€…å—ä½œç”¨åŸŸå†…ã€‚åœ¨æ¨¡æ¿ç±»ä½¿ç”¨è¯¥ç±»çš„æ¨¡æ¿å‡½æ•°å’Œæ™®é€šå‡½æ•°ä¸éœ€è¦å¸¦æ¨¡æ¿å‚æ•°ã€‚
  
  ### å®ä¾‹åŒ–
  
@@@ -2562,7 -2562,7 +2622,7 @@@ addValue<5, int>(3);///å®ä¾‹åŒ–å’Œä½¿ç
  
  ### æ¨¡æ¿ç±»[`enable_if<>/ enable_if_t<>`](https://zh.cppreference.com/w/cpp/types/enable_if)
  
--åŸºäº`C++11 SFINAE`ç‰¹æ€§ï¼Œæ¨¡æ¿ç±»`enable_if<exprssion, T>`åªæœ‰åœ¨æ¨¡æ¿å‚æ•°`expression`ä¸ºçœŸæ—¶æ‰ä¼šç»è¿‡å‚æ•°æ¨å¯¼æœºåˆ¶è¿›å…¥åç‰¹åŒ–çš„æ¨¡æ¿ç±»`enable_if<true, T>`ä¸­ï¼ˆè¯¥ç±»ä¸­æ‹¥æœ‰å…¬å¼€æˆå‘˜`typedef T type`ï¼‰ï¼Œä½¿ç”¨`typename enable_if<true,T>::type`å¯ä»¥è·å¾—**ç±»å‹**`T`ï¼Œ`enable_if_t<expression, T>`å¯ä»¥ç›´æ¥è¿”å›`type`ï¼Œä»¥ä¸‹æ˜¯`enable_if`çš„ç®€å•å®ç°ã€‚
++åŸºäº `C++11 SFINAE`ç‰¹æ€§ï¼Œæ¨¡æ¿ç±» `enable_if<exprssion, T>`åªæœ‰åœ¨æ¨¡æ¿å‚æ•° `expression`ä¸ºçœŸæ—¶æ‰ä¼šç»è¿‡å‚æ•°æ¨å¯¼æœºåˆ¶è¿›å…¥åç‰¹åŒ–çš„æ¨¡æ¿ç±» `enable_if<true, T>`ä¸­ï¼ˆè¯¥ç±»ä¸­æ‹¥æœ‰å…¬å¼€æˆå‘˜ `typedef T type`ï¼‰ï¼Œä½¿ç”¨ `typename enable_if<true,T>::type`å¯ä»¥è·å¾—**ç±»å‹** `T`ï¼Œ`enable_if_t<expression, T>`å¯ä»¥ç›´æ¥è¿”å› `type`ï¼Œä»¥ä¸‹æ˜¯ `enable_if`çš„ç®€å•å®ç°ã€‚
  
  ```c++
  template< bool B, class T = void > using enable_if_t = typename enable_if<B, T>::type;
@@@ -2572,9 -2572,9 +2632,9 @@@ template<bool Cond, class T = void> str
  template<class T> struct enable_if<true, T> { typedef T type; };
  ```
  
--### [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](# æ¨¡æ¿ç±»`enable_if`)
++### [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](# æ¨¡æ¿ç±» `enable_if`)
  
--ä¸€èˆ¬å°†æ¨¡æ¿ç±»`enable_if<>`ä¸`is_integral<T>ã€is_trivial<T>ã€is_void<>ã€is_pointer<>ã€...`ç­‰ç”¨äº[**ç±»å‹èƒå–**](http://www.cplusplus.com/reference/type_traits/)çš„æ¨¡æ¿ç±»ä¸­çš„`::value`æˆå‘˜ç»“åˆä½¿ç”¨ï¼Œä»¥æ­¤ç”¨æ¥æ ¹æ®æ¨¡æ¿å‚æ•°æ§åˆ¶æ¨¡æ¿å®ä¾‹åŒ–å’Œç¼–è¯‘çš„è¿‡ç¨‹ã€‚
++ä¸€èˆ¬å°†æ¨¡æ¿ç±» `enable_if<>`ä¸ `is_integral<T>ã€is_trivial<T>ã€is_void<>ã€is_pointer<>ã€...`ç­‰ç”¨äº[**ç±»å‹èƒå–**](http://www.cplusplus.com/reference/type_traits/)çš„æ¨¡æ¿ç±»ä¸­çš„ `::value`æˆå‘˜ç»“åˆä½¿ç”¨ï¼Œä»¥æ­¤ç”¨æ¥æ ¹æ®æ¨¡æ¿å‚æ•°æ§åˆ¶æ¨¡æ¿å®ä¾‹åŒ–å’Œç¼–è¯‘çš„è¿‡ç¨‹ã€‚
  
  [ç”¨æ³•ä¸€ï¼šç±»å‹åç‰¹åŒ–](# ç±»å‹åç‰¹åŒ–)ã€[ç”¨æ³•äºŒï¼šæ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](# æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)ã€[ç”¨æ³•ä¸‰ï¼šæ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](# æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)
  
@@@ -2588,11 -2588,11 +2648,11 @@@
  
  ç”±äºC++çš„ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶ï¼Œæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸èƒ½åˆ†åˆ«æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­è¿›è¡Œç¼–è¯‘ã€‚ç”±äºè°ƒç”¨æ¨¡æ¿å‡½æ•°çš„æ–‡ä»¶éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µæ ¹æ®å‡½æ•°çš„å®šä¹‰å®ä¾‹åŒ–æ¨¡æ¿ï¼Œä½†ç”±äºä¸Šé¢ä¸¤ä¸ªcppæ–‡ä»¶éƒ½æ˜¯**å•ç‹¬çš„ç¼–è¯‘å•å…ƒæ–‡ä»¶**ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ç¼–è¯‘æ— æ³•å®ä¾‹åŒ–æ¨¡æ¿å‡½æ•°ï¼Œè€Œåªèƒ½å°†å¯»æ‰¾æ¨¡æ¿å‡½æ•°å®ä¾‹çš„ç¬¦å·çš„ä»»åŠ¡äº¤ç»™é“¾æ¥å™¨ã€‚è€Œç¼–è¯‘æ¨¡æ¿å‡½æ•°æ–‡ä»¶æ—¶æ²¡æœ‰æ¨¡æ¿çš„è°ƒç”¨ä¹Ÿå°±æ— æ³•å®ä¾‹åŒ–äº§ç”Ÿæœ‰ç”¨çš„ç¬¦å·ä¾›é“¾æ¥å™¨ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨é“¾æ¥é˜¶æ®µå°±ä¼šå‡ºé”™ã€‚
  
--æ‰€ä»¥æŠŠæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨ä¸€èµ·æ„æˆ`hpp`æ–‡ä»¶ï¼ˆå¦‚STLï¼‰ï¼Œæˆ–è€…åœ¨æ¨¡æ¿çš„å®šä¹‰æ–‡ä»¶ä¸­åŠ å…¥æ‰€æœ‰å¯èƒ½çš„æ¨¡æ¿å‡½æ•°è°ƒç”¨ï¼ˆå‚»é›•å†™æ³•ï¼‰ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥åˆ©ç”¨`export`å…³é”®å­—
++æ‰€ä»¥æŠŠæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨ä¸€èµ·æ„æˆ `hpp`æ–‡ä»¶ï¼ˆå¦‚STLï¼‰ï¼Œæˆ–è€…åœ¨æ¨¡æ¿çš„å®šä¹‰æ–‡ä»¶ä¸­åŠ å…¥æ‰€æœ‰å¯èƒ½çš„æ¨¡æ¿å‡½æ•°è°ƒç”¨ï¼ˆå‚»é›•å†™æ³•ï¼‰ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥åˆ©ç”¨ `export`å…³é”®å­—
  
  #### `export`ï¼ˆC++11å‰ï¼‰
  
--ä¸ºäº†è®¿é—®å…¶ä»–ç¼–è¯‘å•å…ƒï¼ˆå¦‚å¦ä¸€ä»£ç æ–‡ä»¶ï¼‰ä¸­çš„å˜é‡æˆ–å¯¹è±¡ï¼Œå¯¹æ™®é€šç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»ã€ç»“æ„å’Œç±»ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å…³é”®å­—`extern`æ¥ä½¿ç”¨è¿™äº›å˜é‡æˆ–å¯¹è±¡æ—¶ï¼›ä½†æ˜¯å¯¹æ¨¡æ¿ç±»å‹ï¼Œåˆ™å¿…é¡»åœ¨å®šä¹‰è¿™äº›æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ ‡å‡†C++æ–°å¢åŠ çš„å…³é”®å­—`export`ï¼šåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜æ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½ï¼Œåœ¨ä»£ç æ–‡ä»¶ä¸­ä½¿ç”¨å…³é”®å­—`export`æ¥å®šä¹‰å…·ä½“çš„æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°ï¼Œç„¶ååœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ï¼ŒåŒ…å«å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥è¿™äº›å¯¹è±¡å’Œå‡½æ•°äº†ã€‚
++ä¸ºäº†è®¿é—®å…¶ä»–ç¼–è¯‘å•å…ƒï¼ˆå¦‚å¦ä¸€ä»£ç æ–‡ä»¶ï¼‰ä¸­çš„å˜é‡æˆ–å¯¹è±¡ï¼Œå¯¹æ™®é€šç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»ã€ç»“æ„å’Œç±»ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å…³é”®å­— `extern`æ¥ä½¿ç”¨è¿™äº›å˜é‡æˆ–å¯¹è±¡æ—¶ï¼›ä½†æ˜¯å¯¹æ¨¡æ¿ç±»å‹ï¼Œåˆ™å¿…é¡»åœ¨å®šä¹‰è¿™äº›æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ ‡å‡†C++æ–°å¢åŠ çš„å…³é”®å­— `export`ï¼šåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜æ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½ï¼Œåœ¨ä»£ç æ–‡ä»¶ä¸­ä½¿ç”¨å…³é”®å­— `export`æ¥å®šä¹‰å…·ä½“çš„æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°ï¼Œç„¶ååœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ï¼ŒåŒ…å«å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥è¿™äº›å¯¹è±¡å’Œå‡½æ•°äº†ã€‚
  
  ```c++
  // out.h:ï¼ˆå£°æ˜å¤´æ–‡ä»¶â€”â€”åªåŒ…å«outå‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼‰
@@@ -2606,11 -2606,11 +2666,11 @@@ export template<class T> void out (cons
  #include â€œout.hâ€
  ```
  
--## `typename`ä¸`class`
++## `typename`ä¸ `class`
  
--æœ€åˆå®šä¹‰æ¨¡æ¿æ—¶ä½¿ç”¨çš„æ˜¯`class`ï¼Œåæ¥ä¸ºäº†é¿å…`class`åœ¨å¸¦æ¥æ··æ·†ï¼Œæ‰€ä»¥å¼•å…¥`typename`å…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨åŒ`class`ä¸€æ ·è¡¨æ˜åé¢çš„ç¬¦å·ä¸ºä¸€ä¸ªç±»å‹ï¼Œåœ¨æ¨¡æ¿å®šä¹‰è¯­æ³•ä¸­å…³é”®å­—`class`ä¸`typename`çš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚
++æœ€åˆå®šä¹‰æ¨¡æ¿æ—¶ä½¿ç”¨çš„æ˜¯ `class`ï¼Œåæ¥ä¸ºäº†é¿å… `class`åœ¨å¸¦æ¥æ··æ·†ï¼Œæ‰€ä»¥å¼•å…¥ `typename`å…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨åŒ `class`ä¸€æ ·è¡¨æ˜åé¢çš„ç¬¦å·ä¸ºä¸€ä¸ªç±»å‹ï¼Œåœ¨æ¨¡æ¿å®šä¹‰è¯­æ³•ä¸­å…³é”®å­— `class`ä¸ `typename`çš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚
  
--`typename`å¦å¤–ä¸€ä¸ªä½œç”¨ä¸ºä½¿ç”¨**åµŒå¥—ä¾èµ–ç±»å‹**ï¼Œé€šçŸ¥ç¼–è¯‘å™¨`typename`åé¢çš„å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å‡½æ•°æˆ–è€…æˆå‘˜å˜é‡ã€‚
++`typename`å¦å¤–ä¸€ä¸ªä½œç”¨ä¸ºä½¿ç”¨**åµŒå¥—ä¾èµ–ç±»å‹**ï¼Œé€šçŸ¥ç¼–è¯‘å™¨ `typename`åé¢çš„å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å‡½æ•°æˆ–è€…æˆå‘˜å˜é‡ã€‚
  
  ```c++
  struct MyArray{
@@@ -2634,7 -2634,7 +2694,6 @@@ template<class T> void MyMethod(T myarr
  ### ç‰¹æ®Šæƒé™æ§åˆ¶
  
  + æ¦‚è¿°ï¼šä¸ºäº†æ»¡è¶³æŸäº›ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯èƒ½å¯¹The Big Threeç­‰ç‰¹æ®Šçš„åŸºç¡€å‡½æ•°çš„æƒé™åŠ ä»¥çº¦æŸ(protectæˆ–è€…private)ï¼Œæ­¤æ—¶ç¨‹åºä¸­å¯¹è¿™äº›å‡½æ•°çš„æ˜¾å¼æˆ–éšå¼è°ƒç”¨å°†ä¼šè¢«ç¼–è¯‘å™¨é˜»æ­¢ã€‚è€Œå¯¹è¿™äº›å‡½æ•°çš„è®¿é—®æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œä¸ºäº†è®¿é—®è¿™äº›å‡½æ•°å®Œæˆå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå¿…é¡»å€Ÿç”¨ç±»çš„å†…éƒ¨æˆå‘˜é—´æ¥è°ƒç”¨è¿™äº›å‡½æ•°å¹¶è¿”å›ä¿¡æ¯ã€‚
--
  + è®¿é—®æ–¹æ³•
  
  1. å€ŸåŠ©ç±»çš„staticæˆå‘˜(å‡½æ•°æˆ–è€…æ•°æ®æˆå‘˜)å±äºç±»ä½†å´ç‹¬ç«‹äºç±»å­˜åœ¨çš„ç‰¹æ€§ï¼Œåˆ©ç”¨å…¬æœ‰çš„staticæˆå‘˜é—´æ¥è°ƒç”¨
@@@ -2645,7 -2645,7 +2704,6 @@@
  ##### å½±å“
  
  1. ç¦æ­¢è¯¥ç±»è¢«ç»§æ‰¿ï¼šåˆ©ç”¨å­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»é¦–å…ˆè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™ç§å¤–éƒ¨è°ƒç”¨è¦æ±‚åŸºç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ˜¯**publicæˆ–è€…protect**çš„è®¿é—®æ§åˆ¶æƒé™
--
  2. åœ¨é—´æ¥è°ƒç”¨æ„é€ å‡½æ•°è¿”å›å¯¹è±¡æ—¶ä¸èƒ½ä½¿ç”¨å€¼ä¼ é€’(éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸´æ—¶å¯¹è±¡)ï¼Œæ‰€ä»¥**åªèƒ½ä»¥æŒ‡é’ˆæˆ–è€…å¼•ç”¨**çš„æ–¹å¼è¿”å›å¯¹è±¡å’Œä¼ é€’å‚æ•°ï¼Œæ­¤æ—¶çš„å¯¹è±¡**æ—¢å¯ä»¥åˆ›å»ºåœ¨å †ä¸Šä¹Ÿå¯ä»¥åœ¨æ ˆä¸Š**ã€‚
  
  #### æ„é€ å‡½æ•°protectåŒ–
@@@ -2720,15 -2720,15 +2778,15 @@@ class Info
  1. ä¸èƒ½åœ¨å§”æ‰˜æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–å…¶ä»–æ•°æ®æˆå‘˜ï¼Œå³**ä¸èƒ½åŒæ—¶ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å’Œå§”æ‰˜æ„é€ å‡½æ•°**
  2. **å§”æ‰˜æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­çš„æ“ä½œåœ¨æœ€åæ‰§è¡Œ**
  3. è¯¥æœºåˆ¶ä¸‹å¯èƒ½æ„æˆå§”æ‰˜é“¾æˆ–è€…å§”æ‰˜ç¯ï¼Œç¼–è¯‘å™¨ä¸èƒ½æ£€æŸ¥å§”æ‰˜ç¯çš„å‡ºç°ï¼ˆä¼šå¯¼è‡´é€’å½’æ ˆçˆ†æ ˆï¼‰
--4. ç›®æ ‡/è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°å¯ä»¥æ˜¯`private`çš„æ„é€ å‡½æ•°
++4. ç›®æ ‡/è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°å¯ä»¥æ˜¯ `private`çš„æ„é€ å‡½æ•°
  
  ##### ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°
  
--C++ä¸æ”¯æŒåœ¨æ„é€ å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶å¯¹è±¡ï¼Œè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°å®Œæˆäº†åŒ¿åä¸´æ—¶å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸ä¼šåæ˜ åˆ°å½“å‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´å†…ï¼Œç›¸å½“äºåšäº†æ— ç”¨åŠŸã€‚**è¦æƒ³å¤ç”¨å…¶ä»–æ„é€ å‡½æ•°å¯ä»¥é‡‡ç”¨å§”æ‰˜æ„é€ å‡½æ•°æˆ–è€…`placement new`æ–¹æ³•**ã€‚
++C++ä¸æ”¯æŒåœ¨æ„é€ å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶å¯¹è±¡ï¼Œè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°å®Œæˆäº†åŒ¿åä¸´æ—¶å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸ä¼šåæ˜ åˆ°å½“å‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´å†…ï¼Œç›¸å½“äºåšäº†æ— ç”¨åŠŸã€‚**è¦æƒ³å¤ç”¨å…¶ä»–æ„é€ å‡½æ•°å¯ä»¥é‡‡ç”¨å§”æ‰˜æ„é€ å‡½æ•°æˆ–è€… `placement new`æ–¹æ³•**ã€‚
  
  #### å¼‚å¸¸å¤„ç†
  
--å¦‚æœåœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­ä½¿ç”¨`try`çš„è¯ï¼Œé‚£ä¹ˆä»ç›®æ ‡æ„é€ å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œéƒ½å¯ä»¥åœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­è¢«æ•æ‰åˆ°ã€‚
++å¦‚æœåœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ `try`çš„è¯ï¼Œé‚£ä¹ˆä»ç›®æ ‡æ„é€ å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œéƒ½å¯ä»¥åœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­è¢«æ•æ‰åˆ°ã€‚
  
  ```cpp
  class DCExcept {
@@@ -2772,38 -2772,38 +2830,33 @@@ Aborted*
  
  #### ç”Ÿæˆå†…å®¹
  
--+ 4(æ„é€ å‡½æ•°ã€[æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°/è¿ç®—ç¬¦ã€ææ„å‡½æ•°](#The Big Three)) + 2(c++11æ–°å¢ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°)ï¼Œä¸€å…±6ä¸ª`public`çš„`inline`å‡½æ•°
+++ 4(æ„é€ å‡½æ•°ã€[æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°/è¿ç®—ç¬¦ã€ææ„å‡½æ•°](#The Big Three)) + 2(c++11æ–°å¢ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°)ï¼Œä¸€å…±6ä¸ª `public`çš„ `inline`å‡½æ•°
  
  #### ç”Ÿæˆè§„åˆ™
  
  + åªæœ‰åœ¨è¢«éœ€è¦ä¸”ç”¨æˆ·æœªæä¾›è‡ªå®šä¹‰ç‰ˆæœ¬çš„æ—¶å€™æ‰ä¼šç”Ÿæˆï¼Œä¾‹å¦‚C++ä¸ä¼šä¸ºä¸€ä¸ªæœªä½¿ç”¨çš„ç©ºç±»ç”Ÿæˆæ„é€ å‡½æ•°
  
  1. é»˜è®¤æ„é€ å‡½æ•°ï¼šåªåœ¨ç”¨æˆ·æ²¡æœ‰å®šä¹‰å…¶å®ƒä»»ä½•ç±»å‹çš„æ„é€ å‡½æ•°æ—¶æ‰ä¼šç”Ÿæˆï¼Œæ¦‚æ‹¬æ¥è®²æœ‰å››ç§æƒ…å†µ[å‚è€ƒæ¥æº](https://cloud.tencent.com/developer/article/1036240)ï¼š
++
     1. Bç±»å«A**ç±»æˆå‘˜å¯¹è±¡ï¼Œä¸”è¯¥ç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°**ï¼šå› ä¸ºæ­¤æ—¶ ç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“Aç±»é»˜è®¤æ„é€ å‡½æ•°åšäº†ä»€ä¹ˆï¼Œå‡ºäºæ¶ˆé™¤Aç±»çš„ä¸å½“æ“ä½œçš„åŸå› ï¼Œç¼–è¯‘å™¨å°†ä¸ºBç±»ç”Ÿæˆæ„é€ å‡½æ•°
     2. ç±»çš„**åŸºç±»æä¾›äº†é»˜è®¤çš„æ„é€ å‡½æ•°**ã€‚
     3. ç±»å†…å®šä¹‰äº†**è™šå‡½æ•°**
     4. ç±»ä½¿ç”¨äº†**è™šç»§æ‰¿**
--
  2. æ‹·è´æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
--
  3. æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
--
  4. ææ„å‡½æ•°ï¼šç”¨æˆ·æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°
--
  5. ç§»åŠ¨æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
--
  6. ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
  
  #### å‡½æ•°ç”Ÿæˆç®¡ç†
  
  ##### ä½¿ç”¨ç¼ºçœå‡½æ•°=default
  
--åœ¨é»˜è®¤å‡½æ•°å®šä¹‰æˆ–å£°æ˜æ—¶åŠ ä¸Š`=default`ï¼Œæ¥è®©ç¼–è¯‘å™¨ç”Ÿæˆè¯¥å‡½æ•°çš„é»˜è®¤ç‰ˆæœ¬ã€‚
++åœ¨é»˜è®¤å‡½æ•°å®šä¹‰æˆ–å£°æ˜æ—¶åŠ ä¸Š `=default`ï¼Œæ¥è®©ç¼–è¯‘å™¨ç”Ÿæˆè¯¥å‡½æ•°çš„é»˜è®¤ç‰ˆæœ¬ã€‚
  
  ##### ç¦æ­¢å‡½æ•°=delete
  
  + åœ¨C++98ä¸­ï¼Œå¯ä»¥æŠŠè¯¥å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œä¸å®šä¹‰ï¼Œè¿™æ ·ï¼Œå¦‚æœæœ‰äººè°ƒç”¨å°±ä¼šæŠ¥é”™ã€‚
--
  + åœ¨c++11ä¸­ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è¢«ç¦æ­¢(åŒ…æ‹¬éæˆå‘˜å‡½æ•°ã€æ¨¡æ¿å‡½æ•°çš„å…·åŒ–å®ç°ã€é»˜è®¤ç”Ÿæˆçš„æˆå‘˜å‡½æ•°)
  
  ```cpp
@@@ -2826,13 -2826,13 +2879,23 @@@
  
  ç”±äº**`const` æˆå‘˜**æˆ–**å¼•ç”¨ç±»å‹**çš„æˆå‘˜åªæœ‰ä¸€æ¬¡èµ‹å€¼çš„æœºä¼šï¼Œæ‰€ä»¥ä»–ä»¬å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œåˆå§‹åŒ–ã€‚
  
++#### [é»˜è®¤æ„é€ å‡½æ•°](https://blog.csdn.net/hankai1024/article/details/7947989)
++
++##### å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆtrivial constructorï¼‰
++
++å½“ç”¨æˆ·å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ°å®šä¹‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ï¼Œ**å‡ºäºä¿è¯ç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¿è¡Œçš„éœ€æ±‚**ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ— å…³ç´§è¦ï¼ˆtrivialï¼‰çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œ**è¯¥å‡½æ•°æ—¢ä¸ä¼šè®²å…¶æˆå‘˜å˜é‡ç½®é›¶ï¼Œä¹Ÿä¸ä¼šåšå…¶ä»–çš„ä»»ä½•äº‹æƒ…**ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ã€‚
++
++##### éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆnon-trivial constructorï¼‰
++
++è¯¥ç±»æ„é€ å‡½æ•°æ˜¯ç±»å®ç°æ‰€å¿…é¡»çš„ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å®ƒä»¬ä¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚
++
  ### è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½
  
--åç¼€å½¢å¼çš„è‡ªå¢/å‡é‡è½½æ¥å—ä¸€ä¸ªæ— ç”¨çš„`int` å½¢å‚æ¥ä¸å‰ç¼€å½¢å¼åŒºåˆ†
++åç¼€å½¢å¼çš„è‡ªå¢/å‡é‡è½½æ¥å—ä¸€ä¸ªæ— ç”¨çš„ `int` å½¢å‚æ¥ä¸å‰ç¼€å½¢å¼åŒºåˆ†
  
  ### [`inline`å‡½æ•°](https://www.cnblogs.com/fnlingnzb-learner/p/6423917.html)
  
--æ™®é€šçš„`inline`å‡½æ•°æ²¡æœ‰å‡½æ•°åœ°å€ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å°†ä»£ç å±•å¼€æ›¿æ¢ã€‚åœ¨ç±»ä¸­å£°æ˜å¹¶å®šä¹‰çš„æ‰€æœ‰å‡½æ•°é»˜è®¤éƒ½æ˜¯å†…è”å‡½æ•°ï¼Œä½†å’Œ`rigister`å…³é”®å­—ä¸€æ ·ï¼Œ`inline`å¯¹äºç¼–è¯‘å™¨æ¥è¯´åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå¹¶ä¸å¼ºåˆ¶è¦æ±‚å°†å…¶åšå†…æ•›å±•å¼€ï¼Œäº‹å®ä¸Šï¼Œ**ç¼–è¯‘å™¨ä¼šæ‹’ç»å°†å¤æ‚çš„å‡½æ•°ä»¥åŠè™šå‡½æ•°è¿›è¡Œå†…è”å±•å¼€**ï¼Œæ‰€ä»¥`inline`å’Œ`virtual`å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šå¿½ç•¥`inline`è€Œä¿ç•™`virtual`ã€‚
++æ™®é€šçš„ `inline`å‡½æ•°æ²¡æœ‰å‡½æ•°åœ°å€ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å°†ä»£ç å±•å¼€æ›¿æ¢ã€‚åœ¨ç±»ä¸­å£°æ˜å¹¶å®šä¹‰çš„æ‰€æœ‰å‡½æ•°é»˜è®¤éƒ½æ˜¯å†…è”å‡½æ•°ï¼Œä½†å’Œ `rigister`å…³é”®å­—ä¸€æ ·ï¼Œ`inline`å¯¹äºç¼–è¯‘å™¨æ¥è¯´åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå¹¶ä¸å¼ºåˆ¶è¦æ±‚å°†å…¶åšå†…æ•›å±•å¼€ï¼Œäº‹å®ä¸Šï¼Œ**ç¼–è¯‘å™¨ä¼šæ‹’ç»å°†å¤æ‚çš„å‡½æ•°ä»¥åŠè™šå‡½æ•°è¿›è¡Œå†…è”å±•å¼€**ï¼Œæ‰€ä»¥ `inline`å’Œ `virtual`å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šå¿½ç•¥ `inline`è€Œä¿ç•™ `virtual`ã€‚
  
  #### æ³¨æ„äº‹é¡¹
  
@@@ -2844,7 -2844,7 +2907,7 @@@
  
  ## `friend`æˆå‘˜
  
--é€šè¿‡`friend`å…³é”®å­—å¯ä»¥åœ¨ç±»çš„ç”³æ˜ä¸­å°†å…¶ä»–ç±»/å‡½æ•°ä½œä¸ºæœ¬ç±»çš„å‹å…ƒï¼Œæˆä¸ºå‹å…ƒçš„å‡½æ•°/ç±»å¯ä»¥**ä¸å—ç±»æƒé™æ§åˆ¶**è®¿é—®ç±»ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚**è¢«å‹å…ƒçš„ç±»ä¼šä½œä¸ºæ˜¾å¼å‚æ•°**ä¼ é€’åˆ°å‹å…ƒå‡½æ•°/ç±»ä¸­ï¼Œå› æ­¤**å‹å…ƒå‡½æ•°ä¸å«æœ‰`this`æŒ‡é’ˆ**ã€‚
++é€šè¿‡ `friend`å…³é”®å­—å¯ä»¥åœ¨ç±»çš„ç”³æ˜ä¸­å°†å…¶ä»–ç±»/å‡½æ•°ä½œä¸ºæœ¬ç±»çš„å‹å…ƒï¼Œæˆä¸ºå‹å…ƒçš„å‡½æ•°/ç±»å¯ä»¥**ä¸å—ç±»æƒé™æ§åˆ¶**è®¿é—®ç±»ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚**è¢«å‹å…ƒçš„ç±»ä¼šä½œä¸ºæ˜¾å¼å‚æ•°**ä¼ é€’åˆ°å‹å…ƒå‡½æ•°/ç±»ä¸­ï¼Œå› æ­¤**å‹å…ƒå‡½æ•°ä¸å«æœ‰ `this`æŒ‡é’ˆ**ã€‚
  
  `note`ï¼šå‹å…ƒå…³ç³»ä¸å…·æœ‰ç»§æ‰¿æ€§å’Œä¼ é€’æ€§ï¼Œ**å‹å…ƒçš„ç”³æ˜åªèƒ½åœ¨ç±»çš„ç”³æ˜ä¸­å®Œæˆ**ã€‚
  
@@@ -2852,17 -2852,17 +2915,17 @@@
  
  ### è™šå‡½æ•°
  
--| ä¸å¯virtual  |                             åŸå›                              |
--| :----------: | :----------------------------------------------------------: |
--| `inline`å‡½æ•° |                     `inline`å‡½æ•°æ²¡æœ‰åœ°å€                     |
--| `static`å‡½æ•° |                  `static`å‡½æ•°æ²¡æœ‰`this`æŒ‡é’ˆ                  |
++|    ä¸å¯virtual    |                                  åŸå›                                   |
++| :----------------: | :--------------------------------------------------------------------: |
++|   `inline`å‡½æ•°   |                         `inline`å‡½æ•°æ²¡æœ‰åœ°å€                         |
++|   `static`å‡½æ•°   |                    `static`å‡½æ•°æ²¡æœ‰ `this`æŒ‡é’ˆ                    |
  | **æ„é€ å‡½æ•°** | å¯¹è±¡ä¸­çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆå’Œè™šå‡½æ•°è¡¨åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µï¼ˆç¼–è¯‘æœŸï¼‰åˆ†é… |
  
--è™šå‡½æ•°éœ€è¦ä¾èµ–å¯¹è±¡ä¸­æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼ˆè¿™ä¸ªå·¥ä½œæ˜¯ç¼–è¯‘å™¨åšçš„ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ï¼‰ï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œè€Œæ­¤æ—¶è™šå‡½æ•°è¡¨æŒ‡é’ˆå¹¶æœªåˆå§‹åŒ–å®Œæˆï¼Œè¿™å°±ä¼šå¼•èµ·é”™è¯¯ã€‚ 
++è™šå‡½æ•°éœ€è¦ä¾èµ–å¯¹è±¡ä¸­æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼ˆè¿™ä¸ªå·¥ä½œæ˜¯ç¼–è¯‘å™¨åšçš„ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ï¼‰ï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œè€Œæ­¤æ—¶è™šå‡½æ•°è¡¨æŒ‡é’ˆå¹¶æœªåˆå§‹åŒ–å®Œæˆï¼Œè¿™å°±ä¼šå¼•èµ·é”™è¯¯ã€‚
  
--### é™åˆ¶ç»§æ‰¿`final`
++### é™åˆ¶ç»§æ‰¿ `final`
  
--+ ä½¿ç”¨æ–¹æ³•ï¼šå°†`final`å…³é”®å­—æ·»åŠ åˆ°å®šä¹‰ç±»æ—¶çš„ç±»çš„åç§°çš„åé¢
+++ ä½¿ç”¨æ–¹æ³•ï¼šå°† `final`å…³é”®å­—æ·»åŠ åˆ°å®šä¹‰ç±»æ—¶çš„ç±»çš„åç§°çš„åé¢
  + å½±å“ï¼šè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿
  
  ### ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶
@@@ -2870,26 -2870,26 +2933,26 @@@
  + å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æ§åˆ¶æƒé™ç”±çˆ¶ç±»æ§åˆ¶ï¼Œä¸‰ç§ç»§æ‰¿æ–¹å¼ä¸å½±å“å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æƒé™ã€‚
  + ç»§æ‰¿æ–¹å¼æ˜¯ä¸ºäº†æ§åˆ¶å­ç±»çš„è°ƒç”¨æ–¹å¯¹çˆ¶ç±»çš„è®¿é—®ï¼Œä¸‰ç§ç»§æ‰¿ç›¸å½“äºå°†çˆ¶ç±»çš„publicå’Œprotectæˆå‘˜è®¿é—®æƒé™å˜ä¸ºç»§æ‰¿æ–¹å¼æ‰€æ ‡æ˜çš„æƒé™ã€‚çˆ¶ç±»çš„Privateæˆå‘˜åœ¨å­ç±»ä¸­å§‹ç»ˆä¸å¯è§
  
--| çˆ¶ç±»æˆå‘˜\ç»§æ‰¿æ–¹å¼ |   Public   |  Protect   |  Private   |
--| :---------------: | :--------: | :--------: | :--------: |
--|      Public       |   Public   |  Protect   |  Private   |
--|      Protect      |  Protect   |  Protect   |  Private   |
++| çˆ¶ç±»æˆå‘˜\ç»§æ‰¿æ–¹å¼ |      Public      |     Protect     |     Private     |
++| :---------------: | :--------------: | :--------------: | :--------------: |
++|      Public      |      Public      |     Protect     |     Private     |
++|      Protect      |     Protect     |     Protect     |     Private     |
  |      Private      | **ä¸å¯è§** | **ä¸å¯è§** | **ä¸å¯è§** |
  
  ### ç»§æ‰¿çš„å†…å®¹
  
--|           çˆ¶ç±»           |       å­ç±»       |                    åŸå› /ä½¿ç”¨æ–¹æ³•                    |
--| :----------------------: | :--------------: | :-------------------------------------------------: |
--|     æ‰€æœ‰æ™®é€šæ•°æ®æˆå‘˜     |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
--|         æ‰€æœ‰æ¥å£         |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
--|       é™æ€æ•°æ®æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |   åŸºç±»åŠæ‰€æœ‰å­ç±»å…±ç”¨åŸºç±»çš„åŒä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ç©ºé—´    |
--|       é™æ€å‡½æ•°æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    staticå‡½æ•°å®é™…ä¸Šæ˜¯â€œåŠ ä¸Šäº†è®¿é—®æ§åˆ¶çš„å…¨å±€å‡½æ•°â€     |
--|       å‹å…ƒå‡½æ•°/ç±»        |      ä¸ç»§æ‰¿      |                   é‡å†™å…¥ç±»çš„å‹å…ƒ                    |
--|      æ™®é€šè¿ç®—ç¬¦é‡è½½      |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
++|           çˆ¶ç±»           |          å­ç±»          |                     åŸå› /ä½¿ç”¨æ–¹æ³•                     |
++| :----------------------: | :--------------------: | :---------------------------------------------------: |
++|     æ‰€æœ‰æ™®é€šæ•°æ®æˆå‘˜     |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
++|         æ‰€æœ‰æ¥å£         |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
++|       é™æ€æ•°æ®æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    åŸºç±»åŠæ‰€æœ‰å­ç±»å…±ç”¨åŸºç±»çš„åŒä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ç©ºé—´    |
++|       é™æ€å‡½æ•°æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    staticå‡½æ•°å®é™…ä¸Šæ˜¯â€œåŠ ä¸Šäº†è®¿é—®æ§åˆ¶çš„å…¨å±€å‡½æ•°â€    |
++|       å‹å…ƒå‡½æ•°/ç±»       |         ä¸ç»§æ‰¿         |                    é‡å†™å…¥ç±»çš„å‹å…ƒ                    |
++|      æ™®é€šè¿ç®—ç¬¦é‡è½½      |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
  | =é‡è½½ï¼šæ‹·è´/ç§»åŠ¨èµ‹å€¼å‡½æ•° | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |          `using BaseClassName::operator=;`          |
  |         æˆå‘˜å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** | `using BaseClassName::function_name;`ï¼Œå¯ä»¥é¿å…éšè— |
  |       æ‰€æœ‰æ„é€ å‡½æ•°       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |        `using BaseClassName::BaseClassName;`        |
--|         ææ„å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |                   ææ„æ—¶è‡ªåŠ¨è°ƒç”¨                    |
++|         ææ„å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |                    ææ„æ—¶è‡ªåŠ¨è°ƒç”¨                    |
  
  ```cpp
  class Base{
@@@ -3009,12 -3009,12 +3072,12 @@@ int main()
  #### [å®ç°åŸç†](https://blog.csdn.net/qq_44777506/article/details/104320649)
  
  * è™šç»§æ‰¿åº•å±‚å®ç°åŸç†ä¸ç¼–è¯‘å™¨ç›¸å…³ï¼Œä¸€èˆ¬é€šè¿‡è™šåŸºç±»æŒ‡é’ˆå’Œè™šåŸºç±»è¡¨å®ç°ã€‚
--* æ¯ä¸ªè™šç»§æ‰¿çš„å­ç±»éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„è™šåŸºç±»è¡¨æŒ‡é’ˆ`vbptr`ï¼Œé€šè¿‡è™šåŸºç±»è¡¨çš„åç§»åœ°å€**ä¸åŒçš„ç»§æ‰¿è·¯å¾„æœ€ç»ˆä¼šè®¿é—®åˆ°åŒä¸€ä¸ªè™šåŸºç±»æˆå‘˜**
++* æ¯ä¸ªè™šç»§æ‰¿çš„å­ç±»éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„è™šåŸºç±»è¡¨æŒ‡é’ˆ `vbptr`ï¼Œé€šè¿‡è™šåŸºç±»è¡¨çš„åç§»åœ°å€**ä¸åŒçš„ç»§æ‰¿è·¯å¾„æœ€ç»ˆä¼šè®¿é—®åˆ°åŒä¸€ä¸ªè™šåŸºç±»æˆå‘˜**
  * å½“è™šç»§æ‰¿çš„ç±»è¢«å½“åšçˆ¶ç±»ç»§æ‰¿æ—¶ï¼Œè™šåŸºç±»æŒ‡é’ˆä¹Ÿä¼šè¢«ç»§æ‰¿ï¼Œä¸”æœ€ç»ˆçš„å­ç±»ä¸­çš„**è™šåŸºç±»è¡¨æŒ‡é’ˆçš„ä¸ªæ•°å’Œå®ƒæ‰€ç»§æ‰¿çš„è™šç»§æ‰¿çš„ç±»çš„ä¸ªæ•°ç›¸åŒ**ã€‚
  
  ##### [è™šåŸºç±»è¡¨](https://www.cnblogs.com/fanzhidongyzby/archive/2013/01/14/2859064.html)
  
--å­˜å‚¨**åœ¨`.rodate`æ®µå†…**ã€ä¸å ç”¨ç±»å¯¹è±¡çš„å­˜å‚¨ç©ºé—´ã€‚æ¯ä¸ªè¡¨é¡¹ç›®**è®°å½•äº†æ¯ä¸ªè™šåŸºç±»çš„æ•°æ®ç›¸å¯¹æ´¾ç”Ÿç±»èµ·å§‹åœ°å€çš„åç§»é‡**ï¼Œé€šè¿‡åç§»åœ°å€å°±å¯ä»¥åœ¨æ´¾ç”Ÿç±»çš„å†…å­˜ç©ºé—´é‡Œæ‰¾åˆ°åŸºç±»æˆå‘˜
++å­˜å‚¨**åœ¨ `.rodate`æ®µå†…**ã€ä¸å ç”¨ç±»å¯¹è±¡çš„å­˜å‚¨ç©ºé—´ã€‚æ¯ä¸ªè¡¨é¡¹ç›®**è®°å½•äº†æ¯ä¸ªè™šåŸºç±»çš„æ•°æ®ç›¸å¯¹æ´¾ç”Ÿç±»èµ·å§‹åœ°å€çš„åç§»é‡**ï¼Œé€šè¿‡åç§»åœ°å€å°±å¯ä»¥åœ¨æ´¾ç”Ÿç±»çš„å†…å­˜ç©ºé—´é‡Œæ‰¾åˆ°åŸºç±»æˆå‘˜
  
  ```cpp
  // 64bit OS
@@@ -3071,11 -3071,11 +3134,11 @@@ class MyclassC :public MyclassB, publi
  
  # å‡½æ•°ä¸è¿ç®—ç¬¦
  
--C++è¿ç®—ç¬¦åŒ…å«`sizeofã€newã€delete`ä¸‰ç§ï¼Œä»–ä»¬éƒ½ä»¥å…³é”®å­—çš„å½¢å¼å­˜åœ¨ï¼Œæ˜¯è¯­è¨€è‡ªèº«çš„ç‰¹æ€§ï¼Œå®ƒ**æœ‰å›ºå®šçš„è¯­ä¹‰**ï¼ˆæ‰€ä»¥`newã€delete`**ä¸èƒ½è¿›è¡Œé‡è½½**ï¼‰ï¼Œç¼–è¯‘å™¨è´Ÿè´£è§£é‡Šè¯­ä¹‰ç”Ÿæˆç›¸åº”çš„ä»£ç ï¼Œå…¶å®ç°å’Œè¯­ä¹‰ä¾èµ–äºè¯­è¨€è€Œ**ä¸ä¾èµ–å‡½æ•°åº“**ã€‚
++C++è¿ç®—ç¬¦åŒ…å« `sizeofã€newã€delete`ä¸‰ç§ï¼Œä»–ä»¬éƒ½ä»¥å…³é”®å­—çš„å½¢å¼å­˜åœ¨ï¼Œæ˜¯è¯­è¨€è‡ªèº«çš„ç‰¹æ€§ï¼Œå®ƒ**æœ‰å›ºå®šçš„è¯­ä¹‰**ï¼ˆæ‰€ä»¥ `newã€delete`**ä¸èƒ½è¿›è¡Œé‡è½½**ï¼‰ï¼Œç¼–è¯‘å™¨è´Ÿè´£è§£é‡Šè¯­ä¹‰ç”Ÿæˆç›¸åº”çš„ä»£ç ï¼Œå…¶å®ç°å’Œè¯­ä¹‰ä¾èµ–äºè¯­è¨€è€Œ**ä¸ä¾èµ–å‡½æ•°åº“**ã€‚
  
  ## `sizeof`
  
--`sizeof`å¯ä»¥æ±‚**é™¤`void`å¤–**æ‰€æœ‰ç±»å‹çš„å¤§å°ï¼Œç¡®å®šé™æ€åˆ†é…çš„æ•°ç»„çš„å¤§å°ï¼Œ**å½“è¡¨è¾¾å¼æˆ–è€…å‡½æ•°è°ƒç”¨åšæ“ä½œæ•°æ—¶**ï¼Œ`sizeof`è®¡ç®—è¡¨è¾¾å¼çš„å€¼/å‡½æ•°è¿”å›å€¼çš„ç±»å‹çš„å¤§å°ä½†**ä¸å¯¹è¡¨è¾¾å¼æ±‚å€¼/ä¸æ‰§è¡Œå‡½æ•°ä½“**ã€‚
++`sizeof`å¯ä»¥æ±‚**é™¤ `void`å¤–**æ‰€æœ‰ç±»å‹çš„å¤§å°ï¼Œç¡®å®šé™æ€åˆ†é…çš„æ•°ç»„çš„å¤§å°ï¼Œ**å½“è¡¨è¾¾å¼æˆ–è€…å‡½æ•°è°ƒç”¨åšæ“ä½œæ•°æ—¶**ï¼Œ`sizeof`è®¡ç®—è¡¨è¾¾å¼çš„å€¼/å‡½æ•°è¿”å›å€¼çš„ç±»å‹çš„å¤§å°ä½†**ä¸å¯¹è¡¨è¾¾å¼æ±‚å€¼/ä¸æ‰§è¡Œå‡½æ•°ä½“**ã€‚
  
  ```c
  int  num1 = 1, num2 = 2;
@@@ -3090,22 -3090,22 +3153,22 @@@ printf("%d %d %d %d\n",num1, num2, n1, 
  
  ### `std::is_same<>`
  
--åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œåˆ¤æ–­ç»“æœä¸º`std::is_same<Type1, Type2>::value`ã€‚è¯¥åˆ¤æ–­çš„æ ‡å‡†ä¸­å°†å¸¦`cv`é™å®šç¬¦æˆ–å¼•ç”¨çš„ç±»å‹å’Œä¸å¸¦è¿™äº›æ ‡è¯†çš„ç±»å‹è§†ä½œä¸åŒçš„ç±»å‹ã€‚
++åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œåˆ¤æ–­ç»“æœä¸º `std::is_same<Type1, Type2>::value`ã€‚è¯¥åˆ¤æ–­çš„æ ‡å‡†ä¸­å°†å¸¦ `cv`é™å®šç¬¦æˆ–å¼•ç”¨çš„ç±»å‹å’Œä¸å¸¦è¿™äº›æ ‡è¯†çš„ç±»å‹è§†ä½œä¸åŒçš„ç±»å‹ã€‚
  
  #### [`std::decay`ç±»å‹é€€åŒ–](https://zh.cppreference.com/w/cpp/types/decay)
  
--å°†åŸå§‹ç±»å‹ä¸­çš„`cv`é™å®šç¬¦æˆ–å¼•ç”¨æ ‡è¯†å»æ‰ä½†**ä¸æ”¯æŒå¯¹æŒ‡é’ˆçš„é€€åŒ–**ï¼ˆ`decay`çš„å®ç°ä¸­æ²¡æœ‰`remove_pointer`ï¼‰ï¼Œä¾‹å¦‚æŠŠ`cosnt int&`é€€åŒ–ä¸º`int`ã€‚
++å°†åŸå§‹ç±»å‹ä¸­çš„ `cv`é™å®šç¬¦æˆ–å¼•ç”¨æ ‡è¯†å»æ‰ä½†**ä¸æ”¯æŒå¯¹æŒ‡é’ˆçš„é€€åŒ–**ï¼ˆ`decay`çš„å®ç°ä¸­æ²¡æœ‰ `remove_pointer`ï¼‰ï¼Œä¾‹å¦‚æŠŠ `cosnt int&`é€€åŒ–ä¸º `int`ã€‚
  
  ## `std::common_type`
  
--`std::common_type<Type1, Type2>::type`å¯ä»¥äº§ç”Ÿå¹¶è·å¾—`Type1`å’Œ`type2`çš„å…±åŒç±»å‹ã€‚
++`std::common_type<Type1, Type2>::type`å¯ä»¥äº§ç”Ÿå¹¶è·å¾— `Type1`å’Œ `type2`çš„å…±åŒç±»å‹ã€‚
  
  ## ç±»å‹è½¬æ¢
  
  ### ä¼ ç»Ÿç±»å‹è½¬æ¢
  
  + å³Cé£æ ¼çš„ç±»å‹è½¬æ¢å¯èƒ½å¸¦æ¥ä¸€äº›éšæ‚£ï¼Œè®©ä¸€äº›é—®é¢˜éš¾ä»¥å¯Ÿè§‰.
--+ åœ¨ç±»æ¨¡å‹ä¸­æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°ä¼ ç»Ÿçš„ç±»å‹è½¬æ¢æ–¹å¼ï¼Œä¾‹å¦‚é‡è½½`operator T`å‡½æ•°å®ç°ç±»å‘ç±»`T`çš„è½¬æ¢ã€‚
+++ åœ¨ç±»æ¨¡å‹ä¸­æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°ä¼ ç»Ÿçš„ç±»å‹è½¬æ¢æ–¹å¼ï¼Œä¾‹å¦‚é‡è½½ `operator T`å‡½æ•°å®ç°ç±»å‘ç±» `T`çš„è½¬æ¢ã€‚
  
  #### éšå¼ç±»å‹è½¬æ¢
  
@@@ -3125,30 -3125,30 +3188,30 @@@
  
  #### [`const_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/22/cpp_cast_operator_part2.html)
  
--ç”¨äº**å»é™¤æŒ‡é’ˆ/å¼•ç”¨çš„`const/volatile`é™å®šç¬¦**ï¼Œè½¬æ¢å‰å**æ•°æ®çš„æœ€ç»ˆæŒ‡å‘å¹¶ä¸ä¼šæ”¹å˜**ã€‚ä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥å¯¹åŸå¯¹è±¡ä¿®æ”¹ï¼ˆå–å†³äºæºå¯¹è±¡çš„é™å®šç¬¦ï¼‰ã€‚åŠ `const`ç”±`static_cast<>()`å®Œæˆã€‚`const_cast`åŸºäºC++å¯¹äºæŒ‡é’ˆçš„è½¬æ¢æ˜¯ä»»æ„çš„ï¼Œä»»ä½•æŒ‡é’ˆä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œäº’ç›¸è½¬æ¢ï¼Œå› æ­¤`const_cast`å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ˜¾ç¤ºè½¬æ¢æ¥ä»£æ›¿ã€‚
++ç”¨äº**å»é™¤æŒ‡é’ˆ/å¼•ç”¨çš„ `const/volatile`é™å®šç¬¦**ï¼Œè½¬æ¢å‰å**æ•°æ®çš„æœ€ç»ˆæŒ‡å‘å¹¶ä¸ä¼šæ”¹å˜**ã€‚ä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥å¯¹åŸå¯¹è±¡ä¿®æ”¹ï¼ˆå–å†³äºæºå¯¹è±¡çš„é™å®šç¬¦ï¼‰ã€‚åŠ  `const`ç”± `static_cast<>()`å®Œæˆã€‚`const_cast`åŸºäºC++å¯¹äºæŒ‡é’ˆçš„è½¬æ¢æ˜¯ä»»æ„çš„ï¼Œä»»ä½•æŒ‡é’ˆä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œäº’ç›¸è½¬æ¢ï¼Œå› æ­¤ `const_cast`å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ˜¾ç¤ºè½¬æ¢æ¥ä»£æ›¿ã€‚
  
  #### [`reinterpret_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)
  
--`reinterpret_cast`è¿ç®—ç¬¦æ˜¯ç”¨æ¥å¤„ç†æ— å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼›å®ƒä¼šäº§ç”Ÿä¸€ä¸ªä¸åŸå§‹å‚æ•°ï¼ˆ`expressoin`ï¼‰æœ‰å®Œå…¨ç›¸åŒçš„æ¯”ç‰¹ä½çš„æ–°å€¼ã€‚`reinterpret_cast`è™½ç„¶çœ‹ä¼¼å¼ºå¤§ï¼Œä½œç”¨å´æ²¡æœ‰é‚£ä¹ˆå¹¿ï¼Œé”™è¯¯çš„ä½¿ç”¨`reinterpret_cast`å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºçš„ä¸å®‰å…¨ï¼Œ**åªæœ‰å°†è½¬æ¢åçš„ç±»å‹å€¼è½¬æ¢å›åˆ°å…¶åŸå§‹ç±»å‹**ï¼Œè¿™æ ·æ‰æ˜¯æ­£ç¡®ä½¿ç”¨`reinterpret_cast`æ–¹å¼ã€‚
++`reinterpret_cast`è¿ç®—ç¬¦æ˜¯ç”¨æ¥å¤„ç†æ— å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼›å®ƒä¼šäº§ç”Ÿä¸€ä¸ªä¸åŸå§‹å‚æ•°ï¼ˆ`expressoin`ï¼‰æœ‰å®Œå…¨ç›¸åŒçš„æ¯”ç‰¹ä½çš„æ–°å€¼ã€‚`reinterpret_cast`è™½ç„¶çœ‹ä¼¼å¼ºå¤§ï¼Œä½œç”¨å´æ²¡æœ‰é‚£ä¹ˆå¹¿ï¼Œé”™è¯¯çš„ä½¿ç”¨ `reinterpret_cast`å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºçš„ä¸å®‰å…¨ï¼Œ**åªæœ‰å°†è½¬æ¢åçš„ç±»å‹å€¼è½¬æ¢å›åˆ°å…¶åŸå§‹ç±»å‹**ï¼Œè¿™æ ·æ‰æ˜¯æ­£ç¡®ä½¿ç”¨ `reinterpret_cast`æ–¹å¼ã€‚
  
  [IBMçš„C++æŒ‡å—](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/language_ref/keyword_reinterpret_cast.htm)æ¨èä»¥ä¸‹å‡ ç§è½¬æ¢æ–¹å¼ï¼šæ•´å‹->æŒ‡é’ˆ->å¤§æ•´å‹ï¼ˆå¤§å°ä¸å°äºæŒ‡é’ˆï¼‰ã€ä»»æ„å¯¹è±¡æŒ‡é’ˆã€å¯¹è±¡å¼•ç”¨ã€å‡½æ•°æŒ‡é’ˆã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€ç±»æ•°æ®æˆå‘˜æŒ‡é’ˆä¹‹é—´çš„è½¬æ¢
  
  #### [`dynamic_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)
  
--åªæ¥å—åŸºäºç±»å¯¹è±¡çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„ç±»è½¬æ¢ï¼Œä¸”è¦æ±‚æºå’Œç›®æ ‡çš„ç±»å‹å…·**æœ‰ç»§æ‰¿å…³ç³»**ã€‚ä¸”è¯¥è½¬æ¢çš„å®ç°ä¾èµ–è™šå‡½æ•°è¡¨ï¼Œéœ€è¦æœ‰`RTTI`æ”¯æŒã€‚
++åªæ¥å—åŸºäºç±»å¯¹è±¡çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„ç±»è½¬æ¢ï¼Œä¸”è¦æ±‚æºå’Œç›®æ ‡çš„ç±»å‹å…·**æœ‰ç»§æ‰¿å…³ç³»**ã€‚ä¸”è¯¥è½¬æ¢çš„å®ç°ä¾èµ–è™šå‡½æ•°è¡¨ï¼Œéœ€è¦æœ‰ `RTTI`æ”¯æŒã€‚
  
  ### å»ºè®®
  
--|   ä¼ ç»Ÿè½¬æ¢   |     `static_cast`      |  `const_cast`  |      `daynamic_cast`      | `reinterpreter_cast` |
--| :----------: | :--------------------: | :------------: | :-----------------------: | :------------------: |
--| **ä½¿ç”¨å¯¹è±¡** |       æœ‰ä¸€å®šå…³ç³»       |   æŒ‡é’ˆ/å¼•ç”¨    | åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„æŒ‡é’ˆ/å¼•ç”¨ |       ä»»æ„æŒ‡é’ˆ       |
--| **ç±»å‹è¦æ±‚** |       åŸºæœ¬ç±»å‹é—´       |   **å»**`cv`   |         å¤šæ€ç±»é—´          | ä¸åŒç±»å‹çš„æŒ‡é’ˆ/å¼•ç”¨  |
--|   **å¤‡æ³¨**   | **ä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©** |                |       éœ€`RTTI`æ”¯æŒ        |   æ”¯æŒé€†è½¬æ¢æ‰å®‰å…¨   |
--|  **è¿”å›å€¼**  |     ç­‰äºæ—§å€¼çš„å³å€¼     | æŒ‡å‘æ—§å€¼çš„å³å€¼ |                           |   æ¯æ¯”ç‰¹ç›¸ç­‰çš„å³å€¼   |
++|      ä¼ ç»Ÿè½¬æ¢      |       `static_cast`       |   `const_cast`   |     `daynamic_cast`     | `reinterpreter_cast` |
++| :----------------: | :--------------------------: | :-----------------: | :-----------------------: | :--------------------: |
++| **ä½¿ç”¨å¯¹è±¡** |          æœ‰ä¸€å®šå…³ç³»          |      æŒ‡é’ˆ/å¼•ç”¨      | åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„æŒ‡é’ˆ/å¼•ç”¨ |        ä»»æ„æŒ‡é’ˆ        |
++| **ç±»å‹è¦æ±‚** |          åŸºæœ¬ç±»å‹é—´          | **å»** `cv` |         å¤šæ€ç±»é—´         |  ä¸åŒç±»å‹çš„æŒ‡é’ˆ/å¼•ç”¨  |
++|   **å¤‡æ³¨**   | **ä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©** |                    |      éœ€ `RTTI`æ”¯æŒ      |    æ”¯æŒé€†è½¬æ¢æ‰å®‰å…¨    |
++|  **è¿”å›å€¼**  |        ç­‰äºæ—§å€¼çš„å³å€¼        |   æŒ‡å‘æ—§å€¼çš„å³å€¼   |                          |    æ¯æ¯”ç‰¹ç›¸ç­‰çš„å³å€¼    |
  
--+ `static_cast`å’Œ`reinterpret_cast`è¿ç®—ç¬¦è¦ä¹ˆç›´æ¥è¢«ç¼–è¯‘å™¨æ‹’ç»è¿›è¡Œè½¬æ¢ï¼Œè¦ä¹ˆå°±ä¸€å®šä¼šå¾—åˆ°ç›¸åº”çš„ç›®æ ‡ç±»å‹çš„å€¼ã€‚
--+ `dynamic_cast`ä¼šå…ˆè¿›è¡Œåˆ¤åˆ«ï¼Œç¡®å®šæºæŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹æ˜¯å¦çœŸçš„åˆé€‚è¢«ç›®æ ‡æŒ‡é’ˆæ¥å—ã€‚å¦‚æœæ˜¯å¦å®šçš„ï¼Œé‚£ä¹ˆ`dynamic_cas`tåˆ™ä¼šè¿”å›`null`ã€‚è¿™æ˜¯é€šè¿‡æ£€æŸ¥**è¿è¡ŒæœŸç±»å‹ä¿¡æ¯**ï¼ˆRuntime type informationï¼ŒRTTIï¼‰æ¥åˆ¤å®šçš„ï¼Œå®ƒè¿˜å—åˆ°ç¼–è¯‘å™¨çš„å½±å“ï¼Œæœ‰äº›ç¼–è¯‘å™¨éœ€è¦è®¾ç½®å¼€å¯æ‰èƒ½è®©ç¨‹åºæ­£ç¡®è¿è¡Œã€‚
--+ `const_cast<>`ä¸é€‚ç”¨äºè¿­ä»£å™¨çš„è½¬æ¢ã€‚å› ä¸ºå…¶åªæ˜¯ç”¨äºå»æ‰ç±»å‹å‰çš„é™å®šç¬¦ï¼Œè€Œ`const_iterator`å’Œ`iterator`æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»ï¼Œå…¶è½¬æ¢å¯ä»¥å€ŸåŠ©`void advance(ï¼Œint distance())`çš„å‡½æ•°ç»„åˆã€‚
+++ `static_cast`å’Œ `reinterpret_cast`è¿ç®—ç¬¦è¦ä¹ˆç›´æ¥è¢«ç¼–è¯‘å™¨æ‹’ç»è¿›è¡Œè½¬æ¢ï¼Œè¦ä¹ˆå°±ä¸€å®šä¼šå¾—åˆ°ç›¸åº”çš„ç›®æ ‡ç±»å‹çš„å€¼ã€‚
+++ `dynamic_cast`ä¼šå…ˆè¿›è¡Œåˆ¤åˆ«ï¼Œç¡®å®šæºæŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹æ˜¯å¦çœŸçš„åˆé€‚è¢«ç›®æ ‡æŒ‡é’ˆæ¥å—ã€‚å¦‚æœæ˜¯å¦å®šçš„ï¼Œé‚£ä¹ˆ `dynamic_cas`tåˆ™ä¼šè¿”å› `null`ã€‚è¿™æ˜¯é€šè¿‡æ£€æŸ¥**è¿è¡ŒæœŸç±»å‹ä¿¡æ¯**ï¼ˆRuntime type informationï¼ŒRTTIï¼‰æ¥åˆ¤å®šçš„ï¼Œå®ƒè¿˜å—åˆ°ç¼–è¯‘å™¨çš„å½±å“ï¼Œæœ‰äº›ç¼–è¯‘å™¨éœ€è¦è®¾ç½®å¼€å¯æ‰èƒ½è®©ç¨‹åºæ­£ç¡®è¿è¡Œã€‚
+++ `const_cast<>`ä¸é€‚ç”¨äºè¿­ä»£å™¨çš„è½¬æ¢ã€‚å› ä¸ºå…¶åªæ˜¯ç”¨äºå»æ‰ç±»å‹å‰çš„é™å®šç¬¦ï¼Œè€Œ `const_iterator`å’Œ `iterator`æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»ï¼Œå…¶è½¬æ¢å¯ä»¥å€ŸåŠ© `void advance(ï¼Œint distance())`çš„å‡½æ•°ç»„åˆã€‚
  
  # å…³é”®å­—è¡¥å……è¯´æ˜
  
@@@ -3156,16 -3156,16 +3219,16 @@@
  
  ### [`const`](https://blog.csdn.net/qfturauyls/article/details/110408027)
  
--|  å¸¸é‡æ€§è´¨  |        ç‰¹ç‚¹         |             è¡¥å……             |
--| :--------: | :-----------------: | :--------------------------: |
--| ç‰©ç†å¸¸é‡æ€§ | æ¯ä¸ª`bit`éƒ½ä¸å¯æ”¹å˜ |   æŸäº›ä¿®æ”¹ä¼šè¿èƒŒé€»è¾‘å¸¸é‡æ€§   |
--| é€»è¾‘å¸¸é‡æ€§ | å¯¹è±¡çš„è¡¨ç°ä¿æŒä¸å˜  | å…è®¸æ”¹å˜å¯¹è±¡ä¸­å¤–éƒ¨ä¸å¯è§çš„åŸŸ |
++|  å¸¸é‡æ€§è´¨  |          ç‰¹ç‚¹          |             è¡¥å……             |
++| :--------: | :--------------------: | :--------------------------: |
++| ç‰©ç†å¸¸é‡æ€§ | æ¯ä¸ª `bit`éƒ½ä¸å¯æ”¹å˜ |   æŸäº›ä¿®æ”¹ä¼šè¿èƒŒé€»è¾‘å¸¸é‡æ€§   |
++| é€»è¾‘å¸¸é‡æ€§ |   å¯¹è±¡çš„è¡¨ç°ä¿æŒä¸å˜   | å…è®¸æ”¹å˜å¯¹è±¡ä¸­å¤–éƒ¨ä¸å¯è§çš„åŸŸ |
  
--C++ä¸­é‡‡ç”¨çš„æ˜¯**ç‰©ç†å¸¸é‡æ€§**ï¼Œå®ƒ**é€šè¿‡ç¼–è¯‘å™¨æ¥ä¿è¯å¯¹è±¡çš„å¸¸é‡æ€§**ï¼Œå¼ºåˆ¶ç¼–è¯‘å™¨é˜»æ­¢é™¤åˆå§‹åŒ–èµ‹å€¼ï¼ˆå¯åœ¨ç¼–è¯‘æœŸä¹Ÿ**å¯åœ¨è¿è¡Œæ—¶åˆå§‹åŒ–**ï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ‹å€¼è¡Œä¸ºã€‚è¢«`const`ä¿®é¥°çš„å˜é‡çš„å¯è§èŒƒå›´ä¸ºé»˜è®¤ä¸º**æ–‡ä»¶ä½œç”¨åŸŸ**ï¼ŒåŠ ä¸Š`extern`å…³é”®å­—å¯ä»¥æ‰©å±•å…¶ä½œç”¨åŸŸã€‚
++C++ä¸­é‡‡ç”¨çš„æ˜¯**ç‰©ç†å¸¸é‡æ€§**ï¼Œå®ƒ**é€šè¿‡ç¼–è¯‘å™¨æ¥ä¿è¯å¯¹è±¡çš„å¸¸é‡æ€§**ï¼Œå¼ºåˆ¶ç¼–è¯‘å™¨é˜»æ­¢é™¤åˆå§‹åŒ–èµ‹å€¼ï¼ˆå¯åœ¨ç¼–è¯‘æœŸä¹Ÿ**å¯åœ¨è¿è¡Œæ—¶åˆå§‹åŒ–**ï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ‹å€¼è¡Œä¸ºã€‚è¢« `const`ä¿®é¥°çš„å˜é‡çš„å¯è§èŒƒå›´ä¸ºé»˜è®¤ä¸º**æ–‡ä»¶ä½œç”¨åŸŸ**ï¼ŒåŠ ä¸Š `extern`å…³é”®å­—å¯ä»¥æ‰©å±•å…¶ä½œç”¨åŸŸã€‚
  
  #### `mutable`
  
--é€šè¿‡`mutable`å…³é”®å­—å¯ä»¥ä½¿`const`ä¿®é¥°çš„å˜é‡æ”¯æŒä¸€å®šçš„é€»è¾‘å¸¸é‡æ€§ã€‚
++é€šè¿‡ `mutable`å…³é”®å­—å¯ä»¥ä½¿ `const`ä¿®é¥°çš„å˜é‡æ”¯æŒä¸€å®šçš„é€»è¾‘å¸¸é‡æ€§ã€‚
  
  #### `const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨
  
@@@ -3173,17 -3173,17 +3236,17 @@@
  
  #### `const`ä¿®é¥°å‡½æ•°
  
--å½“**ä¿®é¥°ç±»çš„éé™æ€æˆå‘˜å‡½æ•°**ä¿è¯è¯¥å‡½æ•°æ‰€å¯¹åº”çš„å¯¹è±¡æœ¬èº«çš„`const`æ€§ã€‚åœ¨`const`æˆå‘˜å‡½æ•°ä¸­ï¼Œæ‰€æœ‰å¯èƒ½è¿èƒŒ`this`æŒ‡é’ˆï¼ˆæ­¤æ—¶ç­‰åŒäº**`const Type * const this`**ï¼‰ç±»å‹ç‰¹ç‚¹çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆèµ‹å€¼ã€å¯¹é`const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ã€å¯¹æˆå‘˜çš„é`const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ï¼Œå¯¹é`mutable`æˆå‘˜çš„ä¿®æ”¹ï¼‰ã€‚ä½†**å¯¹å£°æ˜ä¸º`mutable`çš„æˆå‘˜å˜é‡æ‰€åšçš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«é˜»æ­¢**ã€‚
++å½“**ä¿®é¥°ç±»çš„éé™æ€æˆå‘˜å‡½æ•°**ä¿è¯è¯¥å‡½æ•°æ‰€å¯¹åº”çš„å¯¹è±¡æœ¬èº«çš„ `const`æ€§ã€‚åœ¨ `const`æˆå‘˜å‡½æ•°ä¸­ï¼Œæ‰€æœ‰å¯èƒ½è¿èƒŒ `this`æŒ‡é’ˆï¼ˆæ­¤æ—¶ç­‰åŒäº**`const Type * const this`**ï¼‰ç±»å‹ç‰¹ç‚¹çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆèµ‹å€¼ã€å¯¹é `const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ã€å¯¹æˆå‘˜çš„é `const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ï¼Œå¯¹é `mutable`æˆå‘˜çš„ä¿®æ”¹ï¼‰ã€‚ä½†**å¯¹å£°æ˜ä¸º `mutable`çš„æˆå‘˜å˜é‡æ‰€åšçš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«é˜»æ­¢**ã€‚
  
--**`const`ä¿®é¥°å‡½æ•°æ—¶è¿˜ä¼šå‚ä¸åˆ°å‡½æ•°çš„é‡è½½ä¸­**ï¼Œå³é€šè¿‡`const`å¯¹è±¡ã€`const`æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨`const`æ–¹æ³•ï¼Œ**å½“æ²¡æœ‰ä¸€èˆ¬æˆå‘˜å‡½æ•°æ—¶ï¼Œé`const`å¯¹è±¡/å¼•ç”¨/æŒ‡é’ˆä¹Ÿä¼šè°ƒç”¨`const`æˆå‘˜æ–¹æ³•ã€‚**
++**`const`ä¿®é¥°å‡½æ•°æ—¶è¿˜ä¼šå‚ä¸åˆ°å‡½æ•°çš„é‡è½½ä¸­**ï¼Œå³é€šè¿‡ `const`å¯¹è±¡ã€`const`æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨ `const`æ–¹æ³•ï¼Œ**å½“æ²¡æœ‰ä¸€èˆ¬æˆå‘˜å‡½æ•°æ—¶ï¼Œé `const`å¯¹è±¡/å¼•ç”¨/æŒ‡é’ˆä¹Ÿä¼šè°ƒç”¨ `const`æˆå‘˜æ–¹æ³•ã€‚**
  
--**é‡è½½åŸå› **ï¼ˆä¸ªäººæ¨æµ‹ï¼‰ï¼šç±»æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è‡ªåŠ¨åŠ å…¥`this`æŒ‡é’ˆå‚æ•°ï¼Œå¦‚å‰æ–‡æ‰€è¿°ï¼Œconstæˆå‘˜å‡½æ•°ä¼ é€’è¿‡æ¥çš„`this`æŒ‡é’ˆçš„ç±»å‹æ˜¯å¸¦æœ‰`const`é™å®šçš„ï¼Œæ­¤æ—¶ä¸¤ç§å‡½æ•°çš„å‡½æ•°ç­¾åä¹Ÿå°±æ˜¯ä¸åŒçš„ã€‚
++**é‡è½½åŸå› **ï¼ˆä¸ªäººæ¨æµ‹ï¼‰ï¼šç±»æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è‡ªåŠ¨åŠ å…¥ `this`æŒ‡é’ˆå‚æ•°ï¼Œå¦‚å‰æ–‡æ‰€è¿°ï¼Œconstæˆå‘˜å‡½æ•°ä¼ é€’è¿‡æ¥çš„ `this`æŒ‡é’ˆçš„ç±»å‹æ˜¯å¸¦æœ‰ `const`é™å®šçš„ï¼Œæ­¤æ—¶ä¸¤ç§å‡½æ•°çš„å‡½æ•°ç­¾åä¹Ÿå°±æ˜¯ä¸åŒçš„ã€‚
  
--#### `const`ä¸`static`
++#### `const`ä¸ `static`
  
--`const`ï¼šç±»ä¸­çš„**å¸¸é‡å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰`static`å±æ€§æ—¶é™¤å¤–**ï¼‰ã€‚
++`const`ï¼šç±»ä¸­çš„**å¸¸é‡å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰ `static`å±æ€§æ—¶é™¤å¤–**ï¼‰ã€‚
  
--`static`ï¼šç±»ä¸­çš„**é™æ€å˜é‡å¿…é¡»åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰`const`å±æ€§ä¸”ä¸ºåŸºæœ¬æ•´æ•°ç±»å‹æ—¶é™¤å¤–**ï¼Œæ­¤æ—¶ä¸ºå°±åœ°åˆå§‹åŒ–ï¼‰ã€‚å¦‚æœå°±åœ°åˆå§‹åŒ–ååœ¨ä»£ç ä¸­éœ€è¦åšå–å€¼ä¹‹å¤–çš„æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦åœ¨ç±»å¤–ç»™å®ƒæä¾›ä¸€ä¸ªå®šä¹‰ï¼ˆä¸éœ€è¦åˆå§‹å€¼ï¼‰ã€‚
++`static`ï¼šç±»ä¸­çš„**é™æ€å˜é‡å¿…é¡»åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰ `const`å±æ€§ä¸”ä¸ºåŸºæœ¬æ•´æ•°ç±»å‹æ—¶é™¤å¤–**ï¼Œæ­¤æ—¶ä¸ºå°±åœ°åˆå§‹åŒ–ï¼‰ã€‚å¦‚æœå°±åœ°åˆå§‹åŒ–ååœ¨ä»£ç ä¸­éœ€è¦åšå–å€¼ä¹‹å¤–çš„æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦åœ¨ç±»å¤–ç»™å®ƒæä¾›ä¸€ä¸ªå®šä¹‰ï¼ˆä¸éœ€è¦åˆå§‹å€¼ï¼‰ã€‚
  
  ```c++
  class Test{
@@@ -3201,40 -3201,40 +3264,40 @@@ const char* py = &test.y;//error:undefi
  
  ## `CPP14: constexpr `
  
--ä¸ºäº†è§£å†³`const`å…·æœ‰çš„åªè¯»å’Œå¸¸é‡çš„åŒé‡è¯­ä¹‰é€ æˆçš„æ­§ä¹‰é—®é¢˜ï¼ŒC++11å¼•å…¥äº†**`constexpr`ï¼ˆéšå«äº†`const`å±æ€§ï¼‰ä»£è¡¨å¸¸é‡è¡¨è¾¾å¼**ï¼ˆå€¼ä¸ä¼šæ”¹å˜ä¸”åœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å¾—åˆ°ç»“æœçš„è¡¨è¾¾å¼ï¼‰ï¼Œè€Œç”¨**`const`ä»£è¡¨åªè¯»å˜é‡**ã€‚
++ä¸ºäº†è§£å†³ `const`å…·æœ‰çš„åªè¯»å’Œå¸¸é‡çš„åŒé‡è¯­ä¹‰é€ æˆçš„æ­§ä¹‰é—®é¢˜ï¼ŒC++11å¼•å…¥äº†**`constexpr`ï¼ˆéšå«äº† `const`å±æ€§ï¼‰ä»£è¡¨å¸¸é‡è¡¨è¾¾å¼**ï¼ˆå€¼ä¸ä¼šæ”¹å˜ä¸”åœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å¾—åˆ°ç»“æœçš„è¡¨è¾¾å¼ï¼‰ï¼Œè€Œç”¨**`const`ä»£è¡¨åªè¯»å˜é‡**ã€‚
  
  ### å¸¸é‡ä¸åªè¯»
  
  **å¸¸é‡ä¸€å®šåªè¯»**ï¼šå¸¸é‡æ˜¯è¢«ç¼–è¯‘å™¨æ”¾åœ¨å†…å­˜ä¸­çš„åªè¯»åŒºåŸŸï¼Œå¯¹è¿™ä¸€ç‰‡å†…å­˜åªèƒ½è¯»å–è€Œä¸èƒ½å¤Ÿå»ä¿®æ”¹å®ƒã€‚ä»–ä»¬é€šå¸¸é€šè¿‡å­—é¢é‡ã€å®ã€æšä¸¾å€¼è¿›è¡Œå®šä¹‰ã€‚
  
--**åªè¯»å˜é‡**ï¼šåªè¯»å˜é‡é¦–å…ˆ**æ˜¯ä¸€ä¸ªå˜é‡**ã€åªè¯»åªæ˜¯é™„åŠ åœ¨è¿™ä¸ªå˜é‡ä¸Šçš„ä¸€ä¸ªç‰¹æ€§ï¼Œç¼–è¯‘å™¨åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªåœ°æ–¹æ¥å­˜æ”¾å˜é‡çš„å€¼ï¼Œç”±ç¼–è¯‘å™¨é€šè¿‡`const`ç­‰é™å®šæ­¤å€¼ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œä½†æˆ‘ä»¬ä»»ç„¶æœ‰å¯èƒ½ç»•è¿‡ç¼–è¯‘å™¨ä¿®æ”¹å…¶å€¼ã€‚
++**åªè¯»å˜é‡**ï¼šåªè¯»å˜é‡é¦–å…ˆ**æ˜¯ä¸€ä¸ªå˜é‡**ã€åªè¯»åªæ˜¯é™„åŠ åœ¨è¿™ä¸ªå˜é‡ä¸Šçš„ä¸€ä¸ªç‰¹æ€§ï¼Œç¼–è¯‘å™¨åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªåœ°æ–¹æ¥å­˜æ”¾å˜é‡çš„å€¼ï¼Œç”±ç¼–è¯‘å™¨é€šè¿‡ `const`ç­‰é™å®šæ­¤å€¼ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œä½†æˆ‘ä»¬ä»»ç„¶æœ‰å¯èƒ½ç»•è¿‡ç¼–è¯‘å™¨ä¿®æ”¹å…¶å€¼ã€‚
  
  ### `constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼
  
--   + `constexpr`ä¿®é¥°çš„å‡½æ•°å¦‚æœç¼–è¯‘æœŸå¯ä»¥ç¡®å®šï¼ˆå‚æ•°éƒ½æ˜¯`constexpr`ï¼‰å°±ç¡®å®šï¼Œå¦åˆ™çš„è¯å‡½æ•°æˆä¸ºæ™®é€šå‡½æ•°
--   + `constexpr`å¯ä»¥ä¿®é¥°å‡½æ•°æ¨¡æ¿ï¼Œå¦‚æœå…¶å®ä¾‹åŒ–ç‰ˆæœ¬ä¸æ»¡è¶³`constexpr`çš„è¦æ±‚åˆ™å‡½æ•°è‡ªåŠ¨é€€åŒ–ä¸ºæ™®é€šå‡½æ•°ã€‚
+++ `constexpr`ä¿®é¥°çš„å‡½æ•°å¦‚æœç¼–è¯‘æœŸå¯ä»¥ç¡®å®šï¼ˆå‚æ•°éƒ½æ˜¯ `constexpr`ï¼‰å°±ç¡®å®šï¼Œå¦åˆ™çš„è¯å‡½æ•°æˆä¸ºæ™®é€šå‡½æ•°
+++ `constexpr`å¯ä»¥ä¿®é¥°å‡½æ•°æ¨¡æ¿ï¼Œå¦‚æœå…¶å®ä¾‹åŒ–ç‰ˆæœ¬ä¸æ»¡è¶³ `constexpr`çš„è¦æ±‚åˆ™å‡½æ•°è‡ªåŠ¨é€€åŒ–ä¸ºæ™®é€šå‡½æ•°ã€‚
  
--      1. è¢«ä¿®é¥°çš„å‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰è¢«å®šä¹‰ã€‚
--      2. CPP11è¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ï¼Œè€Œä¸”å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€æ¡æœ‰æ•ˆè¯­å¥ï¼ˆå¯ä»¥æœ‰`static_assertï¼Œusingï¼Œtypedef`ç­‰ä¸ä¼šäº§ç”Ÿå®é™…ä»£ç çš„è¯­å¥ï¼‰ï¼Œè¯¥è¯­å¥ä¸º`return`è¯­å¥ã€‚
--      3. CPP14åªè¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ã€‚
--      4. è¢«ä¿®é¥°çš„å‡½æ•°åªèƒ½è°ƒç”¨å…¶ä»–`constexpr`ä¿®é¥°çš„å‡½æ•°ã€åªèƒ½å¼•ç”¨å…¨å±€ä¸å˜å¸¸é‡ã€‚
++  1. è¢«ä¿®é¥°çš„å‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰è¢«å®šä¹‰ã€‚
++  2. CPP11è¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ï¼Œè€Œä¸”å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€æ¡æœ‰æ•ˆè¯­å¥ï¼ˆå¯ä»¥æœ‰ `static_assertï¼Œusingï¼Œtypedef`ç­‰ä¸ä¼šäº§ç”Ÿå®é™…ä»£ç çš„è¯­å¥ï¼‰ï¼Œè¯¥è¯­å¥ä¸º `return`è¯­å¥ã€‚
++  3. CPP14åªè¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ã€‚
++  4. è¢«ä¿®é¥°çš„å‡½æ•°åªèƒ½è°ƒç”¨å…¶ä»– `constexpr`ä¿®é¥°çš„å‡½æ•°ã€åªèƒ½å¼•ç”¨å…¨å±€ä¸å˜å¸¸é‡ã€‚
  
  ### `constexpr`ä¿®é¥°å˜é‡
  
--`constexpr`ä¿®é¥°çš„å˜é‡ç±»å‹åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€å¼•ç”¨å’Œè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆéœ€**æ»¡è¶³è¦æ±‚**ï¼‰ï¼Œä¸èƒ½æ˜¯å…¶å®ƒæ ‡å‡†åº“ç±»å‹ã€‚ä¸”éšå«è¦æ±‚äº†è¯¥å˜é‡ä¸º`const`ç±»å‹ï¼Œå…¶**å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š**ã€‚
++`constexpr`ä¿®é¥°çš„å˜é‡ç±»å‹åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€å¼•ç”¨å’Œè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆéœ€**æ»¡è¶³è¦æ±‚**ï¼‰ï¼Œä¸èƒ½æ˜¯å…¶å®ƒæ ‡å‡†åº“ç±»å‹ã€‚ä¸”éšå«è¦æ±‚äº†è¯¥å˜é‡ä¸º `const`ç±»å‹ï¼Œå…¶**å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š**ã€‚
  
--   1. è¦æ±‚ï¼šè‡ªå®šä¹‰**å¸¸é‡æ„é€ å‡½æ•°+ç©ºæ„é€ å‡½æ•°+åˆå§‹åŒ–åˆ—è¡¨ç”±å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼**
++1. è¦æ±‚ï¼šè‡ªå®šä¹‰**å¸¸é‡æ„é€ å‡½æ•°+ç©ºæ„é€ å‡½æ•°+åˆå§‹åŒ–åˆ—è¡¨ç”±å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼**
  
--      ```cpp
--      class Point{
--          public:
--              constexpr Point( double x = 0, double y = 0 ): x_( x ), y_( y ){  }
--          private:
--              double x_, y_;
--      };
--      constexpr string str = "hello"; // error: constexpr variable cannot have non-literal type
--      constexpr Point pt( 10, 20 ); // Evaluate at compiling time
--      ```
++   ```cpp
++   class Point{
++       public:
++           constexpr Point( double x = 0, double y = 0 ): x_( x ), y_( y ){  }
++       private:
++           double x_, y_;
++   };
++   constexpr string str = "hello"; // error: constexpr variable cannot have non-literal type
++   constexpr Point pt( 10, 20 ); // Evaluate at compiling time
++   ```
  
  ### `constexpr`ä¿®é¥°æŒ‡é’ˆ
  
@@@ -3242,7 -3242,7 +3305,7 @@@
  
  ## `volatile`
  
--+ å«ä¹‰ï¼šè¢«`volatile`ä¿®é¥°çš„å˜é‡è¡¨æ˜å®ƒ**å¯èƒ½è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹**ï¼ˆæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ï¼‰ã€‚
+++ å«ä¹‰ï¼šè¢« `volatile`ä¿®é¥°çš„å˜é‡è¡¨æ˜å®ƒ**å¯èƒ½è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹**ï¼ˆæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ï¼‰ã€‚
  + è¡¨ç°ï¼ˆ**ä¸ä¼˜åŒ–ã€ä¸ç¼“å­˜**ï¼‰ï¼šç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç ä¸å†è¿›è¡Œä¼˜åŒ–ï¼›åœ¨è¿è¡Œæ—¶ç³»ç»Ÿæ€»æ˜¯é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œå³ä½¿å®ƒå‰é¢çš„æŒ‡ä»¤åˆšåˆšä»è¯¥å¤„è¯»å–è¿‡æ•°æ®ï¼Œè€Œä¸”è¯»å–çš„æ•°æ®ç«‹åˆ»è¢«ä¿å­˜ã€‚
  
  ### ä½¿ç”¨åœºæ™¯
@@@ -3273,11 -3273,11 +3336,8 @@@
  å‡†ç¡®åŒ¹é… > ç±»å‹æå‡è½¬æ¢ > éšå¼è½¬æ¢ >  ç”¨æˆ·å®šä¹‰çš„ç±»ç±»è½¬æ¢
  
  - å‡†ç¡®åŒ¹é…ï¼šä¸è¦æ±‚è½¬æ¢ï¼›å€¼ â†” å¼•ç”¨ï¼›å·¦å€¼â†’å³å€¼ï¼›`[] â†’*`ï¼›`type(argument-list â†’(type *)(argument-list)`ã€é™å®šæ€§åŠ å¼ºçš„è½¬æ¢ï¼ˆ`type â†’const/volatile typeã€type*â†’ const/volatile type*`ï¼‰ã€‚
--
  - æå‡è½¬æ¢ï¼ˆæ•´å‹æå‡ã€æµ®ç‚¹æå‡ï¼‰ï¼š`char/shortâ†’ intâ†’ floatâ†’ double`ã€‚
--
  - éšå¼è½¬æ¢ï¼šæ•´å‹è½¬æ¢ã€æµ®ç‚¹è½¬æ¢ã€æµ®ç‚¹æ•´å‹è½¬æ¢ã€æŒ‡é’ˆè½¬æ¢ã€æˆå‘˜æŒ‡é’ˆè½¬æ¢ã€å¸ƒå°”è½¬æ¢ã€‚
--
  - ç”¨æˆ·å®šä¹‰çš„ç±»ç±»å‹è½¬æ¢ï¼šç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œç±»å‹è½¬æ¢å‡½æ•°ç­‰ã€‚
  
    ![å‚æ•°ç±»å‹åŒ¹é…è§„åˆ™](/home/linbird/Londa/img/lang/pair-order.jpg)
@@@ -3305,7 -3305,7 +3365,7 @@@ foo( C() );///åŒ¹é…#2å¤±è´¥ï¼ŒåŒ¹é…#1
  
  ## è¦†ç›–**override**
  
--æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªç±»ä¸­**ï¼Œå¤šæ–¹çš„å‡½æ•°åã€å‚æ•°åˆ—è¡¨ä»¥åŠè¿”å›å€¼ç±»å‹å®Œå…¨ç›¸åŒï¼ŒåŸºç±»çš„å‡½æ•°å¿…é¡»ç”±virtualä¿®é¥°ï¼Œå­ç±»é‡å†™çš„æ–¹æ³•å¯ä»¥åŠ `override`å…³é”®å­—ã€‚**è¿”å›å€¼ç±»å‹å¯ä»¥ä¸åŒ**ï¼Œæ­¤æ—¶ä¸åŒæ˜¯æŒ‡å‡½æ•°è¿”å›æœ¬ç±»ç±»å‹çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µç§°ä¸º**åå˜**ã€‚
++æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªç±»ä¸­**ï¼Œå¤šæ–¹çš„å‡½æ•°åã€å‚æ•°åˆ—è¡¨ä»¥åŠè¿”å›å€¼ç±»å‹å®Œå…¨ç›¸åŒï¼ŒåŸºç±»çš„å‡½æ•°å¿…é¡»ç”±virtualä¿®é¥°ï¼Œå­ç±»é‡å†™çš„æ–¹æ³•å¯ä»¥åŠ  `override`å…³é”®å­—ã€‚**è¿”å›å€¼ç±»å‹å¯ä»¥ä¸åŒ**ï¼Œæ­¤æ—¶ä¸åŒæ˜¯æŒ‡å‡½æ•°è¿”å›æœ¬ç±»ç±»å‹çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µç§°ä¸º**åå˜**ã€‚
  
  ## æ”¹å†™**overwrite**/éšè—
  
@@@ -3313,42 -3313,42 +3373,53 @@@
  
  ## æ€»ç»“
  
--|                   | é‡è½½overload |               è¦†ç›–override                |      æ”¹å†™overwrite/éšè—      |
--| :---------------: | :----------: | :---------------------------------------: | :--------------------------: |
--|    **å…³é”®å­—**     |      æ—       |                 override                  |              æ—               |
--|    **ä½œç”¨åŸŸ**     |  åŒä¸€ä½œç”¨åŸŸ  |                ç»§æ‰¿ç±»ä¹‹é—´                 |          å¤šä¸ªä½œç”¨åŸŸ          |
--| **virtualå…³é”®å­—** |   å¯æœ‰å¯æ—    |                çˆ¶ç±»å¿…é¡»æœ‰                 | å¯æœ‰å¯æ— (å’Œè¦†ç›–å†²çªåˆ™ä¸ºè¦†ç›–) |
--|    **æ–¹æ³•å**     |   å®Œå…¨ç›¸åŒ   |                 å®Œå…¨ç›¸åŒ                  |           å®Œå…¨ç›¸åŒ           |
--|   **æ–¹æ³•å‚æ•°**    |     ä¸åŒ     |                 å®Œå…¨ç›¸åŒ                  |          å¯åŒå¯ä¸åŒ          |
--|  **è¿”å›å€¼ç±»å‹**   |  å¯åŒå¯ä¸åŒ  | ä¸€èˆ¬ç›¸åŒï¼ˆä¸åŒï¼šåå˜,è¿”å›thisæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰ |          å¯åŒå¯ä¸åŒ          |
--|     **ä½œç”¨**      |   é™æ€å¤šæ€   |                 åŠ¨æ€å¤šæ€                  |     å±è”½å…¶ä»–ä½œç”¨åŸŸçš„å½±å“     |
++|                        | é‡è½½overload |               è¦†ç›–override               |      æ”¹å†™overwrite/éšè—      |
++| :---------------------: | :----------: | :---------------------------------------: | :--------------------------: |
++|    **å…³é”®å­—**    |      æ—       |                 override                 |              æ—               |
++|    **ä½œç”¨åŸŸ**    |  åŒä¸€ä½œç”¨åŸŸ  |                ç»§æ‰¿ç±»ä¹‹é—´                |          å¤šä¸ªä½œç”¨åŸŸ          |
++| **virtualå…³é”®å­—** |   å¯æœ‰å¯æ—    |                çˆ¶ç±»å¿…é¡»æœ‰                | å¯æœ‰å¯æ— (å’Œè¦†ç›–å†²çªåˆ™ä¸ºè¦†ç›–) |
++|    **æ–¹æ³•å**    |   å®Œå…¨ç›¸åŒ   |                 å®Œå…¨ç›¸åŒ                 |           å®Œå…¨ç›¸åŒ           |
++|   **æ–¹æ³•å‚æ•°**   |     ä¸åŒ     |                 å®Œå…¨ç›¸åŒ                 |          å¯åŒå¯ä¸åŒ          |
++|  **è¿”å›å€¼ç±»å‹**  |  å¯åŒå¯ä¸åŒ  | ä¸€èˆ¬ç›¸åŒï¼ˆä¸åŒï¼šåå˜,è¿”å›thisæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰ |          å¯åŒå¯ä¸åŒ          |
++|     **ä½œç”¨**     |   é™æ€å¤šæ€   |                 åŠ¨æ€å¤šæ€                 |     å±è”½å…¶ä»–ä½œç”¨åŸŸçš„å½±å“     |
  
  # å¼‚å¸¸å¤„ç†
  
  * C++å¤„ç†å¼‚å¸¸çš„æœºåˆ¶æ˜¯ç”±æ£€æŸ¥(try)ã€æŠ›å‡º(throw)å’Œæ•æ‰(catch)3ä¸ªéƒ¨åˆ†ç»„æˆ
  * å½“å¼‚å¸¸è¢«æ­£ç¡®æ•æ‰åï¼Œæ‰€æœ‰ä»tryåˆ°throwè¯­å¥ä¹‹é—´æ„é€ èµ·æ¥çš„å¯¹è±¡çš„ææ„å‡½æ•°å°†è¢«è‡ªåŠ¨è°ƒç”¨ã€‚å¦åˆ™å½“ç³»ç»Ÿè°ƒç”¨terminate()ç»ˆæ­¢æ•´ä¸ªç¨‹åºï¼Œè¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä¿è¯æ‰€æœ‰å±€éƒ¨å¯¹è±¡ä¼šè¢«æ­£ç¡®åœ°é”€æ¯ã€‚
++
  ## catchå—
++
  * Catchå—å¯ä»¥ä»»ä½•é¡ºåºæ’åˆ—ï¼Œå¼‚å¸¸å¤„ç†çš„é¡ºåºæ˜¯é¦–å…ˆè¿›å…¥ä¸å¼‚å¸¸ç±»å‹åŒ¹é…ä¸”ç¦»æŠ›å‡ºå¼‚å¸¸ä½ç½®æœ€è¿‘çš„é‚£ä¸€ä¸ªã€‚
  * catchå—ä»…é€šè¿‡ç±»å‹è€Œä¸æ˜¯é€šè¿‡å€¼æ¥åŒ¹é…çš„ï¼Œæ‰€ä»¥catchå—çš„å‚æ•°å¯ä»¥æ²¡æœ‰å‚æ•°åç§°ï¼Œåªéœ€è¦å‚æ•°ç±»å‹ã€‚
  * å¦‚æœç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸æ²¡æœ‰å¯¹åº”ç±»å‹çš„catchå—æ•æ‰å¤„ç†ï¼Œé»˜è®¤å°†ä¼šæŠŠè¿™ç§å¼‚å¸¸äº¤ç»™unexpected()å‡½æ•°å¤„ç†ã€‚
  * catchå—ä¸èƒ½è®¿é—®tryå—ä¸­å®šä¹‰çš„å˜é‡
++
  ### catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢
  
  1. éå¸¸é‡è½¬æ¢åˆ°å¸¸é‡çš„ç±»å‹è½¬æ¢
  2. æ´¾ç”Ÿç±»åˆ°åŸºç±»çš„è½¬æ¢
  3. æ•°ç»„è¢«è½¬æ¢æˆä¸ºæŒ‡å‘æ•°ç»„ï¼ˆå…ƒç´ ï¼‰ç±»å‹çš„æŒ‡é’ˆï¼Œå‡½æ•°è¢«è½¬æ¢æˆæŒ‡å‘è¯¥å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼ˆé™çº§é—®é¢˜ï¼‰
  4. æ ‡å‡†ç®—æœ¯ç±»å‹çš„è½¬æ¢å’Œç±»ç±»å‹è½¬æ¢(ä½¿ç”¨ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦å’Œè½¬æ¢æ„é€ å‡½æ•°)ã€‚
++
  ## throw
++
  * throwå…ˆé€šè¿‡Copyæ„é€ å‡½æ•°æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå†æŠŠè¯¥æ–°å¯¹è±¡ä¼ é€’ç»™ catch.
  * å¼‚å¸¸æŠ›å‡ºçš„æ–°å¯¹è±¡å¹¶éåˆ›å»ºåœ¨å‡½æ•°æ ˆä¸Šï¼Œè€Œæ˜¯åˆ›å»ºåœ¨ä¸“ç”¨çš„å¼‚å¸¸æ ˆä¸Šï¼Œå› æ­¤å®ƒæ‰å¯ä»¥è·¨æ¥å¤šä¸ªå‡½æ•°è€Œä¼ é€’åˆ°ä¸Šå±‚
++
  ## å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨
++
  * C++ å…è®¸åœ¨å‡½æ•°å£°æ˜å’Œå®šä¹‰æ—¶ï¼Œåœ¨å‡½æ•°çš„()åæ–¹åŠ ä¸Šthrowå…³é”®å­—å’Œå®ƒæ‰€èƒ½æ‹‹å‡ºçš„å¼‚å¸¸ç±»å‹åˆ—è¡¨ã€‚å¦‚æœä¸å†™åˆ™è¡¨ç¤ºå¯ä»¥æŠ›å‡ºä»»æ„ç±»å‹çš„å¼‚å¸¸ï¼Œåˆ—è¡¨ä¸ºç©ºä»£è¡¨ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
++
  ## å¼‚å¸¸ç§ç±»
++
  ### æ ‡å‡†å¼‚å¸¸
--*  æ ‡å‡†å¼‚å¸¸éƒ½æ˜¯ä»ç±»`exception`ä¸­æ´¾ç”Ÿçš„ç±»ï¼Œéƒ½å«æœ‰æ–¹æ³•`what()`ç”¨ä»¥ä»¥å­—ç¬¦ä¸²å½¢å¼æ˜¾å¼å¼‚å¸¸ä¿¡æ¯ã€‚
--![](./img/lang/exception.jpg)
++
++* æ ‡å‡†å¼‚å¸¸éƒ½æ˜¯ä»ç±» `exception`ä¸­æ´¾ç”Ÿçš„ç±»ï¼Œéƒ½å«æœ‰æ–¹æ³• `what()`ç”¨ä»¥ä»¥å­—ç¬¦ä¸²å½¢å¼æ˜¾å¼å¼‚å¸¸ä¿¡æ¯ã€‚
++  ![](./img/lang/exception.jpg)
  
  ### è‡ªå®šä¹‰å¼‚å¸¸
++
  * éœ€è¦ä»æ ‡å‡†å¼‚å¸¸ä¸­ç»§æ‰¿
  
  # çº¿ç¨‹ä¸åŸå­æ“ä½œ
@@@ -3362,13 -3362,13 +3433,12 @@@
  ### `tuple`å®¹å™¨(CPP11)
  
  + ä½œç”¨ï¼šæä¾›ä¸€ä¸ªå¯ä»¥å­˜å‚¨å¤šç§å¤šä¸ªç±»å‹çš„å€¼çš„ä¸€ä¸­æ³›å‹å®¹å™¨ç±»ã€‚
--+ å¯¹`tuple<>`ç±»å‹çš„è®¿é—®æœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯`std::get<index>(obj)`æ–¹æ³•ï¼Œä¸€ç§æ˜¯`std::tie(varname...) = var`æ–¹æ³•ã€‚å‰è€…éœ€è¦æä¾›æ‰€éœ€æˆå‘˜åœ¨tupleä¸­çš„ä¸‹æ ‡indexï¼Œåè€…æ‹¬å·å†…çš„varnameéƒ½å¿…é¡»æå‰ç”³æ˜ã€‚
+++ å¯¹ `tuple<>`ç±»å‹çš„è®¿é—®æœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯ `std::get<index>(obj)`æ–¹æ³•ï¼Œä¸€ç§æ˜¯ `std::tie(varname...) = var`æ–¹æ³•ã€‚å‰è€…éœ€è¦æä¾›æ‰€éœ€æˆå‘˜åœ¨tupleä¸­çš„ä¸‹æ ‡indexï¼Œåè€…æ‹¬å·å†…çš„varnameéƒ½å¿…é¡»æå‰ç”³æ˜ã€‚
  
  ### `decltype`åç½®è¿”å›ç±»å‹
  
  + `auto function_name(Args...) -> decltype`(è¿”å›ç±»å‹è®¡ç®—è¡¨è¾¾å¼);
  
--
  ### æ–°åˆå§‹åŒ–æœºåˆ¶
  
  #### [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)
@@@ -3387,7 -3387,7 +3457,7 @@@
  
  ### ç±»å‹åˆ«å
  
--**`typedef Old/CertainType NewType`**ä¹Ÿå¯ä»¥å®šä¹‰ç±»å‹åˆ«åï¼Œä½†æ˜¯å…¶è¡¨è¾¾æ–¹å¼ä¸å¤Ÿç›´è§‚ï¼Œä¹Ÿç¼ºä¹å¯¹æ¨¡æ¿çš„ä¸€äº›æ”¯æŒï¼Œäºæ˜¯C++11å¼•å…¥äº†`using`ï¼Œä½¿ç”¨**`using NewType = Old/CertainType`**å¯ä»¥å®Œæˆå’Œ`typedef`ä¸€æ ·å®šä¹‰ç±»å‹åˆ«åçš„å·¥ä½œï¼Œ`using`åŒæ—¶æ”¯æŒäº†`typedef`ä¸æ”¯æŒçš„åŠŸèƒ½ï¼ˆå¯¹æ¨¡æ¿åˆ«åçš„æ”¯æŒï¼‰ã€‚
++**`typedef Old/CertainType NewType`**ä¹Ÿå¯ä»¥å®šä¹‰ç±»å‹åˆ«åï¼Œä½†æ˜¯å…¶è¡¨è¾¾æ–¹å¼ä¸å¤Ÿç›´è§‚ï¼Œä¹Ÿç¼ºä¹å¯¹æ¨¡æ¿çš„ä¸€äº›æ”¯æŒï¼Œäºæ˜¯C++11å¼•å…¥äº† `using`ï¼Œä½¿ç”¨** `using NewType = Old/CertainType`**å¯ä»¥å®Œæˆå’Œ `typedef`ä¸€æ ·å®šä¹‰ç±»å‹åˆ«åçš„å·¥ä½œï¼Œ`using`åŒæ—¶æ”¯æŒäº† `typedef`ä¸æ”¯æŒçš„åŠŸèƒ½ï¼ˆå¯¹æ¨¡æ¿åˆ«åçš„æ”¯æŒï¼‰ã€‚
  
  å’Œå½“åœ¨ç±»ä¸­æˆ–åˆ«çš„ä½œç”¨åŸŸä¸­å®šä¹‰äº†ç±»å‹åˆ«åè€Œåˆæƒ³è·å–å…¶ä¸­çš„ç±»å‹æ—¶ï¼Œå¿…é¡»åœ¨è¿™ä¸ªç±»å‹å‰åŠ ä¸Š**`typename`**ä»¥é¿å…ç¼–è¯‘å™¨å°†ç±»ä¸­çš„ç±»å‹å½“ä½œæ™®é€šå˜é‡ã€‚
  
@@@ -3420,7 -3420,7 +3490,7 @@@ template <typename T> using alais_iter
  
  ### `nullptr`
  
--ä¸ºäº†**é˜²æ­¢é‡æŒ‡é’ˆ**ã€ç¨‹åºéœ€è¦å°†ä¸€äº›æŒ‡é’ˆè®¾ç½®ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨Cå¯ä»¥ä½¿ç”¨`NULLã€0ã€(type *)0`æ¥ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå…¶ä¸­çš„`NULL`æ˜¯æ ‡å‡†åº“ä¸­çš„å®å®šä¹‰ï¼ŒC/C++æ ‡å‡†è§„å®šå…¶å€¼ï¼ˆç”±å®ç°å®šä¹‰ï¼‰ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆå¸¸é‡ã€‚
++ä¸ºäº†**é˜²æ­¢é‡æŒ‡é’ˆ**ã€ç¨‹åºéœ€è¦å°†ä¸€äº›æŒ‡é’ˆè®¾ç½®ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨Cå¯ä»¥ä½¿ç”¨ `NULLã€0ã€(type *)0`æ¥ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå…¶ä¸­çš„ `NULL`æ˜¯æ ‡å‡†åº“ä¸­çš„å®å®šä¹‰ï¼ŒC/C++æ ‡å‡†è§„å®šå…¶å€¼ï¼ˆç”±å®ç°å®šä¹‰ï¼‰ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆå¸¸é‡ã€‚
  
  ```c++
  #if defined(__cplusplus)
@@@ -3430,20 -3430,20 +3500,20 @@@
  #endif
  ```
  
--åœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œå‡ºäºå…¼å®¹æ€§çš„è€ƒè™‘ï¼Œå­—é¢å¸¸é‡0çš„äºŒä¹‰æ€§å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ã€‚ä½†æ–°æ ‡å‡†æä¾›äº†ç¼–è¯‘æœŸå¸¸é‡`nullptr`ä»£è¡¨æŒ‡é’ˆç©ºå€¼ç±»å‹çš„å¸¸é‡ã€‚
++åœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œå‡ºäºå…¼å®¹æ€§çš„è€ƒè™‘ï¼Œå­—é¢å¸¸é‡0çš„äºŒä¹‰æ€§å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ã€‚ä½†æ–°æ ‡å‡†æä¾›äº†ç¼–è¯‘æœŸå¸¸é‡ `nullptr`ä»£è¡¨æŒ‡é’ˆç©ºå€¼ç±»å‹çš„å¸¸é‡ã€‚
  
  ```c++
  typedef decltype(nullptr) nullptr_t;
  ```
  
--|    å€¼     |             æœ¬è´¨              |               è¿ç®—               |
--| :-------: | :---------------------------: | :------------------------------: |
--|  `NULL`   |      æ ‡å‡†åº“å®šä¹‰çš„**å®**       |        æ”¯æŒç®—æœ¯ã€å…³ç³»è¿ç®—        |
++|     å€¼     |              æœ¬è´¨              |               è¿ç®—               |
++| :---------: | :-----------------------------: | :------------------------------: |
++|  `NULL`  |    æ ‡å‡†åº“å®šä¹‰çš„**å®**    |        æ”¯æŒç®—æœ¯ã€å…³ç³»è¿ç®—        |
  | `nullptr` | `nullptr_t`ç±»å‹çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ | ä¸æ”¯æŒç®—æœ¯ã€ä»…æ”¯æŒä¸æŒ‡é’ˆå…³ç³»è¿ç®— |
  
--`nullptr_t`ç±»å‹æ•°æ®å¯ä»¥éšå¼è½¬æ¢æˆä»»æ„ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œä¸èƒ½ä»¥ä»»ä½•æ‰‹æ®µï¼ˆåŒ…å«`reinterpret_acst<>()`ï¼‰è½¬æ¢ä¸ºä»»æ„å…¶ä»–éæŒ‡é’ˆç±»å‹ã€‚
++`nullptr_t`ç±»å‹æ•°æ®å¯ä»¥éšå¼è½¬æ¢æˆä»»æ„ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œä¸èƒ½ä»¥ä»»ä½•æ‰‹æ®µï¼ˆåŒ…å« `reinterpret_acst<>()`ï¼‰è½¬æ¢ä¸ºä»»æ„å…¶ä»–éæŒ‡é’ˆç±»å‹ã€‚
  
--æ‰€æœ‰`nullptr_t`ç±»å‹çš„æ•°æ®æ˜¯ç­‰ä»·çš„ã€ä¸èƒ½å‚ä¸ç®—æœ¯è¿ç®—ã€åªèƒ½å’ŒæŒ‡é’ˆç±»å‹è¿›è¡Œå…³ç³»è¿ç®—ã€‚
++æ‰€æœ‰ `nullptr_t`ç±»å‹çš„æ•°æ®æ˜¯ç­‰ä»·çš„ã€ä¸èƒ½å‚ä¸ç®—æœ¯è¿ç®—ã€åªèƒ½å’ŒæŒ‡é’ˆç±»å‹è¿›è¡Œå…³ç³»è¿ç®—ã€‚
  
  ### å¯å˜å‚æ•°
  
@@@ -3451,16 -3451,16 +3521,16 @@@
  
  #### å¯å˜å‡½æ•°å‚æ•°
  
--| [å…¥æ ˆè§„åˆ™](https://blog.csdn.net/yexiangCSDN/article/details/83900366) |   æ¸…ç†æ–¹   |              å‚æ•°é¡ºåº               |        å‡½æ•°ç­¾åè§„åˆ™        |
--| :----------------------------------------------------------: | :--------: | :---------------------------------: | :------------------------: |
--|                           `cdecl`                            | å‡½æ•°è°ƒç”¨æ–¹ |              ä»å³å‘å·¦               |       ä¸‹åˆ’çº¿+å‡½æ•°å        |
--|                          `stdcall`                           | è¢«è°ƒç”¨å‡½æ•° |              ä»å³å‘å·¦               | ä¸‹åˆ’çº¿+å‡½æ•°å+@+å‚æ•°å­—èŠ‚æ•° |
--|                          `fastcall`                          | è¢«è°ƒç”¨å‡½æ•° | å‰ä¸¤ä¸ª`DWORD`è¿›å¯„å­˜å™¨ï¼Œå…¶ä½™è‡ªå³å‘å·¦ |    @+å‡½æ•°å+@å‚æ•°å­—èŠ‚æ•°    |
--|                           `pacall`                           | è¢«è°ƒç”¨å‡½æ•° |              ä»å·¦å‘å³               |            å¤æ‚            |
++| [å…¥æ ˆè§„åˆ™](https://blog.csdn.net/yexiangCSDN/article/details/83900366) |   æ¸…ç†æ–¹   |                å‚æ•°é¡ºåº                |        å‡½æ•°ç­¾åè§„åˆ™        |
++| :-----------------------------------------------------------------: | :--------: | :------------------------------------: | :------------------------: |
++|                              `cdecl`                              | å‡½æ•°è°ƒç”¨æ–¹ |                ä»å³å‘å·¦                |       ä¸‹åˆ’çº¿+å‡½æ•°å       |
++|                             `stdcall`                             | è¢«è°ƒç”¨å‡½æ•° |                ä»å³å‘å·¦                | ä¸‹åˆ’çº¿+å‡½æ•°å+@+å‚æ•°å­—èŠ‚æ•° |
++|                            `fastcall`                            | è¢«è°ƒç”¨å‡½æ•° | å‰ä¸¤ä¸ª `DWORD`è¿›å¯„å­˜å™¨ï¼Œå…¶ä½™è‡ªå³å‘å·¦ |    @+å‡½æ•°å+@å‚æ•°å­—èŠ‚æ•°    |
++|                             `pacall`                             | è¢«è°ƒç”¨å‡½æ•° |                ä»å·¦å‘å³                |            å¤æ‚            |
  
--å¯å˜å‚æ•°çš„å®ç°**ä¾èµ–äºå‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„**ï¼ŒCä¸­çš„å¯å˜å‚æ•°ç”±**å¼ºåˆ¶å‚æ•°**ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰å’Œ**å¯é€‰å‚æ•°**ï¼ˆç±»å‹å¯å˜åŒ–ã€æ•°é‡ç”±å¼ºåˆ¶å‚æ•°æˆ–å¯é€‰å‚æ•°åˆ—è¡¨ä¸­çš„ç‰¹æ®Šå€¼å†³å®šï¼‰ä¸¤éƒ¨åˆ†æ„æˆã€‚å¸¸è§„çš„å‡½æ•°è°ƒç”¨å‚æ•°å…¥æ ˆè§„åˆ™æ˜¯ä»å³åˆ°å·¦å…¥æ ˆçš„ï¼Œè¿™æ ·æœ€å·¦è¾¹çš„å¼ºåˆ¶å‚æ•°ä¼šåœ¨æœ€åå…¥æ ˆï¼Œå…¶åœ°å€å°±æ˜¯æ ˆä¸­æœ‰æ•ˆå‚æ•°çš„è¾¹ç•Œã€‚ç”±äº**å†…å­˜å¯¹é½**ï¼Œæ ˆä¸­å‚æ•°çš„æœ‰æ•ˆæ•°æ®å¹¶ä¸æ˜¯ç›¸é‚»çš„ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å˜å‚çš„ç±»å‹å°†å…¶æ”¾åˆ°æ»¡è¶³ç±»å‹å¯¹é½çš„åœ°å€ä¸Šï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨åœ¨32ä½OSä¸‹å°†**æ ˆå•å…ƒ**é™å®šä¸º`sizeof(int)`ï¼Œ**æ¯ä¸ªå‚æ•°æ‰€å å¤§å°ä»¥æ ˆå•å…ƒä¸ºåŸºç¡€å•ä½**ã€‚
++å¯å˜å‚æ•°çš„å®ç°**ä¾èµ–äºå‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„**ï¼ŒCä¸­çš„å¯å˜å‚æ•°ç”±**å¼ºåˆ¶å‚æ•°**ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰å’Œ**å¯é€‰å‚æ•°**ï¼ˆç±»å‹å¯å˜åŒ–ã€æ•°é‡ç”±å¼ºåˆ¶å‚æ•°æˆ–å¯é€‰å‚æ•°åˆ—è¡¨ä¸­çš„ç‰¹æ®Šå€¼å†³å®šï¼‰ä¸¤éƒ¨åˆ†æ„æˆã€‚å¸¸è§„çš„å‡½æ•°è°ƒç”¨å‚æ•°å…¥æ ˆè§„åˆ™æ˜¯ä»å³åˆ°å·¦å…¥æ ˆçš„ï¼Œè¿™æ ·æœ€å·¦è¾¹çš„å¼ºåˆ¶å‚æ•°ä¼šåœ¨æœ€åå…¥æ ˆï¼Œå…¶åœ°å€å°±æ˜¯æ ˆä¸­æœ‰æ•ˆå‚æ•°çš„è¾¹ç•Œã€‚ç”±äº**å†…å­˜å¯¹é½**ï¼Œæ ˆä¸­å‚æ•°çš„æœ‰æ•ˆæ•°æ®å¹¶ä¸æ˜¯ç›¸é‚»çš„ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å˜å‚çš„ç±»å‹å°†å…¶æ”¾åˆ°æ»¡è¶³ç±»å‹å¯¹é½çš„åœ°å€ä¸Šï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨åœ¨32ä½OSä¸‹å°†**æ ˆå•å…ƒ**é™å®šä¸º `sizeof(int)`ï¼Œ**æ¯ä¸ªå‚æ•°æ‰€å å¤§å°ä»¥æ ˆå•å…ƒä¸ºåŸºç¡€å•ä½**ã€‚
  
--åŸºäºä»¥ä¸Šå­˜å‚¨ç»“æ„ç‰¹å¾ï¼Œå¯å˜å‚æ•°å‡½æ•°å¿…é¡»**ä»å¼ºåˆ¶å‚æ•°æ¥é€ä¸ªå¯»å€åç»­çš„æ‰€æœ‰å¯å˜å‚æ•°çš„ç±»å‹åŠå…¶å€¼**ã€‚ä¸ºæ­¤Cæ ‡å‡†åº“`stdarg.h`æä¾›äº†ä¸€ç³»åˆ—å®ç”¨æ¥è§£æå¯å˜å‚æ•°ã€‚
++åŸºäºä»¥ä¸Šå­˜å‚¨ç»“æ„ç‰¹å¾ï¼Œå¯å˜å‚æ•°å‡½æ•°å¿…é¡»**ä»å¼ºåˆ¶å‚æ•°æ¥é€ä¸ªå¯»å€åç»­çš„æ‰€æœ‰å¯å˜å‚æ•°çš„ç±»å‹åŠå…¶å€¼**ã€‚ä¸ºæ­¤Cæ ‡å‡†åº“ `stdarg.h`æä¾›äº†ä¸€ç³»åˆ—å®ç”¨æ¥è§£æå¯å˜å‚æ•°ã€‚
  
  ```c
  typedef char* va_list;//å‚æ•°æŒ‡é’ˆç±»å‹ï¼šç”¨è¯¥ç±»å‹çš„å˜é‡ä»£è¡¨æ ˆè¾¹ç•Œï¼ˆå½“å‰å‚æ•°ï¼‰çš„åœ°å€
@@@ -3486,7 -3486,7 +3556,7 @@@ template< class... Types > class tuple;
  
  ###### åç‰¹åŒ–å±•å¼€
  
--å…¶å±•å¼€åŸç†ä¸é€’å½’å±•å¼€ç±»ä¼¼ï¼Œåˆ©ç”¨äº†æ¨¡æ¿çš„å‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæ¯æ¬¡å±•å¼€éƒ½ä¼šè¿›å…¥ä¸€ä¸ªåç‰¹åŒ–çš„ç±»ä¸­ã€‚ä»¥ä¸‹çš„`struct Sum`å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå¯å˜æ¨¡æ¿ç±»çš„å‚æ•°å¤§å°ä¹‹å’Œã€‚
++å…¶å±•å¼€åŸç†ä¸é€’å½’å±•å¼€ç±»ä¼¼ï¼Œåˆ©ç”¨äº†æ¨¡æ¿çš„å‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæ¯æ¬¡å±•å¼€éƒ½ä¼šè¿›å…¥ä¸€ä¸ªåç‰¹åŒ–çš„ç±»ä¸­ã€‚ä»¥ä¸‹çš„ `struct Sum`å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå¯å˜æ¨¡æ¿ç±»çš„å‚æ•°å¤§å°ä¹‹å’Œã€‚
  
  ```c++
  template<typename First, typename ...Rest> struct Sum{///æ­¤å†™æ³•è¦æ±‚è‡³å°‘ä¸€ä¸ªç±»æ¨¡æ¿å‚æ•°
@@@ -3669,7 -3669,7 +3739,8 @@@ CreateDelegate()å‡½æ•°ç”³æ˜çš„ç¬¬äºŒä¸
  
  ##### `initializer_list`å®ç°
  
--åœ¨å‚æ•°çš„ç±»å‹éƒ½ç›¸åŒä½†æ˜¯å‚æ•°ä¸ªæ•°ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä¼ é€’`initializer_list`ç±»å‹çš„å‚æ•°ï¼Œè¯¥ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚
++åœ¨å‚æ•°çš„ç±»å‹éƒ½ç›¸åŒä½†æ˜¯å‚æ•°ä¸ªæ•°ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä¼ é€’ `initializer_list`ç±»å‹çš„å‚æ•°ï¼Œè¯¥ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚
++
  ```c++
  size_t func(initializer_list<string> li){
  	for(auto beg=li.begin(); beg!=li.end(); ++beg);
@@@ -3681,7 -3681,7 +3752,8 @@@ func({"This", "is", "C++", "!"})
  
  ##### [`...`å®ç°](https://www.jianshu.com/p/fc6476265327)
  
--å°†`...`æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åä¸€é¡¹ç”¨æ¥è¡¨ç¤ºå˜é•¿å‚æ•°éƒ¨åˆ†ã€‚è¯¥æ–¹æ³•åº”è¯¥**åªç”¨äºCå’ŒC++çš„çš„åŸºæœ¬ç±»å‹**ï¼ˆç”±äºå¤åˆæ•°æ®ç±»å‹åœ¨ä¼ é€’å‚æ•°æ—¶å¯èƒ½æ— æ³•æ­£ç¡®ä¼ é€’ï¼‰ã€‚è¯¥æ–¹æ³•éœ€è¦ç”¨åˆ°åº“æä¾›çš„å‡ ä¸ªå®ç”¨æ¥è·å–æ¯ä¸€ä¸ªå‚æ•°
++å°† `...`æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åä¸€é¡¹ç”¨æ¥è¡¨ç¤ºå˜é•¿å‚æ•°éƒ¨åˆ†ã€‚è¯¥æ–¹æ³•åº”è¯¥**åªç”¨äºCå’ŒC++çš„çš„åŸºæœ¬ç±»å‹**ï¼ˆç”±äºå¤åˆæ•°æ®ç±»å‹åœ¨ä¼ é€’å‚æ•°æ—¶å¯èƒ½æ— æ³•æ­£ç¡®ä¼ é€’ï¼‰ã€‚è¯¥æ–¹æ³•éœ€è¦ç”¨åˆ°åº“æä¾›çš„å‡ ä¸ªå®ç”¨æ¥è·å–æ¯ä¸€ä¸ªå‚æ•°
++
  ```c++
  #include<cstdarg>  // Cä¸­æ˜¯<stdarg.h>
  
@@@ -3698,7 -3698,7 +3770,9 @@@ add_nums(4, 25, 25, 50, 50)
  ```
  
  #### å¯å˜å‚æ•°åŸºç±»
++
  å¯ä»¥çµæ´»çš„æ§åˆ¶éœ€è¦è¢«ç»§æ‰¿çš„çˆ¶ç±»çš„ä¸ªæ•°å’Œç±»åˆ«
++
  ```c++
  class Gemfield{
      public:
@@@ -3725,7 -3725,7 +3799,7 @@@ This is base class CivilNet
  
  ### [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](https://zhuanlan.zhihu.com/p/21314708)
  
--ä¸ºäº†å®ç°å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨éœ€è¦æ¯ä¸€ä¸ªé‡è½½è°ƒç”¨é€‰æ‹©æœ€åˆé€‚çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå½“è¿™äº›**é‡è½½å‡½æ•°åŒ…å«æ¨¡æ¿å‡½æ•°**æ—¶ï¼Œå°±æ¶‰åŠåˆ°æ›¿æ¢çš„é—®é¢˜ã€‚å³ç¼–è¯‘å™¨é¦–å…ˆç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ã€ç„¶åå°†å‡½æ•°å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼çš„æ¨¡æ¿å‚æ•°æ›¿æ¢æ‰ï¼ˆsubstituteï¼‰ï¼Œåœ¨è¿™ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ä¸­ä¼šæ¨å¯¼å‡ºå¤šç§å¯èƒ½çš„æ›¿æ¢æ–¹æ³•ï¼Œå¦‚æœå…¶ä¸­æŸä¸€ä¸ªæˆ–è€…æŸå‡ ä¸ªæ¨¡æ¿å‡½æ•°æ¨å¯¼å‡ºæ¥æ›¿æ¢ç»“æœæ— æ„ä¹‰ï¼ˆæ— æ³•ç¼–è¯‘ï¼‰ï¼Œé‚£ä¹ˆ**åªè¦æœ‰ä¸€ä¸ªå¯ä»¥æ­£ç¡®æ¨å¯¼å‡ºæ¥**ï¼Œé‚£ä¹ˆé‚£äº›æ— æ„ä¹‰çš„æ¨å¯¼æ›¿æ¢**ä¸ä¼šè§¦å‘ç¼–è¯‘å™¨çš„é”™è¯¯**ï¼Œè¿™æ ·ä¸€å¥—è§„åˆ™å³`SFINAE`è§„åˆ™ã€‚
++ä¸ºäº†å®ç°å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨éœ€è¦æ¯ä¸€ä¸ªé‡è½½è°ƒç”¨é€‰æ‹©æœ€åˆé€‚çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå½“è¿™äº›**é‡è½½å‡½æ•°åŒ…å«æ¨¡æ¿å‡½æ•°**æ—¶ï¼Œå°±æ¶‰åŠåˆ°æ›¿æ¢çš„é—®é¢˜ã€‚å³ç¼–è¯‘å™¨é¦–å…ˆç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ã€ç„¶åå°†å‡½æ•°å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼çš„æ¨¡æ¿å‚æ•°æ›¿æ¢æ‰ï¼ˆsubstituteï¼‰ï¼Œåœ¨è¿™ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ä¸­ä¼šæ¨å¯¼å‡ºå¤šç§å¯èƒ½çš„æ›¿æ¢æ–¹æ³•ï¼Œå¦‚æœå…¶ä¸­æŸä¸€ä¸ªæˆ–è€…æŸå‡ ä¸ªæ¨¡æ¿å‡½æ•°æ¨å¯¼å‡ºæ¥æ›¿æ¢ç»“æœæ— æ„ä¹‰ï¼ˆæ— æ³•ç¼–è¯‘ï¼‰ï¼Œé‚£ä¹ˆ**åªè¦æœ‰ä¸€ä¸ªå¯ä»¥æ­£ç¡®æ¨å¯¼å‡ºæ¥**ï¼Œé‚£ä¹ˆé‚£äº›æ— æ„ä¹‰çš„æ¨å¯¼æ›¿æ¢**ä¸ä¼šè§¦å‘ç¼–è¯‘å™¨çš„é”™è¯¯**ï¼Œè¿™æ ·ä¸€å¥—è§„åˆ™å³ `SFINAE`è§„åˆ™ã€‚
  
  ```c++
  struct Test { typedef int foo;};
@@@ -3739,13 -3739,13 +3813,13 @@@ f<int>(10);  // Call #2ï¼š#1,#2éƒ½å¯ä»
  
  **æ›¿æ¢**å‘ç”Ÿåœ¨**å®ä¾‹åŒ–**ä¹‹å‰ï¼Œå³ä½¿æœ€ç»ˆä¸éœ€è¦è¢«å®ä¾‹åŒ–çš„æ¨¡æ¿ä¹Ÿè¦è¿›è¡Œæ›¿æ¢ï¼ˆåªä¼šæ›¿æ¢ç›´æ¥å‡ºç°åœ¨å‡½æ•°å£°æ˜ä¸­çš„ç›¸å…³å†…å®¹ï¼ˆä¸åŒ…å«å‡½æ•°ä½“ï¼‰ï¼‰ï¼Œå°†æ‰€æœ‰çš„å¯èƒ½é€‰æ‹©æ›¿æ¢å®Œä¹‹åï¼Œæ‰ä¼šæ ¹æ®**é‡è½½å†³è®®**ç¡®å®šå€™é€‰å‡½æ•°ï¼Œå½“æœ‰å¤šä¸ªå€™é€‰å‡½æ•°åˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ï¼Œæ²¡æœ‰å€™é€‰å¼•å‘æ— å®ç°é”™è¯¯ï¼Œåªæœ‰æœ‰å”¯ä¸€å€™é€‰å‡½æ•°æ—¶ä¸”è¯¥å€™é€‰å‡½æ•°ä¸ºæ¨¡æ¿å‡½æ•°æ—¶ç¼–è¯‘å™¨æ‰ä¼šå®ä¾‹åŒ–æ­¤å‡½æ•°ã€‚
  
--### æ¨¡æ¿ç±»`enable_if`
++### æ¨¡æ¿ç±» `enable_if`
  
--[SFINAEï¼šsubstitution failure is not an error](https://www.wikiwand.com/zh-cn/%E6%9B%BF%E6%8D%A2%E5%A4%B1%E8%B4%A5%E5%B9%B6%E9%9D%9E%E9%94%99%E8%AF%AF) è§„åˆ™æ˜¯æ¨¡æ¿ç±»`enable_if<>`æœ€æ ¸å¿ƒçš„åŸç†ï¼Œåˆ©ç”¨è¯¥æ¨¡æ¿ç±»å¯ä»¥æ›´å¥½çš„æ§åˆ¶æ¨¡æ¿çš„ç¼–è¯‘å’Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚
++[SFINAEï¼šsubstitution failure is not an error](https://www.wikiwand.com/zh-cn/%E6%9B%BF%E6%8D%A2%E5%A4%B1%E8%B4%A5%E5%B9%B6%E9%9D%9E%E9%94%99%E8%AF%AF) è§„åˆ™æ˜¯æ¨¡æ¿ç±» `enable_if<>`æœ€æ ¸å¿ƒçš„åŸç†ï¼Œåˆ©ç”¨è¯¥æ¨¡æ¿ç±»å¯ä»¥æ›´å¥½çš„æ§åˆ¶æ¨¡æ¿çš„ç¼–è¯‘å’Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚
  
  #### ç±»å‹åç‰¹åŒ–
  
--åœ¨**ç¼–è¯‘æ—¶æ ¡éªŒæ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§**ï¼Œæ ¹æ®æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œä¸åŒç±»å‹çš„å®ç°çš„é€‰æ‹©ï¼Œå³å®ç°äº†è‡ªå®šä¹‰å®½æ¾åº¦ï¼ˆå–å†³äº`enable_if<>`çš„æ ¡éªŒå¼ºåº¦ï¼‰çš„ç±»å‹åç‰¹åŒ–ã€‚
++åœ¨**ç¼–è¯‘æ—¶æ ¡éªŒæ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§**ï¼Œæ ¹æ®æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œä¸åŒç±»å‹çš„å®ç°çš„é€‰æ‹©ï¼Œå³å®ç°äº†è‡ªå®šä¹‰å®½æ¾åº¦ï¼ˆå–å†³äº `enable_if<>`çš„æ ¡éªŒå¼ºåº¦ï¼‰çš„ç±»å‹åç‰¹åŒ–ã€‚
  
  ```c++
  template <typename T, typename Enable=void> struct check;
@@@ -3756,7 -3756,7 +3830,7 @@@ template <typename T> struct check<T, t
  
  #### æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹
  
--å˜ç›¸å®ç°æ¨¡æ¿å‡½æ•°çš„åç‰¹åŒ–ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡æ¿å‚æ•°è¿”å›ä¸åŒç±»å‹çš„å€¼ã€‚å¦‚åº“ä¸­çš„`std::get<>(std::tuple<>)`æ ¹æ®ä¸åŒä¸‹æ ‡è¿”å›ä¸åŒç±»å‹çš„å…ƒç´ ï¼š
++å˜ç›¸å®ç°æ¨¡æ¿å‡½æ•°çš„åç‰¹åŒ–ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡æ¿å‚æ•°è¿”å›ä¸åŒç±»å‹çš„å€¼ã€‚å¦‚åº“ä¸­çš„ `std::get<>(std::tuple<>)`æ ¹æ®ä¸åŒä¸‹æ ‡è¿”å›ä¸åŒç±»å‹çš„å…ƒç´ ï¼š
  
  ```c++
  template <std::size_t k, class T, class... Ts>
@@@ -3784,7 -3784,7 +3858,7 @@@ template <typename T> typename std::ena
  
  ### å¼ºåˆ¶å¼•ç”¨
  
--åœ¨C++çš„å‡½æ•°å¼æ¥å£å¦‚`bind(...)ã€thread()`ä¸­ï¼Œå…¶å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æ‹·è´åçš„å€¼ä¼ é€’ï¼Œå³ä½¿`bind(fun, ...)`ä¸­çš„å‡½æ•°`fun(Type &)`è¦æ±‚ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼Œ`bind`è¿˜æ˜¯ä¼šåœ¨åˆ›å»ºæ—¶å°±å°†éœ€è¦çš„å‚æ•°ä»¥æ‹·è´çš„å½¢å¼ä¼ é€’ç»™`fun()`ï¼Œä¸ºäº†å®ç°å¯¹å‚æ•°çš„å¼•ç”¨ä¼ é€’ï¼Œ`C++11`å®šä¹‰äº†æ¨¡æ¿å‡½æ•°`ref<>(param)ã€cref<>(param)`ç”Ÿæˆ [std::reference_wrapper](https://zh.cppreference.com/w/cpp/utility/functional/reference_wrapper) ç±»å‹çš„å¯¹è±¡å®ç°å¯¹`param`å‚æ•°çš„å¼•ç”¨ä¼ é€’ã€‚
++åœ¨C++çš„å‡½æ•°å¼æ¥å£å¦‚ `bind(...)ã€thread()`ä¸­ï¼Œå…¶å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æ‹·è´åçš„å€¼ä¼ é€’ï¼Œå³ä½¿ `bind(fun, ...)`ä¸­çš„å‡½æ•° `fun(Type &)`è¦æ±‚ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼Œ`bind`è¿˜æ˜¯ä¼šåœ¨åˆ›å»ºæ—¶å°±å°†éœ€è¦çš„å‚æ•°ä»¥æ‹·è´çš„å½¢å¼ä¼ é€’ç»™ `fun()`ï¼Œä¸ºäº†å®ç°å¯¹å‚æ•°çš„å¼•ç”¨ä¼ é€’ï¼Œ`C++11`å®šä¹‰äº†æ¨¡æ¿å‡½æ•° `ref<>(param)ã€cref<>(param)`ç”Ÿæˆ [std::reference_wrapper](https://zh.cppreference.com/w/cpp/utility/functional/reference_wrapper) ç±»å‹çš„å¯¹è±¡å®ç°å¯¹ `param`å‚æ•°çš„å¼•ç”¨ä¼ é€’ã€‚
  
  **`std::reference_wrapper` ç”¨äºæŒ‰å¼•ç”¨ä¼ é€’å¯¹è±¡ç»™ [std::bind](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Futility%2Ffunctional%2Fbind) æˆ– [std::thread](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Fthread%2Fthread) çš„æ„é€ å‡½æ•°**
  
@@@ -3816,18 -3816,18 +3890,17 @@@ After function: 10 12 1
  
  ###### å½¢å¼
  
--
--|     å­—é¢é‡ç±»å‹     |    å‰ç¼€     |           æ•°ä½            |
--| :----------------: | :---------: | :-----------------------: |
--| **åå…­è¿›åˆ¶å­—é¢é‡** | `0x` æˆ–`0X` |   ä¸€æˆ–å¤šä¸ªåå…­è¿›åˆ¶æ•°ä½    |
--|  **åè¿›åˆ¶å­—é¢é‡**  |     æ—       | éé›¶åè¿›åˆ¶ä½+ä»»æ„åè¿›åˆ¶ä½ |
--|  **å…«è¿›åˆ¶å­—é¢é‡**  |  æ•°ä½é›¶`0`  |      ä»»æ„ä¸ªå…«è¿›åˆ¶ä½       |
--|  **äºŒè¿›åˆ¶å­—é¢é‡**  | `0b` æˆ–`0B` |     ä¸€æˆ–å¤šä¸ªäºŒè¿›åˆ¶ä½      |
++|        å­—é¢é‡ç±»å‹        |       å‰ç¼€       |           æ•°ä½           |
++| :----------------------: | :--------------: | :-----------------------: |
++| **åå…­è¿›åˆ¶å­—é¢é‡** | `0x` æˆ– `0X` |   ä¸€æˆ–å¤šä¸ªåå…­è¿›åˆ¶æ•°ä½   |
++|  **åè¿›åˆ¶å­—é¢é‡**  |        æ—         | éé›¶åè¿›åˆ¶ä½+ä»»æ„åè¿›åˆ¶ä½ |
++|  **å…«è¿›åˆ¶å­—é¢é‡**  |   æ•°ä½é›¶ `0`   |      ä»»æ„ä¸ªå…«è¿›åˆ¶ä½      |
++|  **äºŒè¿›åˆ¶å­—é¢é‡**  | `0b` æˆ– `0B` |     ä¸€æˆ–å¤šä¸ªäºŒè¿›åˆ¶ä½     |
  
  è‹¥æä¾›**æ•´æ•°åç¼€**ï¼Œåˆ™å¯å«æœ‰ä¸‹åˆ—ä¸€æˆ–ä¸¤è€…ï¼ˆè‹¥å‡æä¾›ï¼Œåˆ™å¯ä»¥ä»»æ„é¡ºåºå‡ºç°ï¼‰ï¼š
--   -  æ— ç¬¦å·åç¼€ï¼ˆå­—ç¬¦ u æˆ–å­—ç¬¦ Uï¼‰
  
--   -  é•¿åç¼€ï¼ˆå­—ç¬¦ l æˆ–å­—ç¬¦ Lï¼‰æˆ– é•¿é•¿åç¼€ï¼ˆå­—ç¬¦åºåˆ— ll æˆ–å­—ç¬¦åºåˆ— LLï¼‰ (C++11 èµ·)
++- æ— ç¬¦å·åç¼€ï¼ˆå­—ç¬¦ u æˆ–å­—ç¬¦ Uï¼‰
++- é•¿åç¼€ï¼ˆå­—ç¬¦ l æˆ–å­—ç¬¦ Lï¼‰æˆ– é•¿é•¿åç¼€ï¼ˆå­—ç¬¦åºåˆ— ll æˆ–å­—ç¬¦åºåˆ— LLï¼‰ (C++11 èµ·)
  
  ###### note
  
@@@ -3841,7 -3841,7 +3914,6 @@@
  
  #### [å¸ƒå°”å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/bool_literal)
  
--
  ```cpp
  using namespace std::literals::chrono_literals;///500ms
  using namespace std::literals::string_literals;///"Hello world"s
@@@ -3857,16 -3857,16 +3929,16 @@@ cout << "s2: " << s2.size() << " \"" <
  
  ##### å‚æ•°ä¸åŒ¹é…
  
--|  å®å‚  |             ç¬¬ä¸€å½¢å‚              |                        å¤‡é€‰å½¢å‚ä¸å¤‡æ³¨                        |
--| :----: | :-------------------------------: | :----------------------------------------------------------: |
--|  æ•´å½¢  |       `unsigned long long`        | `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–[æ— æ³•æ»¡è¶³æ—¶](https://www.cnblogs.com/Braveliu/p/12241837.html)è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰ |
--| æµ®ç‚¹å‹ |           `long double`           |   `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–æ— æ³•æ»¡è¶³æ—¶è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰    |
--|  å­—ç¬¦  |     `const <w>char<8|16|32>*`     |                                                              |
--| å­—ç¬¦ä¸² | `const <w>char<8|16|32>*, size_t` |            `size_t`ä¼š**è‡ªåŠ¨æ¨æ–­ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦**ã€‚            |
++|  å®å‚  |        ç¬¬ä¸€å½¢å‚        |                                               å¤‡é€‰å½¢å‚ä¸å¤‡æ³¨                                               |
++| :----: | :--------------------: | :--------------------------------------------------------------------------------------------------------: |
++|  æ•´å½¢  | `unsigned long long` | `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–[æ— æ³•æ»¡è¶³æ—¶](https://www.cnblogs.com/Braveliu/p/12241837.html)è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰ |
++| æµ®ç‚¹å‹ |    `long double`    |                         `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–æ— æ³•æ»¡è¶³æ—¶è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰                         |
++|  å­—ç¬¦  |  `const`<w>`char<8  |                                                     16                                                     |
++| å­—ç¬¦ä¸² |  `const`<w>`char<8  |                                                     16                                                     |
  
  ##### å®šä¹‰å­—é¢é‡
  
--ä½¿ç”¨åˆæ³•å‚æ•°è‡ªå®šä¹‰å­—é¢é‡æ“ä½œç¬¦`<constexpr> RT operator"" _name(param) `ä¾¿å®ç°äº†è‡ªå®šä¹‰å­—é¢é‡ï¼Œä¹‹ååœ¨ä½¿ç”¨å­—é¢é‡`value_name`ä¼šè¢«è‡ªåŠ¨ç¿»è¯‘ä¸º`_name(value)`ï¼Œå½“è‡ªå®šä¹‰çš„å­—é¢é‡æ“ä½œç¬¦ç­¾åå«`constexpr`æ—¶ï¼Œè¯¥è½¬æ¢ç»“æœä¼šåœ¨ç¼–è¯‘æ—¶å°±å®Œæˆã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰**åç¼€å¿…é¡»ä»¥ä¸‹åˆ’çº¿å­—ç¬¦`_`å¼€å§‹**ï¼Œæ ‡å‡†åº“çš„åç¼€ä¸ä»¥ä¸‹åˆ’çº¿å¼€å§‹ã€‚
++ä½¿ç”¨åˆæ³•å‚æ•°è‡ªå®šä¹‰å­—é¢é‡æ“ä½œç¬¦ `<constexpr> RT operator"" _name(param) `ä¾¿å®ç°äº†è‡ªå®šä¹‰å­—é¢é‡ï¼Œä¹‹ååœ¨ä½¿ç”¨å­—é¢é‡ `value_name`ä¼šè¢«è‡ªåŠ¨ç¿»è¯‘ä¸º `_name(value)`ï¼Œå½“è‡ªå®šä¹‰çš„å­—é¢é‡æ“ä½œç¬¦ç­¾åå« `constexpr`æ—¶ï¼Œè¯¥è½¬æ¢ç»“æœä¼šåœ¨ç¼–è¯‘æ—¶å°±å®Œæˆã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰**åç¼€å¿…é¡»ä»¥ä¸‹åˆ’çº¿å­—ç¬¦ `_`å¼€å§‹**ï¼Œæ ‡å‡†åº“çš„åç¼€ä¸ä»¥ä¸‹åˆ’çº¿å¼€å§‹ã€‚
  
  ```c++
  long double operator"" _mm(long double x) { return x / 1000; }
@@@ -3887,11 -3887,11 +3959,8 @@@ cout << 1.0_mm << '\t' << "ABCDEFGH"_le
  ### lambdaè¡¨è¾¾å¼
  
  1. é€šç”¨æ•è·ï¼šå¸¦æœ‰åˆå§‹åŒ–å™¨çš„æ•è·ç¬¦ï¼Œå®ä¾‹ï¼š`[x = 1]{ return x; // 1 }`
--
  2. ä½¿ç”¨é€šç”¨æ•è·æ•è·ä»…å¯ç§»åŠ¨çš„ç±»å‹ï¼Œå®ä¾‹ï¼š`unique_ptr<T> x = ...; [u=move(u)] {  do_something_with( u );}`
--
--3. æ³›å‹`lambda`è¡¨è¾¾å¼ï¼šå‚æ•°å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜å…·ä½“ç±»å‹ã€‚
--
++3. æ³›å‹ `lambda`è¡¨è¾¾å¼ï¼šå‚æ•°å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜å…·ä½“ç±»å‹ã€‚
  4. è¡¨è¾¾å¼æ•æ‰ï¼šå…è®¸ç”¨ä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼åˆå§‹åŒ–æ•æ‰çš„å˜é‡(ä¸1ï¼Œ2ç›¸å…³)ã€‚
  
  ### [`constexpr`](# `CPP14: constexpr `)
@@@ -3913,7 -3913,7 +3982,7 @@@
  
  ### [æŠ˜å è¡¨è¾¾å¼](https://www.jianshu.com/p/8df794addfed)
  
--å°†äºŒå…ƒè¿ç®—ï¼ˆ`+`ã€`-`ã€`*`ã€` /`ã€` %`ã€` ^`ã€` &`ã€` |`ã€` =`ã€` <`ã€` >`ã€` <<`ã€` >>`ã€` +=`ã€` -=`ã€` *=`ã€` /=`ã€` %=`ã€` ^=`ã€` &=`ã€` |=`ã€` <<=`ã€` >>=`ã€` ==`ã€` !=`ã€` <=`ã€` >=`ã€` &&`ã€` || `ã€`,`ã€` .*`ã€` ->*`ï¼‰ä¸å‚æ•°åŒ…ç»“åˆï¼Œå°†å‚æ•°åŒ…ä¸­çš„å‚æ•°å±•å¼€ä¾æ¬¡è¿›è¡Œè¿ç®—ã€‚Foldè¡¨è¾¾å¼ä¸€å…±æœ‰å››ç§å½¢å¼(äºŒå…ƒæŠ˜å è¦æ±‚ä¸¤ä¸ªopå¿…é¡»ç›¸åŒï¼Œæ‰€æœ‰`op`ä¸­åªæœ‰`&&`ã€`||`ã€ `,`æ”¯æŒpackä¸ºç©ºï¼Œæ­¤æ—¶åˆ†åˆ«ä»£è¡¨`trueã€falseã€void()`)ã€‚
++å°†äºŒå…ƒè¿ç®—ï¼ˆ`+`ã€`-`ã€`*`ã€` /`ã€` %`ã€` ^`ã€` &`ã€` |`ã€` =`ã€` <`ã€` >`ã€` <<`ã€` >>`ã€` +=`ã€` -=`ã€` *=`ã€` /=`ã€` %=`ã€` ^=`ã€` &=`ã€` |=`ã€` <<=`ã€` >>=`ã€` ==`ã€` !=`ã€` <=`ã€` >=`ã€` &&`ã€`||`ã€`,`ã€` .*`ã€` ->*`ï¼‰ä¸å‚æ•°åŒ…ç»“åˆï¼Œå°†å‚æ•°åŒ…ä¸­çš„å‚æ•°å±•å¼€ä¾æ¬¡è¿›è¡Œè¿ç®—ã€‚Foldè¡¨è¾¾å¼ä¸€å…±æœ‰å››ç§å½¢å¼(äºŒå…ƒæŠ˜å è¦æ±‚ä¸¤ä¸ªopå¿…é¡»ç›¸åŒï¼Œæ‰€æœ‰ `op`ä¸­åªæœ‰ `&&`ã€`||`ã€ `,`æ”¯æŒpackä¸ºç©ºï¼Œæ­¤æ—¶åˆ†åˆ«ä»£è¡¨ `trueã€falseã€void()`)ã€‚
  
  1. ä¸€å…ƒå³æŠ˜å ï¼š`(pack op ...) <=> (pack1 op (... op (pack"N-1" op packN)))`
  2. ä¸€å…ƒå·¦æŠ˜å ï¼š`(... op pack) <=> (((pack1 op pack2) op ...) op packN)`
@@@ -3956,7 -3956,7 +4025,7 @@@ is_void<decltype(empty_pack_unary_fold_
  
  #### æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°
  
--éœ€è¦ä¸ºæƒ³å®ç°è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„æ¨¡æ¿ç±»æä¾›èƒ½æ¨æ–­å‡ºç±»æ¨¡å‹ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`Deduction Guides`æ¥æä¾›é¢å¤–çš„æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™ï¼Œæˆ–è€…ä¿®æ­£å·²æœ‰çš„æ¨¡æ¿å‚æ•°æ¨æ–­è§„åˆ™ã€‚
++éœ€è¦ä¸ºæƒ³å®ç°è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„æ¨¡æ¿ç±»æä¾›èƒ½æ¨æ–­å‡ºç±»æ¨¡å‹ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `Deduction Guides`æ¥æä¾›é¢å¤–çš„æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™ï¼Œæˆ–è€…ä¿®æ­£å·²æœ‰çš„æ¨¡æ¿å‚æ•°æ¨æ–­è§„åˆ™ã€‚
  
  ```c++
  template<typename T>class Stack {
@@@ -3981,7 -3981,7 +4050,7 @@@ f<10>();///è‡ªåŠ¨æ¨å¯¼ä¸ºin
  
  ### ç¼–è¯‘æœŸIF
  
--`if constexpr()`åœ¨ç¼–è¯‘æœŸå†³å®šç¼–è¯‘`if`æ¡ä»¶çš„å“ªä¸ªåˆ†æ”¯ï¼Œæ¯”å¦‚ç”¨åœ¨ç¼–è¯‘æœŸçš„æ¨¡æ¿å®ä¾‹åŒ–ä¸­ã€‚
++`if constexpr()`åœ¨ç¼–è¯‘æœŸå†³å®šç¼–è¯‘ `if`æ¡ä»¶çš„å“ªä¸ªåˆ†æ”¯ï¼Œæ¯”å¦‚ç”¨åœ¨ç¼–è¯‘æœŸçš„æ¨¡æ¿å®ä¾‹åŒ–ä¸­ã€‚
  
  ### æŠ˜å è¡¨è¾¾å¼è¡¥å……
  
@@@ -4006,7 -4006,7 +4075,7 @@@ printDoubled(7.5, std::string("hello")
  printElems({"good", "times", "say", "bye"}, 2, 0, 3);
  ```
  
--### [å˜é•¿`using`å£°æ˜](https://www.cnblogs.com/zwvista/p/9256655.html)
++### [å˜é•¿ `using`å£°æ˜](https://www.cnblogs.com/zwvista/p/9256655.html)
  
  ```c++
  template<class... Ts> struct overloaded : Ts... { using Ts::operator()...; };///å¯å˜åŸºç±»æ¨¡æ¿ç±»ã€‚usingè¢«å±•å¼€ä¸ºusing A::operator(), B::operator(), C::operator()...
@@@ -4031,9 -4031,9 +4100,10 @@@ overloaded s
  
  # æ–‡ä»¶ç³»ç»Ÿ
  
--* å®šä¹‰äºå¤´æ–‡ä»¶<filesystem>ï¼Œå­˜åœ¨äºå‘½åç©ºé—´`std::filesystem`ï¼›
++* å®šä¹‰äºå¤´æ–‡ä»¶`<filesystem>`ï¼Œå­˜åœ¨äºå‘½åç©ºé—´ `std::filesystem`ï¼›
  
  ## åŸºæœ¬ç±»
++
  1. pathï¼šè·¯å¾„å¤„ç†
  2. directory_entryï¼šæ–‡ä»¶å…¥å£
  3. directory_iteratorï¼šè·å–æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­æ–‡ä»¶çš„è¿­ä»£å™¨å®¹å™¨
@@@ -4041,22 -4041,22 +4111,21 @@@
  
  # æ—¶é—´ä¸æ—¥æœŸ
  
--+ C++çš„æ—¶é’Ÿåº“æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯`std::chrono`åº“ï¼ˆchronologyï¼‰ï¼Œä¸€ä¸ªæ˜¯Cæ ·å¼çš„æ—¥æœŸå’Œæ—¶é—´åº“(å¦‚`std::time_t`)ã€‚
+++ C++çš„æ—¶é’Ÿåº“æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ `std::chrono`åº“ï¼ˆchronologyï¼‰ï¼Œä¸€ä¸ªæ˜¯Cæ ·å¼çš„æ—¥æœŸå’Œæ—¶é—´åº“(å¦‚ `std::time_t`)ã€‚
  
  ## Cé£æ ¼
  
  ![ctimeæ•°æ®å…³ç³»](./img/lang/ctime.png)
  
--å›¾ä¸­ä»¥æ•°æ®ç±»å‹ä¸ºä¸­å¿ƒï¼Œå¸¦æ–¹å‘çš„å®çº¿ç®­å¤´è¡¨ç¤ºè¯¥å‡½æ•°èƒ½è¿”å›ç›¸åº”ç±»å‹çš„ç»“æœï¼Œæ—¶é’Ÿå‘¨æœŸé™¤ä»¥`CLOCKS_PER_SEC`æ‰æ˜¯ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ï¼Œè¯¥æ—¶é—´å¯å¤§äºã€ç­‰äºã€å°äºçœŸå®ä¸–ç•Œæ—¶é—´ã€‚
++å›¾ä¸­ä»¥æ•°æ®ç±»å‹ä¸ºä¸­å¿ƒï¼Œå¸¦æ–¹å‘çš„å®çº¿ç®­å¤´è¡¨ç¤ºè¯¥å‡½æ•°èƒ½è¿”å›ç›¸åº”ç±»å‹çš„ç»“æœï¼Œæ—¶é’Ÿå‘¨æœŸé™¤ä»¥ `CLOCKS_PER_SEC`æ‰æ˜¯ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ï¼Œè¯¥æ—¶é—´å¯å¤§äºã€ç­‰äºã€å°äºçœŸå®ä¸–ç•Œæ—¶é—´ã€‚
  
--|     `clock_t`      | `time_t` |  `timespec`(C++17)   |   `tm`   |
--| :----------------: | :------: | :------------------: | :------: |
--| è¿›ç¨‹è¿è¡Œçš„æ—¶é’Ÿå‘¨æœŸ | çºªå…ƒæ—¶é—´ | ä»¥ç§’å’Œçº³ç§’è¡¨ç¤ºçš„æ—¶é—´ | æ—¥å†æ—¶é—´ |
++|    `clock_t`    | `time_t` | `timespec`(C++17) |  `tm`  |
++| :----------------: | :--------: | :------------------: | :------: |
++| è¿›ç¨‹è¿è¡Œçš„æ—¶é’Ÿå‘¨æœŸ |  çºªå…ƒæ—¶é—´  | ä»¥ç§’å’Œçº³ç§’è¡¨ç¤ºçš„æ—¶é—´ | æ—¥å†æ—¶é—´ |
  
--å¯ä»¥é€šè¿‡`strftime`æˆ–è€…`wcsftime`å‡½æ•°æ¥[æŒ‡å®šæ ¼å¼è¾“å‡º](https://zh.cppreference.com/w/cpp/chrono/c/strftime)ï¼Œéœ€è¦æ³¨æ„`tm::tm_yearï¼Œtm::tm_mmon`éœ€è¦åˆ†åˆ«åŠ ä¸Š1900å’Œ1çš„åç§»æ‰æ˜¯çœŸå®æ—¥å†æ—¶é—´ã€‚
--
--é™¤äº†`<ctime>`ä¹‹å¤–ï¼Œä¸ºäº†æ–¹ä¾¿æ—¶é—´çš„è¾“å…¥è¾“å‡ºï¼Œä»C++11å¼€å§‹ï¼Œåœ¨`<iomanip>`å¤´æ–‡ä»¶ä¸­è¿˜å¢åŠ äº†[put_time](https://zh.cppreference.com/w/cpp/io/manip/put_time)ä¸[get_time](https://zh.cppreference.com/w/cpp/io/manip/get_time)ä¸¤ä¸ªå‡½æ•°ã€‚ä¸ºäº†æé«˜æ—¶é—´ç²¾åº¦ï¼ŒC++17ä¸Šå¢åŠ äº†`timespec`ç±»å‹æä¾›äº†çº³ç§’çº§åˆ«çš„ç²¾åº¦ï¼Œ`timespec_get()`ç”¨æ¥è·å–çº³ç§’çº§åˆ«æ—¶é—´ã€‚
++å¯ä»¥é€šè¿‡ `strftime`æˆ–è€… `wcsftime`å‡½æ•°æ¥[æŒ‡å®šæ ¼å¼è¾“å‡º](https://zh.cppreference.com/w/cpp/chrono/c/strftime)ï¼Œéœ€è¦æ³¨æ„ `tm::tm_yearï¼Œtm::tm_mmon`éœ€è¦åˆ†åˆ«åŠ ä¸Š1900å’Œ1çš„åç§»æ‰æ˜¯çœŸå®æ—¥å†æ—¶é—´ã€‚
  
++é™¤äº† `<ctime>`ä¹‹å¤–ï¼Œä¸ºäº†æ–¹ä¾¿æ—¶é—´çš„è¾“å…¥è¾“å‡ºï¼Œä»C++11å¼€å§‹ï¼Œåœ¨ `<iomanip>`å¤´æ–‡ä»¶ä¸­è¿˜å¢åŠ äº†[put_time](https://zh.cppreference.com/w/cpp/io/manip/put_time)ä¸[get_time](https://zh.cppreference.com/w/cpp/io/manip/get_time)ä¸¤ä¸ªå‡½æ•°ã€‚ä¸ºäº†æé«˜æ—¶é—´ç²¾åº¦ï¼ŒC++17ä¸Šå¢åŠ äº† `timespec`ç±»å‹æä¾›äº†çº³ç§’çº§åˆ«çš„ç²¾åº¦ï¼Œ`timespec_get()`ç”¨æ¥è·å–çº³ç§’çº§åˆ«æ—¶é—´ã€‚
  
  ```c++
  timespec ts;
@@@ -4073,7 -4073,7 +4142,7 @@@ printf("Current time: %s.%09ld UTC\n", 
  
  #### `std::ratio`
  
--  `std::ratio<Num, Denom>`æ¨¡æ¿ç±»æè¿°äº†[ç¼–è¯‘æ—¶çš„æœ‰ç†æ•°](https://zh.cppreference.com/w/cpp/numeric/ratio)å€¼$Num/Denom$ã€‚ratioå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†éƒ¨åˆ†é¢„å®šä¹‰çš„å€¼ã€‚æ­¤å¤–è¿˜å®šä¹‰äº†`ratio_addï¼Œratio_subtractï¼Œratio_multiplyï¼Œratio_divide`æ¥å®Œæˆ`ratio<>`é—´çš„åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—ã€‚
++  `std::ratio<Num, Denom>`æ¨¡æ¿ç±»æè¿°äº†[ç¼–è¯‘æ—¶çš„æœ‰ç†æ•°](https://zh.cppreference.com/w/cpp/numeric/ratio)å€¼$Num/Denom$ã€‚ratioå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†éƒ¨åˆ†é¢„å®šä¹‰çš„å€¼ã€‚æ­¤å¤–è¿˜å®šä¹‰äº† `ratio_addï¼Œratio_subtractï¼Œratio_multiplyï¼Œratio_divide`æ¥å®Œæˆ `ratio<>`é—´çš„åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—ã€‚
  
  ```cpp
  typedef ratio<1,       1000000000000000000> atto;
@@@ -4099,9 -4099,9 +4168,9 @@@ using sum = std::ratio_add<std::ratio<2
  std::cout << "2/3 + 1/6 = " << sum::num << '/' << sum::den << '\n';/// 2/3 + 1/6 = 5/6
  ```
  
--####  `std::chrono::duration `
++#### `std::chrono::duration `
  
--è¡¨ç¤ºæ—¶é—´é—´éš”çš„æ¨¡æ¿ç±»ï¼Œæ¨¡æ¿å‚æ•°ä¸ºèŠ‚æ‹æ•°é‡(`Rep`)å’ŒèŠ‚æ‹ç²¾åº¦(`ratio`)ï¼Œæ”¯æŒåŸºäºæ—¶é—´çš„60è¿›åˆ¶çš„å››åˆ™è¿ç®—ã€‚æ ‡å‡†åº“æä¾›çš„å¾ˆå¸¸ç”¨çš„å‡ ä¸ªæ—¶é•¿å•ä½ï¼Œå¹¶é€šè¿‡`duration_cast<TYPE>(soutrce)`å®ç°`duration`ç±»å‹çš„è½¬æ¢ã€‚
++è¡¨ç¤ºæ—¶é—´é—´éš”çš„æ¨¡æ¿ç±»ï¼Œæ¨¡æ¿å‚æ•°ä¸ºèŠ‚æ‹æ•°é‡(`Rep`)å’ŒèŠ‚æ‹ç²¾åº¦(`ratio`)ï¼Œæ”¯æŒåŸºäºæ—¶é—´çš„60è¿›åˆ¶çš„å››åˆ™è¿ç®—ã€‚æ ‡å‡†åº“æä¾›çš„å¾ˆå¸¸ç”¨çš„å‡ ä¸ªæ—¶é•¿å•ä½ï¼Œå¹¶é€šè¿‡ `duration_cast<TYPE>(soutrce)`å®ç° `duration`ç±»å‹çš„è½¬æ¢ã€‚
  
  ```c++
  std::chrono::nanoseconds    duration<long long, std::ratio<1, 1000000000>>
@@@ -4123,9 -4123,9 +4192,10 @@@ cout << "02:05 is " << seconds.count() 
  
  ### `clock` æ—¶é’Ÿ
  
--æ—¶é’Ÿç±»å¿…é¡»æä¾›æ—¶é—´å€¼ï¼ˆ`time_point`ç±»å‹ï¼Œé€šè¿‡é™æ€æˆå‘˜å‡½æ•°`now()`è·å¾—ï¼‰ã€æ—¶é—´ç±»å‹ï¼ˆ`duration`ï¼‰ã€æ—¶é’ŸèŠ‚æ‹ï¼ˆ`rep`ï¼‰å’Œæ—¶é’Ÿç¨³å®šæ€§ï¼ˆ`is_steady`ï¼‰**å››ç§**ä¿¡æ¯ã€‚
++æ—¶é’Ÿç±»å¿…é¡»æä¾›æ—¶é—´å€¼ï¼ˆ`time_point`ç±»å‹ï¼Œé€šè¿‡é™æ€æˆå‘˜å‡½æ•° `now()`è·å¾—ï¼‰ã€æ—¶é—´ç±»å‹ï¼ˆ`duration`ï¼‰ã€æ—¶é’ŸèŠ‚æ‹ï¼ˆ`rep`ï¼‰å’Œæ—¶é’Ÿç¨³å®šæ€§ï¼ˆ`is_steady`ï¼‰**å››ç§**ä¿¡æ¯ã€‚
++
++æ ‡å‡†åº“ä¸­æä¾›äº†ä¸‰ç§ç±»å‹çš„æ—¶é’Ÿ,å…¶ä¸­çš„ `system_clock`æä¾›äº†ä¸¤ä¸ªé™æ€å‡½æ•° `to_time_t()ã€from_time_t()`ç”¨æ¥ä¸ `std::time_t`æ¥å›è½¬æ¢ã€‚
  
--æ ‡å‡†åº“ä¸­æä¾›äº†ä¸‰ç§ç±»å‹çš„æ—¶é’Ÿ,å…¶ä¸­çš„`system_clock`æä¾›äº†ä¸¤ä¸ªé™æ€å‡½æ•°`to_time_t()ã€from_time_t()`ç”¨æ¥ä¸`std::time_t`æ¥å›è½¬æ¢ã€‚
  1. `std::chrono::system_clock`ï¼šæœ¬åœ°ç³»ç»Ÿçš„å½“å‰æ—¶é—´ (å¯ä»¥è°ƒæ•´)ï¼Œé™æ€æˆå‘˜å‡½æ•°to_time_t()æ”¯æŒé£æ ¼è½¬æ¢
  2. `std::chrono::steady_clock`ï¼šä¸èƒ½è¢«è°ƒæ•´çš„ï¼Œç¨³å®šå¢åŠ çš„æ—¶é—´
  3. `std::chrono::high_resolution_clock`ï¼šæä¾›æœ€é«˜ç²¾åº¦çš„è®¡æ—¶å‘¨æœŸï¼Œä¸åŒæ ‡å‡†åº“å®ç°çš„è¡Œä¸ºæœ‰å·®å¼‚
@@@ -4134,9 -4134,9 +4204,9 @@@
  
  ### `time_point` æ—¶é—´ç‚¹
  
--`std::chrono::time_point<clock, duration>`æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·ç¦»æ—¶é’ŸåŸç‚¹çš„å…·ä½“æ—¶é—´ç‚¹çš„ç±»æ¨¡æ¿ï¼Œä»–åŒ…å«äº†æ—¶é’Ÿå’Œæ—¶é•¿ä¸¤ä¸ªä¿¡æ¯ã€‚å®ƒæ”¯æŒåŠ å‡`duration`ã€ç›¸äº’ç›¸å‡ï¼ˆå€¼ä¸º`duration`ï¼‰ï¼Œé™¤äº†ç›¸åŠ å’Œç›¸å‡ï¼Œä¸¤ä¸ªæ—¶é—´ç‚¹è¿˜**æ”¯æŒæ¯”è¾ƒ**æ“ä½œï¼ˆ `==`ï¼Œ`!=`ï¼Œ`<`ï¼Œ`<=`ï¼Œ`>`ï¼Œ`>=`ï¼‰ã€‚
++`std::chrono::time_point<clock, duration>`æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·ç¦»æ—¶é’ŸåŸç‚¹çš„å…·ä½“æ—¶é—´ç‚¹çš„ç±»æ¨¡æ¿ï¼Œä»–åŒ…å«äº†æ—¶é’Ÿå’Œæ—¶é•¿ä¸¤ä¸ªä¿¡æ¯ã€‚å®ƒæ”¯æŒåŠ å‡ `duration`ã€ç›¸äº’ç›¸å‡ï¼ˆå€¼ä¸º `duration`ï¼‰ï¼Œé™¤äº†ç›¸åŠ å’Œç›¸å‡ï¼Œä¸¤ä¸ªæ—¶é—´ç‚¹è¿˜**æ”¯æŒæ¯”è¾ƒ**æ“ä½œï¼ˆ `==`ï¼Œ`!=`ï¼Œ`<`ï¼Œ`<=`ï¼Œ`>`ï¼Œ`>=`ï¼‰ã€‚
  
--###  `std::chrono_literals` (c++14)
++### `std::chrono_literals` (c++14)
  
  `std::chrono_literals`é€šè¿‡å­—é¢è¿ç®—ç¬¦æ¨¡æ¿æä¾›äº†æ—¶é—´çš„åç¼€æ”¯æŒã€‚
  
@@@ -4171,16 -4171,16 +4241,16 @@@ C++/C ç¨‹åºè®¾è®¡é£æ ¼çš„ä¸€ä¸ªåŸºæœ¬
  
  ä¸€èˆ¬æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­ç»™å‡ºç±»çš„å®šä¹‰æˆ–å…¨å±€å‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼Œè€Œåœ¨ä»£ç æ–‡ä»¶ä¸­ç»™å‡ºå…·ä½“çš„ï¼ˆç±»æˆå‘˜å‡½æ•°æˆ–å…¨å±€å‡½æ•°çš„ï¼‰å‡½æ•°å®šä¹‰ã€‚ç„¶ååœ¨å¤šä¸ªç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­åŒ…å«è¯¥å¤´æ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¶ä¸­å®šä¹‰æˆ–å£°æ˜çš„ç±»å’Œå‡½æ•°ã€‚
  
--å¤´æ–‡ä»¶ä¸­ä¸€èˆ¬ä¸åŒ…å«å˜é‡ã€ç»“æ„å’Œç±»å¯¹è±¡çš„å®šä¹‰ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´é‡å¤å®šä¹‰çš„ç¼–è¯‘é”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨æŸä¸ªä»£ç æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰ï¼Œåœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ç”¨`extern`æ¥å¼•ç”¨å®ƒä»¬ï¼Œå¯¹äºæ¨¡æ¿åˆ™ä½¿ç”¨`export`å…³é”®å­—ã€‚
++å¤´æ–‡ä»¶ä¸­ä¸€èˆ¬ä¸åŒ…å«å˜é‡ã€ç»“æ„å’Œç±»å¯¹è±¡çš„å®šä¹‰ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´é‡å¤å®šä¹‰çš„ç¼–è¯‘é”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨æŸä¸ªä»£ç æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰ï¼Œåœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ç”¨ `extern`æ¥å¼•ç”¨å®ƒä»¬ï¼Œå¯¹äºæ¨¡æ¿åˆ™ä½¿ç”¨ `export`å…³é”®å­—ã€‚
  
  ## [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](https://www.cnblogs.com/wolf-lifeng/p/3156936.html)
  
--ä¸€ä¸ªäº§ç”Ÿå˜é‡çš„è¯­å¥è¦ç»è¿‡å£°æ˜å’Œå®šä¹‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œåœ¨å˜é‡çš„å®šä¹‰çš„è¯­å¥ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œæ˜¾å¼çš„èµ‹å€¼ã€é‚£ä¹ˆç³»ç»Ÿå°±ä¼šè¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–æ“ä½œï¼ˆæ•´å½¢èµ‹0ï¼Œå­—ç¬¦ä¸²ç½®ç©ºï¼‰ã€‚é’ˆå¯¹å‡½æ•°å¯ä»¥ç›´æ¥å°†å£°æ˜å’Œå®šä¹‰æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé’ˆå¯¹å˜é‡ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¯­å¥åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼Œé€šè¿‡åœ¨è¯­å¥å‰**åŠ `extern`å…³é”®å­—å¯ä»¥é™åˆ¶è¯­å¥åªå®Œæˆå˜é‡çš„å£°æ˜é˜¶æ®µ**ï¼ˆå¦‚å£°æ˜å…¨å±€å˜é‡ï¼Œå…¶å®šä¹‰å°†ç”±ç¼–è¯‘å™¨å»å¯»æ‰¾ï¼‰ã€‚
++ä¸€ä¸ªäº§ç”Ÿå˜é‡çš„è¯­å¥è¦ç»è¿‡å£°æ˜å’Œå®šä¹‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œåœ¨å˜é‡çš„å®šä¹‰çš„è¯­å¥ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œæ˜¾å¼çš„èµ‹å€¼ã€é‚£ä¹ˆç³»ç»Ÿå°±ä¼šè¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–æ“ä½œï¼ˆæ•´å½¢èµ‹0ï¼Œå­—ç¬¦ä¸²ç½®ç©ºï¼‰ã€‚é’ˆå¯¹å‡½æ•°å¯ä»¥ç›´æ¥å°†å£°æ˜å’Œå®šä¹‰æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé’ˆå¯¹å˜é‡ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¯­å¥åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼Œé€šè¿‡åœ¨è¯­å¥å‰**åŠ  `extern`å…³é”®å­—å¯ä»¥é™åˆ¶è¯­å¥åªå®Œæˆå˜é‡çš„å£°æ˜é˜¶æ®µ**ï¼ˆå¦‚å£°æ˜å…¨å±€å˜é‡ï¼Œå…¶å®šä¹‰å°†ç”±ç¼–è¯‘å™¨å»å¯»æ‰¾ï¼‰ã€‚
  
  **ä¸€æ¬¡å®šä¹‰æ³•åˆ™ï¼š**ä¸€ä¸ªå˜é‡å¯ä»¥è¢«å£°æ˜å¤šæ¬¡ï¼Œä½†åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ã€‚å…¨å±€å¯¹è±¡å’Œå…¨å±€å‡½æ•°æˆ–è€…åªæœ‰ä¸€æ¬¡å®šä¹‰ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªç¨‹åºä¸­æœ‰**å¤šä¸ªå®Œå…¨ç›¸åŒçš„å®šä¹‰**ï¼ˆå†…è”å‡½æ•°å’Œå…¨å±€å¸¸é‡çš„æƒ…å†µï¼‰ã€‚
  
--|   é˜¶æ®µ   |                  åŠ¨ä½œ                  |                 å¤‡æ³¨                 |
--| :------: | :------------------------------------: | :----------------------------------: |
++|      é˜¶æ®µ      |                  åŠ¨ä½œ                  |                 å¤‡æ³¨                 |
++| :------------: | :------------------------------------: | :----------------------------------: |
  | **å£°æ˜** |        å¼•å…¥äº†ä¸€ä¸ªåŠ©è®°ç¬¦ï¼ˆåç§°ï¼‰        |         å»ºç«‹ç¬¦å·ã€æ— å†…å­˜åˆ†é…         |
  | **å®šä¹‰** | å…³è”åŠ©è®°ç¬¦åˆ°ä¸€æ®µç‰¹å®šçš„å†…å­˜ï¼Œè¿›è¡Œåˆå§‹åŒ– | å†…å­˜åˆ†é…ï¼šå†…å­˜çš„å¤§å°ç”±å˜é‡çš„ç±»å‹å†³å®š |
  
@@@ -4190,14 -4190,14 +4260,14 @@@
  
  åå­—è§£æçš„é¡ºåºæ˜¯ï¼šä»åå­—çš„è¢«ä½¿ç”¨ä½ç½®å¼€å§‹ï¼Œä»å°ä½œç”¨åŸŸåˆ°å¤§ä½œç”¨åŸŸçš„é¡ºåºè¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“æŸ¥æ‰¾åˆ°è¯¥åå­—çš„å£°æ˜æˆ–å®šä¹‰åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œç»“æŸã€‚å½“åœ¨ä¸¤ä¸ªä¸åŒçš„ä½œç”¨åŸŸä¸­å®šä¹‰ç›¸åŒåç§°çš„å®ä½“çš„æ—¶å€™ï¼Œå°ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ã€‚å› ä¸ºç¼–è¯‘å™¨ä»å°ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåç§°çš„å®šä¹‰æˆ–å£°æ˜åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œåœæ­¢ï¼Œæ‰€ä»¥å°ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ã€‚
  
--|     C++ä½œç”¨åŸŸ      |              è¯´æ˜              |                æ³¨                |
--| :----------------: | :----------------------------: | :------------------------------: |
++|        C++ä½œç”¨åŸŸ        |              è¯´æ˜              |                æ³¨                |
++| :----------------------: | :----------------------------: | :------------------------------: |
  | **åå­—ç©ºé—´ä½œç”¨åŸŸ** |        å¯åµŒå¥—ã€å¯è·¨æ–‡ä»¶        | å…¨å±€ä½œç”¨åŸŸæ˜¯æœ€å¤§çš„åå­—ç©ºé—´ä½œç”¨åŸŸ |
  |      **ç±»åŸŸ**      | ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜éƒ½å±äºè¯¥ç±»åŸŸ |   æ¯å®šä¹‰ä¸€ä¸ªç±»å°±ä¼šå¼•å…¥ä¸€ä¸ªç±»åŸŸ   |
  |   **å±€éƒ¨ä½œç”¨åŸŸ**   |  èµ·å§‹å’Œç»“æŸäºå‡½æ•°ä½“ä¸¤ç«¯çš„æ‹¬å·  |                                  |
  |   **è¯­å¥ä½œç”¨åŸŸ**   |       è¯­å¥å—æ„æˆçš„ä½œç”¨åŸŸ       |                                  |
  
--å°†**å˜é‡å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­å¯èƒ½é€ æˆé“¾æ¥å†²çª**ï¼ˆåŒ…å«è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½æœ‰æ­¤å˜é‡çš„å®šä¹‰ï¼‰ï¼Œä½†**å¤´æ–‡ä»¶ä¸­çš„`const`å˜é‡ä¸ä¼šé€ æˆå†²çª**ï¼ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥å˜é‡æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„åŒ¿å`namespace`ä¸­ï¼‰ã€‚
++å°†**å˜é‡å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­å¯èƒ½é€ æˆé“¾æ¥å†²çª**ï¼ˆåŒ…å«è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½æœ‰æ­¤å˜é‡çš„å®šä¹‰ï¼‰ï¼Œä½†**å¤´æ–‡ä»¶ä¸­çš„ `const`å˜é‡ä¸ä¼šé€ æˆå†²çª**ï¼ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥å˜é‡æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„åŒ¿å `namespace`ä¸­ï¼‰ã€‚
  
  ![](img/lang/finfluce-iled.png)
  
@@@ -4214,7 -4214,7 +4284,7 @@@ C/C++ä¸»è¦æœ‰ä»¥ä¸‹äº”ç§å†…å­˜å­˜å‚¨å
  
  **æ ˆ**ï¼šå­˜æ”¾**å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡**ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚æ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡é«˜ï¼Œä½†æ˜¯å®¹é‡æœ‰é™ã€‚
  
--**å †ï¼ˆåŠ¨æ€å†…å­˜åˆ†é…ï¼‰**ï¼š**é€šè¿‡`new`å’Œ`malloc`ç”±ä½åˆ°é«˜åˆ†é…ï¼Œç”±`delete`æˆ–`free`æ‰‹åŠ¨é‡Šæ”¾æˆ–è€…ç¨‹åºç»“æŸè‡ªåŠ¨é‡Šæ”¾**ã€‚åŠ¨æ€å†…å­˜çš„ç”Ÿå­˜æœŸäººä¸ºå†³å®šï¼Œä½¿ç”¨çµæ´»ã€‚ç¼ºç‚¹æ˜¯å®¹æ˜“åˆ†é…/é‡Šæ”¾ä¸å½“å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œé¢‘ç¹åˆ†é…/é‡Šæ”¾ä¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ã€‚ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSï¼ˆæ“ä½œç³»ç»Ÿï¼‰å›æ”¶
++**å †ï¼ˆåŠ¨æ€å†…å­˜åˆ†é…ï¼‰**ï¼š**é€šè¿‡ `new`å’Œ `malloc`ç”±ä½åˆ°é«˜åˆ†é…ï¼Œç”± `delete`æˆ– `free`æ‰‹åŠ¨é‡Šæ”¾æˆ–è€…ç¨‹åºç»“æŸè‡ªåŠ¨é‡Šæ”¾**ã€‚åŠ¨æ€å†…å­˜çš„ç”Ÿå­˜æœŸäººä¸ºå†³å®šï¼Œä½¿ç”¨çµæ´»ã€‚ç¼ºç‚¹æ˜¯å®¹æ˜“åˆ†é…/é‡Šæ”¾ä¸å½“å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œé¢‘ç¹åˆ†é…/é‡Šæ”¾ä¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ã€‚ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSï¼ˆæ“ä½œç³»ç»Ÿï¼‰å›æ”¶
  
  **ç¨‹åºä»£ç åŒº**ï¼š å­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ä¸éƒ¨åˆ†æ•´æ•°å¸¸é‡
  
@@@ -4222,7 -4222,7 +4292,7 @@@
  
  # å…¶ä»–æ¨è
  
--1. **å¼ºçƒˆæ¨è**ç”¨[==**ç½‘ç«™**==](https://cppinsights.io/)ç¿»è¯‘ä»£ç ï¼ŒéªŒè¯è‡ªå·±çš„æƒ³æ³•ã€‚å°¤å…¶æ˜¯`autoã€decltypeã€lambda`ç­‰ä¸€äº›ç« èŠ‚ã€‚
++1. **å¼ºçƒˆæ¨è**ç”¨[==**ç½‘ç«™**==](https://cppinsights.io/)ç¿»è¯‘ä»£ç ï¼ŒéªŒè¯è‡ªå·±çš„æƒ³æ³•ã€‚å°¤å…¶æ˜¯ `autoã€decltypeã€lambda`ç­‰ä¸€äº›ç« èŠ‚ã€‚
  2. [é™ˆç¡•çš„C++å·¥ç¨‹å®è·µç»éªŒè°ˆ](https://github.com/downloads/chenshuo/documents/CppPractice.pdf)
  3. [C++17é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/23052754)
  4. [C++20é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/137646370)

commit 050c4cf3efca94ee40dbd585e0958d1496027936
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:48 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

tree 212c0046e5b80b73f2d4d462a78dba111f416d13

.github/
.gitignore
C++å¹¶å‘.md
GITå‘½ä»¤è®°å½•.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit 732c6686f6131e992477258db869b45263b6db98
Merge: 3e6db26 9e7a621
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:12 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/Client.cpp
index 5bfb7d0,5bfb7d0..1bfbdc0
--- a/code/boost_doc/IO/Client.cpp
+++ b/code/boost_doc/IO/Client.cpp
@@@ -1,26 -1,26 +1,136 @@@
--#include <iostream>
--using namespace std;
++//
++// client.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Downloads stock quote information from a server.
++    class client
++    {
++        public:
++            /// Constructor starts the asynchronous connect operation.
++            client(boost::asio::io_service& io_service,
++                    const std::string& host, const std::string& service)
++                : connection_(io_service)
++            {
++                // Resolve the host name into an IP address.
++                boost::asio::ip::tcp::resolver resolver(io_service);
++                boost::asio::ip::tcp::resolver::query query(host, service);
++                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
++                    resolver.resolve(query);
++                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++
++                // Start an asynchronous connect operation.
++                connection_.socket().async_connect(endpoint,
++                        boost::bind(&client::handle_connect, this,
++                            boost::asio::placeholders::error, ++endpoint_iterator));
++            }
++
++            /// Handle completion of a connect operation.
++            void handle_connect(const boost::system::error_code& e,
++                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
++            {
++                if (!e)
++                {
++                    // Successfully established connection. Start operation to read the list
++                    // of stocks. The connection::async_read() function will automatically
++                    // decode the data that is read from the underlying socket.
++                    connection_.async_read(stocks_,
++                            boost::bind(&client::handle_read, this,
++                                boost::asio::placeholders::error));
++                }
++                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
++                {
++                    // Try the next endpoint.
++                    connection_.socket().close();
++                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++                    connection_.socket().async_connect(endpoint,
++                            boost::bind(&client::handle_connect, this,
++                                boost::asio::placeholders::error, ++endpoint_iterator));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // operation the io_service will run out of work to do and the client will
++                    // exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
++
++            /// Handle completion of a read operation.
++            void handle_read(const boost::system::error_code& e)
++            {
++                if (!e)
++                {
++                    // Print out the data that was received.
++                    for (std::size_t i = 0; i < stocks_.size(); ++i)
++                    {
++                        std::cout << "Stock number " << i << "\n";
++                        std::cout << "  code: " << stocks_[i].code << "\n";
++                        std::cout << "  name: " << stocks_[i].name << "\n";
++                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
++                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
++                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
++                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
++                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
++                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
++                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
++                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
++                    }
++                }
++                else
++                {
++                    // An error occurred.
++                    std::cerr << e.message() << std::endl;
++                }
  
--    udp_socket.open(local_add.protocol());
++                // Since we are not starting a new operation the io_service will run out of
++                // work to do and the client will exit.
++            }
  
--    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
--    while (1)
++        private:
++            /// The connection to the server.
++            connection connection_;
++
++            /// The data received from the server.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
--        string s;
--        cin >> s;
--        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
--        cout << "æ”¶åˆ°" << receive_str << endl;
--        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
++        // Check command line arguments.
++        if (argc != 3)
++        {
++            std::cerr << "Usage: client <host> <port>" << std::endl;
++            return 1;
++        }
++
++        boost::asio::io_service io_service;
++        s11n_example::client client(io_service, argv[1], argv[2]);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }
diff --cc code/boost_doc/IO/Server.cpp
index 356a6ad,356a6ad..9414436
--- a/code/boost_doc/IO/Server.cpp
+++ b/code/boost_doc/IO/Server.cpp
@@@ -1,26 -1,26 +1,130 @@@
--#include <iostream>
--using namespace std;
++//
++// server.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <boost/lexical_cast.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Serves stock quote information to any client that connects to it.
++    class server
++    {
++        public:
++            /// Constructor opens the acceptor and starts waiting for the first incoming
++            /// connection.
++            server(boost::asio::io_service& io_service, unsigned short port)
++                : acceptor_(io_service,
++                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
++        {
++            // Create the data to be sent to each client.
++            stock s;
++            s.code = "ABC";
++            s.name = "A Big Company";
++            s.open_price = 4.56;
++            s.high_price = 5.12;
++            s.low_price = 4.33;
++            s.last_price = 4.98;
++            s.buy_price = 4.96;
++            s.buy_quantity = 1000;
++            s.sell_price = 4.99;
++            s.sell_quantity = 2000;
++            stocks_.push_back(s);
++            s.code = "DEF";
++            s.name = "Developer Entertainment Firm";
++            s.open_price = 20.24;
++            s.high_price = 22.88;
++            s.low_price = 19.50;
++            s.last_price = 19.76;
++            s.buy_price = 19.72;
++            s.buy_quantity = 34000;
++            s.sell_price = 19.85;
++            s.sell_quantity = 45000;
++            stocks_.push_back(s);
++
++            // Start an accept operation for a new connection.
++            connection_ptr new_conn(new connection(acceptor_.io_service()));
++            acceptor_.async_accept(new_conn->socket(),
++                    boost::bind(&server::handle_accept, this,
++                        boost::asio::placeholders::error, new_conn));
++        }
++
++            /// Handle completion of a accept operation.
++            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
++            {
++                if (!e)
++                {
++                    // Successfully accepted a new connection. Send the list of stocks to the
++                    // client. The connection::async_write() function will automatically
++                    // serialize the data structure for us.
++                    conn->async_write(stocks_,
++                            boost::bind(&server::handle_write, this,
++                                boost::asio::placeholders::error, conn));
  
--    udp_socket.open(local_add.protocol());
--    udp_socket.bind(local_add);
++                    // Start an accept operation for a new connection.
++                    connection_ptr new_conn(new connection(acceptor_.io_service()));
++                    acceptor_.async_accept(new_conn->socket(),
++                            boost::bind(&server::handle_accept, this,
++                                boost::asio::placeholders::error, new_conn));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // accept operation the io_service will run out of work to do and the
++                    // server will exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
  
--    char receive_str[1024] = { 0 };
--    while (1)
++            /// Handle completion of a write operation.
++            void handle_write(const boost::system::error_code& e, connection_ptr conn)
++            {
++                // Nothing to do. The socket will be closed automatically when the last
++                // reference to the connection object goes away.
++            }
++
++        private:
++            /// The acceptor object used to accept incoming socket connections.
++            boost::asio::ip::tcp::acceptor acceptor_;
++
++            /// The data to be sent to each client.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--        boost::asio::ip::udp::endpoint  sendpoint;
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
--        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
--        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
--        memset(receive_str, 0, 1024);
++        // Check command line arguments.
++        if (argc != 2)
++        {
++            std::cerr << "Usage: server <port>" << std::endl;
++            return 1;
++        }
++        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
  
++        boost::asio::io_service io_service;
++        s11n_example::server server(io_service, port);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }

commit 22ee820b1f1249a4297a04433c75742f88dda7d5
Merge: 3e6db26 1e71aaa
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:16:31 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/Client.cpp
index 5bfb7d0,5bfb7d0..1bfbdc0
--- a/code/boost_doc/IO/Client.cpp
+++ b/code/boost_doc/IO/Client.cpp
@@@ -1,26 -1,26 +1,136 @@@
--#include <iostream>
--using namespace std;
++//
++// client.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Downloads stock quote information from a server.
++    class client
++    {
++        public:
++            /// Constructor starts the asynchronous connect operation.
++            client(boost::asio::io_service& io_service,
++                    const std::string& host, const std::string& service)
++                : connection_(io_service)
++            {
++                // Resolve the host name into an IP address.
++                boost::asio::ip::tcp::resolver resolver(io_service);
++                boost::asio::ip::tcp::resolver::query query(host, service);
++                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
++                    resolver.resolve(query);
++                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++
++                // Start an asynchronous connect operation.
++                connection_.socket().async_connect(endpoint,
++                        boost::bind(&client::handle_connect, this,
++                            boost::asio::placeholders::error, ++endpoint_iterator));
++            }
++
++            /// Handle completion of a connect operation.
++            void handle_connect(const boost::system::error_code& e,
++                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
++            {
++                if (!e)
++                {
++                    // Successfully established connection. Start operation to read the list
++                    // of stocks. The connection::async_read() function will automatically
++                    // decode the data that is read from the underlying socket.
++                    connection_.async_read(stocks_,
++                            boost::bind(&client::handle_read, this,
++                                boost::asio::placeholders::error));
++                }
++                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
++                {
++                    // Try the next endpoint.
++                    connection_.socket().close();
++                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++                    connection_.socket().async_connect(endpoint,
++                            boost::bind(&client::handle_connect, this,
++                                boost::asio::placeholders::error, ++endpoint_iterator));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // operation the io_service will run out of work to do and the client will
++                    // exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
++
++            /// Handle completion of a read operation.
++            void handle_read(const boost::system::error_code& e)
++            {
++                if (!e)
++                {
++                    // Print out the data that was received.
++                    for (std::size_t i = 0; i < stocks_.size(); ++i)
++                    {
++                        std::cout << "Stock number " << i << "\n";
++                        std::cout << "  code: " << stocks_[i].code << "\n";
++                        std::cout << "  name: " << stocks_[i].name << "\n";
++                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
++                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
++                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
++                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
++                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
++                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
++                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
++                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
++                    }
++                }
++                else
++                {
++                    // An error occurred.
++                    std::cerr << e.message() << std::endl;
++                }
  
--    udp_socket.open(local_add.protocol());
++                // Since we are not starting a new operation the io_service will run out of
++                // work to do and the client will exit.
++            }
  
--    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
--    while (1)
++        private:
++            /// The connection to the server.
++            connection connection_;
++
++            /// The data received from the server.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
--        string s;
--        cin >> s;
--        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
--        cout << "æ”¶åˆ°" << receive_str << endl;
--        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
++        // Check command line arguments.
++        if (argc != 3)
++        {
++            std::cerr << "Usage: client <host> <port>" << std::endl;
++            return 1;
++        }
++
++        boost::asio::io_service io_service;
++        s11n_example::client client(io_service, argv[1], argv[2]);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }
diff --cc code/boost_doc/IO/Server.cpp
index 356a6ad,356a6ad..9414436
--- a/code/boost_doc/IO/Server.cpp
+++ b/code/boost_doc/IO/Server.cpp
@@@ -1,26 -1,26 +1,130 @@@
--#include <iostream>
--using namespace std;
++//
++// server.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <boost/lexical_cast.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Serves stock quote information to any client that connects to it.
++    class server
++    {
++        public:
++            /// Constructor opens the acceptor and starts waiting for the first incoming
++            /// connection.
++            server(boost::asio::io_service& io_service, unsigned short port)
++                : acceptor_(io_service,
++                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
++        {
++            // Create the data to be sent to each client.
++            stock s;
++            s.code = "ABC";
++            s.name = "A Big Company";
++            s.open_price = 4.56;
++            s.high_price = 5.12;
++            s.low_price = 4.33;
++            s.last_price = 4.98;
++            s.buy_price = 4.96;
++            s.buy_quantity = 1000;
++            s.sell_price = 4.99;
++            s.sell_quantity = 2000;
++            stocks_.push_back(s);
++            s.code = "DEF";
++            s.name = "Developer Entertainment Firm";
++            s.open_price = 20.24;
++            s.high_price = 22.88;
++            s.low_price = 19.50;
++            s.last_price = 19.76;
++            s.buy_price = 19.72;
++            s.buy_quantity = 34000;
++            s.sell_price = 19.85;
++            s.sell_quantity = 45000;
++            stocks_.push_back(s);
++
++            // Start an accept operation for a new connection.
++            connection_ptr new_conn(new connection(acceptor_.io_service()));
++            acceptor_.async_accept(new_conn->socket(),
++                    boost::bind(&server::handle_accept, this,
++                        boost::asio::placeholders::error, new_conn));
++        }
++
++            /// Handle completion of a accept operation.
++            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
++            {
++                if (!e)
++                {
++                    // Successfully accepted a new connection. Send the list of stocks to the
++                    // client. The connection::async_write() function will automatically
++                    // serialize the data structure for us.
++                    conn->async_write(stocks_,
++                            boost::bind(&server::handle_write, this,
++                                boost::asio::placeholders::error, conn));
  
--    udp_socket.open(local_add.protocol());
--    udp_socket.bind(local_add);
++                    // Start an accept operation for a new connection.
++                    connection_ptr new_conn(new connection(acceptor_.io_service()));
++                    acceptor_.async_accept(new_conn->socket(),
++                            boost::bind(&server::handle_accept, this,
++                                boost::asio::placeholders::error, new_conn));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // accept operation the io_service will run out of work to do and the
++                    // server will exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
  
--    char receive_str[1024] = { 0 };
--    while (1)
++            /// Handle completion of a write operation.
++            void handle_write(const boost::system::error_code& e, connection_ptr conn)
++            {
++                // Nothing to do. The socket will be closed automatically when the last
++                // reference to the connection object goes away.
++            }
++
++        private:
++            /// The acceptor object used to accept incoming socket connections.
++            boost::asio::ip::tcp::acceptor acceptor_;
++
++            /// The data to be sent to each client.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--        boost::asio::ip::udp::endpoint  sendpoint;
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
--        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
--        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
--        memset(receive_str, 0, 1024);
++        // Check command line arguments.
++        if (argc != 2)
++        {
++            std::cerr << "Usage: server <port>" << std::endl;
++            return 1;
++        }
++        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
  
++        boost::asio::io_service io_service;
++        s11n_example::server server(io_service, port);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }

commit 9f4fec4fe108f302500a40a30209aa90535b1a55
Merge: 3e6db26 41c265b
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:27:14 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }
diff --cc è¯­è¨€åŸºç¡€.md
index 453babe,453babe..5d956d6
--- a/è¯­è¨€åŸºç¡€.md
+++ b/è¯­è¨€åŸºç¡€.md
@@@ -530,13 -530,13 +530,7 @@@ int main()
  * å¦‚æœ `T` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜å‡ä¼šè¢«` value-initialized`ï¼›
  
  * å¦åˆ™å€¼å°†è¢«é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼›
--
--#### `trivial && non-trivial`
--
--`trival`ï¼ˆå¹³å‡¡æ— æ„ä¹‰ï¼‰çš„æ¦‚å¿µæ˜¯å¯¹äºæ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°è¿™å››ç§å‡½æ•°è€Œè¨€çš„ï¼Œå½“æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ä¸­ï¼ˆæ˜¾å¼`explict`å®šä¹‰äº†è¿™å››ç§å‡½æ•°ã€ç±»é‡Œæœ‰éé™æ€éPODçš„æ•°æ®æˆå‘˜ã€æœ‰åŸºç±»ï¼‰çš„ä»»æ„ä¸€æ¡å‡½æ•°éƒ½æ˜¯éå¹³å‡¡çš„ã€‚
--
--å¦‚æœè¿™ä¸ªç±»éƒ½æ˜¯`trivial  ctor/dtor/copy/assignment`å‡½æ•°ï¼Œå¯¹è¿™ä¸ªç±»è¿›è¡Œæ„é€ ã€ææ„ã€æ‹·è´å’Œèµ‹å€¼æ—¶å¯ä»¥é‡‡ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ï¼ˆç›´æ¥é‡‡ç”¨å†…å­˜æ“ä½œå¦‚`malloc()ã€memcpy()`ç­‰æé«˜æ€§èƒ½ï¼Œä¸è°ƒç”¨æ— æœ‰æ•ˆæ„ä¹‰çš„é‚£äº›`ctor/dtor`ç­‰ï¼Œè€Œè¿™ä¹Ÿæ˜¯SGI STLå†…éƒ¨å¹²çš„äº‹æƒ…ï¼‰ã€‚[æ¥æº](https://blog.csdn.net/zhangatm/article/details/77936101)
--
++	
  #### `new`çš„ä½¿ç”¨
  
  ```c++

tree 58907e4ded7e4bd0d15540ab9cb56ce5ae57ef1c

.github/
.gitignore
C++å¹¶å‘.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit e39082ea3509b1b6797ab7a7dc863e670d319412
Merge: 3e6db26 1e9db9a
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:38:01 2022 +0800

    On main: second

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }

commit 1e71aaab5a11ef4c70161136d17b65d6e4e3dc86
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:16:31 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --git a/GITå‘½ä»¤è®°å½•.md b/GITå‘½ä»¤è®°å½•.md
new file mode 100644
index 0000000..6cf779b
--- /dev/null
+++ b/GITå‘½ä»¤è®°å½•.md
@@ -0,0 +1,7 @@
+# GITå‘½ä»¤è®°å½•
+
+## åŸºæœ¬æ¦‚å¿µ
+### ä¸‰ä¸ªåˆ†åŒº
+1. å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰ï¼šç›´æ¥ç¼–è¾‘æ“ä½œçš„è‚‰çœ¼å¯è§çš„æ–‡ä»¶ï¼ˆå³æ–‡ä»¶ç®¡ç†å™¨ä¸­çš„æ–‡ä»¶ï¼‰
+2. æš‚å­˜åŒºï¼ˆStage æˆ– Indexï¼‰ï¼šå®Œæˆç¼–è¾‘åæš‚å­˜çš„æ–‡ä»¶
+3. ç‰ˆæœ¬åº“ï¼ˆcommit Historyï¼‰ï¼šå­˜æ”¾å·²ç»æäº¤çš„æ•°æ®
\ No newline at end of file

commit dc514fc044f293ab83b4d6d6cb3830dd9974475d
Merge: 3e6db26 050c4cf
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:48 2022 +0800

    On main: zero

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }
# **ç›®å½•**

<!-- vim-markdown-toc GFM -->

- [**ç›®å½•**](#ç›®å½•)
- [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
  - [æ ‡å‡†åº“æ”¯æŒ](#æ ‡å‡†åº“æ”¯æŒ)
  - [new(new operator)çš„å®ç°](#newnew-operatorçš„å®ç°)
    - [æ¦‚è¿°](#æ¦‚è¿°)
    - [`operator new()`](#operator-new)
      - [é‡è½½ `operator new/new[]`](#é‡è½½operator-newnew)
        - [å†…å­˜å¯¹é½](#å†…å­˜å¯¹é½)
    - [`placement new`](#placement-new)
      - [NOTE](#note)
      - [ä½¿ç”¨](#ä½¿ç”¨)
    - [`new`çš„åˆå§‹åŒ–](#newçš„åˆå§‹åŒ–)
      - [`trivial && non-trivial && POD`](#trivial--non-trivial--pod)
        - [éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»](#éå¹³å‡¡non-trivialç±»)
        - [å¹³å‡¡ï¼ˆ`trivial`ï¼‰ç±»](#å¹³å‡¡trivialç±»)
        - [PODç±»](#podç±»)
      - [`new`çš„ä½¿ç”¨](#newçš„ä½¿ç”¨)
        - [åˆ†ç¦»åˆ†é…ä¸æ„é€ ](#åˆ†ç¦»åˆ†é…ä¸æ„é€ )
  - [`malloc`çš„å®ç°](#mallocçš„å®ç°)
    - [å†…å­˜åŒºåŸŸ](#å†…å­˜åŒºåŸŸ)
      - [`bins`](#bins)
      - [`fast_bin`](#fast_bin)
      - [`unsorted_bin`](#unsorted_bin)
      - [`top chunk`](#top-chunk)
    - [åˆ†é…è¿‡ç¨‹](#åˆ†é…è¿‡ç¨‹)
    - [é‡Šæ”¾è¿‡ç¨‹](#é‡Šæ”¾è¿‡ç¨‹)
  - [`new` ä¸ `malloc` çš„åŒºåˆ«](#new-ä¸-malloc-çš„åŒºåˆ«)
- [å¤šæ€](#å¤šæ€)
  - [åŠ¨æ€å¤šæ€](#åŠ¨æ€å¤šæ€)
    - [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³)
    - [å®æ–½æ¡ä»¶](#å®æ–½æ¡ä»¶)
    - [å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰](#å®æ–½æœºåˆ¶è™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨)
      - [å†…å­˜æ¨¡å‹](#å†…å­˜æ¨¡å‹)
        - [è™šè¡¨](#è™šè¡¨)
      - [ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨](#ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨)
      - [è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°](#è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°)
        - [è™šå‡½æ•°](#è™šå‡½æ•°)
        - [çº¯è™šå‡½æ•°](#çº¯è™šå‡½æ•°)
    - [æ€»ç»“](#æ€»ç»“)
      - [æ€§èƒ½](#æ€§èƒ½)
  - [é™æ€å¤šæ€](#é™æ€å¤šæ€)
    - [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³-1)
- [æ™ºèƒ½æŒ‡é’ˆ](#æ™ºèƒ½æŒ‡é’ˆ)
  - [`auto_ptr`(å·²å¼ƒç”¨)](#auto_ptrå·²å¼ƒç”¨)
  - [`unique_ptr(boost::scoped_ptr)`](#unique_ptrboostscoped_ptr)
  - [`shared_ptr`](#shared_ptr)
    - [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
      - [å¼•ç”¨è®¡æ•°](#å¼•ç”¨è®¡æ•°)
    - [ç”¨æ³•](#ç”¨æ³•)
      - [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
    - [åˆ é™¤å™¨](#åˆ é™¤å™¨)
    - [å¾ªç¯å¼•ç”¨](#å¾ªç¯å¼•ç”¨)
      - [`weak_ptr`](#weak_ptr)
    - [çº¿ç¨‹å®‰å…¨](#çº¿ç¨‹å®‰å…¨)
  - [å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ](#å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ)
- [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)
  - [å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰](#å€¼ç±»åˆ«value-category)
    - [ä¸¤ç§æ··åˆç±»åˆ«](#ä¸¤ç§æ··åˆç±»åˆ«)
    - [ä¸‰ç§å…·ä½“ç±»åˆ«](#ä¸‰ç§å…·ä½“ç±»åˆ«)
      - [`lvalue`ï¼ˆå·¦å€¼ï¼‰](#lvalueå·¦å€¼)
      - [`prvalue`ï¼ˆçº¯å³å€¼ï¼‰](#prvalueçº¯å³å€¼)
      - [`xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰](#xvaluec11å°†äº¡å€¼)
  - [å€¼ç±»å‹ï¼ˆTypeï¼‰](#å€¼ç±»å‹type)
    - [æŒ‡é’ˆ](#æŒ‡é’ˆ)
    - [å¼•ç”¨](#å¼•ç”¨)
      - [å·¦å€¼å¼•ç”¨](#å·¦å€¼å¼•ç”¨)
      - [å³å€¼å¼•ç”¨](#å³å€¼å¼•ç”¨)
        - [æ— åå³å€¼å¼•ç”¨](#æ— åå³å€¼å¼•ç”¨)
- [**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚](#æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼æ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§å³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨çªƒå–)
  - [å…·åå³å€¼å¼•ç”¨](#å…·åå³å€¼å¼•ç”¨)
  - [è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨](#è½¬å‘å‹ä¸‡èƒ½é€šç”¨å¼•ç”¨)
  - [å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ](#å¼•ç”¨æŠ˜å å¼•ç”¨åå¡Œ)
  - [å·¦å³å€¼é‡è½½ç­–ç•¥](#å·¦å³å€¼é‡è½½ç­–ç•¥)
    - [ä¸€èˆ¬å‡½æ•°ç­–ç•¥](#ä¸€èˆ¬å‡½æ•°ç­–ç•¥)
    - [ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘](#ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘)
- [**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forwaed`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚](#å³å€¼å¼•ç”¨æ˜¯moveå’Œforwaedçš„åŸºç¡€å…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰å…¶å®moveå’Œforwaedéƒ½æ˜¯static_castçš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…moveæ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿forwardæ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿)
  - [ç§»åŠ¨è¯­ä¹‰ `move`](#ç§»åŠ¨è¯­ä¹‰move)
  - [`move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#moveè¯­ä¹‰that-this)
  - [`copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#copyè¯­ä¹‰that-this)
  - [å®Œç¾è½¬å‘ `forward`](#å®Œç¾è½¬å‘forward)
  - [å«ä¹‰](#å«ä¹‰)
  - [å®ç°](#å®ç°)
  - [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](#å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§)
- [è¿”å›å€¼ä¼˜åŒ–](#è¿”å›å€¼ä¼˜åŒ–)
  - [ç¼–è¯‘å™¨ä¼˜åŒ–](#ç¼–è¯‘å™¨ä¼˜åŒ–)
    - [`RVO`è‡ªåŠ¨ä¼˜åŒ–](#rvoè‡ªåŠ¨ä¼˜åŒ–)
    - [`NRVO`è‡ªåŠ¨ä¼˜åŒ–](#nrvoè‡ªåŠ¨ä¼˜åŒ–)
  - [æ‰‹åŠ¨ä¼˜åŒ–](#æ‰‹åŠ¨ä¼˜åŒ–)
- [String](#string)
  - [ä¸‰ç§å®ç°æ–¹å¼](#ä¸‰ç§å®ç°æ–¹å¼)
- [&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD](#-head)
  - [Eager Copy](#eager-copy)
  - [COW](#cow)
  - [SSO](#sso)
  - [æŸ¥æ‰¾ find](#æŸ¥æ‰¾-find)
    - [ä¸€èˆ¬æŸ¥æ‰¾](#ä¸€èˆ¬æŸ¥æ‰¾)
    - [é›†åˆæŸ¥æ‰¾](#é›†åˆæŸ¥æ‰¾)
  - [NOTE](#note-1)
- [éšæœºæ•°](#éšæœºæ•°)
  - [ä¼ªéšæœºæ•°](#ä¼ªéšæœºæ•°)
  - [çœŸéšæœºæ•°](#çœŸéšæœºæ•°)
    - [Linux å†…æ ¸ç†µæ± ](#linux-å†…æ ¸ç†µæ± )
  - [Cé£æ ¼éšæœºæ•°](#cé£æ ¼éšæœºæ•°)
  - [C++11 random](#c11-random)
    - [éšæœºæ•°å¼•æ“](#éšæœºæ•°å¼•æ“)
    - [éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»](#éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»)
    - [ä¸€èˆ¬æ­¥éª¤](#ä¸€èˆ¬æ­¥éª¤)
- [STLå®¹å™¨](#stlå®¹å™¨)
  - [é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)](#é¡ºåºå®¹å™¨çº¿æ€§ç»“æ„)
    - [vector](#vector)
    - [deque](#deque)
  - [æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)](#æœ‰åºå…³è”å¼å®¹å™¨çº¢é»‘æ ‘)
    - [ä¼˜ç‚¹](#ä¼˜ç‚¹)
      - [RB VS AVL](#rb-vs-avl)
  - [æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)](#æ— åºå…³è”å¼å®¹å™¨å“ˆå¸Œè¡¨)
    - [æ‰©å®¹](#æ‰©å®¹)
  - [å®¹å™¨é€‚é…å™¨](#å®¹å™¨é€‚é…å™¨)
  - [å…¶å®ƒ](#å…¶å®ƒ)
  - [å †](#å †)
  - [è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ)
    - [è¿­ä»£å™¨æ”¯æŒæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒæƒ…å†µ)
    - [è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ)
- [STLç®—æ³•](#stlç®—æ³•)
  - [æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼](#æŸ¥æ‰¾ç®—æ³•13ä¸ªåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼)
  - [æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥](#æ’åºå’Œé€šç”¨ç®—æ³•14ä¸ªæä¾›å…ƒç´ æ’åºç­–ç•¥)
    - [`std::sort()`](#stdsort)
  - [åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)](#åˆ é™¤å’Œæ›¿æ¢ç®—æ³•15ä¸ª)
  - [æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ](#æ’åˆ—ç»„åˆç®—æ³•2ä¸ªæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ)
  - [ç®—æœ¯ç®—æ³•(4ä¸ª)](#ç®—æœ¯ç®—æ³•4ä¸ª)
  - [ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)](#ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•6ä¸ª)
  - [å…³ç³»ç®—æ³•(8ä¸ª)](#å…³ç³»ç®—æ³•8ä¸ª)
  - [é›†åˆç®—æ³•(4ä¸ª)](#é›†åˆç®—æ³•4ä¸ª)
  - [å †ç®—æ³•(4ä¸ª)](#å †ç®—æ³•4ä¸ª)
- [STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨](#stlä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨)
  - [ä»¿å‡½æ•°](#ä»¿å‡½æ•°)
  - [å‡½æ•°é€‚é…å™¨](#å‡½æ•°é€‚é…å™¨)
- [STLç©ºé—´é…ç½®å™¨](#stlç©ºé—´é…ç½®å™¨)
  - [é»˜è®¤é…ç½®å™¨](#é»˜è®¤é…ç½®å™¨)
    - [ç±»å‹è¦æ±‚](#ç±»å‹è¦æ±‚)
    - [ç»„æˆç»“æ„](#ç»„æˆç»“æ„)
      - [ä¸€çº§ç©ºé—´é…ç½®å™¨](#ä¸€çº§ç©ºé—´é…ç½®å™¨)
      - [äºŒçº§ç©ºé—´é…ç½®å™¨](#äºŒçº§ç©ºé—´é…ç½®å™¨)
        - [åˆ†é…ç­–ç•¥](#åˆ†é…ç­–ç•¥)
    - [ç¼ºç‚¹](#ç¼ºç‚¹)
  - [è‡ªå®šä¹‰é…ç½®å™¨](#è‡ªå®šä¹‰é…ç½®å™¨)
- [STLè¿­ä»£å™¨](#stlè¿­ä»£å™¨)
  - [ç±»åˆ«](#ç±»åˆ«)
    - [åŸºæœ¬è¿­ä»£å™¨ç±»å‹](#åŸºæœ¬è¿­ä»£å™¨ç±»å‹)
    - [è¿­ä»£å™¨é€‚é…å™¨](#è¿­ä»£å™¨é€‚é…å™¨)
      - [æ’å…¥é€‚é…å™¨](#æ’å…¥é€‚é…å™¨)
      - [é€†å‘è¿­ä»£å™¨é€‚é…å™¨](#é€†å‘è¿­ä»£å™¨é€‚é…å™¨)
      - [ç§»åŠ¨è¿­ä»£å™¨](#ç§»åŠ¨è¿­ä»£å™¨)
  - [è¿­ä»£å™¨æ¨¡æ¿](#è¿­ä»£å™¨æ¨¡æ¿)
    - [è¿­ä»£å™¨ç±»å‹èƒå–](#è¿­ä»£å™¨ç±»å‹èƒå–)
  - [è¿­ä»£å™¨çš„ç§»åŠ¨](#è¿­ä»£å™¨çš„ç§»åŠ¨)
  - [è¿­ä»£å™¨å¤±æ•ˆ](#è¿­ä»£å™¨å¤±æ•ˆ)
  - [æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨](#æŒ‡é’ˆå¼•ç”¨å’Œè¿­ä»£å™¨)
    - [æŒ‡é’ˆ](#æŒ‡é’ˆ-1)
      - [constä¸æŒ‡é’ˆ](#constä¸æŒ‡é’ˆ)
      - [æŒ‡é’ˆä¸æ•°ç»„](#æŒ‡é’ˆä¸æ•°ç»„)
      - [ç±»æˆå‘˜æŒ‡é’ˆ](#ç±»æˆå‘˜æŒ‡é’ˆ)
    - [å¼•ç”¨](#å¼•ç”¨-1)
    - [è¿­ä»£å™¨](#è¿­ä»£å™¨)
- [STLæ­£åˆ™è¡¨è¾¾å¼](#stlæ­£åˆ™è¡¨è¾¾å¼)
  - [æ„æˆ](#æ„æˆ)
    - [æ­£åˆ™è¡¨è¾¾å¼regex](#æ­£åˆ™è¡¨è¾¾å¼regex)
    - [æœç´¢åŒ¹é…ç®—æ³•](#æœç´¢åŒ¹é…ç®—æ³•)
    - [ç»“æœåŒ¹é…é›†](#ç»“æœåŒ¹é…é›†)
  - [å®ä¾‹](#å®ä¾‹)
- [CPP IOå¤„ç†](#cpp-ioå¤„ç†)
  - [åŸºæœ¬æµå¯¹è±¡](#åŸºæœ¬æµå¯¹è±¡)
    - [æ–‡ä»¶æµ](#æ–‡ä»¶æµ)
      - [æµæŒ‡é’ˆ](#æµæŒ‡é’ˆ)
      - [è¡Œç»“æŸæ ‡å¿—](#è¡Œç»“æŸæ ‡å¿—)
  - [ç¼“å†²](#ç¼“å†²)
    - [ç¼“å†²åŒº](#ç¼“å†²åŒº)
    - [åº”ç”¨](#åº”ç”¨)
      - [IOåŠ é€Ÿ](#ioåŠ é€Ÿ)
      - [æµåŒæ­¥](#æµåŒæ­¥)
      - [æµå…³è”](#æµå…³è”)
    - [å½±å“](#å½±å“)
      - [\nä¸ç¼“å†²åˆ·æ–°](#nä¸ç¼“å†²åˆ·æ–°)
      - [è¯¡å¼‚çš„std::cin](#è¯¡å¼‚çš„stdcin)
  - [æµç›¸å…³è¿­ä»£å™¨](#æµç›¸å…³è¿­ä»£å™¨)
    - [è¾“å…¥æµè¿­ä»£å™¨istream_iterator](#è¾“å…¥æµè¿­ä»£å™¨istream_iterator)
    - [è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator](#è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator)
    - [è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator](#è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator)
    - [è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator](#è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator)
- [ç±»å‹æ¨å¯¼](#ç±»å‹æ¨å¯¼)
  - [`auto`](#auto)
    - [ç”¨æ³•](#ç”¨æ³•-1)
    - [é™åˆ¶](#é™åˆ¶)
  - [`decltype`](#decltype)
    - [`decltype(exp)`æ¨å¯¼è§„åˆ™](#decltypeexpæ¨å¯¼è§„åˆ™)
  - [autoä¸decltypeçš„ä¸åŒ](#autoä¸decltypeçš„ä¸åŒ)
    - [å¯¹cvé™å®šç¬¦çš„å¤„ç†](#å¯¹cvé™å®šç¬¦çš„å¤„ç†)
    - [å¯¹å¼•ç”¨çš„å¤„ç†](#å¯¹å¼•ç”¨çš„å¤„ç†)
    - [æ€»ç»“](#æ€»ç»“-1)
  - [traits(ç±»å‹èƒå–)](#traitsç±»å‹èƒå–)
    - [è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–](#è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–)
    - [åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°](#åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°)
  - [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™-æ¨¡æ¿å‚æ•°ç±»å‹æ¨å¯¼)
  - [`std::common_type`](#stdcommon_type-stdcommon_type)
- [å¯è°ƒç”¨å¯¹è±¡](#å¯è°ƒç”¨å¯¹è±¡)
  - [lambdaè¡¨è¾¾å¼/é—­åŒ…](#lambdaè¡¨è¾¾å¼é—­åŒ…)
    - [é—­åŒ…](#é—­åŒ…)
    - [å¤§è‡´åŸç†](#å¤§è‡´åŸç†)
    - [å½¢å¼è¯´æ˜](#å½¢å¼è¯´æ˜)
      - [æ•è·å˜é‡åˆ—è¡¨ `capture`](#æ•è·å˜é‡åˆ—è¡¨capture)
        - [å…¶ä»–è¯´æ˜](#å…¶ä»–è¯´æ˜)
      - [`parameters`](#parameters)
      - [`multable`](#multable)
      - [`noexcept/throw()`](#noexceptthrow)
      - [`attribute`](#attribute)
      - [`return_type`](#return_type)
    - [å…¶å®ƒ](#å…¶å®ƒ-1)
      - [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#cpp14-lambdaè¡¨è¾¾å¼å¢å¼º)
  - [ä»¿å‡½æ•°](#ä»¿å‡½æ•°-1)
  - [`std::function`ä¸ `std::bind`](#stdfunctionä¸stdbind)
    - [`std::function`](#stdfunction)
    - [`std::bind`](#stdbind)
      - [å‚æ•°ç»‘å®š](#å‚æ•°ç»‘å®š)
- [æ¨¡æ¿](#æ¨¡æ¿)
  - [æ¨¡æ¿å‡½æ•°](#æ¨¡æ¿å‡½æ•°)
    - [æ¨¡æ¿å‚æ•°](#æ¨¡æ¿å‚æ•°)
      - [é»˜è®¤æ¨¡æ¿å‚æ•°](#é»˜è®¤æ¨¡æ¿å‚æ•°)
      - [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°-å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
      - [æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
        - [è°ƒç”¨å‚æ•°](#è°ƒç”¨å‚æ•°)
        - [è¿”å›å‚æ•°](#è¿”å›å‚æ•°)
          - [å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹](#å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹)
      - [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
        - [æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³ `T`ï¼‰](#æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹å³t)
          - [æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰](#æ¨¡æ¿å®å‚éæŒ‡é’ˆè¡°å‡)
          - [æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ](#æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ)
        - [æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³ `T&ã€T&&`æˆ– `T*`ï¼‰](#æ¨¡æ¿å½¢å‚éå€¼ç±»å‹å³ttæˆ–t)
    - [æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™](#æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™)
    - [æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–)
      - [æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–)
      - [éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–](#éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–)
  - [æ¨¡æ¿ç±»](#æ¨¡æ¿ç±»)
    - [å®šä¹‰](#å®šä¹‰)
    - [å®ä¾‹åŒ–](#å®ä¾‹åŒ–)
    - [ç‰¹åŒ–](#ç‰¹åŒ–)
    - [æ¨¡æ¿ç±»ä¸å‹å…ƒ](#æ¨¡æ¿ç±»ä¸å‹å…ƒ)
  - [éç±»å‹æ¨¡æ¿å‚æ•°](#éç±»å‹æ¨¡æ¿å‚æ•°)
  - [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™)
  - [å¹²é¢„æ¨¡æ¿ç¼–è¯‘](#å¹²é¢„æ¨¡æ¿ç¼–è¯‘)
    - [æ¨¡æ¿ç±» `enable_if<>/ enable_if_t<>`](#æ¨¡æ¿ç±»enable_if-enable_if_t)
    - [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](#æ§åˆ¶æ¨¡æ¿ç¼–è¯‘-æ¨¡æ¿ç±»enable_if)
  - [ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜](#ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜)
    - [ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶](#ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶)
    - [é—®é¢˜ä¸æ–¹æ³•](#é—®é¢˜ä¸æ–¹æ³•)
      - [`export`ï¼ˆC++11å‰ï¼‰](#exportc11å‰)
  - [`typename`ä¸ `class`](#typenameä¸class)
- [ç±»ç›¸å…³](#ç±»ç›¸å…³)
  - [æƒé™æ§åˆ¶](#æƒé™æ§åˆ¶)
    - [å¤–éƒ¨è®¿é—®æ§åˆ¶](#å¤–éƒ¨è®¿é—®æ§åˆ¶)
    - [ç‰¹æ®Šæƒé™æ§åˆ¶](#ç‰¹æ®Šæƒé™æ§åˆ¶)
      - [æ„é€ å‡½æ•°privateåŒ–](#æ„é€ å‡½æ•°privateåŒ–)
        - [å½±å“](#å½±å“-1)
      - [æ„é€ å‡½æ•°protectåŒ–](#æ„é€ å‡½æ•°protectåŒ–)
        - [å½±å“](#å½±å“-2)
      - [ææ„å‡½æ•°privateåŒ–](#ææ„å‡½æ•°privateåŒ–)
        - [å½±å“](#å½±å“-3)
  - [åˆå§‹åŒ–æ–¹æ³•](#åˆå§‹åŒ–æ–¹æ³•)
    - [åˆå§‹åŒ–åˆ—è¡¨](#åˆå§‹åŒ–åˆ—è¡¨)
    - [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)
    - [åˆ—è¡¨åˆå§‹åŒ–list_initialization](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)
      - [èšåˆä½“](#èšåˆä½“)
      - [std::initializer_list](#stdinitializer_list)
    - [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)
      - [NOTE](#note-2)
        - [ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°](#ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°)
      - [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†)
  - [å‡½æ•°](#å‡½æ•°)
    - [The Big Three](#the-big-three)
    - [ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)](#ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°42)
      - [ç”Ÿæˆå†…å®¹](#ç”Ÿæˆå†…å®¹)
      - [ç”Ÿæˆè§„åˆ™](#ç”Ÿæˆè§„åˆ™)
      - [å‡½æ•°ç”Ÿæˆç®¡ç†](#å‡½æ•°ç”Ÿæˆç®¡ç†)
        - [ä½¿ç”¨ç¼ºçœå‡½æ•°=default](#ä½¿ç”¨ç¼ºçœå‡½æ•°default)
        - [ç¦æ­¢å‡½æ•°=delete](#ç¦æ­¢å‡½æ•°delete)
        - [ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit](#ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit)
    - [æ„é€ å‡½æ•°](#æ„é€ å‡½æ•°)
      - [é»˜è®¤æ„é€ å‡½æ•°](#é»˜è®¤æ„é€ å‡½æ•°)
        - [å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆtrivial constructorï¼‰](#å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°trivial-constructor)
        - [éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆnon-trivial constructorï¼‰](#éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°non-trivial-constructor)
    - [è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½](#è‡ªå¢å‡è¿ç®—ç¬¦é‡è½½)
    - [`inline`å‡½æ•°](#inlineå‡½æ•°)
      - [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹-1)
  - [`friend`æˆå‘˜](#friendæˆå‘˜)
  - [ç»§æ‰¿](#ç»§æ‰¿)
    - [è™šå‡½æ•°](#è™šå‡½æ•°-1)
    - [é™åˆ¶ç»§æ‰¿ `final`](#é™åˆ¶ç»§æ‰¿final)
    - [ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶](#ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶)
    - [ç»§æ‰¿çš„å†…å®¹](#ç»§æ‰¿çš„å†…å®¹)
      - [ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½](#ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½)
      - [ç»§æ‰¿æ„é€ å‡½æ•°](#ç»§æ‰¿æ„é€ å‡½æ•°)
    - [è™šç»§æ‰¿](#è™šç»§æ‰¿)
      - [å®ç°åŸç†](#å®ç°åŸç†)
        - [è™šåŸºç±»è¡¨](#è™šåŸºç±»è¡¨)
      - [NOTE](#note-3)
- [å‡½æ•°ä¸è¿ç®—ç¬¦](#å‡½æ•°ä¸è¿ç®—ç¬¦)
  - [`sizeof`](#sizeof)
- [ç±»å‹æ£€æŸ¥ä¸è½¬æ¢](#ç±»å‹æ£€æŸ¥ä¸è½¬æ¢)
  - [ç±»å‹å¯¹æ¯”](#ç±»å‹å¯¹æ¯”)
    - [`std::is_same<>`](#stdis_same)
      - [`std::decay`ç±»å‹é€€åŒ–](#stddecayç±»å‹é€€åŒ–)
  - [`std::common_type`](#stdcommon_type)
  - [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
    - [ä¼ ç»Ÿç±»å‹è½¬æ¢](#ä¼ ç»Ÿç±»å‹è½¬æ¢)
      - [éšå¼ç±»å‹è½¬æ¢](#éšå¼ç±»å‹è½¬æ¢)
      - [æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢](#æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢)
    - [æ ‡å‡†ç±»å‹è½¬æ¢](#æ ‡å‡†ç±»å‹è½¬æ¢)
      - [`static_cast<type-id>(expression)`](#static_casttype-idexpression)
      - [`const_cast<type-id>(expression)`](#const_casttype-idexpression)
      - [`reinterpret_cast<type-id>(expression)`](#reinterpret_casttype-idexpression)
      - [`dynamic_cast<type-id>(expression)`](#dynamic_casttype-idexpression)
    - [å»ºè®®](#å»ºè®®)
- [å…³é”®å­—è¡¥å……è¯´æ˜](#å…³é”®å­—è¡¥å……è¯´æ˜)
  - [cvé™å®šç¬¦](#cvé™å®šç¬¦)
    - [`const`](#const)
      - [`mutable`](#mutable)
      - [`const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨](#constä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨)
      - [`const`ä¿®é¥°å‡½æ•°](#constä¿®é¥°å‡½æ•°)
      - [`const`ä¸ `static`](#constä¸static)
  - [`CPP14: constexpr `](#cpp14-constexpr-)
    - [å¸¸é‡ä¸åªè¯»](#å¸¸é‡ä¸åªè¯»)
    - [`constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼](#constexprä¿®é¥°å‡½æ•°è¡¨è¾¾å¼)
    - [`constexpr`ä¿®é¥°å˜é‡](#constexprä¿®é¥°å˜é‡)
    - [`constexpr`ä¿®é¥°æŒ‡é’ˆ](#constexprä¿®é¥°æŒ‡é’ˆ)
  - [`volatile`](#volatile)
    - [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)](#é‡è½½è¦†ç›–å’Œæ”¹å†™éšè—)
  - [é‡è½½**overload**](#é‡è½½overload)
    - [é‡è½½å†³è®®](#é‡è½½å†³è®®)
      - [åå­—æŸ¥æ‰¾](#åå­—æŸ¥æ‰¾)
      - [é‡è½½å†³è®®](#é‡è½½å†³è®®-1)
        - [å‚æ•°ç±»å‹åŒ¹é…](#å‚æ•°ç±»å‹åŒ¹é…)
        - [å‡½æ•°åŒ¹é…é¡ºåº](#å‡½æ•°åŒ¹é…é¡ºåº)
      - [å¯è®¿é—®æ€§æ£€æŸ¥](#å¯è®¿é—®æ€§æ£€æŸ¥)
  - [è¦†ç›–**override**](#è¦†ç›–override)
  - [æ”¹å†™**overwrite**/éšè—](#æ”¹å†™overwriteéšè—)
  - [æ€»ç»“](#æ€»ç»“-2)
- [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†-1)
  - [catchå—](#catchå—)
    - [catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢](#catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢)
  - [throw](#throw)
  - [å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨](#å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨)
  - [å¼‚å¸¸ç§ç±»](#å¼‚å¸¸ç§ç±»)
    - [æ ‡å‡†å¼‚å¸¸](#æ ‡å‡†å¼‚å¸¸)
    - [è‡ªå®šä¹‰å¼‚å¸¸](#è‡ªå®šä¹‰å¼‚å¸¸)
- [çº¿ç¨‹ä¸åŸå­æ“ä½œ](#çº¿ç¨‹ä¸åŸå­æ“ä½œ)
- [C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§](#cå…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§)
  - [C++ 11](#c-11)
    - [`tuple`å®¹å™¨(CPP11)](#tupleå®¹å™¨cpp11)
    - [`decltype`åç½®è¿”å›ç±»å‹](#decltypeåç½®è¿”å›ç±»å‹)
    - [æ–°åˆå§‹åŒ–æœºåˆ¶](#æ–°åˆå§‹åŒ–æœºåˆ¶)
      - [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–-1)
      - [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–)
      - [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°-1)
    - [å¤–éƒ¨æ¨¡æ¿(CPP11)](#å¤–éƒ¨æ¨¡æ¿cpp11)
    - [ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·](#ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·)
    - [ç±»å‹åˆ«å](#ç±»å‹åˆ«å)
    - [`nullptr`](#nullptr)
    - [å¯å˜å‚æ•°](#å¯å˜å‚æ•°)
      - [å¯å˜å‡½æ•°å‚æ•°](#å¯å˜å‡½æ•°å‚æ•°)
      - [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°)
        - [å¯å˜å‚æ•°æ¨¡æ¿ç±»](#å¯å˜å‚æ•°æ¨¡æ¿ç±»)
          - [åç‰¹åŒ–å±•å¼€](#åç‰¹åŒ–å±•å¼€)
          - [ç»§æ‰¿å±•å¼€](#ç»§æ‰¿å±•å¼€)
        - [å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°](#å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
          - [é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…](#é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…)
          - [é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…](#é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…)
        - [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯-1)
          - [æ¶ˆé™¤ä»£ç å†—ä½™](#æ¶ˆé™¤ä»£ç å†—ä½™)
          - [å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰](#å®ç°cç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜delegate)
      - [å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)](#å¯å˜æ™®é€šå‚æ•°å˜é•¿å‚æ•°)
        - [`initializer_list`å®ç°](#initializer_listå®ç°)
        - [`...`å®ç°](#å®ç°-1)
      - [å¯å˜å‚æ•°åŸºç±»](#å¯å˜å‚æ•°åŸºç±»)
    - [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](#sfinaeæ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯)
    - [æ¨¡æ¿ç±» `enable_if`](#æ¨¡æ¿ç±»enable_if)
      - [ç±»å‹åç‰¹åŒ–](#ç±»å‹åç‰¹åŒ–)
      - [æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](#æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)
      - [æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](#æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)
    - [å¼ºåˆ¶å¼•ç”¨](#å¼ºåˆ¶å¼•ç”¨)
    - [å­—é¢é‡](#å­—é¢é‡)
      - [æ ‡å‡†å­—é¢é‡](#æ ‡å‡†å­—é¢é‡)
        - [æ•´æ•°å­—é¢é‡](#æ•´æ•°å­—é¢é‡)
          - [å½¢å¼](#å½¢å¼)
          - [note](#note-4)
      - [æµ®ç‚¹å­—é¢é‡](#æµ®ç‚¹å­—é¢é‡)
      - [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡)
      - [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡-1)
      - [å¸ƒå°”å­—é¢é‡](#å¸ƒå°”å­—é¢é‡)
      - [ç”¨æˆ·å®šä¹‰å­—é¢é‡](#ç”¨æˆ·å®šä¹‰å­—é¢é‡)
        - [å‚æ•°ä¸åŒ¹é…](#å‚æ•°ä¸åŒ¹é…)
        - [å®šä¹‰å­—é¢é‡](#å®šä¹‰å­—é¢é‡)
  - [C++14](#c14)
    - [autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼](#autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼)
    - [lambdaè¡¨è¾¾å¼](#lambdaè¡¨è¾¾å¼)
    - [`constexpr`](#constexpr-cpp14-constexpr-)
  - [C++17](#c17)
    - [ç»“æ„åŒ–ç»‘å®š(CPP17)](#ç»“æ„åŒ–ç»‘å®šcpp17)
      - [ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)](#ç»‘å®šæ–¹å¼æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)
    - [æŠ˜å è¡¨è¾¾å¼](#æŠ˜å è¡¨è¾¾å¼)
    - [æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼CTAD](#æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼ctad)
      - [æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°](#æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°)
      - [`auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°](#autoæ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°)
    - [ç¼–è¯‘æœŸIF](#ç¼–è¯‘æœŸif)
    - [æŠ˜å è¡¨è¾¾å¼è¡¥å……](#æŠ˜å è¡¨è¾¾å¼è¡¥å……)
    - [å˜é•¿ `using`å£°æ˜](#å˜é•¿usingå£°æ˜)
  - [C++20](#c20)
    - [Ranges](#ranges)
    - [View](#view)
    - [æ¨¡å—Modules](#æ¨¡å—modules)
    - [åç¨‹(Coroutines)](#åç¨‹coroutines)
- [æ–‡ä»¶ç³»ç»Ÿ](#æ–‡ä»¶ç³»ç»Ÿ)
  - [åŸºæœ¬ç±»](#åŸºæœ¬ç±»)
- [æ—¶é—´ä¸æ—¥æœŸ](#æ—¶é—´ä¸æ—¥æœŸ)
  - [Cé£æ ¼](#cé£æ ¼)
  - [`std::chrono`](#stdchrono)
    - [`duration` æ—¶é•¿](#duration-æ—¶é•¿)
      - [`std::ratio`](#stdratio)
      - [`std::chrono::duration `](#stdchronoduration-)
    - [`clock` æ—¶é’Ÿ](#clock-æ—¶é’Ÿ)
    - [`time_point` æ—¶é—´ç‚¹](#time_point-æ—¶é—´ç‚¹)
    - [`std::chrono_literals` (c++14)](#stdchrono_literals-c14)
- [æ‚é¡¹](#æ‚é¡¹)
  - [æƒ¯ç”¨æ³•](#æƒ¯ç”¨æ³•)
    - [PIML(pointer to implementation)](#pimlpointer-to-implementation)
    - [è®¾è®¡è§„åˆ™](#è®¾è®¡è§„åˆ™)
      - [åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰](#åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰)
        - [å¤´æ–‡ä»¶](#å¤´æ–‡ä»¶)
  - [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](#ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ)
    - [åå­—è§£æ](#åå­—è§£æ)
  - [æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ](#æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ)
- [å…¶ä»–æ¨è](#å…¶ä»–æ¨è)

<!-- vim-markdown-toc -->

# å†…å­˜ç®¡ç†

## æ ‡å‡†åº“æ”¯æŒ

+ æ ‡å‡†åº“ä¸º `operator new/new[]å’Œoperator delete/delete[]`åˆ†åˆ«æä¾›äº†æŠ›å‡ºå’Œä¸æŠ›å‡ºå¼‚å¸¸çš„é‡è½½ç‰ˆæœ¬ã€‚ç”¨æˆ·å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸæˆ–ç±»ä½œç”¨åŸŸå®šä¹‰è‡ªå·±çš„é‡è½½å¹¶å®ç°ã€‚
+ noteï¼š`new[]`ä¸ `delete[]`éœ€è¦æˆå¯¹ä½¿ç”¨ï¼ŒåŸå› åœ¨äºè¿™ä¸€å¯¹å‡½æ•°æ˜¯ä¸ºå¯¹è±¡æ•°ç»„æœåŠ¡çš„ã€‚`new[]`ä¸ºäº†ä¿å­˜æ•°ç»„çš„å¤§å°ä¿¡æ¯ï¼Œåœ¨ç”³è¯·å†…å­˜æ—¶**å¤šç”³è¯·äº†ä¸€ä¸ªåœ°å€é•¿åº¦**æ”¾åœ¨é¦–éƒ¨æ¥å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼Œè€Œ `delete`ä¹Ÿéœ€è¦é•¿åº¦ä¿¡æ¯æ¥ç¡®å®šè°ƒç”¨ææ„å‡½æ•°çš„æ¬¡æ•°

## new(new operator)çš„å®ç°

### æ¦‚è¿°

+ å…·ä½“å®ç°æ–¹æ³•æ²¡æœ‰ä¸€å®šä¹‹è§„ï¼Œä¸€èˆ¬è¦ç»å†ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š

1. è°ƒç”¨ `operator new`å‡½æ•°ï¼ˆ`new[]`è°ƒç”¨çš„æ—¶ `operator new[]`å‡½æ•°ï¼‰åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„æœªå‘½åçš„åŸå§‹å†…å­˜ç©ºé—´ã€‚
2. ç¼–è¯‘å™¨è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ„é€ å¯¹è±¡ï¼Œä¼ å…¥åˆå€¼ã€‚
3. å®Œæˆå¯¹è±¡æ„é€ åè¿”å›å¯¹è±¡æŒ‡é’ˆã€‚

### `operator new()`

+ `operator new()`åªåˆ†é…æ‰€è¦æ±‚çš„ç©ºé—´ï¼Œè°ƒç”¨ç›¸å…³å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–ç©ºé—´ç”± `new operator`åœ¨ `operator new`è¿”å›ä¹‹åå®Œæˆã€‚
+ `operator new()`å¯ä»¥åœ¨ä¸èƒ½åˆ†é…å†…å­˜è€Œè¿”å›å¼‚å¸¸ï¼ˆæ˜¯å¦è¿”å›å¼‚å¸¸å–å†³äºæ˜¯å¦æœ‰ `nothrow`å‚æ•°ï¼‰ä¹‹å‰é€šè¿‡ `set_new_handler()`æŒ‡å®šçš„å›è°ƒå‡½æ•° `void new_handler(void)`å®Œæˆä¸€äº›æ“ä½œ(å¯ä»¥å…ˆé‡Šæ”¾ä¸€äº›ç©ºé—´ï¼Œç„¶åå†å°è¯•ç”³è¯·ç©ºé—´)ã€‚

#### é‡è½½ `operator new/new[]`

è‹¥æƒ³å®ç°è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é‡è½½å’Œé‡å®šä¹‰ä¸¤ç§æ–¹å¼å®ç°ï¼Œä¸¤ç§æ–¹å¼éƒ½æœ‰å…¶é™åˆ¶ï¼š

|  æ–¹æ³•  |      åŸç†      |                ç¼ºç‚¹                |
| :----: | :------------: | :---------------------------------: |
|  é‡è½½  |    å‡½æ•°é‡è½½    |           ä¸åŒçš„å‡½æ•°ç­¾å           |
| é‡å®šä¹‰ | åå­—æŸ¥æ‰¾çš„é¡ºåº | å¦‚æœå‡½æ•°å·²ç» `inline`åˆ™ä¸èƒ½é‡å®šä¹‰ |

+ C++æ ‡å‡†è§„å®š `new operator`ä¸ `delete operator`çš„è¡Œä¸ºæ˜¯ä¸èƒ½å¤Ÿä¹Ÿä¸åº”è¯¥è¢«æ”¹å˜ï¼Œåªæœ‰ `operator new`ä¸ `operator delete`å…è®¸è¢«é‡è½½ã€‚
+ è¦æ±‚ï¼šé‡è½½å¯ä»¥å¸¦å…¶ä»–å‚æ•°ã€ç¬¬ä¸€å‚æ•°å¿…é¡»æ˜¯è¡¨ç¤ºè¦æ±‚åˆ†é…çš„ç©ºé—´å¤§å°çš„ `size_t`ç±»å‹ã€è¿”å›å€¼å¿…é¡»æ˜¯ `void*`ç±»å‹ã€‚

##### å†…å­˜å¯¹é½

ä¸åŒçš„ç¼–è¯‘å™¨ä¸€èˆ¬éƒ½ä¼šæœ‰é»˜è®¤çš„å¯¹é½é‡ï¼Œä¸€èˆ¬éƒ½ä¸º2çš„å¹‚æ¬¡ã€‚åœ¨Cä¸­å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ `#pragma pack(n)`ä¿®æ”¹å¯¹é½é‡ï¼ŒC++ä¸­æä¾›äº†**`alignas`**ç”¨äºæŒ‡å®šå¯¹é½é‡ï¼Œå¯ä»¥åº”ç”¨äºç±»/ç»“æ„ä½“/union/æšä¸¾çš„å£°æ˜/å®šä¹‰ã€éä½åŸŸçš„æˆå‘˜å˜é‡çš„å®šä¹‰ã€å˜é‡çš„å®šä¹‰ï¼ˆé™¤äº†å‡½æ•°å‚æ•°æˆ–å¼‚å¸¸æ•è·çš„å‚æ•°ï¼‰ï¼Œ`alignas`ä¼šå¯¹å¯¹é½é‡åšæ£€æŸ¥ï¼Œ**å¯¹é½é‡ä¸èƒ½å°äºé»˜è®¤å¯¹é½**ã€‚å¯¹åº”çš„C++è¿˜æä¾›äº† `alignof operator`ï¼Œæ“ä½œæ•°å¦‚æœæ˜¯å¼•ç”¨å°±è¿”å›å¼•ç”¨ç±»å‹çš„å¯¹é½æ–¹å¼ã€å¦‚æœæ˜¯æ•°ç»„åˆ™è¿”å›å…ƒç´ ç±»å‹çš„å¯¹é½æ–¹å¼ã€‚

```c++
struct Foo {
    int i;
    float f;
    char c;
};
struct Empty { };
struct alignas(64) Empty64 { };

cout << alignof(char) << alignof(int*) << alignof(Foo) << alignof(Empty) << alignof(Empty64);
//1 8 4 1 64
```

### `placement new`

`placement new`æ˜¯æ ‡å‡†åº“æä¾›çš„**`operator new`çš„é‡è½½**ç‰ˆæœ¬ï¼Œå®ƒæœ¬èº«å¹¶ä¸åˆ†é…å†…å­˜ã€‚`placement new`æ‰§è¡Œæ—¶å¿½ç•¥äº† `size_t`å‚æ•°ï¼Œåªæ˜¯åœ¨ç¬¬äºŒå‚æ•°ä»£è¡¨çš„çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ ˆç”šè‡³é™æ€å­˜å‚¨åŒºï¼‰ä¸Šæ„é€ å¯¹è±¡ï¼Œè¿”å›æŒ‡å‘å·²ç»åˆ†é…å¥½çš„æŸæ®µå†…å­˜ï¼ˆæ­¤æ®µå†…å­˜å·²ç»è¢«å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–è¿‡ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚

```c++
void *operator new( size_t, void * p ) throw() { return p; }///åŸå‹
Object * p = new (address) ClassConstruct(...)///ä½¿ç”¨
```

ç”±äºæ˜¯åœ¨å·²ç»é¢„å…ˆå‡†å¤‡å¥½çš„å†…å­˜ä¸­åˆ†é…å†…å­˜ï¼Œé¿å…äº†æŸ¥æ‰¾å¯ç”¨å†…å­˜ç©ºé—´å’Œä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼Œéå¸¸é€‚åˆé‚£äº›å¯¹æ—¶é—´è¦æ±‚æ¯”è¾ƒé«˜ï¼Œé•¿æ—¶é—´è¿è¡Œä¸å¸Œæœ›è¢«æ‰“æ–­çš„åº”ç”¨ç¨‹åºã€‚

#### NOTE

+ åˆ©ç”¨ `placement new`å®ç°çš„å¯¹è±¡ä¸ä¸€å®šèƒ½ä½¿ç”¨ `delete`ç³»åˆ—å‡½æ•°é‡Šæ”¾ç©ºé—´(è¿™ä¸ªå†…å­˜ä¸ä¸€å®šæ˜¯ `new`åŠ¨æ€ç”³è¯·çš„ï¼‰ï¼Œä½†æ˜¯è¿™ä¸€ç±»å¯¹è±¡**å¿…é¡»æ˜¾å¼è°ƒç”¨ç±»çš„ææ„å‡½æ•°**ã€‚ä½†æ˜¯å¦‚æœæ‰€ä½¿ç”¨çš„ç©ºé—´æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶ä¸€å®šè¦é‡Šæ”¾è¿™å—å †å†…å­˜ã€‚

#### ä½¿ç”¨

```cpp
class X{
public:
    X() { cout<<"constructor of X"<<endl; }
    ~X() { cout<<"destructor of X"<<endl;}
    void function(int n) {}
};

int main(){
    char* buf = new char[sizeof(X)]; //1:åˆ†é…å†…å­˜bufï¼ˆå †ä¸Šã€æ ˆä¸Šæˆ–è€…ç›´æ¥æŒ‡å‘æœ‰æ„ä¹‰çš„åœ°å€éƒ½å¯ï¼‰
    X *px = new(buf) X;     //2:åœ¨åˆšæ‰å·²åˆ†é…çš„ç¼“å­˜åŒºè°ƒç”¨placement newæ¥æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚
    px->function(10);     //3:æŒ‰ç…§æ™®é€šæ–¹å¼ä½¿ç”¨åˆ†é…çš„å¯¹è±¡ã€‚
    px->~X();       //4:ä½¿ç”¨å®Œè¿™ä¸ªå¯¹è±¡å°±æ˜¾å¼è°ƒç”¨å®ƒçš„ææ„å‡½æ•°\ã€‚
    delete []buf;      //5:é‡Šæ”¾buf(å–å†³äº1)
    return 0;
}
```

### `new`çš„åˆå§‹åŒ–

å¯¹äº `new T initializer;`å½¢å¼çš„è°ƒç”¨ï¼ŒC++`new` è¡¨è¾¾å¼ä¼šå…ˆè°ƒç”¨ `operator new` åˆ†é…ä¸€å—è¶³ä»¥æ”¾ä¸‹ä¸€ä¸ª `T` ç±»å‹çš„å€¼çš„å†…å­˜ï¼Œç„¶åå†æ ¹æ® `initializer` å¯¹ `T` ç±»å‹çš„å€¼è¿›è¡Œ**åˆå§‹åŒ–**ã€‚C++ çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ª[ä¸“é—¨çš„å¤æ‚ä¸»é¢˜](https://zh.cppreference.com/w/cpp/language/initialization)ï¼Œä¸åŒçš„åœºæ™¯ã€ä¸åŒçš„è¯­æ³•å’Œä¸åŒçš„ç±»å‹ä¼šå¯¼è‡´å®Œå…¨ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼å’Œåˆå§‹åŒ–ç»“æœï¼Œè°ƒç”¨æ„é€ å™¨åªæ˜¯åˆå§‹åŒ–çš„å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä¸”åªé€‚ç”¨äº ` class type` å’Œ ` union type`ã€‚

åœ¨è¿™é‡Œç”¨çš„æ˜¯å…¶ä¸­ä¸€ç§å«åš `value initialization`çš„åˆå§‹åŒ–æ–¹å¼ã€‚C++ è§„å®š `value initialization`çš„è¡Œä¸ºä¸ºï¼š

* `Tï¼š class type`ï¼Œä¸”å…·æœ‰ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„ ` default constructor`ï¼Œé‚£ä¹ˆå€¼å°†è¢«é»˜è®¤åˆå§‹åŒ–ï¼›
* `Tï¼š class type`ï¼Œä¸” `default constructor`æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æˆ–è¢«æ ‡è®°ä¸º `default`ï¼Œé‚£ä¹ˆå€¼å°†è¢«ï¼š

  * é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼Œå¦‚æœ ` defaut constructor` æ˜¯ `trivial` çš„ï¼›
  * é»˜è®¤åˆå§‹åŒ–ï¼ˆ`default-initialized`ï¼‰ï¼Œå¦‚æœ `default constructor `ä¸æ˜¯ `trivial` çš„ï¼›
* å¦‚æœ `T` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜å‡ä¼šè¢« ` value-initialized`ï¼›
* å¦åˆ™å€¼å°†è¢«é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼›

#### `trivial && non-trivial && POD`

`trival`ï¼ˆå¹³å‡¡æ— æ„ä¹‰ï¼‰å’Œ `non-trivial`çš„æ¦‚å¿µæ˜¯å¯¹äºç±»æˆ–è€…ç±»çš„æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°å››ç§æˆå‘˜å‡½æ•°è€Œè¨€çš„ã€‚

##### éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»

éå¹³å‡¡ï¼ˆ`non-trivial`ï¼‰ç±»éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ä¸­è‡³å°‘ä¸€æ¡ã€‚

1. æ˜¾å¼ `explict`å®šä¹‰äº†è¿™å››ç§å‡½æ•°ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼›
2. ç±»é‡Œæœ‰éé™æ€éPODçš„æ•°æ®æˆå‘˜ï¼›
3. æœ‰åŸºç±»

##### å¹³å‡¡ï¼ˆ`trivial`ï¼‰ç±»

å¦‚æœè¿™ä¸ªç±»éƒ½æ˜¯ `trivial  ctor/dtor/copy/assignment`å‡½æ•°ï¼Œå¯¹è¿™ä¸ªç±»è¿›è¡Œæ„é€ ã€ææ„ã€æ‹·è´å’Œèµ‹å€¼æ—¶å¯ä»¥é‡‡ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ï¼ˆç›´æ¥é‡‡ç”¨å†…å­˜æ“ä½œå¦‚ `malloc()ã€memcpy()`ç­‰æé«˜æ€§èƒ½ï¼Œä¸è°ƒç”¨æ— æœ‰æ•ˆæ„ä¹‰çš„é‚£äº› `ctor/dtor`ç­‰ï¼Œè€Œè¿™ä¹Ÿæ˜¯SGI STLå†…éƒ¨å¹²çš„äº‹æƒ…ï¼‰ã€‚[æ¥æº](https://blog.csdn.net/zhangatm/article/details/77936101)

##### PODç±»

PODï¼ˆPlain Old Dataï¼‰æ˜¯æŒ‡Cé£æ ¼çš„structç»“æ„ä½“å®šä¹‰çš„æ•°æ®ç»“æ„æˆ–è€…C++çš„å†…å»ºç±»å‹ã€‚å¦‚æœä¸€ä¸ªç±»æˆ–ç»“æ„æ˜¯Trivialï¼ˆå¹³å‡¡ï¼‰çš„ï¼Œå…·æœ‰æ ‡å‡†å¸ƒå±€ä¸”ä¸åŒ…å«ä»»ä½•éPODçš„éé™æ€æˆå‘˜ï¼Œé‚£ä¹ˆå®ƒå°±è¢«è®¤å®šæ˜¯PODç±»å‹ã€‚

###### [æ ‡å‡†å¸ƒå±€](https://www.cnblogs.com/TinyGreen/p/9049898.html "Trivialã€Non-Trivialå’ŒPODç±»å‹")

###### ç±»å‹å†…å­˜å¸ƒå±€

å¸ƒå±€æ˜¯æŒ‡ç±»ã€ç»“æ„æˆ–è”åˆç±»å‹çš„å¯¹è±¡çš„æˆå‘˜åœ¨å†…å­˜ä¸­çš„æ’åˆ—æ–¹å¼ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¸ƒå±€ç”±è¯­è¨€è§„èŒƒæ˜ç¡®å®šä¹‰ã€‚ä½†æ˜¯ï¼Œå½“ç±»æˆ–ç»“æ„åŒ…å«æŸäº› C++ è¯­è¨€åŠŸèƒ½ï¼ˆå¦‚è™šæ‹ŸåŸºç±»ã€è™šæ‹Ÿå‡½æ•°ã€è®¿é—®æƒé™æ§åˆ¶ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±é€‰æ‹©å¸ƒå±€ï¼Œç”±äºç¼–è¯‘å™¨ä¼˜åŒ–è¡Œä¸ºçš„ä¸åŒï¼Œç»“æ„æˆ–ç±»çš„å¸ƒå±€ä¹Ÿä¼šä¸åŒï¼ŒæŸäº›æƒ…å†µä¸‹å¯¹è±¡ç”šè‡³å¯èƒ½ä¸ä¼šå ç”¨è¿ç»­å†…å­˜åŒºåŸŸï¼ˆåœ¨C++
ä¸­å¾ˆå¸¸è§ï¼‰ã€‚

ç”±äºç¼ºä¹ä¸€è‡´çš„å¸ƒå±€ï¼Œä¹Ÿå°±æ— æ³•å°†å…¶ä¼ é€’åˆ°ä½¿ç”¨å…¶ä»–è¯­è¨€ï¼ˆä¾‹å¦‚ Cï¼‰ç¼–å†™çš„ç¨‹åºï¼Œè€Œä¸”ç”±äºå†…å­˜ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨å¿«é€Ÿä½çº§å‡½æ•°ï¼ˆä¾‹å¦‚ `memcopy`ï¼‰å¯¹å…¶è¿›è¡Œå¯é å¤åˆ¶ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œå¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ã€‚ä¸ºä½¿ç¼–è¯‘å™¨ä»¥åŠ C++ ç¨‹åºå’Œå…ƒç¨‹åºèƒ½å¤Ÿæ¨æ–­å‡ºä»»ä½•ç»™å®šç±»å‹å¯¹äºä¾èµ–äºç‰¹å®šå†…å­˜å¸ƒå±€çš„æ“ä½œçš„é€‚ç”¨æ€§ï¼ŒC++14 å¼•å…¥äº†ä¸‰ç§ç±»åˆ«çš„ç®€å•ç±»å’Œç»“æ„ï¼šæ™®é€šã€æ ‡å‡†å¸ƒå±€å’Œ PODï¼ˆæˆ–ç®€å•æ—§æ•°æ®ï¼‰ã€‚ æ ‡å‡†åº“å…·æœ‰å‡½æ•°æ¨¡æ¿ `is_trivial<T>`ã€`is_standard_layout<T>` å’Œ `is_pod<T>`ï¼Œè¿™äº›æ¨¡æ¿å¯ä»¥ç¡®å®šæŸä¸€ç»™å®šç±»å‹æ˜¯å¦å±äºæŸä¸€ç»™å®šç±»åˆ«ã€‚


1. æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å‡ä¸ºæ ‡å‡†å¸ƒå±€ç±»å‹
2. æ‰€æœ‰åŸºç±»å‡ä¸ºæ ‡å‡†å¸ƒå±€ç±»å‹
3. æ²¡æœ‰è™šå‡½æ•°
4. æ²¡æœ‰è™šåŸºç±»
5. æ‰€æœ‰éé™æ€æˆå‘˜çš„è®¿é—®æƒé™å‡ç›¸åŒ
6. æ²¡æœ‰ä»»ä½•åŸºç±»çš„ç±»å‹ä¸ç±»ä¸­ç¬¬ä¸€ä¸ªéé™æ€æˆå‘˜ç›¸åŒ
7. è¦ä¹ˆå…¨éƒ¨åŸºç±»éƒ½æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ï¼Œè¦ä¹ˆæœ€ä¸‹å±‚çš„å­ç±»æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜ä¸”æœ€å¤šåªæœ‰ä¸€ä¸ªåŸºç±»æœ‰éé™æ€æ•°æ®æˆå‘˜ã€‚æ€»ä¹‹ç»§æ‰¿æ ‘ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªç±»æœ‰éé™æ€æ•°æ®æˆå‘˜ã€‚æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å¿…é¡»éƒ½æ˜¯æ ‡å‡†å¸ƒå±€ç±»å‹ã€‚

###### **PODçš„ä¼˜ç‚¹**

1. å­—èŠ‚èµ‹å€¼ï¼Œå…¶äºŒè¿›åˆ¶å†…å®¹æ˜¯å¯ä»¥éšä¾¿å¤åˆ¶çš„ï¼Œåœ¨ä»»ä½•åœ°æ–¹ï¼Œåªè¦å…¶äºŒè¿›åˆ¶å†…å®¹åœ¨ï¼Œå°±èƒ½è¿˜åŸå‡ºæ­£ç¡®æ— è¯¯çš„PODå¯¹è±¡ï¼Œå³å¯ä»¥å®‰å…¨çš„ä½¿ç”¨ `memset(),mercopy()`æˆ–å…¶ä»–ç±»ä¼¼çš„å†…å­˜åˆå§‹åŒ–å‡½æ•°å¯¹PODç±»å‹è¿›è¡Œåˆå§‹åŒ–å’Œæ‹·è´ç­‰æ“ä½œ
2. æä¾›äº†å¯¹Cå†…å­˜å¸ƒå±€çš„å…¼å®¹ï¼ŒC++ç¨‹åºå¯ä»¥ä¸Cå‡½æ•°è¿›è¡Œç›¸äº’çš„æ“ä½œï¼Œå› ä¸ºPODç±»å‹çš„æ•°æ®åœ¨C++ä¸Cä¹‹é—´çš„æ“ä½œæ€»æ˜¯å®‰å…¨çš„
3. ä¿è¯äº†**é™æ€åˆå§‹åŒ–**çš„å®‰å…¨æœ‰æ•ˆï¼Œé™æ€åˆå§‹åŒ–åœ¨å¾ˆå¤šæ—¶å€™èƒ½å¤Ÿæé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œè€ŒPODç±»å‹çš„å¯¹è±¡åˆå§‹åŒ–å¾€å¾€æ›´åŠ ç®€å•ï¼ˆæ¯”å¦‚æ”¾åœ¨ç›®æ ‡æ–‡ä»¶çš„.bssæ®µï¼Œåœ¨åˆå§‹åŒ–ä¸­ç›´æ¥è¢«èµ‹0ï¼‰

#### `new`çš„ä½¿ç”¨

```c++
::(optional) new (placement_params)(optional) ( type ) initializer(optional);

p_var = new type(initializer);//ä¸€èˆ¬è¡¨è¾¾å¼
p_var = new type{initializer};//ä¸€èˆ¬è¡¨è¾¾å¼

p_var = new type[size];
delete[] p_var;

auto p = new double[2][2];
auto p = new double[2][2]{ {1.0,2.0},{3.0,4.0} };

new (nothrow) Type (optional-initializer-expression-list);//ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œå¤±è´¥è¿”å›nullptrã€‚

auto p = new auto('c');
```

##### åˆ†ç¦»åˆ†é…ä¸æ„é€ 

`new`æ“ä½œå°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ ç»„åˆåœ¨ä¸€èµ·ï¼Œåœ¨æ„é€ ç±»æ—¶å¯èƒ½é€ æˆåˆ›å»ºä¸€äº›ç”¨ä¸åˆ°çš„å¯¹è±¡ã€å¯¹è±¡è¢«èµ‹å€¼ä¸¤æ¬¡ã€æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ç”šè‡³ä¸èƒ½åŠ¨æ€åˆ†é…æ•°ç»„ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨ `allocator`éš¾åº¦å®Œæˆå†…å­˜çš„åˆ†é…ã€‚

```c++
allocator<string> alloc; // æ„é€ allocatorå¯¹è±¡
auto const p = alloc.allocate(n); // åˆ†é…nä¸ªæœªåˆå§‹åŒ–çš„string

auto q = p;

alloc.construct(q++, "hello"); // åœ¨åˆ†é…çš„å†…å­˜å¤„åˆ›å»ºå¯¹è±¡
alloc.construct(q++, 10, 'c');

while(q != p)//å°†å·²æ„é€ çš„stringé”€æ¯ï¼š
    alloc.destroy(--q);

alloc.deallocate(p, n);//å°†åˆ†é…çš„nä¸ªstringå†…å­˜ç©ºé—´é‡Šæ”¾
```

ä½†å®é™…ä¸Šå‡ ä¹å¾ˆå°‘ä½¿ç”¨ `std::allocator`ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯ `std::alloc`ã€‚ä¸»è¦æ˜¯ç”±äºå‰è€…æœ‰æ— æ³•æ§åˆ¶å†…å­˜å¯¹é½ã€éš¾ä»¥åº”ç”¨å†…å­˜æ± ä¹‹ç±»çš„ä¼˜åŒ–æœºåˆ¶ç­‰é—®é¢˜ã€‚

## [`malloc`çš„å®ç°](https://zhuanlan.zhihu.com/p/57863097)

`malloc()`çš„å®ç°**ä¾èµ–äº `brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡ `brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMA	P_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨ `mmap`çš„åŒ¿åæ˜ å°„åœ¨ `MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚

![](img/lang/memary_pool.jpg)

![](img/lang/chunk.png)

### å†…å­˜åŒºåŸŸ

|   åç§°   |                   è§£é‡Š                   |
| :-------: | :---------------------------------------: |
| `chunk` |    å°†å †å†…å­˜åˆ†æˆäº†å¤§å°ä¸åŒçš„ `chunk`    |
|  `bin`  |   ç”±åŒå‘é“¾è¡¨ç»„ç»‡çš„å¤§å°ç›¸ä¼¼çš„ `chunk`   |
| `bins` | `bin`é“¾é¦–åœ°å€ç»„æˆçš„å¤§å°ä¸º `128`çš„æ•°ç»„ |

#### `bins`

|   `bins`ç±»åˆ«   |   åŒºåŸŸ   |                                ç‰¹ç‚¹                                |       ä½œç”¨       |
| :--------------: | :------: | :-----------------------------------------------------------------: | :---------------: |
|                  |  [0,0]  |                               æœªä½¿ç”¨                               |                  |
| `unsorted bin` |  [1,1]  |             ç»´æŠ¤éƒ¨åˆ† `free`é‡Šæ”¾ä»¥åŠè¢«åˆ†å‰²çš„ `chunk`             |   åŠ å¿«äºŒæ¬¡åˆ†é…   |
|  `small bin`  |  [2,63]  |         æ¯ä¸ª `bin`ä¿å­˜æ‰€æœ‰å¤§å°ä¸º `index*8B`çš„ `chunk`         | åˆ†é… `512B`ä»¥ä¸‹ |
|  `large bin`  | [64,127] | `bin`å†…ä¸ºæŒ‡å®šèŒƒå›´å†…æŒ‰å¤§å°æ’åºçš„ `chunk`ï¼Œç›¸é‚» `bin`å·® `64B` | åˆ†é… `512B`ä»¥ä¸Š |

#### `fast_bin`

ä¸ºäº†åŠ é€Ÿå°å¯¹è±¡çš„åˆ†é…ï¼Œé‡Šæ”¾ä¸å¤§äº `max_fast`ï¼ˆé»˜è®¤ `64B`ï¼‰çš„ `chunk` é¦–å…ˆå°†ä¼šè¢«æ”¾åˆ° `fast bins`ä¸­ï¼Œ`fast bins` ä¸­çš„ `chunk` å¹¶ä¸æ”¹å˜å®ƒçš„ä½¿ç”¨æ ‡å¿— Pï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•å°†å®ƒä»¬åˆå¹¶ã€‚`malloc` åœ¨æŸä¸ª**ç‰¹å®šçš„æ—¶å€™**ä¼šéå† ` fast bins` ä¸­çš„ `chunk`ï¼Œå°†ç›¸é‚»çš„ç©ºé—² `chunk` è¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶åçš„ `chunk` åŠ å…¥ `unsorted bin` ä¸­ã€‚

#### `unsorted_bin`

ä¿å­˜è¢«ç”¨æˆ·é‡Šæ”¾çš„å¤§äº `max_fast`çš„ `chunk` ï¼Œæˆ–è€… `fast bins` ä¸­çš„ç©ºé—² `chunk` åˆå¹¶åäº§ç”Ÿçš„ `chunk`ã€‚`unsorted bin` å¯ä»¥çœ‹åšæ˜¯ `bins` çš„ä¸€ä¸ª**ç¼“å†²åŒº**ï¼Œå¢åŠ å®ƒåªæ˜¯ä¸ºäº†åŠ å¿«åˆ†é…çš„é€Ÿåº¦ã€‚

#### `top chunk`

`top chunk`æ˜¯å †é¡¶çš„ `chunk`ï¼Œå †é¡¶æŒ‡é’ˆ `brk`ä½äº `top chunk`çš„é¡¶éƒ¨ï¼Œä»–é€šè¿‡ä» `mmap`ç›´æ¥ä½¿ç”¨**å†…å­˜æ˜ å°„**æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´æ¨¡æ‹Ÿ `sub-heap`ï¼Œç”¨äºåˆ†é…æ¯”è¾ƒå¤§çš„å†…å­˜ã€‚ç§»åŠ¨ `brk`æŒ‡é’ˆå³å¯æ‰©å…… `top chunk`çš„å¤§å°ï¼Œ**å½“åœ¨é‡Šæ”¾å†…å­˜æˆ–è€…è°ƒæ•´ `brk`é€ æˆ `top chunk`å¤§å°è¶…è¿‡ `128k`ï¼ˆå¯é…ç½®ï¼‰æ—¶ï¼Œä¼šè§¦å‘ `malloc_trim`æ“ä½œè°ƒç”¨ `sbrk(-size)`å°†å†…å­˜å½’è¿˜æ“ä½œç³»ç»Ÿ**ã€‚

![](img/lang/chunk-layout.png)

### åˆ†é…è¿‡ç¨‹

`glibc`åœ¨å†…å­˜æ± ä¸­æŸ¥æ‰¾åˆé€‚çš„ `chunk`æ—¶é‡‡ç”¨äº†**æœ€ä½³é€‚åº”**ï¼ˆæ»¡è¶³æ‰€éœ€ç©ºé—´çš„æœ€å°å€¼ï¼‰ç®—æ³•ï¼Œå½“éœ€è¦ç»™ç”¨æˆ·åˆ†é…çš„ `chunk` å°äºæˆ–ç­‰äº `max_fast` æ—¶ï¼Œ`malloc` é¦–å…ˆä¼šåœ¨ `fast bins `ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç©ºé—²å—ï¼Œç„¶åå†åœ¨ `unsorted bin`  ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœ `unsorted bin`ä¸èƒ½æ»¡è¶³åˆ†é…è¦æ±‚ï¼Œ `malloc`ä¾¿ä¼šå°† `unsorted bin` ä¸­çš„ `chunk` éƒ½å½’ç±»æ”¾åˆ° `smallbins`å’Œ `largebins`é‡Œé¢ï¼Œæœ€åæ‰ä¼šå»æŸ¥æ‰¾ `bins` ä¸­çš„ç©ºé—² `chunk`ã€‚

1. å°äº `512B`ï¼Œåˆ™ `index = floor(size/8)`ï¼š
   1. å¦‚æœ `smallbins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
   2. å¦‚æœ `smallbins[index]`éç©ºï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª `chunk`
2. å¤§äº `512B`ï¼Œåˆ™ `index = 64 + floor((size-512)/64)`ï¼š
   1. å¦‚æœ `largebins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
   2. å¦‚æœ `largebins[index]`éç©ºï¼Œæ‰«æé“¾è¡¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äºè¦æ±‚å¤§å°çš„ `chunk`ï¼Œå°†æ­¤ `chunk`å‰©ä¸‹çš„ç©ºé—´æ”¾å…¥ `unsorted bin`ä¸­
3. `index++`ï¼šä»æ›´å¤§çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚å¤§å°çš„ `chunk`ä¸ºæ­¢ï¼Œæ‰¾åˆ°åå°† `chunk`æ‹†åˆ†ï¼Œå¹¶å°†å‰©ä½™çš„åŠ å…¥åˆ° `unsorted_list`ä¸­

å½“ `fast bin`å’Œ `bins`éƒ½ä¸èƒ½æ»¡è¶³å†…å­˜éœ€æ±‚æ—¶ï¼Œ`malloc`ä¼šè®¾æ³•åœ¨**`top chunk`**ä¸­åˆ†é…ä¸€å—å†…å­˜ç»™ç”¨æˆ·ï¼Œç”šè‡³ `top chunk`éƒ½ä¸èƒ½æ»¡è¶³æ—¶ï¼Œ`malloc`ä¼šä» `mmap`æ¥ç›´æ¥ä½¿ç”¨å†…å­˜æ˜ å°„æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ã€‚

### é‡Šæ”¾è¿‡ç¨‹

é€šè¿‡ `mmap`åˆ†é…çš„ `chunk`åœ¨é‡Šæ”¾æ—¶å°†ç›´æ¥è§£é™¤æ˜ å°„å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚é‡Šæ”¾çš„ `chunk`å¦‚æœå’Œ `top chunk`ç›¸é‚»ï¼Œåˆ™å’Œ `top chunk`åˆå¹¶ï¼ˆå¯èƒ½è§¦å‘ `top chunk`çš„è°ƒæ•´ï¼‰ï¼Œå¦åˆ™ç›´æ¥æ’å…¥åˆ° `unsorted bin`ä¸­ã€‚

## `new` ä¸ `malloc` çš„åŒºåˆ«

|            |          new operator          |      malloc      |
| :--------: | :-----------------------------: | :--------------: |
|  åˆ†é…å¤§å°  |        è‡ªåŠ¨è®¡ç®—ç±»å‹å¤§å°        |     å‚æ•°æŒ‡å®š     |
| å¯¹è±¡åˆå§‹åŒ– |      è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ      | ä¸æ”¯æŒè‡ªåŠ¨åˆå§‹åŒ– |
|  å¼‚å¸¸å¤„ç†  | `bad_alloc`æˆ–è€…æ„é€ å‡½æ•°çš„å¼‚å¸¸ |      ä¸æ”¯æŒ      |
|   è¿”å›å€¼   |      å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆæˆ–å¼‚å¸¸      | void\*æŒ‡é’ˆæˆ–null |
|  å†…å­˜è°ƒæ•´  |      å€ŸåŠ© `realloc`å‡½æ•°      |      ä¸æ”¯æŒ      |

`realloc`ï¼šå¦‚æœåŸæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´æœ‰è¶³å¤Ÿçš„è¿ç»­ç©ºé—´åˆ™åŸåœ°æ‰©å¤§å¯åˆ†é…çš„å†…å­˜åœ°å€è¿”å›åŸæŒ‡é’ˆï¼Œå¦åˆ™å¯»æ‰¾æ»¡è¶³é•¿åº¦çš„è¿ç»­å†…å­˜ç©ºé—´å¹¶å°†æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´è¿”å›æ–°ç©ºé—´é¦–åœ°å€å¹¶é‡Šæ”¾åŸåœ°å€ç©ºé—´

# å¤šæ€

å¤šæ€æŒ‡çš„æ˜¯å¯¹åŒä¸€æ¥å£è°ƒç”¨ä¼šè¡¨ç°å‡ºä¸åŒè¡Œä¸ºçš„ä¸€ç§ç°è±¡ï¼Œå¯åˆ†ä¸ºé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ã€‚

## åŠ¨æ€å¤šæ€

åˆç§°**è¿è¡Œæ—¶å¤šæ€ã€æ™šç»‘å®šï¼ˆåŸºç±»è™šå‡½æ•°å®šä¹‰æ¥å£ï¼Œç»§æ‰¿ç±»è´Ÿè´£å®ç°ï¼‰**ï¼Œå®ç°æ–¹æ³•ä¸ºè™šå‡½æ•°ã€‚

### è®¾è®¡æ€æƒ³

+ åœ¨åŸºç±»ä¸­æŠŠå¤šä¸ªç›¸å…³çš„å¯¹è±¡å…±åŒçš„åŠŸèƒ½å£°æ˜ä¸ºå¤šä¸ªå…¬å…±çš„è™šå‡½æ•°æ¥å£ã€‚å„ä¸ªå­ç±»é‡å†™è¿™äº›è™šå‡½æ•°ä»¥å®Œæˆå…·ä½“çš„åŠŸèƒ½ã€‚å®¢æˆ·ç«¯çš„ä»£ç ï¼ˆæ“ä½œå‡½æ•°ï¼‰é€šè¿‡æŒ‡å‘åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ“ä½œè¿™äº›å¯¹è±¡ï¼Œå¯¹è™šå‡½æ•°çš„è°ƒç”¨ä¼šè‡ªåŠ¨ç»‘å®šåˆ°å®é™…æä¾›çš„å­ç±»å¯¹è±¡ä¸Šå»ã€‚
+ åªæœ‰å½“ç¨‹åºè¿è¡Œæ—¶æ‰èƒ½æœ€ç»ˆç¡®å®šè°ƒç”¨çš„å…·ä½“çš„æ–¹æ³•

### å®æ–½æ¡ä»¶

1. å«æœ‰è™šå‡½æ•°çš„åŸºç±»
2. ç»§æ‰¿è‡ªè™šåŸºç±»çš„å­ç±»ï¼Œå­ç±»å’ŒåŸºç±»çš„æˆå‘˜å‡½æ•°ç­¾åå®Œå…¨ç›¸åŒ(è¿”å›å€¼ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨)
3. å°†å­ç±»å¯¹è±¡çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨èµ‹å€¼ç»™åŸºç±»ç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨å¹¶ä»¥æ­¤è°ƒç”¨è™šå‡½æ•°

### å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰

+ å¯¹äºå«æœ‰è™šå‡½æ•°çš„åŸºç±»ï¼Œå…¶å¯¹è±¡çš„ç©ºé—´çš„æœ€å‰é¢ä¼šå ç”¨ä¸€ä¸ªåœ°å€é•¿åº¦æ¥ä¿å­˜ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨
+ ç¼–è¯‘å™¨åœ¨å¤„ç†éè™šå‡½æ•°æ—¶ï¼Œä¼šå°†å‡½æ•°åœ°å€æˆ–ç›¸å…³ä¿¡æ¯ç›´æ¥ç¼–ç åˆ°äºŒè¿›åˆ¶ä»£ç ä¸­ï¼Œåœ¨äºŒè¿›åˆ¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç›´æ¥è·³è½¬å¯¹åº”çš„ä»£ç æ®µï¼Œè€Œè™šå‡½æ•°åœ¨ç»‘å®šæ—¶ä¸ä¼šæ˜ç¡®ç»‘å®šåˆ°ä¸€ä¸ªå¯æ‰§è¡Œçš„åœ°å€ã€‚
+ ä¸€ä¸ªåŸºç±»çš„å¤šä¸ªå­ç±»å®ä¾‹åœ¨è°ƒç”¨åŒä¸€å‡½æ•°æ—¶ä¹‹æ‰€ä»¥è¡¨ç°ä¸åŒï¼Œæ˜¯å› ä¸ºç±»çš„æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨è‡ªåŠ¨åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥äº† `this`æŒ‡é’ˆå‚æ•°ï¼Œä¸åŒå¯¹è±¡çš„ `this`æŒ‡é’ˆå„ä¸ç›¸åŒï¼Œé€šè¿‡è™šå‡½æ•°è¡¨æœ€ç»ˆç¡®å®šçš„å‡½æ•°åœ°å€ä¹Ÿä¸ç›¸åŒã€‚

#### [å†…å­˜æ¨¡å‹](https://jacktang816.github.io/post/virtualfunction/)

```C++
class A {
  public:
    virtual void v_a(){}
    virtual ~A(){}
    int64_t _m_a;
};

int main(){
    A* a = new A();
    return 0;
}
```

æ¯ä¸ªç±»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè™šå‡½æ•°è¡¨ï¼ˆä¸åŒç¼–è¯‘å™¨å®ç°æœ‰å·®åˆ«ï¼‰ï¼Œå¯¹è±¡ A å®ä¾‹çš„å¤´éƒ¨æŒæœ‰ `vtable` æŒ‡é’ˆï¼ˆæŒ‡å‘ä»£ç æ®µä¸­çš„ A ç±»å‹çš„è™šå‡½æ•°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè™šå‡½æ•°èµ·å§‹åœ°å€ï¼‰ï¼Œç´§æ¥ç€æ˜¯ A å¯¹è±¡æŒ‰ç…§å£°æ˜é¡ºåºæ’åˆ—çš„æˆå‘˜å˜é‡ã€‚

![](img/lang/vptrLocation.png)

##### è™šè¡¨

å­˜åœ¨äºåªè¯»æ•°æ®æ®µ `.rodata`ä¸­ï¼Œç”±**è¡¨å¤´å’Œè™šå‡½æ•°è¡¨**ä¸¤éƒ¨åˆ†ç»„æˆï¼š

**`typeinfo`**ï¼šå­˜å‚¨äº†ä¸€ä¸ªç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç±»åä»¥åŠçˆ¶ç±»ï¼Œå¯¹äºæ²¡æœ‰çˆ¶ç±»çš„ A æ¥è¯´ï¼Œå½“å‰ `tinfo`æ˜¯ `class_type_info` ç±»å‹çš„ï¼‰ï¼Œå…³é”®å­— `typeid`è¿”å›çš„å°±æ˜¯æ­¤å­—æ®µã€‚

**`offsets`ï¼š**å³ä¸‹å›¾ä¸­çš„ç´«è‰²æ¡†å†…å®¹ï¼Œè¯¥å†…å®¹**ä»…é™äºè™šç»§æ‰¿**çš„æƒ…å½¢ï¼ˆæ— è™šç»§æ‰¿åˆ™æ— æ­¤å†…å®¹ï¼‰

**`offset to top`ï¼š**æŒ‡åˆ°å¯¹è±¡èµ·å§‹åœ°å€çš„åç§»å€¼ï¼Œåªæœ‰å¤šé‡ç»§æ‰¿çš„æƒ…å½¢æ‰æœ‰å¯èƒ½ä¸ä¸º0ï¼Œå•ç»§æ‰¿æˆ–æ— ç»§æ‰¿çš„æƒ…å½¢éƒ½ä¸º0ã€‚

**`RTTI information`ï¼š**æ˜¯ä¸€ä¸ªæŒ‡å‘ `typeinfo`å¯¹è±¡çš„æŒ‡é’ˆï¼ˆå³ä¸Šæ–‡æåˆ°çš„ `typeinfo`æŒ‡é’ˆï¼‰ï¼Œå®ƒç”¨äºå”¯ä¸€åœ°æ ‡è¯†è¯¥ç±»å‹

**`virtual function pointers`**ï¼šå³è™šå‡½æ•°è¡¨ï¼Œæ¯ä¸€ä¸ªè¡¨é¡¹**æŒ‰ç…§è™šå‡½æ•°çš„ç”³æ˜é¡ºåº**è®°å½•äº†ä¸€ä¸ªè™šå‡½æ•°çš„åœ°å€ï¼ˆ**æ¯ä¸ªè™šææ„å‡½æ•°åœ¨è™šå‡½æ•°è¡¨ä¸­ä¼šå­˜åœ¨ä¸¤ä¸ªè¡¨é¡¹**ï¼šåˆ†åˆ«å¯¹åº”æ ˆæ„é€ å’Œå †æ„é€ æ—¶çš„ææ„å‡½æ•°ï¼‰ï¼Œ**`vtable`æŒ‡å‘çš„æ˜¯ç¬¬ä¸€ä¸ªè¡¨é¡¹**ã€‚

![](img/lang/virtualTable.png)

```c++
struct Base {
    Base() = default;
    virtual ~Base() = default;
    void FuncA() {}
    virtual void FuncB() {printf("FuncB\n");}
    int a, b;
};

int main() {
    Base a;
    return 0;
}
/*
clang -Xclang -fdump-record-layouts -stdlib=libc++ -c model.cc//æŸ¥çœ‹å¯¹è±¡å¸ƒå±€
clang -Xclang -fdump-vtable-layouts -stdlib=libc++ -c model.cc//æŸ¥çœ‹è™šè¡¨å¸ƒå±€
*/
```

#### ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨

1. å•ç»§æ‰¿æ— é‡å†™ï¼šåˆ™è¡¨æ— è¦†ç›–ï¼Œå­ç±»çš„è™šå‡½æ•°è¡¨é¡¹æ¥åˆ°çˆ¶ç±»çš„è¡¨é¡¹ä¹‹åã€‚
2. å•ç»§æ‰¿æœ‰é‡å†™ï¼šå­ç±»é‡å†™çš„è™šå‡½æ•°åœ°å€ä¼šè¦†ç›–çˆ¶ç±»ä¸­è¢«é‡å†™çš„è™šå‡½æ•°çš„è¡¨é¡¹ï¼Œå…¶ä»–å­ç±»è™šå‡½æ•°è¡¨é¡¹æ¥åˆ°åé¢ã€‚
3. å¤šç»§æ‰¿æ— é‡å†™ï¼šå­ç±»å«æœ‰**å¤šä¸ªè™šå‡½æ•°è¡¨å’Œå¤šä¸ªè™šå‡½æ•°è¡¨æŒ‡é’ˆ**ï¼ˆ`linux/g++`ï¼‰ã€‚å­ç±»çš„è™šå‡½æ•°è¡¨é¡¹è¢«æ”¾åœ¨ç¬¬ä¸€ä¸ªç”³æ˜çš„åŸºç±»çš„è™šå‡½æ•°è¡¨é¡¹çš„åè¾¹æ„æˆä¸€å¼ è¡¨ï¼Œå…¶ä½™åŸºç±»çš„è™šå‡½æ•°è¡¨è¢«ä¾æ¬¡æ”¾åˆ°åè¾¹ï¼Œæ­¤æ—¶å­ç±»æŒæœ‰å¤šä¸ªè™šå‡½æ•°è¡¨ã€‚
4. å¤šç»§æ‰¿æœ‰é‡å†™ï¼šå­ç±»é‡å†™çš„è™šå‡½æ•°åœ°å€**ä¼šè¦†ç›–æ‰€æœ‰åŸºç±»**ä¸­è¢«é‡å†™çš„è™šå‡½æ•°çš„è¡¨é¡¹ï¼Œå…¶ä½™åŒç¬¬ä¸‰æ¡ã€‚
5. æœ‰è™šå‡½æ•°çš„è™šç»§æ‰¿ï¼š
6. æ— è™šå‡½æ•°çš„è™šç»§æ‰¿ï¼š

#### è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°

##### è™šå‡½æ•°

**å¸Œæœ›**å­ç±»å¯ä»¥å„è‡ªä¸ºè‡ªå·±çˆ¶ç±»æä¾›çš„è™šå‡½æ•°æä¾›ä¸ªæ€§åŒ–çš„å®ç°ï¼Œå½“å­ç±»æ²¡æœ‰å®ç°æ—¶å¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„ç¼ºçœå®ç°ã€‚å› æ­¤**è™šå‡½æ•°å¿…é¡»æä¾›å®ç°**ã€‚

##### çº¯è™šå‡½æ•°

+ æ€æƒ³ï¼š**å¼ºåˆ¶**å­ç±»å¿…é¡»æä¾›çº¯è™šå‡½æ•°çš„ä¸ªæ€§åŒ–å®ç°ï¼Œå¦åˆ™å­ç±»è¿˜æ˜¯ä¸€ä¸ªçº¯è™šåŸºç±»ã€‚
+ ç”³æ˜åœ¨**åŸºç±»ä¸­ä¸éœ€å®ç°**ï¼ˆä¹Ÿå¯ä»¥æä¾›å®ç°ï¼‰çš„è™šå‡½æ•°ï¼ˆè¿™æ ·çš„ç±»è¢«ç§°ä¸º**æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–**å¯¹è±¡ï¼‰ï¼Œçº¯è™šå‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰ä»¥åï¼Œæ´¾ç”Ÿç±»æ‰èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ã€‚
+ å¦‚æœä¸åŠ æ˜¾å¼çº¦æŸçš„è¯ï¼ŒåŸºç±»çš„çº¯è™šå‡½æ•°åœ¨å­ç±»ä¸­è‡ªåŠ¨å˜ä¸ºäº†è™šå‡½æ•°ã€‚
+ **NOTE**ï¼šææ„å‡½æ•°å¯ä»¥æ˜¯çº¯è™šçš„ï¼Œä½†**çº¯è™šææ„å‡½æ•°å¿…é¡»æœ‰å®šä¹‰ä½“**ï¼Œå› ä¸ºå­ç±»ä¼šéšå«è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ã€‚

### æ€»ç»“

|                 ä¼˜ç‚¹                 |              ç¼ºç‚¹              |
| :----------------------------------: | :----------------------------: |
| **åˆ†ç¦»äº†æ¥å£ä¸å®ç°**ï¼Œæ–¹ä¾¿å¤ç”¨ |        è¿è¡Œæ—¶ç»‘å®šæœ‰å¼€é”€        |
|   ä¾¿äºå¤„ç†åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„å¼‚è´¨å¯¹è±¡   | **ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–è™šå‡½æ•°** |
|                                      |         ä¸æ–¹ä¾¿ä¿®æ”¹æ¥å£         |

#### æ€§èƒ½

**å•ç»§æ‰¿ï¼ˆå¼€é”€å¾ˆå°ï¼‰ï¼š**æ—¶é—´ä¸Šä»…ä»…åªæ˜¯å¢åŠ äº†å¾ˆå°‘å‡ æ¬¡å¯»å€çš„è¿‡ç¨‹ï¼Œè€Œä¸”éœ€è¦è·³è½¬çš„åœ°å€éƒ½æ˜¯ä¸éœ€è¦è®¡ç®—çš„ï¼Œå› æ­¤æ—¶é—´ä¸Šå¹¶ä¸ä¼šå¢åŠ å¤šå°‘å¼€é”€ã€‚

**å¤šç»§æ‰¿ï¼š**ç”±äºä¼šæ ¹æ®å¤šä¸ªçˆ¶ç±»ç”Ÿæˆå¤šä¸ª `vptr`ï¼Œåœ¨å¯¹è±¡é‡Œä¸ºå¯»æ‰¾ `vptr` è€Œè¿›è¡Œçš„åç§»é‡è®¡ç®—ä¼šå˜å¾—å¤æ‚ä¸€äº›ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯è™šå‡½æ•°çš„æ€§èƒ½ç“¶é¢ˆã€‚**è™šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„ä»£ä»·ä¸»è¦æ˜¯è™šå‡½æ•°ä¸èƒ½æ˜¯å†…è”å‡½æ•°ï¼ˆä¸èƒ½è¿›è¡Œå†…è”å±•å¼€ï¼‰**

**ç¼–è¯‘å™¨ä¼šç»™æ¯ä¸€ä¸ªåŒ…å«è™šå‡½æ•°æˆ–ç»§æ‰¿äº†è™šå‡½æ•°çš„ç±»è‡ªåŠ¨å»ºç«‹ä¸€ä¸ªè™šå‡½æ•°è¡¨**ï¼Œæ‰€ä»¥è™šå‡½æ•°çš„ä¸€ä¸ªä»£ä»·å°±æ˜¯ä¼šå¢åŠ ç±»çš„ä½“ç§¯ã€‚**å¦‚æœå­˜åœ¨å¤§é‡çš„å­ç±»ç»§æ‰¿ï¼Œä¸”é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°æ¥å£åªå æ€»æ•°çš„ä¸€å°éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå¤§é‡åœ°å€ç©ºé—´æµªè´¹ã€‚**

## é™æ€å¤šæ€

åˆç§°ç¼–è¯‘å™¨å¤šæ€ã€**æ—©ç»‘å®šï¼ˆæ¨¡æ¿å®šä¹‰æ¥å£ï¼Œç±»å‹å‚æ•°å®šä¹‰å®ç°ï¼‰**ï¼Œå®ç°çš„æ–¹æ³•æœ‰å‡½æ•°é‡è½½ä»¥åŠæ¨¡æ¿

### è®¾è®¡æ€æƒ³

+ å¯¹äºç›¸å…³çš„å¯¹è±¡ç±»å‹ï¼Œç›´æ¥å®ç°å®ƒä»¬å„è‡ªçš„å®šä¹‰ï¼Œä¸éœ€è¦å…±æœ‰åŸºç±»ï¼Œç”šè‡³å¯ä»¥æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚åªéœ€è¦å„ä¸ªå…·ä½“ç±»çš„å®ç°ä¸­è¦æ±‚ç›¸åŒçš„æ¥å£å£°æ˜ï¼Œè¿™é‡Œçš„æ¥å£ç§°ä¹‹ä¸ºéšå¼æ¥å£ã€‚å®¢æˆ·ç«¯æŠŠæ“ä½œè¿™äº›å¯¹è±¡çš„å‡½æ•°å®šä¹‰ä¸ºæ¨¡æ¿ï¼Œå½“éœ€è¦æ“ä½œä»€ä¹ˆç±»å‹çš„å¯¹è±¡æ—¶ï¼Œç›´æ¥å¯¹æ¨¡æ¿æŒ‡å®šè¯¥ç±»å‹å®å‚å³å¯ï¼ˆæˆ–é€šè¿‡å®å‚æ¼”ç»è·å¾—ï¼‰ã€‚
+ ç³»ç»Ÿåœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šç¨‹åºå°†è¦æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚

|           ä¼˜ç‚¹           |                                  ç¼ºç‚¹                                  |
| :----------------------: | :--------------------------------------------------------------------: |
|      æ–¹ä¾¿äº†æ³›å‹ç¼–ç¨‹      |                 æ¨¡æ¿å®ç°ï¼šä»£ç è†¨èƒ€ã€ç¼–è¯‘è€—æ—¶ã€è°ƒè¯•å›°éš¾                 |
|  æ•ˆç‡é«˜ï¼šç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–  | ä¸èƒ½å¤„ç†å¼‚è´¨å¯¹è±¡ï¼ˆå­˜å‚¨ã€æŒ‡å‘ç±»å‹ä¸ä¸€è‡´çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚åŸºç±»ä¸‹çš„å‡ ä¸ªå­ç±»ï¼‰ |
| å¯ä»¥é€šè¿‡ç‰¹åŒ–å¤„ç†ç‰¹æ®Šç±»å‹ |                                                                        |

# [æ™ºèƒ½æŒ‡é’ˆ](https://www.cnblogs.com/ChinaHook/p/7684268.html)

1. è®¾è®¡ç›®çš„ï¼šä¸ºäº†é¿å…ä½¿ç”¨åŸç”ŸæŒ‡é’ˆä¸å½“é€ æˆçš„å†…å­˜æ³„æ¼ï¼ˆå¿˜è®°é‡Šæ”¾ï¼‰ä»¥åŠéæ³•å¼•ç”¨ï¼ˆè¢«æå‰é‡Šæ”¾å†…å­˜ï¼‰çš„é—®é¢˜ï¼Œè®¾è®¡æ™ºèƒ½æŒ‡é’ˆæ¦‚å¿µæ¥è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå…¶å…·æœ‰æŒ‡é’ˆçš„éƒ¨åˆ†è¡Œä¸ºã€‚
2. è®¾è®¡æ€æƒ³ï¼š`RAII(Resource Acquisition is Initialization)`ä½¿ç”¨ç±»æ¥ç®¡ç†ï¼ˆè€Œéæ‹¥æœ‰ï¼‰èµ„æºï¼Œå°†èµ„æºå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ„é€ å‡½æ•°ä¸­ç”³è¯·åˆ†é…èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æºã€‚
3. å®ç°åŸåˆ™ï¼šæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ä½œä¸ºæ™®é€šå˜é‡è¢«åˆ†é…åœ¨æ ˆç©ºé—´ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸæˆ–è€…å…¶å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°æ¥ç®¡ç†å¯¹è±¡æ‰€æŒæœ‰çš„èµ„æºã€‚

ä¸æ™®é€šæŒ‡é’ˆç›¸æ¯”ï¼Œæ™ºèƒ½æŒ‡é’ˆä»…æä¾› `->` ã€`*`å’Œ `==`è¿ç®—ç¬¦ï¼Œæ²¡æœ‰ `+`ã€`-`ã€`++`ã€`--`ã€`[]`ç­‰è¿ç®—ç¬¦ã€‚å¯¹äºæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ”¯æŒåŸç”ŸæŒ‡é’ˆçš„åˆ¤æ–­æ–¹å¼ï¼Œä¹Ÿæ”¯æŒé‡è½½ `operator bool()`çš„åˆ¤ç©ºæ–¹å¼ã€‚

## `auto_ptr`(å·²å¼ƒç”¨)

C++98çš„æ–¹æ¡ˆï¼ŒC++11å·²ç»æŠ›å¼ƒã€‚é‡‡ç”¨**æ’å®ƒæ‰€æœ‰æƒ**æ¨¡å¼ï¼Œå½“å‡ºç°è¯­æ³•ä¸­å…è®¸çš„æ‹·è´æ„é€ å’Œèµ‹å€¼æ—¶ï¼Œèµ„æºæ‰€æœ‰æƒä¼šç”±æºå¯¹è±¡è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œæ­¤æ—¶å†ä½¿ç”¨æºå¯¹è±¡æ—¶ä¼šç©ºå¼•ç”¨ï¼Œä¸ºäº†è§£å†³é—®é¢˜è®¾è®¡äº† `unique_ptr`ã€‚æ­¤å¤– `auto_ptr`åœ¨ææ„ä¸­ä½¿ç”¨çš„ `delete`ä¹Ÿä¸èƒ½ç®¡ç†åŠ¨æ€å¼€è¾Ÿçš„æ•°ç»„ã€‚

## `unique_ptr(boost::scoped_ptr)`

**ç‹¬å èµ„æºæ‰€æœ‰æƒ**ï¼Œå®ç°ç‹¬å å¼æ‹¥æœ‰æˆ–ä¸¥æ ¼æ‹¥æœ‰æ¦‚å¿µï¼Œä¿è¯åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆåªå…è®¸ç”¨å³å€¼è¿›è¡Œèµ‹å€¼ï¼Œåœ¨è¯­ä¹‰ä¸Šç¦æ­¢äº†æ‹·è´æ„é€ å’Œèµ‹å€¼è¿ç®—ï¼šåº“ä¸­å°†å‡½æ•°ç”³æ˜ä¸º `private`ä¸”ä¸å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼‰ï¼Œä¸å…è®¸å…¶ä»–çš„æ™ºèƒ½æŒ‡é’ˆå…±äº«å…¶å†…éƒ¨çš„æŒ‡é’ˆã€‚

`unique_ptr`æä¾›äº†å¯¹**æ•°ç»„ç®¡ç†**çš„æ”¯æŒï¼Œä¸”åŒæ ·**å¯ä»¥æŒ‡å®šåˆ é™¤å™¨**ï¼ˆæŒ‡å®šå½¢å¼å’Œ `shared_ptr`ä¸åŒï¼‰ã€‚

```c++
//ç®¡ç†æ•°ç»„
unique_ptr<int []> ptr(new int[10]);   //ok

//è‡ªå®šä¹‰åˆ é™¤å™¨
shared_ptr<int> ptr(new int(1), [](int *p){delete p;});//okï¼Œä¸éœ€æŒ‡æ˜å‡½æ•°ç­¾å
unique_ptr<int> ptr2(new int(1), [](int *p){delete p;});//error
unique_ptr<int, void(*)(int *)> ptr2(new int(1), [](int *p){delete p;}); //okï¼Œå¿…é¡»æŒ‡æ˜å‡½æ•°ç­¾å
```

## `shared_ptr`

### æ•°æ®ç»“æ„

éµå¾ª**å…±äº«èµ„æºæ‰€æœ‰æƒ**ï¼Œä¸åŒçš„ `shared_ptr` å¯¹è±¡å¯ä»¥ä¸ç›¸åŒçš„æŒ‡é’ˆç›¸å…³è”ï¼Œè¿™å¤šä¸ªå¯¹è±¡ä¼šå…±ç”¨ä¸€ä¸ª**åŸå­å¼•ç”¨è®¡æ•°**è®°å½•å†…å­˜å•å…ƒè¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚åœ¨**`shared_ptr`å†…éƒ¨ä¸»è¦æ˜¯ä¸¤ä¸ªæŒ‡é’ˆ**ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ‰€ç®¡ç†çš„èµ„æºå¯¹è±¡ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç»´æŠ¤å¼•ç”¨è®¡æ•°çš„æ•°æ®å¯¹è±¡ã€‚

![](img/lang/shared_ptr.png)

#### å¼•ç”¨è®¡æ•°

å¼•ç”¨è®¡æ•° `__shared_count`å†…éƒ¨çš„æ‹¥æœ‰ `use_count`å’Œ `weak_count`ä¸¤ä¸ªå¼•ç”¨è®¡æ•°

|      æˆå‘˜      |                ä½œç”¨                |
| :------------: | :--------------------------------: |
| `use_count` | æ ‡è®°**è¢«ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ |
| `weak_count` |  æ ‡è®°**ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ  |

### ç”¨æ³•

**æ„é€ ï¼š**å¯ä»¥é€šè¿‡ä¼ å…¥ `operator new`å¾—åˆ°çš„æ™®é€šæŒ‡é’ˆï¼ˆ ä¸èƒ½æ˜¯æ ˆæŒ‡é’ˆï¼Œå› ä¸ºææ„æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯ `delete`ï¼‰ã€`auto_ptrã€unique_ptrã€weak_ptr`æ¥æ„é€ ï¼ˆ**æ™ºèƒ½æŒ‡é’ˆä¸æ”¯æŒç›´æ¥ä½¿ç”¨è£¸æŒ‡é’ˆèµ‹å€¼**ï¼‰ã€‚æ¨èä½¿ç”¨ `make_shared<>()`æ„é€  `shared_ptr`ï¼Œå…¶ä¼ é€’çš„**å‚æ•°**å¿…é¡»èƒ½å¤Ÿä¸è¯¥ç±»å‹çš„æŸä¸ª**æ„é€ å‡½æ•°ç›¸åŒ¹é…**ã€‚

**ä¿®æ”¹ï¼š**`reset()`åŒ…å«ä¸¤ä¸ªæ“ä½œã€‚å½“æ™ºèƒ½æŒ‡é’ˆä¸­æœ‰å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨ `reset()`ä¼šä½¿å¼•ç”¨è®¡æ•°å‡1ã€‚å½“è°ƒç”¨ `reset(new  xxx()))`é‡æ–°èµ‹å€¼æ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆé¦–å…ˆæ˜¯ç”Ÿæˆæ–°å¯¹è±¡ï¼Œç„¶åå°†åŸå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼ˆå¦‚æœåŸå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåˆ™ææ„æ—§å¯¹è±¡ï¼‰ï¼Œæœ€åå°†æ–°å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™æ™ºèƒ½æŒ‡é’ˆä¿ç®¡ã€‚

**åˆ é™¤ï¼š**è°ƒç”¨ `release()`æ—¶å½“å‰æŒ‡é’ˆä¼šè®¡æ•°å‡ä¸€ï¼Œè®¡æ•°ç­‰äº0æ—¶é‡Šæ”¾èµ„æºï¼Œæ”¯æŒ**è‡ªå®šä¹‰åˆ é™¤å™¨**ã€‚

#### æ³¨æ„äº‹é¡¹

1. ä¸è¦ç”¨ä¸€ä¸ªåŸå§‹æŒ‡é’ˆåˆå§‹åŒ–å¤šä¸ª `shared_ptr`ï¼ŒåŸå› åœ¨äºä¼šé€ æˆäºŒæ¬¡é”€æ¯
2. **ä¸è¦åœ¨å‡½æ•°å®å‚ä¸­åˆ›å»º `shared_ptr`**ã€‚å› ä¸ºC++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹æ˜¯ä¸åŒçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆåˆ›å»ºå¥½ï¼Œç„¶åå†ä¼ å…¥ã€‚
3. ç¦æ­¢é€šè¿‡å°† `this`ä»¥ `shared_ptr`è¿”å›ï¼Œå› ä¸º `this`æŒ‡é’ˆæœ¬è´¨æ˜¯ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´é‡å¤ææ„ã€‚è¿”å›æœ¬ç±»æŒ‡é’ˆåº”å½“ç»§æ‰¿ `std::enable_shared_from_this<>`åä½¿ç”¨ `shared_from_this()`ã€‚
4. é¿å…å¾ªç¯å¼•ç”¨ï¼Œåº”å½“ä½¿ç”¨ `weak_ptr`ã€‚
5. **é¿å…ä½¿ç”¨ `get`è¿”å›çš„åŸç”ŸæŒ‡é’ˆ**ï¼Œå› ä¸ºå½“æœ€åä¸€ä¸ªå¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆé”€æ¯åï¼Œ`get`çš„æŒ‡é’ˆå°±å˜ä¸ºæ— æ•ˆäº†ã€‚

### [åˆ é™¤å™¨](https://blog.51cto.com/u_11142019/1846847)

æ™ºèƒ½æŒ‡é’ˆæ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼ˆåŠ¨æ€å†…å­˜ã€æ–‡ä»¶ç­‰ï¼‰çš„ï¼Œå› æ­¤**å¯ä»¥ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†æ–‡ä»¶ç­‰å…¶ä»–èµ„æº**ï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨æ™ºèƒ½æŒ‡é’ˆé»˜è®¤çš„åˆ é™¤å™¨ï¼Œå› ä¸ºè¦ç®¡ç†æ–‡ä»¶çš„è¯æœ€åæ˜¯ `fclose`è€Œä¸æ˜¯ `delete`ï¼Œæ‰€ä»¥å°±å¿…é¡»è‡ªå·±å®šåˆ¶ä¸€ä¸ªåˆ é™¤å™¨ã€‚

```c++
//è‡ªå®šä¹‰å†…å­˜ç®¡ç†æ—¶çš„åˆ é™¤å™¨
void DeletePtr(int *p){
   delete p;
}
std::shared_ptr<int> p(new int, DeletePtr);

///åˆ é™¤å™¨å¯ä»¥æ˜¯lambdaè¡¨è¾¾å¼,ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥è¿™æ ·å†™
std::shared_ptr<int> p(new int, [](int *p) { delete p; });

/// ä¸ºæ™ºèƒ½æŒ‡é’ˆå®šåˆ¶åˆ é™¤å™¨ï¼Œå¦‚ä¸‹ä¸ºæ•°ç»„å®šåˆ¶äº†åˆ é™¤å™¨
std::shared_ptr<int> p(new int[10], [](int *p) { delete[]p; });

function(std::shared_ptr<int>(new int, g()/*gæ˜¯è‡ªå®šä¹‰çš„åˆ é™¤å™¨*/);///error
//å› ä¸ºc++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸åŒçš„è°ƒç”¨çº¦å®šä¸‹å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ä»å³åˆ°å·¦ï¼Œä¹Ÿæœ‰å¯èƒ½ä»å·¦åˆ°å³ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯å…ˆnew intï¼Œç„¶åè°ƒç”¨g()ï¼Œå¦‚æœg()è°ƒç”¨å‘ç”Ÿå¼‚å¸¸ï¼Œè€Œæ­¤æ—¶shared_ptr<int>è¿˜æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼Œåˆ™intå†…å­˜æ³„éœ²äº†æ‰€ä»¥æ­£ç¡®çš„æ–¹å¼æ˜¯åº”è¯¥å…ˆåˆ›å»ºå¥½æ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œåœ¨ç”¨å˜é‡ä½œå‚æ•°

//å®šç½®ç®¡ç†æ–‡ä»¶èµ„æºçš„æ™ºèƒ½æŒ‡é’ˆ
shared_ptr<FILE> sp(fopen("test.txt","w"), [](void *ptr){fclose((FILE *)ptr);});
```

### [å¾ªç¯å¼•ç”¨](https://www.codenong.com/cs105903979/)

| å¼•ç”¨ç±»å‹ |                   è¯´æ˜                   |
| :------: | :--------------------------------------: |
|  å¼ºå¼•ç”¨  | å½“è¢«å¼•ç”¨çš„å¯¹è±¡ä»æ´»ç€çš„è¯ï¼Œè¿™ä¸ªå¼•ç”¨ä¹Ÿå­˜åœ¨ |
|  å¼±å¼•ç”¨  |     å½“å¼•ç”¨çš„å¯¹è±¡æ´»ç€çš„æ—¶å€™ä¸ä¸€å®šå­˜åœ¨     |

```c++
struct B;
struct A{shared_ptr<B> apb};
struct B{shared_ptr<A> bpa};
{
	shared_ptr<A> pa = make_shared<A>();//pa->use_count = 1;
	shared_ptr<B> pb = make_shared<B>();//pb->use_count = 1;
	pa->apb = pb; //pb->use_count = apb->use_count = 2;
	pb->bpa = pa; //pa->use_count = bpa->use_count = 2;
}//ç¦»å¼€ä½œç”¨åŸŸåï¼Œpa,pbä¼šè‡ªåŠ¨å°†è®¡æ•°å‡1ï¼Œåªæœ‰å„è‡ªçš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶æ‰ä¼šé‡Šæ”¾èµ„æºï¼Œè€Œæ­¤æ—¶å„è‡ªå¼•ç”¨è®¡æ•°ä¸º1ä¸ä¸º0
```

![](img/lang/loop_count.webp)

#### `weak_ptr`

`weak_ptr`æŒ‡å‘ä¸€ä¸ª `shared_ptr`ç®¡ç†çš„å¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡è¿›è¡Œå†…å­˜ç®¡ç†çš„æ˜¯å¼ºå¼•ç”¨çš„ `shared_ptr`ï¼Œ**`wake_ptr`ä½œä¸º `shared_ptr`çš„è§‚å¯Ÿè€…**ï¼Œå…¶æ„é€ å’Œææ„ä¸ä¼šæ”¹å˜å¼·å¼•ç”¨çš„è®¡æ•°ï¼Œå’Œ `shared_ptr`é…åˆç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚

ä½†ç”±äº `wake_ptr`æ²¡æœ‰é‡è½½ `operator *`å’Œ `operator ->`ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨å…¶è®¿é—®æŒ‡å‘å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ `lock()`æ–¹æ³•ä» `wake_ptr`å¾—åˆ° `shared_ptr`åæ‰å¯ä»¥è®¿é—®èµ„æºã€‚åŒæ—¶ç”±äº `weak_ptr`ä¸æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œäºæ˜¯**å­˜åœ¨ `weak_ptr`æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾è€Œ `weak_ptr`ä»å­˜åœ¨çš„æƒ…å†µ**ï¼Œæ­¤æ—¶ `lock()`ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ `shared_ptr<>`å¯¹è±¡ï¼Œæ­¤å¤– `weak_ptr`è¿˜æä¾›äº†**`expired()`**æ¥åˆ¤æ–­æ‰€æŒ‡å¯¹è±¡æ˜¯å¦å·²ç»è¢«é”€æ¯ã€‚

```c++
struct B;
struct A{weak_ptr<B> apb};//ä»»æ„ä¸€ä¸ªæˆå‘˜æ”¹ä¸ºweak_ptr
struct B{shared_ptr<A> bpa};
{
	shared_ptr<A> pa = make_shared<A>();//pa->use_count = 1;
	shared_ptr<B> pb = make_shared<B>();//pb->use_count = 1;
	pa->apb = pb; //pb->use_count = apb->use_count = 1; apb->weak_count = 1;
	pb->bpa = pa; //pa->use_count = bpa->use_count = 2;
}//ç¦»å¼€ä½œç”¨åŸŸåï¼Œpa,pbä¼šè‡ªåŠ¨å°†è®¡æ•°å‡1ï¼Œ
//pb.use_count-=1å˜ä¸ºpb.use_count=0,åŒæ—¶pb->bpa->use_count-=1ï¼Œæ­¤æ—¶pb->bpa->use_count=bpa->use_count=pa->use_count=1
//pa->use_count-=1åpa->use_count=0,è‡ªåŠ¨é‡Šæ”¾èµ„æº
```

![](img/lang/break_loop.webp)

### çº¿ç¨‹å®‰å…¨

`shared_ptr` **å¼•ç”¨è®¡æ•°æœ¬èº«æ˜¯å®‰å…¨ä¸”æ— é”çš„ï¼Œä½†å¯¹è±¡çš„è¯»å†™åˆ™ä¸æ˜¯**ï¼Œå› ä¸º `shared_ptr` æœ‰ä¸¤ä¸ªæ•°æ®æˆå‘˜ï¼Œå¯¹æ‰€ç®¡ç†çš„å¯¹è±¡çš„è¯»å†™æ“ä½œæ²¡æœ‰åŸå­åŒ–ï¼Œå› æ­¤å¤šçº¿ç¨‹å†™ï¼ˆææ„ä¹Ÿæ˜¯å†™ï¼‰æ‰€ç®¡ç†çš„å¯¹è±¡æ—¶ä¸å®‰å…¨ã€‚`shared_ptr` çš„çº¿ç¨‹å®‰å…¨çº§åˆ«å’Œå†…å»ºç±»å‹ã€æ ‡å‡†åº“å®¹å™¨ã€`string` ä¸€æ ·ã€‚

## å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ

5. `scoped_arry`ï¼šåŠŸèƒ½å’Œ `scoped_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº† `operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
6. `shared_arry`ï¼šåŠŸèƒ½å’Œ `shared_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº† `operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„

# è¡¨è¾¾å¼

C++è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œæ“ä½œæ•°çš„ç»„æˆçš„åºåˆ—ï¼Œæ¯ä¸ªè¡¨è¾¾å¼å¯ä»¥å®ç°è®¡ç®—æ•°å€¼ã€æŒ‡æ˜æ•°æ®å¯¹è±¡æˆ–å‡½æ•°ã€äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆè¿è¡Œæ—¶å¯¹æ•°æ®å¯¹è±¡æˆ–æ–‡ä»¶çš„ä¿®æ”¹ï¼‰ç­‰ä¸€ä¸ªæˆ–å¤šä¸ªä½œç”¨ã€‚æ¯ä¸ªè¡¨è¾¾å¼æ±‚å€¼å°†å¾—åˆ°ä¸€ä¸ªç»“æœ `result`ï¼Œè¿™ä¸ªç»“æœæœ‰**ç±»å‹ï¼ˆtypeï¼‰å’Œå€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰**ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„å±æ€§ã€‚

## å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰

å·¦å€¼ï¼ˆ`lvalue`ï¼‰å’Œå³å€¼ï¼ˆ`rvalue`ï¼‰è¿™ä¸¤ä¸ªæœ¯è¯­æºäºC++çš„ç¥–å…ˆè¯­è¨€[CPL](https://en.wikipedia.org/wiki/CPL_(programming_language))ã€‚åœ¨åæ¥çš„å‘å±•ä¸­ï¼Œ**`lvalue`ä»£è¡¨äº† `locator value`å¯¹åº”äº†å…·æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œå³å€¼ä»…ä»…æ˜¯ä¸´æ—¶ä½¿ç”¨çš„å€¼**ã€‚C++ä¸­çš„å€¼ç±»åˆ«ä¸»è¦ä»å…·åå’Œå¯ç§»åŠ¨æ€§ä¸¤æ–¹é¢åˆ’åˆ†ï¼Œç”±ä¸¤ä¸ªæ–¹é¢æ„æˆä¸‰ç§åŸå§‹å€¼ç±»åˆ«ï¼ˆæœ‰ä¸€ç§ç»„åˆä¸å­˜åœ¨ï¼‰ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å±äºä¸‰ç§å€¼ç±»åˆ«ï¼ˆ`prvalueï¼Œxvalueï¼Œlvalue`ï¼‰ä¸­çš„ä¸€ç§ï¼Œå€¼ç±»åˆ«ä¼šå½±å“è¡¨è¾¾å¼çš„å«ä¹‰ã€å½±å“å‡½æ•°çš„é‡è½½ï¼ˆå³å€¼å¼•ç”¨å’Œ `const`å·¦å€¼å¼•ç”¨æ—¶ï¼‰ã€‚

**å…·åï¼ˆidentityï¼‰**ï¼šå¯ä»¥ç¡®å®šè¡¨è¾¾å¼æ˜¯å¦ä¸å¦ä¸€è¡¨è¾¾å¼æŒ‡ä»£åŒä¸€å®ä½“ã€‚

**å¯ç§»åŠ¨æ€§**ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æˆ–å®ç°äº†ç§»åŠ¨è¯­ä¹‰çš„å…¶ä»–å‡½æ•°é‡è½½èƒ½å¤Ÿç»‘å®šåˆ°è¿™ä¸ªè¡¨è¾¾å¼ã€‚

### ä¸¤ç§æ··åˆç±»åˆ«

**`glvalue`ï¼ˆæ³›å·¦å€¼ï¼‰**ï¼šå¯ä»¥è‡ªåŠ¨æ”¾å¼ƒèº«ä»½è½¬æ¢æˆ `xvalue`ï¼›**æ”¯æŒå¤šæ€**ï¼ˆåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ä¸ä¸€æ ·ï¼Œå¦‚æŒ‡å‘å­ç±»çš„çˆ¶ç±»æŒ‡é’ˆï¼‰ï¼›æ”¯æŒè¡¨è¾¾å¼å…è®¸ä¸‹çš„**ä¸å®Œæ•´ç±»å‹**ï¼ˆå¦‚ç”±å‰ç½®å£°æ˜ä½†æœªå®šä¹‰çš„ç±»ç±»å‹ï¼‰ã€‚

**`rvalue`ï¼ˆå³å€¼ï¼‰**ï¼šä¸æ”¯æŒå¯¹å…¶å–å€å’Œä»»ä½•æ–¹å¼çš„èµ‹å€¼ï¼›å¯ä»¥ç”¨æ¥åˆå§‹åŒ–å³å€¼å¼•ç”¨å’Œ**`const`å·¦å€¼å¼•ç”¨**ï¼›å¯ä»¥å½±å“å‡½æ•°é‡è½½ï¼ˆä½œä¸ºå®å‚æ—¶**ä¼˜å…ˆåŒ¹é…å³å€¼å¼•ç”¨çš„å½¢å‚**è€Œé `const`å·¦å€¼å¼•ç”¨å½¢å‚ï¼‰ã€‚

![äº”ç§è¡¨è¾¾å¼å€¼ç±»åˆ«](./img/lang/value_cat.png)

|                                | æ‹¥æœ‰èº«ä»½ï¼ˆ`glvalue`ï¼‰ | ä¸æ‹¥æœ‰èº«ä»½ |
| :----------------------------: | :---------------------: | :---------: |
| **å¯ç§»åŠ¨ï¼ˆ`rvalue`ï¼‰** |       `xvalue`       | `prvalue` |
|       **ä¸å¯ç§»åŠ¨**       |       `lvalue`       |   ä¸å­˜åœ¨   |

### ä¸‰ç§å…·ä½“ç±»åˆ«

#### `lvalue`ï¼ˆå·¦å€¼ï¼‰

ç‰¹å¾ï¼šå…·æœ‰ `glvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›**æ”¯æŒå–å€**å’Œä»»ä½•å½¢å¼çš„èµ‹å€¼ï¼›å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰å·¦å€¼å¼•ç”¨ã€‚

ä¾‹ï¼šå‡½æ•°åã€å˜é‡åã€**å­—ç¬¦ä¸²å­—é¢å€¼**ã€è¿”å›å·¦å€¼å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ã€å‰ç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç”±èµ‹å€¼è¿ç®—ç¬¦æˆ–å¤åˆèµ‹å€¼è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€è§£å¼•ç”¨è¡¨è¾¾å¼ç­‰ã€‚ä»–ä»¬çš„**æ±‚å€¼ç»“æœç›¸å½“äºå­—é¢å€¼æˆ–æ˜¯ä¸€ä¸ªä¸å…·åçš„ä¸´æ—¶å¯¹è±¡**ã€‚

**å‡½æ•°å‚æ•°æ°¸è¿œæ˜¯ä¸€ä¸ªå·¦å€¼**ï¼Œå³ä½¿å®ƒ(åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­)çš„ç±»å‹æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨æ—¶å‚æ•°æ˜¯éœ€è¦è¢«å‹æ ˆçš„ï¼Œè¿™æ„å‘³ç€å‚æ•°ä¸€å®šæœ‰å…¶åœ°å€ã€‚

#### `prvalue`ï¼ˆçº¯å³å€¼ï¼‰

ç‰¹å¾ï¼šå…·æœ‰ `rvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›ä¸æ”¯æŒå¤šæ€ã€ä¸å®Œå…¨ç±»å‹ï¼›ä¸ä¼šæ˜¯æŠ½è±¡ç±»å‹æˆ–æ•°ç»„ã€‚

ä¾‹ï¼šé™¤å­—ç¬¦ä¸²å­—é¢å€¼ä»¥å¤–çš„å­—é¢å€¼ã€è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨ã€åç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç®—æœ¯è¡¨è¾¾å¼ã€é€»è¾‘è¡¨è¾¾å¼ã€æ¯”è¾ƒè¡¨è¾¾å¼ã€å–åœ°å€è¡¨è¾¾å¼ç­‰ã€‚

#### `xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰

å°†äº¡å€¼æ˜¯éšç€å³å€¼å¼•ç”¨çš„å¼•å…¥è€Œæ–°å¼•å…¥çš„ï¼Œä¸å³å€¼å¼•ç”¨æ¯æ¯ç›¸å…³

ç‰¹å¾ï¼šå®ƒå…·æœ‰æ‰€æœ‰ `rvalue`å’Œ `glvalue`æ‰€æœ‰çš„ç‰¹å¾ã€‚

ä¾‹ï¼šè¿”å›å³å€¼å¼•ç”¨çš„å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼ã€è½¬æ¢ä¸ºå³å€¼å¼•ç”¨çš„è½¬æ¢å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼

## å€¼ç±»å‹ï¼ˆTypeï¼‰

C++ä¸­çš„å€¼ç±»å‹ï¼ˆè¿™é‡Œçš„å€¼ç±»å‹ä¸åŒäºé€šå¸¸è¯´çš„æ•°æ®ç±»å‹ï¼šå³å¤åˆæ•°æ®ç±»å‹çš„å€¼ç±»å‹ä»ç„¶å¯ä»¥æ˜¯ç®€å•ç±»å‹ï¼‰ä¸»è¦åˆ†ä¸ºç®€å•æ•°æ®ç±»å‹å’Œå¤åˆæ•°æ®ç±»å‹ï¼ˆå¸¸è§çš„å¦‚æŒ‡é’ˆã€å¼•ç”¨ï¼‰ã€‚ä¸€èˆ¬çš„å˜é‡å£°æ˜å½¢å¼ä¸ºï¼š**`Base_Type (compound)...declarator`**ï¼Œå½“æ²¡æœ‰å¤åˆç±»å‹å£°æ˜æ—¶å£°æ˜çš„å˜é‡çš„ç±»å‹å°±æ˜¯æ™®é€šç±»å‹ï¼Œå¦åˆ™è¯¥å˜é‡å°±æ˜¯å¤åˆæ•°æ®ç±»å‹ã€‚

### æŒ‡é’ˆ

åœ¨C++ä¸­**æŒ‡é’ˆä½œä¸ºä¸€ä¸ªä¸é€æ˜çš„å®ä½“å­˜åœ¨**ï¼Œä½¿ç”¨æŒ‡é’ˆå¿…é¡»è¿›è¿‡è§£å¼•ç”¨ã€‚

### å¼•ç”¨

ã€Š`C++`çš„è®¾è®¡ä¸æ¼”åŒ–ã€‹ä¸­è¯´**åŠ å…¥â€œå¼•ç”¨â€è¿™ä¸ªè¯­è¨€ç‰¹æ€§çš„å¥‘æœºæ˜¯ä¸ºäº†æ–¹ä¾¿è¿ç®—ç¬¦é‡è½½**ï¼ˆä¸ºäº†è®©è¿ç®—ç¬¦é‡è½½çš„è¯­æ³•èƒ½å¤Ÿæ›´åŠ æ¥è¿‘å†…å»ºçš„è¿ç®—ç¬¦ï¼Œéœ€è¦å¯¹å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ï¼Œè¿™å°±è¦æ±‚å‡½æ•°è¿”å›ä¸€ä¸ªå·¦å€¼ï¼Œå½“ä½¿ç”¨æŒ‡é’ˆè¿”å›æ—¶åˆä¸å¤Ÿç®€æ´ï¼Œå› æ­¤å¼•å…¥äº†å¼•ç”¨è¿™ä¸€ç‰¹æ€§ï¼‰ã€‚

å¼•ç”¨åˆæœ‰å·¦å€¼å¼•ç”¨ã€å³å€¼å¼•ç”¨ä¹‹åˆ†ã€‚å€ŸåŠ©åº“å‡½æ•° `is_lvalue_reference(),is_rvalue_reference(),is_reference()`åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚

#### å·¦å€¼å¼•ç”¨

å³å¸¸è§çš„ä¸€ç±»å¼•ç”¨æ–¹å¼ã€‚å®é™…ä¸Šæ˜¯**å¼€è¾Ÿäº†å†…å­˜**ç”¨äºä¿å­˜è¢«å¼•ç”¨å˜é‡çš„åœ°å€ï¼Œåªè¦ä¸€æ—¦ä½¿ç”¨è¯¥å¼•ç”¨ï¼Œç¼–è¯‘å™¨å†…éƒ¨å°±ä¼š**è‡ªåŠ¨è¿›è¡Œè§£å¼•ç”¨åˆ°å®é™…å¯¹è±¡**ã€‚[æ¥æº](https://juejin.cn/post/6860648369695260680)

#### å³å€¼å¼•ç”¨

å³å€¼å¼•ç”¨æ˜¯æŒ‡å‘å³å€¼çš„å¼•ç”¨ï¼Œå½“å³å€¼è¢«ç»‘å®šåˆ°å³å€¼å¼•ç”¨åï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå°†æ†ç»‘åˆ°å³å€¼å¼•ç”¨ä¸Šï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹å³å€¼å¼•ç”¨æ‰€å¼•ç”¨çš„å€¼ã€‚æˆä¸ºå³å€¼å¼•ç”¨å¯¹è±¡æ„å‘³ç€è¯¥å¯¹è±¡æ‰€æŒæœ‰çš„èµ„æºçš„æ‰€æœ‰æƒå¯ä»¥å®‰å…¨çš„è¢«è½¬ç§»ç»™å…¶ä»–å¯¹è±¡ï¼Œä»è€Œé¿å…äº†æ‹·è´ã€ææ„ç­‰æ“ä½œï¼Œæ¶ˆé™¤äº†æ ‡å‡†åº“ä¸­çš„å¤§é‡ä¸å¿…è¦çš„å¼€é”€ï¼ˆå®¹å™¨ç­‰ï¼‰ï¼ŒåŒæ—¶ä¸ºå…¶ä»–æ ‡å‡†åº“æä¾›äº†å®ç°çš„å¯èƒ½ã€‚

##### æ— åå³å€¼å¼•ç”¨

<<<<<<< HEAD
æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼Œå¦‚ `static_cast<T&&>(t)`ï¼‰
**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
================================================================================================================

æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡å¦‚ `static_cast<T&&>(t)`è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼‰ã€‚**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚

>>>>>>> d6cc772463d7c322554dbca975fea31744a38242
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>

##### [å…·åå³å€¼å¼•ç”¨](https://juejin.cn/post/6860648369695260680)

 å¦‚æœæŸä¸ªå˜é‡æˆ–å‚æ•°è¢«å£°æ˜ä¸ºT&&ç±»å‹ï¼Œå¹¶ä¸”**Tæ— éœ€æ¨å¯¼**å³å¯ç¡®å®šï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æˆ–å‚æ•°å°±æ˜¯ä¸€ä¸ªå…·åå³å€¼å¼•ç”¨ã€‚**å…·åå³å€¼å¼•ç”¨æ˜¯å·¦å€¼**ï¼Œç¼–è¯‘å™¨ä¸ºå…¶å¼€è¾Ÿäº†ä¸€å—**å†…å­˜ç©ºé—´**å­˜å‚¨ä¿¡æ¯ï¼ˆå¤§å°ä¸ºåœ°å€å€¼å¤§å°(`x64: 8`å­—èŠ‚)+å³å€¼æ•°æ®æ‰€å å¤§å°ï¼‰ ï¼Œå¯¹å³å€¼å¼•ç”¨çš„ä¿®æ”¹ç»“æœä¿å­˜åœ¨è¯¥ç©ºé—´ã€‚

```assembly
#int &&a = 1çš„æ±‡ç¼–	 https://cppinsights.io/
# åœ¨æ ˆä¸Šå¼€è¾Ÿäº†12å­—èŠ‚ï¼Œå4å­—èŠ‚å­˜æ”¾(int)1ï¼Œå‰8å­—èŠ‚å­˜æ”¾å†…å®¹çš„åœ°å€
mov     DWORD PTR [rbp-12], 1
lea     rax, [rbp-12]
mov     QWORD PTR [rbp-8], rax
```

##### è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨

**å½¢å¦‚ `T&&`ä¸”åŒ…å«ç±»å‹æ¨å¯¼çš„å¼•ç”¨å½¢å¼**å¯ä»¥è¢«ç§°ä¸ºé€šç”¨å¼•ç”¨ï¼ˆå¦‚ `auto&&`ä»¥åŠæŸäº›æ¨¡æ¿ç±»/å‡½æ•°çš„å‚æ•°ï¼‰ï¼Œå¦åˆ™å°±æ˜¯å³å€¼å¼•ç”¨ã€‚ä¸‡èƒ½å¼•ç”¨å³å¯ä»¥ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨åˆå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼Œå…¶**å®é™…å¼•ç”¨æ–¹å¼å–å†³äºå…¶è¢«åˆå§‹åŒ–æ—¶æ‰€ä½¿ç”¨çš„å¯¹è±¡çš„å¼•ç”¨ç±»å‹**ã€‚

1. ç”±äºä¸‡èƒ½å¼•ç”¨æ—¢èƒ½å¤Ÿç»‘å®šå³å€¼å¼•ç”¨ä¹Ÿå¯ä»¥ç»‘å®šå·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è¢«è®¾è®¡ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥é¿å…ä¸ºä¸åŒçš„å‚æ•°ç±»å‹åˆ†åˆ«å®šä¹‰å®ç°ä¸åŒçš„é‡è½½å‡½æ•°ã€‚
2. å½“åº”ç”¨1æ—¶åˆ°å‡½æ•°é‡è½½æ—¶åˆä¼šé€ æˆé—®é¢˜ï¼Œç”±äºé€šç”¨å¼•ç”¨çš„ç±»å‹æ¨å¯¼å¯ä»¥åŒ¹é…åˆ°å¤§é‡çš„ç±»å‹ï¼ˆé‡è½½æ—¶ç²¾ç¡®åŒ¹é…ä¼˜å…ˆäºç±»å‹æå‡è½¬æ¢ï¼‰ï¼Œç”±äºè¿™ç§è´ªå©ªæ€§è´¨ï¼Œä¸‡èƒ½å¼•ç”¨å’Œé‡è½½ç»“åˆä¼šé€ æˆé—®é¢˜ã€‚

##### å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ

ç”±äºC++ç¦æ­¢å¼•ç”¨çš„å¼•ç”¨ï¼Œåœ¨å¼•å…¥äº†å³å€¼å¼•ç”¨åï¼Œå¯èƒ½å­˜åœ¨å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨ä¹‹é—´çš„æŠ˜å ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨éœ€è¦å¯¹å››ç§æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯ `L2L,L2R,R2L,R2R`ï¼‰æŠ˜å /åç¼©æˆä¸€ç§å•ä¸€çš„å¼•ç”¨ã€‚C++ç¡®å®šäº†å…¶è§„åˆ™ä¸º**å·¦å€¼å¼•ç”¨ä¼šä¼ æŸ“**ï¼šåªæœ‰å³å€¼å¼•ç”¨å åŠ åˆ°å³å€¼å¼•ç”¨ä¸Šä»æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å·¦å€¼å¼•ç”¨ã€‚

| å½¢å‚çš„å£°æ˜ç±»å‹ | è°ƒç”¨æ—¶çš„å‚æ•°ç±»å‹ | æ¨å¯¼å‡ºçš„å½¢å‚ç±»å‹ | æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ |
| :------------: | :--------------: | :--------------: | :------------------: |
|     `T&`     |      `t&`      |      `t&`      |        `t`        |
|    `T&&`    |      `t&`      |      `t&`      |        `t&`        |
|     `T&`     |     `t&&`     |      `t&`      |        `t`        |
|    `T&&`    |     `t&&`     |     `t&&`     |        `t`        |

### å·¦å³å€¼é‡è½½ç­–ç•¥

#### ä¸€èˆ¬å‡½æ•°ç­–ç•¥

åˆ©ç”¨å‡½æ•°é‡è½½å’Œå·¦å³å€¼å¼•ç”¨å‚æ•°ä¸åŒçš„ç»‘å®šç‰¹æ€§å®ç°åœ¨å‡½æ•°ä¸­åŒºåˆ†å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œæ ¹æ®å‚æ•°å·¦å³å€¼å±æ€§çš„ä¸åŒåšå‡ºä¸åŒçš„å¤„ç†ã€‚

```c++
struct X {};
void f(const X& param1){/*å¤„ç†å·¦å€¼å‚æ•°param1*/}
void f(X&& param2){/*å¤„ç†å³å€¼å‚æ•°param2*/}

X a;
f(a);            //è°ƒç”¨å·¦å€¼ç‰ˆæœ¬
f(X());          //è°ƒç”¨å³å€¼ç‰ˆæœ¬
f(std::move(a)); //è°ƒç”¨å³å€¼ç‰ˆæœ¬
```

| é‡è½½ç‰ˆæœ¬ |   å‡½æ•°å‚æ•°   |                                      æ³¨                                      |
| :------: | :----------: | :--------------------------------------------------------------------------: |
|   å·¦å€¼   | `const T&` |                åœ¨æ²¡æœ‰å³å€¼ç‰ˆæœ¬çš„é‡è½½æ—¶å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ä½¿ç”¨æ­¤ç‰ˆæœ¬                |
|   å³å€¼   |   `T&&`   | æ ‡å‡†è§„å®š**åœ¨ç»‘å®šå³å€¼æ—¶å³å€¼å¼•ç”¨å‚æ•°çš„ä¼˜å…ˆçº§é«˜äº `const`å·¦å€¼å¼•ç”¨å‚æ•°** |

#### ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘

<<<<<<< HEAD
**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forwaed`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
================================================================================================================================================================================================

**å³å€¼å¼•ç”¨æ˜¯ `move`å’Œ `forward`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ `forward`éƒ½æ˜¯ `static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚

>>>>>>> d6cc772463d7c322554dbca975fea31744a38242
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>

##### ç§»åŠ¨è¯­ä¹‰ `move`

ç§»åŠ¨è¯­ä¹‰æŒ‡çš„æ˜¯é€šè¿‡ç§»åŠ¨ï¼ˆçªƒå–ï¼‰å…¶ä»–å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºæ¥å®ŒæˆæŸä¸ªå¯¹è±¡**æ¥ç®¡å¦ä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰çš„å¤–éƒ¨èµ„æºçš„æ‰€æœ‰æƒ**çš„è¿‡ç¨‹ã€‚å…¶å®ç°**ä¾èµ–äºæ— åå³å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨**ï¼ˆ`move<>`äº§ç”Ÿæ— åå³å€¼å¼•ç”¨ï¼Œå…·åå³å€¼å¼•ç”¨æ¥æ”¶æ— åå³å€¼å¼•ç”¨ï¼‰ã€‚

###### `move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰

**â‘ **ï¼šé‡Šæ”¾ `this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚ç§»åŠ¨èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœ `this`å¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº

**â‘¡**ï¼šç§»åŠ¨ `that` ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘thatå¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº

**â‘¢**ï¼šæ ‡è®° `that`ï¼šå°† `that`å¯¹è±¡åŸæœ¬æŒ‡å‘è¯¥èµ„æºçš„æŒ‡é’ˆæˆ–å¥æŸ„è®¾ä¸ºç©ºå€¼

###### `copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰

**â‘ **ï¼šé‡Šæ”¾ `this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚æ‹·è´èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœthiså¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº

**â‘¡**ï¼šæ‹·è´ `that`ï¼šæ‹·è´ï¼ˆå¤åˆ¶ï¼‰`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº

**â‘¢**ï¼šè®¾ç½® `this`ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘æ–°ç”Ÿçš„èµ„æº

**â‘£**ï¼šé‡Šæ”¾ `that`ï¼ˆ`that`ä¸ºå³å€¼æ—¶ï¼‰ï¼šå¦‚æœ `that`å¯¹è±¡ä¸ºä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œé‚£ä¹ˆæ‹·è´å®Œæˆä¹‹å `that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºå°†ä¼šå›  `that`å¯¹è±¡è¢«é”€æ¯è€Œå³åˆ»å¾—ä»¥é‡Šæ”¾

**ä¼ é€’ `move`åŒ…è£…è¿‡çš„å‚æ•°ä¸ä¸€å®šå‘ç”Ÿäº†ç§»åŠ¨**ï¼Œåªæœ‰è¢« `move`æ“ä½œçš„å€¼ç±»å‹ï¼ˆå®ç°äº†ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼å‡½æ•°çš„ç±»ï¼‰æœ¬èº«æ”¯æŒ `move`æ“ä½œæ—¶æ‰å‘ç”Ÿ `move`ï¼Œå¦åˆ™å‘ç”Ÿçš„ä»»ç„¶æ˜¯ `copy`ï¼ˆå¦‚åŸºæœ¬ç±»å‹ï¼‰ã€‚

```C++
template<typename _Tp> constexpr typename std::remove_reference<_Tp>::type&& move(_Tp&& __t) noexcept{
    return static_cast<typename std::remove_reference<_Tp>::type&&>(__t);
}///Convert a value to an rvalue.
```

##### [å®Œç¾è½¬å‘ `forward`](https://blog.csdn.net/zwvista/article/details/12306283)

###### å«ä¹‰

å®Œç¾è½¬å‘æ˜¯æŒ‡å‡½æ•°æ¨¡æ¿åœ¨å‘å…¶ä»–å‡½æ•°è½¬å‘ï¼ˆä¼ é€’ï¼‰è‡ªèº«å‚æ•°ï¼ˆå½¢å‚ï¼‰æ—¶**ä¿ç•™è¯¥å‚æ•°ï¼ˆå®å‚ï¼‰çš„å·¦å³å€¼å±æ€§**çš„ç‰¹æ€§ï¼Œè¿™æ ·åš**æ˜¯ä¸ºäº†ä¿ç•™åœ¨å…¶ä»–å‡½æ•°é’ˆå¯¹è½¬å‘è€Œæ¥çš„å‚æ•°çš„å·¦å³å€¼å±æ€§è¿›è¡Œä¸åŒå¤„ç†çš„å¯èƒ½æ€§**ï¼ˆæ¯”å¦‚å‚æ•°ä¸ºå·¦å€¼æ—¶å®æ–½æ‹·è´è¯­ä¹‰ï¼›å‚æ•°ä¸ºå³å€¼æ—¶å®æ–½ç§»åŠ¨è¯­ä¹‰ï¼‰ã€‚

###### å®ç°

**é—®é¢˜**ï¼šè¦æƒ³åœ¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸­è½¬å‘å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œå‚æ•°å°±å¿…é¡»å…·æœ‰åŒæ—¶æ¥æ”¶å·¦å³å€¼å±æ€§çš„èƒ½åŠ›ï¼Œå³æ¨¡æ¿å‚æ•°å¿…é¡»è¢«å£°æ˜ä¸º**è½¬å‘å‹å¼•ç”¨ `T&&`**ï¼ŒæŒ‰ç…§è½¬å‘å‹å¼•ç”¨çš„ç‰¹ç‚¹ï¼Œè¯¥å½¢å‚å°†æ ¹æ®å®å‚çš„å·¦å³å€¼å±æ€§è€Œåˆ†åˆ«èœ•å˜æˆå·¦å³å€¼å¼•ç”¨ï¼Œè€Œè¯¥**å½¢å‚åœ¨æ¨¡æ¿å‡½æ•°å†…éƒ¨æ°¸è¿œæ˜¯å·¦å€¼**ï¼ˆå·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½æ˜¯å·¦å€¼ï¼‰ï¼Œå¦‚æœåœ¨æ¨¡æ¿ç±»åŸæ ·è½¬å‘è¯¥å‚æ•°ï¼Œé‚£ä¹ˆ**è½¬å‘çš„å°†æ°¸è¿œæ˜¯å·¦å€¼**ã€‚å› æ­¤å•çº¯ä¾é è½¬å‘å‹å¼•ç”¨ä¹Ÿå°±æ— æ³•å®ç°å®Œç¾è½¬å‘çš„ä»»åŠ¡ã€‚

è¦æƒ³å®ç°æ­¤åŠŸèƒ½ï¼Œéœ€è¦å€ŸåŠ©åº“å‡½æ•° `std::forward<T>(t)`å¹¶**å°†æ¨¡æ¿å‚æ•°è®¾ç½®ä¸ºè½¬å‘å‹å¼•ç”¨**ï¼Œé€šè¿‡ä½¿ç”¨ `forard<T>`å°è£…çš„ `static_cast<T>`å¯ä»¥å®ç°å°†å‚æ•° `t`è½¬å‘ä¸º `T&&`ç±»å‹ï¼ˆå®é™…ä½¿ç”¨æ—¶æ­¤å¤„æœ‰å¼•ç”¨æŠ˜å ã€è¯¦æƒ…è§ä»£ç ï¼‰ã€‚

|    `t`çš„å®å‚ç±»å‹    | `T&&`è¢«æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ | `t`åœ¨æ¨¡æ¿å‚æ•°ä¸­çš„ç±»å‹ | `std::forward<T>(t)`çš„ç±»å‹ |
| :--------------------: | :---------------------------: | :---------------------: | :--------------------------: |
| å·¦å€¼ï¼ˆç±»å‹ä¸º `U&`ï¼‰ |      `U&`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰      |      å…·åå·¦å€¼å¼•ç”¨      |         æ— åå·¦å€¼å¼•ç”¨         |
| å³å€¼ï¼ˆç±»å‹ä¸º `U&&`ï¼‰ |       `U`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |      å…·åå³å€¼å¼•ç”¨      |         æ— åå³å€¼å¼•ç”¨         |
|  å³å€¼ï¼ˆç±»å‹ä¸º `U`ï¼‰  |            `U&&`            |      å…·åå³å€¼å¼•ç”¨      |         æ— åå³å€¼å¼•ç”¨         |

```c++
struct X {};
void inner(const X&) {cout << "inner(const X&)" << endl;}
void inner(X&&) {cout << "inner(X&&)" << endl;}
template<typename T> void outer(T&& t) {inner(std::forward<T>(t));}///å®Œç¾è½¬å‘å‚æ•°t

X a;
outer(a);//inner(const X&)
outer(X());//inner(X&&)
```

![å®Œç¾è½¬å‘](./img/lang/forward.png)

```c++
template<typename _Tp> constexpr _Tp&& forward(typename std::remove_reference<_Tp>::type& __t) noexcept{
    return static_cast<_Tp&&>(__t);///ç”±äºå¼•ç”¨æŠ˜å ï¼Œæ­¤å¤„è¢«è½¬åŒ–ä¸ºå·¦å€¼å¼•ç”¨
}///Forward an lvalue.

template<typename _Tp> constexpr _Tp&& forward(typename std::remove_reference<_Tp>::type&& __t) noexcept{
    static_assert(!std::is_lvalue_reference<_Tp>::value, "template argument substituting _Tp is an lvalue reference type");
    return static_cast<_Tp&&>(__t);///ç”±äºå¼•ç”¨æŠ˜å ï¼Œæ­¤å¤„è¢«è½¬åŒ–ä¸ºå³å€¼å¼•ç”¨
}///Forward an rvalue.
```

#### [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](https://juejin.cn/post/6860648369695260680)

| å®å‚ `argument` \ å½¢å‚ `parameter` | `T&` | `const T&` | `T&&` | `const T&&`ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰ |
| :------------------------------------: | :----: | :----------: | :-----: | :-----------------------: |
|          **`lvalue`**          |   1   |      2      |    -    |             -             |
|       **`const lvalue`**       |   -   |      1      |    -    |             -             |
|          **`rvalue`**          |   -   |      3      |    1    |             2             |
|       **`const rvalue`**       |   -   |      2      |    -    |             1             |

æ•°å€¼è¶Šå°ä»£è¡¨è¶Šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä»£è¡¨ä¸åŒ¹é…ï¼ˆ`const`å·¦å€¼å¼•ç”¨å¯ä»¥ç»“åˆä»»ä½•ç±»å‹çš„å®å‚ï¼‰ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ ä¼ å€¼ `(by value) `é‡è½½ï¼ˆæ¥å—å€¼ç±»å‹å‚æ•° `T`ï¼‰ï¼Œä¼šå’Œä¸Šè¿°ä¼ å¼•ç”¨ `(by reference) `é‡è½½äº§ç”Ÿæ­§ä¹‰ï¼Œç¼–è¯‘å¤±è´¥ã€‚

# è¿”å›å€¼ä¼˜åŒ–

## ç¼–è¯‘å™¨ä¼˜åŒ–

ä¸€ä¸ªå‡½æ•°è‹¥ç›´æ¥è¿”å›ç±»å¯¹è±¡ï¼Œä¸€èˆ¬ä¼šç”Ÿæˆä¸´æ—¶ç±»å¯¹è±¡å˜é‡ï¼Œéœ€å¤šæ¬¡è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰é€ æˆæ•ˆç‡ä½ä¸‹ï¼Œç¼–è¯‘å™¨å¯¹æ­¤ä¼˜åŒ–ï¼Œçœç•¥å…¶ä¸­çš„æ‹·è´æ„é€ ç¯èŠ‚ï¼Œè¾¾åˆ°æå‡æ•ˆç‡çš„ç›®çš„ï¼ˆå°¤å…¶æ˜¯å¯¹éœ€è¦åˆ†é…å¤§é‡å†…å­˜çš„ç±»å¯¹è±¡å…¶å€¼å¤åˆ¶è¿‡ç¨‹ã€‚è¿™ä¸€ç±»ä¼˜åŒ–é€šå¸¸ç§°ä¸º**[å¤åˆ¶çœç•¥/æ¶ˆé™¤ï¼ˆCopy elisionï¼‰](https://en.cppreference.com/w/cpp/language/copy_elision)**ï¼Œ`GCC`é»˜è®¤å¯ç”¨äº†è¯¥ä¼˜åŒ–ï¼Œé€šè¿‡ `-fno-elide-constructors`å¯ä»¥å…³é—­ã€‚`RVO`ä¸ `NRVO`éƒ½æ˜¯å¤åˆ¶æ¶ˆé™¤çš„å®ç°ã€‚

### `RVO`è‡ªåŠ¨ä¼˜åŒ–

ç¼–è¯‘å™¨å¼€å¯**`RVO`ï¼ˆè¿”å›å€¼ä¼˜åŒ–ï¼‰**éœ€è¦æ»¡è¶³ä»¥ä¸‹**ä¸‰ç‚¹**ï¼šè¿”å›çš„æ˜¯**å€¼ç±»å‹**ï¼ˆä¸æ”¯æŒä»»ä½•å¼•ç”¨ç±»å‹ï¼‰ã€è¿”å›çš„æ˜¯**åŒ¿åå±€éƒ¨å¯¹è±¡**ã€è¿”å›çš„å€¼ç±»å‹ä¸å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ç›¸åŒã€‚`RVO`**ä¸æ”¯æŒ**å‡½æ•°å¯èƒ½è¿”å›å…·æœ‰ä¸åŒå˜é‡åçš„å¯¹è±¡ä»¥åŠå‡½æ•°æœ‰å¤šä¸ªè¿”å›å‡ºå£çš„æƒ…å†µã€‚

å…¶å…·ä½“å®ç°æ˜¯ç¼–è¯‘å™¨è®©**è¢«è°ƒå‡½æ•°å°†è¿”å›å€¼æ„å»ºåœ¨è°ƒç”¨è€…çš„æ ˆä¸Š**ï¼šè°ƒç”¨å‡½æ•°åœ¨å…¶æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åå°†è¿™å—å†…å­˜çš„åœ°å€ä¼ é€’ç»™è¢«è°ƒå‡½æ•°ï¼Œè¢«è°ƒå‡½æ•°ç›´æ¥åœ¨è¿™å—å†…å­˜ä¸Šæ„é€ è¿”å›å€¼ï¼Œ è¿™æ ·å°±æ¶ˆé™¤ä»å‡½æ•°å†…éƒ¨ `return`å‡ºæ¥æ—¶ä¸´æ—¶å¯¹è±¡çš„å¤åˆ¶é—®é¢˜ã€‚

### `NRVO`è‡ªåŠ¨ä¼˜åŒ–

`NRVO`ï¼ˆ`Named Return Value Optimization`ï¼šå…·åè¿”å›å€¼ä¼˜åŒ–ï¼‰ä¸ `RVO`çš„åŒºåˆ«åœ¨äºå‡½æ•°è¿”å›çš„ä¸´æ—¶å€¼æ˜¯å¦æ˜¯å…·åçš„ï¼Œå½“æ“ä½œæ•°æ˜¯æ‹¥æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„**å…·åé `volatile`å¯¹è±¡**ã€ä¸”å…·æœ‰å’Œå£°æ˜çš„å‡½æ•°è¿”å›ç±»å‹ç›¸åŒçš„ç±»å‹æ—¶ï¼Œè¿™ç§å¤åˆ¶æ¶ˆé™¤çš„å˜ä½“ç§°ä¸º `NRVO`ã€‚

## æ‰‹åŠ¨ä¼˜åŒ–

1. ä½¿ç”¨ `const`å¼•ç”¨ `const Foo& foo = f()`
2. ä½¿ç”¨å³å€¼å¼•ç”¨ `Foo&& foo = f()`ï¼Œæ­¤æ—¶è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°

# String

C++ä¸­ `string`åªæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„æ¨¡æ¿ç±»ï¼ˆ`typedef basic_string<char>`)ï¼Œç±»ä¼¼çš„è¿˜æœ‰ `wstringã€u8stringã€u16strinã€u32string`ã€‚å®ƒå°†å­—ç¬¦å­˜å‚¨ä¸º**å­—èŠ‚åºåˆ—è€Œéå­—ç¬¦åºåˆ—**å¹¶æä¾›**è®¿é—®å•å­—èŠ‚å­—ç¬¦çš„åŠŸèƒ½**ã€‚

## ä¸‰ç§å®ç°æ–¹å¼

`string`ä¸­ä¸€èˆ¬å«æœ‰è‡³å°‘ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µï¼š`char *data`ï¼ˆæŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²çš„é¦–åœ°å€ï¼Œ`SSO`ä¸­å¯èƒ½æ²¡æœ‰ï¼‰ï¼Œ`size_t size`ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ã€‚ï¼‰ï¼Œ`size_t capacity`ï¼ˆå­—ç¬¦ä¸²å®¹é‡ï¼‰ã€‚

<<<<<<< HEAD
============

```c++
sizeof(string);//32, stlä¸­çš„stringæœ‰çŸ­å­—ç¬¦ä¸²ä¼˜åŒ–ï¼Œéµå¾ªå’Œvectorä¸€æ ·çš„æ‰©å®¹æœºåˆ¶ï¼Œåˆå§‹å®¹é‡ä¸º15
```

>>>>>>> d6cc772463d7c322554dbca975fea31744a38242
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>

### Eager Copy

åœ¨æ¯æ¬¡æ‹·è´æ—¶å°†åŸ string å¯¹åº”çš„å†…å­˜ä»¥åŠæ‰€æŒæœ‰çš„åŠ¨æ€èµ„æºå®Œæ•´åœ°å¤åˆ¶ä¸€ä»½ï¼Œæ¯ä¸ªå¯¹è±¡äº’ç›¸ç‹¬ç«‹çš„æ‹¥æœ‰èµ„æºã€‚

### COW

**å†™æ—¶å¤åˆ¶**ï¼ˆCopy-On-Writeï¼‰ï¼šæ ¸å¿ƒåœ¨äº**æƒ°æ€§å¤„ç†å¤šä¸ªå®ä½“çš„èµ„æºè¯·æ±‚**ï¼Œå³åœ¨å¤šä¸ªå®ä½“ä¹‹é—´å…±äº«æŸäº›èµ„æºï¼Œç›´åˆ°æœ‰å®ä½“éœ€è¦å¯¹èµ„æºè¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰çœŸæ­£ä¸ºè¯¥å®ä½“åˆ†é…ç§æœ‰çš„èµ„æºã€‚è¯¥æ–¹æ³•æ—¢å¯ä»¥å‡å°‘ä¸å¿…è¦çš„èµ„æºåˆ†é…ï¼ˆæ–°å®ä½“ä¸ä¿®æ”¹èµ„æºæ—¶ï¼‰ï¼Œåˆå°†åˆ†é…å’Œå¤åˆ¶å¤§é‡èµ„æºå¸¦æ¥çš„ç¬é—´å»¶è¿Ÿè¿›è¡Œäº†**å»¶å**ã€‚

æ­¤æ–¹æ¡ˆä¸‹åªæœ‰åœ¨æŸä¸ª string è¦å¯¹å…±äº«å¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œæ‹·è´ï¼Œå› æ­¤å­˜åœ¨å…±äº«æœºåˆ¶ï¼ˆéœ€è¦ä¸€ä¸ª `std::atomic<size_t> refcount`è¡¨ç¤ºèµ„æºè¢«å¤šå°‘å¯¹è±¡å…±äº«ï¼Œæ­¤æ—¶æ¶‰åŠåˆ°**çº¿ç¨‹å®‰å…¨**çš„é—®é¢˜ï¼‰ã€‚è¯¥æ–¹æ¡ˆä¸‹ `lazy-copy`è¡Œä¸ºåªå‘ç”Ÿåœ¨**ä¸¤ä¸ªstringå¯¹è±¡ä¹‹é—´**çš„æ‹·è´æ„é€ ï¼Œèµ‹å€¼å’Œassign()æ“ä½œä¸Šã€‚

![COW](img/lang/string-cow.jpg)

### SSO

Small String Optimizationï¼š**åŸºäºå­—ç¬¦ä¸²å¤§å¤šæ•°æ¯”è¾ƒçŸ­çš„ç‰¹ç‚¹**ï¼Œåˆ©ç”¨ string å¯¹è±¡æœ¬èº«çš„æ ˆç©ºé—´æ¥å­˜å‚¨çŸ­å­—ç¬¦ä¸²ï¼Œå½“å­—ç¬¦ä¸²é•¿åº¦å¤§äºæŸä¸ªä¸´ç•Œå€¼æ—¶ä½¿ç”¨eager copyæ–¹å¼ã€‚

```cpp
class string {
  char *start;
  size_t size;
  static const int kLocalSize = 15; // ä¸´ç•Œå€¼ï¼Œâ‰¤è¯¥å€¼æ—¶æ•°æ®å­˜å‚¨åœ¨unionä¸­ã€‚
  union{
    char buffer[kLocalSize+1];      // æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç”¨æ¥å­˜æ”¾çŸ­å­—ç¬¦ä¸²
    size_t capacity;
  }data;
};
```

![çŸ­å­—ç¬¦ä¸²](img/lang/string-sso-small.jpg)

![é•¿å­—ç¬¦ä¸²](img/lang/string-sso-large.jpg)

## æŸ¥æ‰¾ find

æ‰€æœ‰æŸ¥æ‰¾æ–¹æ³•è¿”å›çš„å€¼çš„ç±»å‹éƒ½æ˜¯è¯¥æ¨¡æ¿ç±»å†…éƒ¨å®šä¹‰çš„ `size_type`ç±»å‹ï¼ˆä¸€èˆ¬ä¸ºintç±»å‹ï¼‰ï¼Œè¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å¯¹è±¡åœ¨stringä¸­çš„ä½ç½®ï¼ˆæœªæ‰¾åˆ°è¿”å›å€¼ä¸º-1çš„ `string::npos`ï¼‰ï¼›æ‰€æœ‰6ä¸ªæŸ¥æ‰¾å‡½æ•°ä¸­æ¯ä¸ªå‡½æ•°éƒ½æä¾›äº†å››ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€å…±24ä¸ªæŸ¥æ‰¾å‡½æ•°ã€‚

```cpp
size_type find_first_of(const basic_string& s, size_type pos = 0)
size_type find_first_of(const charT* s, size_type pos, size_type n)
size_type find_first_of(const charT* s, size_type pos = 0)
size_type find_first_of(charT c, size_type pos = 0)
```

æ ‡å‡†åº“ä¸­çš„æŸ¥æ‰¾ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼ˆè¯¦è§[çŸ¥ä¹](https://www.zhihu.com/question/392846851)ï¼‰ï¼Œåœ¨ä¸åŒå¹³å°ä¸‹å®ç°ä¸ä¸€æ ·ã€‚è¦æƒ³å®ç°é«˜æ•ˆçš„æœç´¢æ¨èä½¿ç”¨æ³›å‹ç®—æ³•**`std::search()`**ï¼Œè¯¥ç®—æ³•æä¾›äº†[default_searcher](https://zh.cppreference.com/w/cpp/utility/functional/default_searcher)ã€[boyer_moore_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_searcher)ã€[boyer_moore_horspool_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_horspool_searcher)ä¸‰ç§æœç´¢ç®—æ³•ã€‚

### ä¸€èˆ¬æŸ¥æ‰¾

å³ `string::find()ã€string::rfind()`ï¼Œæ”¯æŒæ­£ã€åå‘åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ã€‚

### é›†åˆæŸ¥æ‰¾

æ”¯æŒåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼š

|          å‡½æ•°          |                          ä½œç”¨                          |
| :---------------------: | :----------------------------------------------------: |
|   `find_first_of()`   |   æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®   |
| `find_first_not_of()` |  æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®  |
|   `find_last_of()`   |  æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½®  |
| `find_last_not_of()` | æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½® |

## NOTE

1. `const char* string::data()`å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²æŒ‡é’ˆä¸ä¼šä»¥'\0'ç»“æŸï¼Œå…¶å¤§å°ä¸ºsize()çš„è¿”å›å€¼ã€‚`const char* string::c_str()`è¿”å›ä¸€ä¸ªä»¥â€œ\0â€ç»“å°¾çš„å­—ç¬¦ä¸²æŒ‡é’ˆã€‚
2. ç”±äº `data()å’Œc_str()`å‡½æ•°è¿”å›çš„æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç”±stringæ‹¥æœ‰ï¼ŒæŒ‡é’ˆåœ¨ `string`æ›´æ”¹å**å¯èƒ½ä¼šå¤±æ•ˆ**ã€‚
3. å¯ä»¥ä½¿ç”¨facebookå¼€æºçš„[`FBString`](https://github.com/facebook/folly/blob/master/folly/docs/FBString.md)(æŸ¥æ‰¾ä½¿ç”¨äº†æ›´é«˜æ•ˆçš„BMç®—æ³•)æ›¿ä»£ `string`ã€‚
4. å¤šæ•°stringçš„å®ç°é‡‡ç”¨çš„æ˜¯SSOæ–¹å¼ï¼ŒCOWä¸­â€å…±äº«â€œçš„å®ç°å½±å“äº†**å¤šçº¿ç¨‹ç¯å¢ƒä¸‹**stringâ€æ‹·è´â€œçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯COWå®ç°çš„æ­£ç¡®æ€§ï¼Œstringè®¤å®š `operator[]ã€at()`å…·æœ‰ä¿®æ”¹çš„è¯­ä¹‰ï¼ˆä½†å®é™…å¯èƒ½å¹¶æ²¡æœ‰ï¼‰ã€‚

# éšæœºæ•°

## ä¼ªéšæœºæ•°

è®¡ç®—æœºæ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„ç³»ç»Ÿï¼Œå› æ­¤ä¸å¯èƒ½é€šè¿‡ç®—æ³•æ¥äº§ç”ŸçœŸæ­£çš„éšæœºæ•°ã€‚è®¡ç®—æœºä¸­æ‰€è°“çš„éšæœºæ•°é€šå¸¸éƒ½æ˜¯é€šè¿‡éšæœºç®—æ³•è®¡ç®—å‡ºæ¥çš„å¯ä»¥è¢«è¿‘ä¼¼çœ‹ä½œéšæœºæ•°çš„ä¼ªéšæœºæ•°ã€‚å¸¸è§çš„éšæœºæ•°ç®—æ³•æœ‰çº¿æ€§åŒä½™æ³•ï¼ˆéšæœºæ€§å·®ä½†ç”Ÿæˆæ•ˆç‡é«˜ï¼‰ã€æ¢…æ£®æ—‹è½¬æ³•ï¼ˆéšæœºæ€§é«˜ä½†ç”Ÿæˆæ•ˆç‡ä½ï¼‰ã€‚

## çœŸéšæœºæ•°

#### Linux å†…æ ¸ç†µæ± 

è™½ç„¶è®¡ç®—æœºæœ¬èº«å¯é¢„æµ‹ï¼Œä½†è®¡ç®—æœºçš„è¿è¡Œç¯å¢ƒä¸­å……æ»¡äº†å„ç§ä¸å¯é¢„çŸ¥çš„å™ªå£°ï¼Œä¾‹å¦‚æ¥è‡ªè®¾å¤‡é©±åŠ¨çš„å™ªå£°ã€éšæœºçš„é¼ æ ‡ç‚¹å‡»é—´éš”ã€ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ç­‰ç­‰ã€‚Linux ç³»ç»Ÿç»´æŠ¤äº†ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¶é›†ä¸Šè¿°å™ªå£°çš„**ç†µæ± **ï¼ˆentropy poolï¼‰ï¼Œ**åˆ©ç”¨ç†µæ± å¯ä»¥äº§ç”Ÿäº§ç”ŸçœŸéšæœºæ•°**ã€‚Linuxå‘å¤–éƒ¨æš´éœ²äº†**`/dev/randomã€/dev/urandom`**ä¸¤ä¸ªå­—ç¬¦æ–‡ä»¶æ¥å£ç”¨äºè·å–ç†µæ± çš„ä¿¡æ¯ï¼Œå…¶ä¸­**å‰è€…åœ¨ç†µæ± è€—å°½æ—¶ä¼šé˜»å¡**å¯¹å…¶çš„æ‰€æœ‰æ“ä½œç›´åˆ°æ”¶é›†è¶³å¤Ÿå¤šçš„ç¯å¢ƒå™ªå£°ã€‚åè€…å‡†ç¡®è¯´å®ƒæ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒçš„éšæœºæ•°ç§å­æ¥è‡ªäºç†µæ± ï¼Œä¸å­˜åœ¨é˜»å¡çš„é—®é¢˜ï¼ˆå³ä½¿ç†µæ± ä¸ºç©º `/dev/urandom`ä»ç„¶èƒ½äº§ç”Ÿéšæœºæ•°ï¼‰ã€‚

## Cé£æ ¼éšæœºæ•°

```c++
#include <cstdlib>
#include <ctime>

std::srand(std::time(nullptr)); /// ä»¥å½“å‰æ—¶é—´ä¸ºéšæœºç”Ÿæˆå™¨çš„ç§å­
int random_variable = std::rand();///rand()è¿”å›ä¸€ä¸ªéšæœºæ•°ã€‚
```

**NOTE**ï¼š`srand((unsigned)time(null))`è®¾ç½®çš„ç§å­åœ¨ç¨‹åºè¿è¡Œè¿‡å¿«æˆ–è€…ä½¿ç”¨äº†å¤šçº¿ç¨‹æ—¶å¦‚æœé‡‡ç”¨å¾ªç¯è·å–éšæœºæ•°æ¯æ¬¡è¿”å›çš„éšæœºæ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒC++11æä¾›äº†çœŸéšæœºæ•°åšç§å­çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚

## C++11 random

`random`ä¸­çš„éšæœºæ•°å‘ç”Ÿå™¨ä¸»è¦ç”±**åˆ†å¸ƒå¯¹è±¡å’Œéšæœºæ•°å¼•æ“**å¯¹è±¡ç»„æˆã€‚å…¶ä¸­éšæœºæ•°å¼•æ“ç”¨äºæ ¹æ®éšæœºæ•°ç§å­æ¥äº§ç”Ÿéšæœºæ•°ï¼Œåˆ†å¸ƒå¯¹è±¡å¯¹äº§ç”Ÿçš„éšæœºæ•°æ ¹æ®éœ€æ±‚è¿›è¡Œåˆ†å¸ƒã€‚

### éšæœºæ•°å¼•æ“

éšæœºæ•°å¼•æ“ä»¥ç§å­æ•°æ®ä¸ºç†µæºç”Ÿæˆä¼ªéšæœºæ•°ï¼ŒC++æä¾›äº†ä¸‰ç§ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•/å¼•æ“ï¼ˆçº¿æ€§åŒä½™ã€æ¢…æ£®æ—‹è½¬ã€æ»åFibonacciï¼‰ï¼Œä¸‰ä¸ªå¼•æ“é€‚é…å™¨å’Œ9ä¸ªé¢„å®šä¹‰çš„å®ä¾‹åŒ–çš„ç”Ÿæˆå™¨ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„ `default_random_engine`ç±»ï¼ˆå®ç°ç”±ç¼–è¯‘å™¨å‚å®¶å†³å®šï¼‰ï¼Œå…¶äº§ç”Ÿçš„éšæœºæ•°èŒƒå›´æ˜¯åœ¨ `[default_random_engine::min()ï¼Œ default_random_engine::max()]`ä¹‹é—´ã€‚

![C++éšæœºæ•°å¼•æ“](/home/linbird/Londa/img/lang/random-engine.jpg)

**`random_device`ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§éšæœºæ•°å¼•æ“**ï¼Œå™¨å™ªå£°æ¥æºå¯ç”±æ„é€ å‡½æ•°æŒ‡å®šï¼ˆåœ¨Linuxä¸‹è¯»å–çš„æ˜¯ `/dev/urandom`è®¾å¤‡ï¼ŒWindowsä¸‹çš„å®ç°æ˜¯ç”¨ `rand_s`ï¼‰ã€‚ç”±äºæ¯æ¬¡å»è°ƒç”¨ `random_device`è¯»å–æ–‡ä»¶çš„ä»£ä»·è¾ƒå¤§ï¼Œè€Œä¸”åœ¨ç”Ÿæˆå¤§é‡éšæœºæ•°æ—¶ä¼šé€ æˆæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤ `random_device`ä¸€èˆ¬éƒ½ä½œä¸ºéšæœºæ•°ç§å­è€Œééšæœºæ•°å¼•æ“ä½¿ç”¨ã€‚

### éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»

C++é€šè¿‡åˆ†å¸ƒå™¨å¯ä»¥ä½¿éšæœºæ•°çš„å‡ºç°ç¬¦åˆä¸€å®šçš„åˆ†å¸ƒï¼Œå¦‚å‡åŒ€åˆ†å¸ƒç±»ï¼Œæ³¢åŠªåŠ›åˆ†å¸ƒç±»ã€æ­£æ€åˆ†å¸ƒç±»ã€ä¸¤æ®µåˆ†å¸ƒç±»ã€‚è¿™äº›æ¦‚ç‡åˆ†å¸ƒå‡½æ•°éƒ½æ˜¯æœ‰å‚æ•°çš„ï¼Œåœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­æŠŠå‚æ•°ï¼ˆéšæœºæ•°å¼•æ“ï¼‰ä¼ è¿›å»å³å¯ã€‚

```c++
std::random_device sd;//ç”Ÿæˆrandom_deviceå¯¹è±¡sdåšç§å­(çœŸéšæœºæ•°)
std::minstd_rand linearRan(sd());//ä½¿ç”¨ç§å­åˆå§‹åŒ–linear_congruential_engineå¯¹è±¡
std::uniform_int_distribution<int>dis1(0,1);//ç”Ÿæˆ01åºåˆ—
for(int i=0; i<100; i++)///ç”Ÿæˆ100ä¸ªç¬¦åˆå‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°
	std::cout << dis1(linearRan) << std::endl;///éšæœºåˆ†å¸ƒå‡½æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ªéšæœºæ•°å¼•æ“ä½œä¸ºå‚æ•°
```

### ä¸€èˆ¬æ­¥éª¤

1. å®šä¹‰random_deviceå¯¹è±¡æˆ–å…¶ä»–è·å–åˆå§‹åŒ–ç§å­çš„æ–¹å¼ã€‚
2. é€‰æ‹©éšæœºå¼•æ“ï¼ˆé»˜è®¤ã€çº¿æ€§ã€æ¢…æ£®ã€æ–æ³¢é‚£å¥‘ï¼‰çš„å®ç°ç±»ï¼Œå°†ç§å­ä¼ å…¥å¼•æ“ã€‚
3. åˆ›å»ºåˆ†å¸ƒå¯¹è±¡ï¼Œå¹¶ç”¨å¼•æ“åˆå§‹åŒ–åˆ†å¸ƒå¯¹è±¡è¾“å‡ºéšæœºæ•°ã€‚

# STLå®¹å™¨

ç”±äºé»˜è®¤åˆ†é…å™¨çš„åŸå› ï¼Œå®¹å™¨éƒ½**ä¸æ”¯æŒä¿å­˜å…·æœ‰CVé™å®šç¬¦çš„ç±»å‹çš„å…ƒç´ **ã€‚

## é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)

* `arrayã€vectorã€listã€forward_listã€deque`

### vector

1. `vector`çš„ç†è®ºå­˜å‚¨ä¸Šé™å¯ä»¥è°ƒç”¨ `vector<>::max_size`å¾—åˆ°ã€‚

+ `vector<bool>`æœ¬èº«æ˜¯å®éªŒäº§ç‰©å¹¶ä¸æ˜¯ä¸€ä¸ªSTLå®¹å™¨ï¼Œåº•å±‚å­˜å‚¨çš„å¹¶ä¸æ˜¯ `bool`ç±»å‹å€¼ï¼Œæ¯ä¸ª `bool`å€¼éƒ½åªä½¿ç”¨ä¸€ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨ï¼Œåœ¨ `for`å¾ªç¯ä¸­ä½¿ç”¨ `auto`å¯¹ `vector<bool>`éå†æ—¶ï¼Œ`auto`ä¸ä¼šè¢«æ¨å¯¼ä¸º `bool`ã€‚ã€‚`vector<bool>`çš„ `operator[]`è¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¸æ»¡è¶³å®¹å™¨è¦æ±‚çš„ `opertor[]`è¿”å›æŒ‡å‘å…ƒç´ çš„åœ°å€çš„è¦æ±‚ã€‚

### deque

1. `deque`æ˜¯**åŠ¨æ€çš„ä»¥åˆ†æ®µè¿ç»­ç©ºé—´ç»„åˆè€Œæˆ**ï¼Œéšæ—¶å¯ä»¥å¢åŠ ä¸€æ®µæ–°çš„ç©ºé—´å¹¶é“¾æ¥èµ·æ¥ï¼Œ`deque`æœ€å¤§çš„å·¥ä½œå°±æ˜¯ç»´æŠ¤è¿™äº›åˆ†æ®µè¿ç»­çš„å†…å­˜ç©ºé—´çš„æ•´ä½“æ€§çš„å‡è±¡ï¼Œå¹¶æä¾›éšæœºå­˜å–çš„æ¥å£ï¼Œé¿å¼€äº†é‡æ–°é…ç½®ç©ºé—´ï¼Œå¤åˆ¶ï¼Œé‡Šæ”¾çš„è½®å›ã€‚
2. `deque`ç”±ä¸»æ§å’Œå­˜å‚¨åŒºæ„æˆï¼Œé€šè¿‡ä¸»æ§ç»´æŒæ•´ä½“è¿ç»­çš„å‡è±¡ã€‚æ‰€è°“çš„ä¸»æ§æ˜¯ä¸€å°å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ (æ­¤å¤„æˆä¸ºä¸€ä¸ªç»“ç‚¹)éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¦ä¸€æ®µç§°ä½œç¼“å†²åŒºçš„è¿ç»­æ€§å†…å­˜ç©ºé—´çš„æŒ‡é’ˆï¼Œç¼“å†²åŒºæ‰æ˜¯ `deque`çš„å­˜å‚¨ç©ºé—´çš„ä¸»ä½“ã€‚
3. `deque`çš„å®ç°å†³å®šäº†å…¶è¿­ä»£å™¨å¤æ‚åº¦å’Œ `vector`ä¸æ˜¯ä¸€ä¸ªé‡çº§ï¼Œå¹¶ä¸é€‚åˆç›´æ¥ä½¿ç”¨ç®—æ³•ä¸­éœ€è¦éšæœºè¿­ä»£å™¨æ”¯æŒçš„ç®—æ³•ã€‚

## æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)

* `setã€multisetã€mapã€multimap`

+ çº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æœç´¢æ ‘

1. è¿­ä»£å™¨ï¼šç”±äºçº¢é»‘æ ‘æœ¬èº«æœ‰åºï¼Œå› æ­¤å…¶è¿­ä»£å™¨å¯ä»¥è§†ä½œå¯¹æ ‘çš„ä¸€ç§éå†æ–¹æ³•ã€‚
2. ç”±äºçº¢é»‘æ ‘ä»»ä½•ä¸€ä¸ªç»“ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å…ƒç´ åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œæ‰€ä»¥å¯¹äºå…³è”å®¹å™¨æ’å…¥åˆ é™¤éƒ½ä¸ä¼šå¯¼è‡´ä»»ä½•è¿­ä»£å™¨å¤±æ•ˆï¼Œé™¤äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨ã€‚
3. `set`ä¸ `map`çš„åŒºåˆ«åœ¨äºæ‰€ä½¿ç”¨çš„çº¢é»‘æ ‘çš„èŠ‚ç‚¹çš„å…·ä½“ç±»å‹æœ‰æ‰€ä¸åŒï¼Œ`map`ä½¿ç”¨äº† `pair`ç»“æ„ã€‚
4. çº¢é»‘æ ‘æä¾›çš„ `insert_unique`å’Œ `insert`æä¾›äº† `multi`ç³»åˆ—çš„æ”¯æŒã€‚

### ä¼˜ç‚¹

çº¢é»‘æ ‘é€šè¿‡å¯¹ä»»ä½•ä¸€æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ä¸Šå„ä¸ªèŠ‚ç‚¹ç€è‰²çš„æ–¹å¼çš„é™åˆ¶ï¼Œç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶å®ƒè·¯å¾„é•¿å‡ºä¸¤å€ï¼Œå› æ­¤çº¢é»‘æ ‘æ˜¯ä¸€ç§**å¼±å¹³è¡¡äºŒå‰æ ‘**ï¼Œç›¸å¯¹äºè¦æ±‚ä¸¥æ ¼çš„AVLæ ‘æ¥è¯´ï¼Œå®ƒçš„**æ—‹è½¬æ¬¡æ•°å°‘**ï¼Œæ‰€ä»¥**å¯¹äºæœç´¢ï¼Œæ’å…¥ï¼Œåˆ é™¤æ“ä½œè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ä½¿ç”¨çº¢é»‘æ ‘**ã€‚

#### RB VS AVL

AVLæ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤ä¼šå¼•èµ·é¢‘ç¹çš„è°ƒæ•´å¯¼è‡´æ•ˆç‡ä¸‹é™ï¼›çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œç®—æ˜¯ä¸€ç§æŠ˜ä¸­ï¼Œæ’å…¥æœ€å¤šä¸¤æ¬¡æ—‹è½¬ï¼Œåˆ é™¤æœ€å¤šä¸‰æ¬¡æ—‹è½¬ã€‚æ‰€ä»¥çº¢é»‘æ ‘åœ¨æŸ¥æ‰¾ï¼Œæ’å…¥åˆ é™¤çš„æ€§èƒ½éƒ½æ˜¯O(logn)ä¸”**æ€§èƒ½ç¨³å®š**ã€‚

## æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)

* `unordered_setã€unordered_multisetã€unordered_mapã€unordered_multimap`

+ ä¸Šè¿°å››ä¸ªå®¹å™¨çš„åº•å±‚å®ç°éƒ½ä¾é STLä¸­çš„ `hash_table`ä¸ `hase_table_node`ç»“æ„ï¼Œå…¶ä¸­ `hash_table`æä¾›çš„ `insert_unique`å’Œ `insert_equal`ä¸º `multi`ç³»åˆ—ä¾é  `hash`çš„å®¹å™¨æä¾›äº†æ”¯æŒã€‚

1. æ ‡å‡†åº“ä¸­å“ˆå¸Œå†²çªçš„é»˜è®¤è§£å†³æ–¹æ³•ä¸ºé“¾æ¥æ³•ã€‚
2. hashå‡½æ•°:[å¸¸è§å“ˆå¸Œå‡½æ•°](https://blog.csdn.net/AlburtHoffman/article/details/19641123)ï¼Œ[å„ç§å­—ç¬¦ä¸²Hashå‡½æ•°æ¯”è¾ƒ](https://byvoid.com/zhs/blog/string-hash-compare/)
   - `SGI STL`çš„å®ç°ä¸­å®šä¹‰äº† `hash<>()`æ¨¡æ¿çš„ä»¿å‡½æ•°ï¼Œå¯¹ `intã€longã€char\*`ç­‰åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†ç‰¹åŒ–ï¼Œå…¶ä¸­æ•´æ•° `hash`ä¸ºæ’ç­‰æ˜ å°„ï¼Œå¯¹äº `char*`ç±»å‹æ‰€æŒ‡çš„å­—ç¬¦ä¸²çš„äº”è¿›åˆ¶ï¼ˆæ¯ä¸ªs[i]æ˜¯s[i]çš„ `ansic`å€¼ï¼‰æ•´æ•°è¡¨ç¤ºåšå…¶ `hash`ç»“æœ[è¯¦æƒ…](https://blog.csdn.net/jmh1996/article/details/103763028)
   - `VS STL`çš„å®ç°ä¸­ç¡¬ç¼–ç äº†å‡ ä¸ªé­”æ•°ï¼Œå…·ä½“è§£é‡Šå¯å‚çœ‹[é“¾æ¥](https://blog.csdn.net/jmh1996/article/details/103763028)
3. å“ˆå¸Œè¡¨ä¸­æ¯ä¸ªå…ƒç´ ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼ˆ`bucket`ï¼‰ï¼Œæ¯ä¸ªè¢«æ’å…¥çš„å…ƒç´ åˆ©ç”¨å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å¯¹åº”çš„æ¡¶ã€‚ä¸ºæ±‚å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œæ¡¶æ•°é‡é€šå¸¸æ˜¯è´¨æ•°ï¼ˆä½¿ç”¨è´¨æ•°ä½œä¸ºæ¡¶æ•°ï¼Œä¿è¯äº†å³ä½¿æ˜¯å¾ˆç®€å•çš„å“ˆå¸Œå‡½æ•°æ•´ä¸ª `hashteble`çš„æ•ˆç‡ä¹Ÿä¸ä¼šå¤ªä½ï¼‰ï¼Œåº“é€šè¿‡æ‰“è¡¨åŠ é€Ÿè´¨æ•°çš„é€‰æ‹©ã€‚
4. æ‰€æ”¯æŒçš„éƒ½æ˜¯å‰å‘è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨åªæ”¯æŒoperator++æ“ä½œã€‚

### æ‰©å®¹

ä¸ºäº†èƒ½è®©æ¡¶æ•°é‡åŠ¨æ€å¢é•¿ï¼Œç”¨ `vector`ä½œä¸ºæ¡¶çš„å®¹å™¨ã€‚æ‰©å®¹çš„å®ç°æ–¹æ³•å¯ä»¥å‚ç…§ `redis`çš„ `rehash`ï¼Œ`stl`ä¸­çš„ `rehash`æš‚æœªäº†è§£ã€‚

## å®¹å™¨é€‚é…å™¨

* `stackã€queueã€priority_queue`

1. å®¹å™¨é€‚é…å™¨æœ¬è´¨ä¸Šè¿˜æ˜¯å®¹å™¨ï¼Œåªæ˜¯ä¸ºäº†ç‰¹å®šçš„ä½¿ç”¨åŠŸèƒ½å°†åŸºç¡€å®¹å™¨ä¸­çš„å‡½æ•°å®ç°è¿›è¡Œäº†ç»„åˆã€ä¼˜åŒ–æˆ–è€…é‡å†™ã€‚
2. å®¹å™¨é€‚é…å™¨çš„åº•å±‚å®¹å™¨å¹¶ä¸æ˜¯å›ºå®šçš„ï¼ŒSTLå¯¹**`stack`å’Œ `queue`é»˜è®¤ä½¿ç”¨ `deque`å®ç°ï¼Œ`priority_queue`é»˜è®¤ä½¿ç”¨ `vector`å®ç°**;

## å…¶å®ƒ

1. `assign`ä¸ `operator=`ï¼šå…¶åŸºæœ¬ä½œç”¨éƒ½æ˜¯ä¸ºå®¹å™¨èµ‹å€¼ï¼Œ`assign`çš„ä½¿ç”¨æ›´å¹¿ä¸€äº›ã€‚
2. `at`ä¸ `operator[]`ï¼š`at`æä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œè¶Šç•Œä¼šæŠ›å‡º `out_of_range`å¼‚å¸¸ã€‚
3. `arrayã€vectorã€string`**`deque`**æä¾›äº†éšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒçš„å®¹å™¨
4. `map`ç³»åˆ—çš„å®¹å™¨æ”¯æŒæŒ‰ç…§ `key`å€¼åˆ é™¤å…ƒç´ 
5. ç®—æ³•çš„åŒºé—´é‡‡ç”¨å‰å¼€åé—­çš„åŸå› ï¼šå¯ä»¥ç»Ÿä¸€ç©ºé›†çš„è¡¨ç¤º
6. `list`å’Œ `forward_list`å®¹å™¨éƒ½æ ¹æ®è‡ªèº«å®ç°æä¾›äº† `sort`æˆå‘˜å‡½æ•°æ¥åŠ é€Ÿæ’åºã€‚
7. `string`çš„ `size`å’Œ `length`æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œ`length`æ˜¯ä¸ºäº†ä¿æŒCé£æ ¼è€Œä¿ç•™çš„è€å¼å‡½æ•°ã€‚
8. `erase`æ–¹æ³•è¿”å›äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚
9. `vector`å’Œ `deque`æ”¯æŒ `shrink_to_fit()`è‡ªåŠ¨ç´§ç¼©å†…å­˜

## å †

STLä¸­å¹¶æ²¡æœ‰ç›´æ¥çš„æ•°æ®ç»“æ„å®ç°äº†å †ï¼Œä½†å´åœ¨ `vector`çš„ç»“æ„ä¸Šå®ç°äº†å †çš„ä¸€ç³»åˆ—æ“ä½œã€‚

1. åŸºäºvectorå»ºå †ï¼š`make_heap`
2. å†å¯¹vectoræ„æˆçš„å †å˜åŠ¨ä¹‹åçš„è°ƒæ•´ï¼š`push`ä¹‹åçš„ `push_heap`ï¼Œ`pop`ä¹‹åçš„ `pop_heap`;
3. å¯¹vectoræ˜¯å¦æ„æˆå †çš„åˆ¤åˆ«æ“ä½œï¼š`is_heap`ä»¥åŠæ‰¾åˆ°ç ´åå †çš„ `is_heap_until`

## è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ

+ [cppreference](https://zh.cppreference.com/w/cpp/container)åº•éƒ¨æä¾›äº†è¯¦ç»†çš„å„ç§å®¹å™¨çš„è¿­ä»£å™¨å’Œå¼•ç”¨åœ¨æ’å…¥å’Œæ“ä½œåçš„å¤±æ•ˆæƒ…å†µè¯´æ˜,ä»¥åŠå„å®¹å™¨æ”¯æŒçš„æ¥å£åˆ†å¸ƒ.

### è¿­ä»£å™¨æ”¯æŒæƒ…å†µ

|             ä¸æ”¯æŒ             |                                        å‰å‘                                        |                 åŒå‘                 |             éšæœº             |
| :----------------------------: | :--------------------------------------------------------------------------------: | :----------------------------------: | :---------------------------: |
| `stack,queue,priority_queue` | `forward_list,unordered_map,unordered_set,unordered_multimap,unordered_multiset` | `list,map,set,multi_map,multi_set` | `vector,string,array,deque` |

### è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ

1. åº•å±‚ä¸ºæ•°ç»„çš„å®¹å™¨(`vector,string`)åœ¨æ’å…¥åˆ é™¤ç‚¹ä¹‹åçš„å¤±æ•ˆï¼ˆå› ä¸ºæ“ä½œå¼•èµ·äº†å­˜å‚¨è½¬ç§»ï¼‰ï¼Œè¯¥ç‚¹åŠä¹‹å‰çš„ä¿æŒæœ‰æ•ˆã€‚
2. åº•å±‚ä¸ºé“¾è¡¨çš„å®¹å™¨ (`list,forward_list`)æ’å…¥åå‡ä¿æŒæœ‰æ•ˆï¼Œåˆ é™¤åä»…åˆ é™¤ç‚¹å¤±æ•ˆã€‚
3. åº•å±‚ä¸ºçº¢é»‘æ ‘ (`map,set,multimap,multiset`)æ’å…¥åå‡æœ‰æ•ˆï¼Œåˆ é™¤åé™¤äº†åˆ é™¤ç‚¹ä¹‹å¤–çš„å‡æœ‰æ•ˆã€‚
4. åº•å±‚ä¸ºå“ˆå¸Œè¡¨ ( `unordered_map,unordered_set,unordered_multimap,unordered_multiset`)åœ¨åˆ é™¤åé™¤åˆ é™¤ç‚¹ä¹‹å¤–å‡æœ‰æ•ˆï¼Œæ’å…¥åå¼•ç”¨å‡åˆæ³•ï¼Œå¦‚æœ**æ’å…¥å¯¼è‡´äº†é‡å“ˆå¸Œåˆ™è¿­ä»£å™¨å¤±æ•ˆ**ï¼ˆå°‘è§ï¼‰ã€‚
5. [`deque`](https://blog.csdn.net/ww32zz/article/details/48224941)åœ¨æ’å…¥é¦–å°¾å¤±æ•ˆï¼Œåˆ é™¤åˆ™ä»…æ“ä½œç‚¹å¤±æ•ˆ==éœ€è¦è¡¥å……==

# STLç®—æ³•

## æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼

1. `adjacent_find`ï¼š   åœ¨iteratorå¯¹æ ‡è¯†å…ƒç´ èŒƒå›´å†…ï¼ŒæŸ¥æ‰¾ä¸€å¯¹ç›¸é‚»é‡å¤å…ƒç´ ï¼Œæ‰¾åˆ°åˆ™è¿”å›æŒ‡å‘è¿™å¯¹å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ `ForwardIterator`ã€‚å¦åˆ™è¿”å›lastã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„äºŒå…ƒæ“ä½œç¬¦ä»£æ›¿ç›¸ç­‰çš„åˆ¤æ–­ã€‚
2. `binary_search`ï¼š åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾valueï¼Œæ‰¾åˆ°è¿”å›trueã€‚é‡è½½çš„ç‰ˆæœ¬å®ç”¨æŒ‡å®šçš„æ¯”è¾ƒå‡½æ•°å¯¹è±¡æˆ–å‡½æ•°æŒ‡é’ˆæ¥åˆ¤æ–­ç›¸ç­‰ã€‚
3. `count`ï¼šåˆ©ç”¨ç­‰äºæ“ä½œç¬¦ï¼ŒæŠŠæ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼æ¯”è¾ƒï¼Œè¿”å›ç›¸ç­‰å…ƒç´ ä¸ªæ•°ã€‚
4. `count_if`ï¼šåˆ©ç”¨è¾“å…¥çš„æ“ä½œç¬¦ï¼Œå¯¹æ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œè¿”å›ç»“æœä¸ºtrueçš„ä¸ªæ•°ã€‚
5. `equal_range`ï¼š åŠŸèƒ½ç±»ä¼¼ `equal`ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºlower_boundï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºupper_boundã€‚
6. `find`ï¼šåˆ©ç”¨åº•å±‚å…ƒç´ çš„ç­‰äºæ“ä½œç¬¦ï¼Œå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼è¿›è¡Œæ¯”è¾ƒã€‚å½“åŒ¹é…æ—¶ï¼Œç»“æŸæœç´¢ï¼Œè¿”å›è¯¥å…ƒç´ çš„ä¸€ä¸ª `InputIterator`ã€‚
7. `find_end`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"çš„æœ€åä¸€æ¬¡å‡ºç°ã€‚æ‰¾åˆ°åˆ™è¿”å›æœ€åä¸€å¯¹çš„ç¬¬ä¸€ ä¸ª `ForwardIterator`ï¼Œå¦åˆ™è¿”å›è¾“å…¥çš„"å¦å¤–ä¸€å¯¹"çš„ç¬¬ä¸€ä¸ª `ForwardIterator`ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿ç­‰äºæ“ä½œã€‚
8. `find_first_of`ï¼š åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ç¬¬ä¸€æ¬¡å‡ºç°ã€‚é‡è½½ç‰ˆæœ¬ä¸­ä½¿ç”¨äº†ç”¨æˆ·è‡ªå®šä¹‰æ“ä½œç¬¦ã€‚
9. `find_if`ï¼šä½¿ç”¨è¾“å…¥çš„å‡½æ•°ä»£æ›¿ç­‰äºæ“ä½œç¬¦æ‰§è¡Œfindã€‚
10. `lower_bound`ï¼š   è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…çš„å¯ä»¥æ’å…¥æŒ‡å®šå€¼è€Œä¸ç ´åå®¹å™¨é¡ºåºçš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
11. `upper_bound`ï¼š  è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…æ’å…¥valueè€Œä¸ç ´åå®¹å™¨é¡ºåºçš„æœ€åä¸€ä¸ªä½ç½®ï¼Œè¯¥ä½ç½®æ ‡å¿—ä¸€ä¸ªå¤§äºvalueçš„å€¼ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
12. `search`ï¼š  ç»™å‡ºä¸¤ä¸ªèŒƒå›´ï¼Œè¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŸ¥æ‰¾æˆåŠŸæŒ‡å‘ç¬¬ä¸€ä¸ªèŒƒå›´å†…ç¬¬ä¸€æ¬¡å‡ºç°å­åºåˆ—(ç¬¬äºŒä¸ªèŒƒå›´)çš„ä½ç½®ï¼ŒæŸ¥æ‰¾å¤±è´¥æŒ‡å‘last1ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
13. `search_n`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾valå‡ºç°næ¬¡çš„å­åºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥

1. `inplace_merge`ï¼š  åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—ï¼Œç»“æœåºåˆ—è¦†ç›–ä¸¤ç«¯èŒƒå›´ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„æ“ä½œè¿›è¡Œæ’åºã€‚
2. `merge`ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—ï¼Œå­˜æ”¾åˆ°å¦ä¸€ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒã€‚
3. `nth_element`ï¼š  å°†èŒƒå›´å†…çš„åºåˆ—é‡æ–°æ’åºï¼Œä½¿æ‰€æœ‰å°äºç¬¬nä¸ªå…ƒç´ çš„å…ƒç´ éƒ½å‡ºç°åœ¨å®ƒå‰é¢ï¼Œè€Œå¤§äºå®ƒçš„éƒ½å‡ºç°åœ¨åé¢ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
4. `partial_sort`ï¼šå¯¹åºåˆ—åšéƒ¨åˆ†æ’åºï¼Œè¢«æ’åºå…ƒç´ ä¸ªæ•°æ­£å¥½å¯ä»¥è¢«æ”¾åˆ°èŒƒå›´å†…ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
5. `partial_sort_copy`ï¼š ä¸ `partial_sort`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»è¿‡æ’åºçš„åºåˆ—å¤åˆ¶åˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
6. `partition`ï¼š å¯¹æŒ‡å®šèŒƒå›´å†…å…ƒç´ åˆ’åˆ†ï¼Œä½¿ç”¨è¾“å…¥çš„å‡½æ•°æŠŠç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ æ”¾åœ¨å‰åŠéƒ¨åˆ†ï¼Œ**è¿”å›ååŠéƒ¨åˆ†ç¬¬ä¸€ä¸ªå€¼çš„è¿­ä»£å™¨**ã€‚
7. `random_shuffle`ï¼šå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åºã€‚é‡è½½ç‰ˆæœ¬è¾“å…¥ä¸€ä¸ªéšæœºæ•°äº§ç”Ÿæ“ä½œã€‚
8. `reverse`ï¼š  å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ é‡æ–°ååºæ’åºã€‚
9. `reverse_copy`ï¼šä¸ `reverse`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
10. `rotate`ï¼š å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ ç§»åˆ°å®¹å™¨æœ«å°¾ï¼Œç”±middleæŒ‡å‘çš„å…ƒç´ æˆä¸ºå®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
11. `rotate_copy`ï¼š   ä¸ `rotate`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
12. `sort`ï¼š ä»¥å‡åºé‡æ–°æ’åˆ—æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
13. `stable_sort`ï¼šä¸ `sort`ç±»ä¼¼ï¼Œä¸è¿‡ä¿ç•™ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚
14. `stable_partition`ï¼šä¸ `partition`ç±»ä¼¼ï¼Œä¸è¿‡ä¸ä¿è¯ä¿ç•™å®¹å™¨ä¸­çš„ç›¸å¯¹é¡ºåºã€‚

### `std::sort()`

éœ€è¦æ³¨æ„çš„æ˜¯**STLä¸­çš„ `sort()`ç®—æ³•ä¸ºå†…çœå¼æ’åºï¼Œæ˜¯ä¸€ç§æ··åˆå¼çš„æ’åºç®—æ³•**ã€‚ç»¼åˆä½¿ç”¨äº†å¿«é€Ÿæ’åºç®—æ³•ã€å †æ’åºç®—æ³•ã€æ’å…¥æ’åºç®—æ³•ï¼š

- åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶é‡‡ç”¨æ­£å¸¸çš„å¿«é€Ÿæ’åºï¼Œæ­¤æ—¶æ•ˆç‡ä¸ºO(logN)ã€‚
- ä¸€æ—¦åˆ†æ®µåçš„æ•°æ®é‡å°äºæŸä¸ª**é˜ˆå€¼ï¼ˆ16ï¼‰**ï¼Œå°±æ”¹ç”¨æ’å…¥æ’åºï¼Œå› ä¸ºæ­¤æ—¶è¿™ä¸ªåˆ†æ®µæ˜¯åŸºæœ¬æœ‰åºçš„ï¼Œè¿™æ—¶æ•ˆç‡å¯è¾¾O(N)ã€‚
- åœ¨é€’å½’è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¾¦æµ‹**é€’å½’å±‚æ¬¡ï¼ˆ$2*log(N)$ï¼‰**æ˜¯å¦è¿‡æ·±ï¼Œè¿‡æ·±é‡‡ç”¨å †æ’åºå¤„ç†ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ï¼Œä½¿å…¶æ•ˆç‡ç»´æŒåœ¨å †æ’åºçš„O(N logN)ï¼Œä½†è¿™åˆæ¯”ä¸€å¼€å§‹ä½¿ç”¨å †æ’åºå¥½ã€‚

STLä¸­çš„[`sort(`)æ’åºå®ç°](https://feihu.me/blog/2014/sgi-std-sort/)è¿˜é‡‡ç”¨äº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼šé€šè¿‡å¾ªç¯å‡å°‘ä¸€åŠçš„é€’å½’å‡½æ•°è°ƒç”¨ï¼Œä¸‰ç‚¹ä¸­å€¼æ³•ç¡®å®š `privot`ï¼Œé«˜æ•ˆçš„åˆ’åˆ†ç®—æ³•ã€‚

åœ¨å…¶ä»–å¿«é€Ÿæ’åºå®ç°é‡Œï¼Œå½“åŒ…å«è®¸å¤šé‡å¤çš„å…ƒç´ æ—¶é€šå¸¸ä½¿ç”¨[**ä¸‰è·¯åˆ’åˆ†ç®—æ³•**](https://blog.csdn.net/jlqCloud/article/details/46939703)æ¥ä¼˜åŒ–å¿«é€Ÿæ’åºçš„è¡¨ç°ï¼Œä¸‰è·¯åˆ’åˆ†ç®—æ³•å°†æ•°ç»„åˆ’åˆ†ä¸ºå°äºã€ç­‰äºã€å¤§äº `provit`çš„ä¸‰éƒ¨åˆ†ã€‚

## åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)

1. `copy`ï¼šå¤åˆ¶åºåˆ—
2. `copy_backward`ï¼š ä¸ `copy`ç›¸åŒï¼Œä¸è¿‡å…ƒç´ æ˜¯ä»¥ç›¸åé¡ºåºè¢«æ‹·è´ã€‚
3. `iter_swap`ï¼š   äº¤æ¢ä¸¤ä¸ª `ForwardIterator`çš„å€¼ã€‚
4. `remove`ï¼šåˆ é™¤æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºæŒ‡å®šå…ƒç´ çš„å…ƒç´ ã€‚æ³¨æ„ï¼Œè¯¥å‡½æ•°ä¸æ˜¯çœŸæ­£åˆ é™¤å‡½æ•°ã€‚å†…ç½®å‡½æ•°ä¸é€‚åˆä½¿ç”¨ `remove`å’Œ `remove_if`å‡½æ•°ã€‚
5. `remove_copy`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªåˆ¶å®šå®¹å™¨ï¼Œè¿”å› `OutputIterator`æŒ‡å‘è¢«æ‹·è´çš„æœ«å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚
6. `remove_if`ï¼š   åˆ é™¤æŒ‡å®šèŒƒå›´å†…è¾“å…¥æ“ä½œç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ ã€‚
7. `remove_copy_if`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ æ‹·è´åˆ°ä¸€ä¸ªæŒ‡å®šå®¹å™¨ã€‚
8. `replace`ï¼šå°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºvoldçš„å…ƒç´ éƒ½ç”¨vnewä»£æ›¿ã€‚
9. `replace_copy`ï¼š ä¸ `replace`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
10. `replace_if`ï¼š   å°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰æ“ä½œç»“æœä¸ºtrueçš„å…ƒç´ ç”¨æ–°å€¼ä»£æ›¿ã€‚
11. `replace_copy_if`ï¼š ä¸ `replace_if`ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
12. `swap`ï¼š   äº¤æ¢å­˜å‚¨åœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„å€¼ã€‚
13. `swap_range`ï¼šå°†æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸å¦ä¸€ä¸ªåºåˆ—å…ƒç´ å€¼è¿›è¡Œäº¤æ¢ã€‚
14. `unique`ï¼šæ¸…é™¤åºåˆ—ä¸­é‡å¤å…ƒç´ ï¼Œå’Œ `remove`ç±»ä¼¼ï¼Œå®ƒä¹Ÿä¸èƒ½çœŸæ­£åˆ é™¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
15. `unique_copy`ï¼š  ä¸ `unique`ç±»ä¼¼ï¼Œä¸è¿‡æŠŠç»“æœè¾“å‡ºåˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚

## æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ

1. `next_permutation`ï¼š å–å‡ºå½“å‰èŒƒå›´å†…çš„æ’åˆ—ï¼Œå¹¶é‡æ–°æ’åºä¸ºä¸‹ä¸€ä¸ªæ’åˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
2. `prev_permutation`ï¼š å–å‡ºæŒ‡å®šèŒƒå›´å†…çš„åºåˆ—å¹¶å°†å®ƒé‡æ–°æ’åºä¸ºä¸Šä¸€ä¸ªåºåˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸Šä¸€ä¸ªåºåˆ—åˆ™è¿”å›falseã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## ç®—æœ¯ç®—æ³•(4ä¸ª)

1. `accumulate`ï¼šiteratorå¯¹æ ‡è¯†çš„åºåˆ—æ®µå…ƒç´ ä¹‹å’Œï¼ŒåŠ åˆ°ä¸€ä¸ªç”±valæŒ‡å®šçš„åˆå§‹å€¼ä¸Šã€‚é‡è½½ç‰ˆæœ¬ä¸å†åšåŠ æ³•ï¼Œè€Œæ˜¯ä¼ è¿›æ¥çš„äºŒå…ƒæ“ä½œç¬¦è¢«åº”ç”¨åˆ°å…ƒç´ ä¸Šã€‚
2. `partial_sum`ï¼šåˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å€¼ä»£è¡¨æŒ‡å®šèŒƒå›´å†…è¯¥ä½ç½®å‰æ‰€æœ‰å…ƒç´ ä¹‹å’Œã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ“ä½œä»£æ›¿åŠ æ³•ã€‚
3. `inner_product`ï¼š   å¯¹ä¸¤ä¸ªåºåˆ—åšå†…ç§¯(å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼Œå†æ±‚å’Œ)å¹¶å°†å†…ç§¯åŠ åˆ°ä¸€ä¸ªè¾“å…¥çš„åˆå§‹å€¼ä¸Šã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„æ“ä½œã€‚
4. `adjacent_difference`ï¼š åˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œæ–°åºåˆ—ä¸­æ¯ä¸ªæ–°å€¼ä»£è¡¨å½“å‰å…ƒç´ ä¸ä¸Šä¸€ä¸ªå…ƒç´ çš„å·®ã€‚é‡è½½ç‰ˆæœ¬ç”¨æŒ‡å®šäºŒå…ƒæ“ä½œè®¡ç®—ç›¸é‚»å…ƒç´ çš„å·®ã€‚

## ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)

1. `fill`ï¼š å°†è¾“å…¥å€¼èµ‹ç»™æ ‡å¿—èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚
2. `fill_n`ï¼šå°†è¾“å…¥å€¼èµ‹ç»™firståˆ°first+nèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚
3. `for_each`ï¼š  ç”¨æŒ‡å®šå‡½æ•°ä¾æ¬¡å¯¹æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰å…ƒç´ è¿›è¡Œè¿­ä»£è®¿é—®ï¼Œè¿”å›æ‰€æŒ‡å®šçš„å‡½æ•°ç±»å‹ã€‚è¯¥å‡½æ•°ä¸å¾—ä¿®æ”¹åºåˆ—ä¸­çš„å…ƒç´ ã€‚
4. `generate`ï¼š  è¿ç»­è°ƒç”¨è¾“å…¥çš„å‡½æ•°æ¥å¡«å……æŒ‡å®šçš„èŒƒå›´ã€‚
5. `generate_n`ï¼š ä¸generateå‡½æ•°ç±»ä¼¼ï¼Œå¡«å……ä»æŒ‡å®šiteratorå¼€å§‹çš„nä¸ªå…ƒç´ ã€‚
6. `transform`ï¼šå°†è¾“å…¥çš„æ“ä½œä½œç”¨ä¸æŒ‡å®šèŒƒå›´å†…çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ–°çš„åºåˆ—ã€‚é‡è½½ç‰ˆæœ¬å°†æ“ä½œä½œç”¨åœ¨ä¸€å¯¹å…ƒç´ ä¸Šï¼Œå¦å¤–ä¸€ä¸ªå…ƒç´ æ¥è‡ªè¾“å…¥çš„å¦å¤–ä¸€ä¸ªåºåˆ—ã€‚ç»“æœè¾“å‡ºåˆ°æŒ‡å®šå®¹å™¨ã€‚

## å…³ç³»ç®—æ³•(8ä¸ª)

1. `equal`ï¼š  å¦‚æœä¸¤ä¸ªåºåˆ—åœ¨æ ‡å¿—èŒƒå›´å†…å…ƒç´ éƒ½ç›¸ç­‰ï¼Œè¿”å›trueã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿é»˜è®¤çš„ç­‰äºæ“ä½œç¬¦ã€‚
2. `includes`ï¼š åˆ¤æ–­ç¬¬ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½è¢«ç¬¬äºŒä¸ªèŒƒå›´åŒ…å«ï¼Œä½¿ç”¨åº•å±‚å…ƒç´ çš„<æ“ä½œç¬¦ï¼ŒæˆåŠŸè¿”å›trueã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„å‡½æ•°ã€‚>
3. `lexicographical_compare`ï¼š æ¯”è¾ƒä¸¤ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
4. `max`ï¼š è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå¤§ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
5. `max_element`ï¼š  è¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
6. `min`ï¼š  è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå°ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
7. `min_element`ï¼šè¿”å›ä¸€ä¸ª `ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å°çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
8. `mismatch`ï¼šå¹¶è¡Œæ¯”è¾ƒä¸¤ä¸ªåºåˆ—ï¼ŒæŒ‡å‡ºç¬¬ä¸€ä¸ªä¸åŒ¹é…çš„ä½ç½®ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œæ ‡å¿—ç¬¬ä¸€ä¸ªä¸åŒ¹é…å…ƒç´ ä½ç½®ã€‚å¦‚æœéƒ½åŒ¹é…ï¼Œè¿”å›æ¯ä¸ªå®¹å™¨çš„lastã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## é›†åˆç®—æ³•(4ä¸ª)

1. `set_union`ï¼šæ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼ŒåŒ…å«ä¸¤ä¸ªåºåˆ—ä¸­æ‰€æœ‰çš„ä¸é‡å¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
2. `set_intersection`ï¼š æ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œå…¶ä¸­å…ƒç´ åœ¨ä¸¤ä¸ªåºåˆ—ä¸­éƒ½å­˜åœ¨ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
3. `set_difference`ï¼šæ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œè¯¥åºåˆ—ä»…ä¿ç•™ç¬¬ä¸€ä¸ªåºåˆ—ä¸­å­˜åœ¨çš„è€Œç¬¬äºŒä¸ªä¸­ä¸å­˜åœ¨çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨  è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
4. `set_symmetric_difference`ï¼š æ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œè¯¥åºåˆ—å–ä¸¤ä¸ªåºåˆ—çš„å¯¹ç§°å·®é›†(å¹¶é›†-äº¤é›†)ã€‚

## å †ç®—æ³•(4ä¸ª)

1. `make_heap`ï¼š æŠŠæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ç”Ÿæˆä¸€ä¸ªå †ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
2. `pop_heap`ï¼š   å¹¶ä¸çœŸæ­£æŠŠæœ€å¤§å…ƒç´ ä»å †ä¸­å¼¹å‡ºï¼Œè€Œæ˜¯é‡æ–°æ’åºå †ã€‚å®ƒæŠŠfirstå’Œlast-1äº¤æ¢ï¼Œç„¶åé‡æ–°ç”Ÿæˆä¸€ä¸ªå †ã€‚å¯ä½¿ç”¨å®¹å™¨çš„backæ¥è®¿é—®è¢«"å¼¹å‡º"çš„å…ƒç´ æˆ–è€…ä½¿ç”¨pop_backè¿›è¡ŒçœŸæ­£çš„åˆ é™¤ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
3. `push_heap`ï¼š å‡è®¾firståˆ°last-1æ˜¯ä¸€ä¸ªæœ‰æ•ˆå †ï¼Œè¦è¢«åŠ å…¥åˆ°å †çš„å…ƒç´ å­˜æ”¾åœ¨ä½ç½®last-1ï¼Œé‡æ–°ç”Ÿæˆå †ã€‚åœ¨æŒ‡å‘è¯¥å‡½æ•°å‰ï¼Œå¿…é¡»å…ˆæŠŠå…ƒç´ æ’å…¥å®¹å™¨åã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨æŒ‡å®šçš„æ¯”è¾ƒæ“ä½œã€‚
4. `sort_heap`ï¼š  å¯¹æŒ‡å®šèŒƒå›´å†…çš„åºåˆ—é‡æ–°æ’åºï¼Œå®ƒå‡è®¾è¯¥åºåˆ—æ˜¯ä¸ªæœ‰åºå †ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚

# STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨

## ä»¿å‡½æ•°

1. ç®—æœ¯ç±»ä»¿å‡½æ•°(6ä¸ª)ï¼š`plusã€minusã€multiplierã€dividesã€modulusã€negate`(å–ç›¸åæ•°)
2. å…³ç³»è¿ç®—ä»¿å‡½æ•°(6ä¸ª)ï¼š`lessã€less_equalã€equal_toã€not_equal_toã€greater_equalã€greater_equal_to`
3. é€»è¾‘è¿ç®—ä»¿å‡½æ•°(3ä¸ª)ï¼š`logical_andã€logical_orã€logical_no`

## å‡½æ•°é€‚é…å™¨

+ èƒ½å¤Ÿå°†ä»¿å‡½æ•°å’Œå¦ä¸€ä¸ªä»¿å‡½æ•°ï¼ˆæˆ–æŸä¸ªå€¼ï¼Œæˆ–æŸä¸€ä¸ªå‡½æ•°ï¼‰ç»“åˆèµ·æ¥çš„ä»¿å‡½æ•°ã€‚å£°æ˜äº`<functional>`ä¸­ã€‚
+ `C++11/C++17/C++2x`å¼ƒç”¨äº†å¤§é‡çš„å‡½æ•°é€‚é…å™¨

# STLç©ºé—´é…ç½®å™¨

STL**ç©ºé—´é…ç½®å™¨**å¯ä»¥é…ç½®åŒ…å«å†…å­˜ã€å…±äº«å†…å­˜ã€ç£ç›˜å­˜å‚¨åœ¨å†…çš„å„ç§ç©ºé—´ã€‚

## é»˜è®¤é…ç½®å™¨

1. å‡ºç°èƒŒæ™¯ï¼šå¤§é‡ä¸”é¢‘ç¹çš„å°å—å†…å­˜éé…å¸¦æ¥äº†å¤§é‡ç¢ç‰‡ï¼Œä»¥åŠç”³è¯·é‡Šæ”¾æ—¶çš„ç³»ç»Ÿè°ƒç”¨é€ æˆçš„æ€§èƒ½æŸå¤±ã€‚
2. å†…å­˜æ± ï¼šç¼“è§£å°å—å†…å­˜åˆ†é…å¸¦æ¥çš„é—®é¢˜ï¼ŒåŸºæœ¬çš„æ€æƒ³æ˜¯ä¸€æ¬¡å‘ `heap`ç”³è¯·ä¸€å—å¾ˆå¤§çš„å†…å­˜ï¼ˆå†…å­˜æ± ï¼‰ï¼Œå¦‚æœç”³è¯·å°å—å†…å­˜çš„è¯å°±ç›´æ¥åˆ°å†…å­˜æ± ä¸­å»å–ã€‚
3. ä½œç”¨ï¼šå®Œæˆå†…å­˜é…ç½®ä¸é‡Šæ”¾ï¼Œå¯¹è±¡æ„é€ å’Œææ„çš„å·¥ä½œã€‚è´£ä»»ä¸»ä½“ä¸º `allocator`ï¼Œå…¶å››å¤§åŠ©æ‰‹ä¸º `allocate`ï¼Œ`deallocate`ï¼Œ`construct`å’Œ `destroy`ã€‚
4. STLå®ç°äº† `std::allocator`ï¼ˆæ•ˆç‡ä½ï¼Œç®€å•åŒ…è£…äº† `new`å’Œ `delete`ï¼Œåªä¸ºå…¼å®¹è€ä»£ç ï¼‰å’Œ `std::alloc`ï¼ˆå®é™…ä½¿ç”¨çš„ç‰ˆæœ¬ï¼‰

### [ç±»å‹è¦æ±‚](https://zh.cppreference.com/w/cpp/named_req/Allocator)

å¾…åˆ†é…çš„åŸºæœ¬ç±»å‹**ä¸åŒ…å«CVé™å®šç¬¦**ã€‚

### ç»„æˆç»“æ„

1. æ¦‚è¿°ï¼šä¸€çº§ç©ºé—´é…ç½®å™¨ï¼ˆå¤§äº128Bçš„å¤§å—å†…å­˜åˆ†é…ï¼Œå°è£…äº† `malloc`ä¸ `free`ï¼‰å’ŒäºŒçº§ç©ºé—´é…ç½®å™¨ï¼ˆä¸å¤§äº128Bçš„å°å—åœ¨å†…å­˜æ± åˆ†é…ï¼‰ã€‚

![STLä¸¤çº§ç©ºé—´é…ç½®å™¨](/home/linbird/Londa/img/lang/2layer-allocater.png)

#### ä¸€çº§ç©ºé—´é…ç½®å™¨

1. é¦–å…ˆå°è¯•ä½¿ç”¨ `malloc`åˆ†é…å†…å­˜
2. å¦‚æœç©ºé—´ä¸æ»¡è¶³è°ƒç”¨å†…å­˜ä¸è¶³å¤„ç†å‡½æ•°
3. å†…å­˜å¤„ç†å‡½æ•°å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œåˆ™æŠ›å‡º `bad_alloc`å¼‚å¸¸ã€‚å¦åˆ™å¾ªç¯è°ƒç”¨å¤„ç†å‡½æ•°ç›´åˆ°æˆåŠŸã€‚

+ **æ³¨æ„**ï¼š"å†…å­˜ä¸è¶³å¤„ç†æœºåˆ¶"æ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ï¼Œè®¾ç½®"å†…å­˜ä¸è¶³å¤„ç†ä»‹è´¨"ä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ã€‚

#### äºŒçº§ç©ºé—´é…ç½®å™¨

1. æ”¯æŒç»“æ„ï¼š**å †å†…å­˜æ± ä¸ `free_list`**ã€‚
   1. `free_list`ï¼š16ä¸ªé“¾è¡¨é¦–æŒ‡é’ˆæ„æˆ `free_list`æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨åˆ†åˆ«ç»„ç»‡å·²ä»å†…å­˜æ± åˆ†é…çš„$NÃ—8B$çš„ç©ºé—²å†…å­˜å—ï¼ˆä¸ºäº†ä¾¿äºç®¡ç†ï¼Œåœ¨**å†…å­˜æ± ä¸Šçš„åˆ†é…ä»¥ `8B`ä¸ºåŸºæœ¬å•ä½**ï¼‰ã€‚
   2. å †å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜ï¼‰ï¼šä»¥ `start_free`å¼€å§‹ã€`end_free`ç»“æŸçš„ä¸€æ®µè¿ç»­çš„æœªè¢«ä½¿ç”¨çš„å†…å­˜

![](/home/linbird/Londa/img/lang/second_layer.png)

##### [åˆ†é…ç­–ç•¥](https://blog.csdn.net/GyafdxIs/article/details/48010869)

1. é¦–å…ˆå°è¯•åœ¨ `free_list`ä¸Šå¯»æ‰¾æœ€å°å¯æ»¡è¶³å†…å­˜å—ï¼ˆå…¶å¤§å°ä¸ºnï¼‰è¿”å›ï¼Œå¦‚æœä¸æ»¡è¶³è°ƒç”¨ `refill`ä»å†…å­˜æ± ç”³è¯·
2. `refill`å°è¯•ä»å†…å­˜æ± åˆ†é…**è‡³å°‘1ä¸ªã€è‡³å¤š20ä¸ª**ï¼ˆSTLé»˜è®¤ï¼‰å¤§å°ä¸ºnçš„å†…å­˜å—ï¼Œå¦‚æœå¾—åˆ°æ»¡è¶³ï¼Œé¦–å…ˆè¿”å›ä¸€ä¸ªç»™ä¸Šå±‚è°ƒç”¨ï¼Œå…¶ä½™çš„æŒ‚åˆ°å¤§å°ä¸ºnçš„ `free_list`çš„å…ƒç´ çš„é“¾è¡¨åé¢ã€‚
3. å¦‚æœç¬¬äºŒæ­¥å¾—ä¸åˆ°æ»¡è¶³ï¼ˆå†…å­˜æ± å¯ç”¨å°äºnï¼‰ï¼Œå…ˆå°†å†…å­˜æ± ä¸­çš„å‰©ä½™å¯ç”¨å—æŒ‚åˆ°ç›¸åº”çš„ `free_list`çš„ç›¸åº”èŠ‚ç‚¹é“¾è¡¨åé¢ï¼Œ**å†å‘å †ç©ºé—´**ç”³è¯·å†…å­˜ã€‚
4. å¦‚æœç¬¬ä¸‰æ­¥æˆåŠŸï¼Œå†æ¬¡æ‰§è¡Œç¬¬äºŒæ­¥ã€‚å¦åˆ™åœ¨ `free_list`å¯»æ‰¾**å¤§äºn**çš„å†…å­˜ï¼Œæœ‰åˆ™å°†è¿™ä¸€å—å†…å­˜å½’è¿˜åˆ°å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜åŒºï¼‰ï¼Œä¹‹åè¿›è¡Œç¬¬äºŒæ­¥ï¼Œå¦åˆ™è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨ã€‚

### ç¼ºç‚¹

1. äºŒçº§ç©ºé—´é…ç½®å™¨é€ æˆçš„**å†…ç¢ç‰‡**é—®é¢˜(å°¤å…¶æ—¶é¢‘ç¹ç”³è¯·charè¿™ç§å°å†…å­˜æ—¶)ã€‚
2. äºŒçº§ç©ºé—´é…ç½®å™¨å°†ç©ºé—²çš„å†…å­˜ä¸€ç›´è‡ªå·±æŒæœ‰**æ²¡æœ‰å›æ”¶ç»™ç³»ç»Ÿ**ï¼Œå¯èƒ½é€ æˆå †å­˜å‚¨ä¸å¤Ÿæˆ–è€…äºŒçº§é…ç½®å™¨æ— æ³•æ»¡è¶³ç¨å¤§ä¸€ç‚¹çš„å†…å­˜éœ€æ±‚ç­‰é—®é¢˜ã€‚

## è‡ªå®šä¹‰é…ç½®å™¨

å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨åªéœ€è¦å®ç° `STL allocator`çš„è§„èŒƒå³å¯ã€‚é€šå¸¸åªéœ€è¦ç»§æ‰¿ `std::allocator`æ¨¡æ¿ç±»å³å¯ï¼Œåœ¨å­ç±»é‡Œå®ç°è‡ªå·±çš„æ–¹æ³•å°±å¯ä»¥å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨ã€‚

```c++
template<class T> struct Allocator : public allocator<T> {
    typedef ptrdiff_t       difference_type;
	typedef size_t   size_type;
    typedef typename allocator<T>::pointer              pointer;
    typedef typename allocator<T>::value_type           value_type;
    typedef typename allocator<T>::const_pointer        const_pointer;
    typedef typename allocator<T>::reference            reference;
    typedef typename allocator<T>::const_reference      const_reference;

/// 0ï¼šæ­¤ç»“æ„å®šä¹‰äº†otheræˆå‘˜ï¼Œè¯¥æˆå‘˜å®šä¹‰ä¸ºä¸“é—¨ç”¨äºä¸åŒå‚æ•°ç±»å‹çš„åˆ†é…å™¨çš„å®ä¾‹ï¼ˆotheræˆå‘˜å®šä¹‰äº†å¯ä»¥åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡çš„åˆ†é…å™¨ç±»ï¼‰,ä¾‹å¦‚map<>æ¨¡æ¿ç±»çš„å†…éƒ¨éœ€è¦åˆ›å»ºçº¢é»‘æ ‘çš„æ¯ä¸ªnodeçš„å­˜å‚¨ç»“æ„
    template<class U> struct rebind{ typedef Allocator<U> other;};
///	template<class U> struct rebind{using other=MyAllocator<U>;};

///1ï¼šç©ºé—´åˆ†é…å‡½æ•°ï¼šé…ç½®å¯ä»¥å­˜å‚¨nä¸ªå¯¹è±¡çš„ç©ºé—´ï¼ˆæ³¨æ„ï¼šoperator newå¹¶ä¸ä¼šæ‰§è¡Œä»»ä½•ç±»å‹Tçš„åˆå§‹åŒ–ï¼‰
    pointer allocate(size_type n) {
		return static_cast<pointer>(operator new(sizeof(T)*numObjs));
    }
    ///ç¬¬äºŒå‚æ•°æ¥å—ä¸€ä¸ªå·²åˆ†é…å †å†…å­˜çš„æŒ‡é’ˆï¼Œåªæ˜¯å‚è€ƒå€¼ï¼ˆå¯ä»¥å¢å¼ºåœ°å€çš„åŒºåŸŸæ€§ï¼‰
	pointer allocate(size_type numObjs, const void* hit){ return allocate(numObjs);}

///2ï¼šç©ºé—´é‡Šæ”¾å‡½æ•°
    template<typename U> void deallocate(U* p, size_type n) { return ::operator delete(p);}

///å¯é€‰3ï¼šæ„é€ å‡½æ•°ï¼ˆè¢«C++20åºŸå¼ƒï¼‰
    template<typename U, class...Args> void construct(U* p, Args &&...) {
        ::new(p) T(std::forward<Args>(args)...);
    }
///å¯é€‰4ï¼šææ„å‡½æ•°ï¼ˆè¢«C++20åºŸå¼ƒï¼‰
    template<typename U> void _destroy(U* p) { p->~T();}

///åœ°å€åŠå…¶ä»–ç›¸å…³å‡½æ•°ï¼ˆéå¿…è¦ï¼‰
    pointer address(reference x) { return (pointer)&x;}
    const_pointer address(const_reference x) { return (const_pointer)&x;}
    size_type max_size() const { return size_type(UINT_MAX/sizeof(T));}
};

std::vector<int, Allocator<int> > v;
for(int i = 0; i < 100; ++i){
	v.push_back(i);
	if((i&(i-1)) == 0) cout << v.size() << '/' << v.capacity() << ' ' << v.back() << endl;
}
```

# STLè¿­ä»£å™¨

è¿­ä»£å™¨æ˜¯ä¸€ç§æŠ½è±¡çš„è®¾è®¡æ¦‚å¿µï¼Œå®ƒæä¾›ä¸€ç§æ–¹æ³•ä½¿å¤–ç•Œèƒ½å¤Ÿä¾åºè®¿é—®æŸä¸ªèšåˆç‰©æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€æš´éœ²è¯¥èšåˆç‰©çš„å†…éƒ¨è¡¨è¿°æ–¹å¼ã€‚å› æ­¤è¿­ä»£å™¨çš„å†…éƒ¨å¿…é¡»ä¿å­˜ä¸€ä¸ªä¸å®¹å™¨ç›¸å…³è”çš„æŒ‡é’ˆï¼Œç„¶åé‡è½½å„ç§è¿ç®—æ“ä½œæ¥æ–¹ä¾¿éå†ã€‚

**ä¼˜åŒ–æ€æƒ³**ï¼šåˆ©ç”¨C++é‡è½½æœºåˆ¶å’Œå‚æ•°æ¨å¯¼æœºåˆ¶ï¼ˆ`traits`ï¼šç±»å‹èƒå–ï¼‰**å°†è¿è¡ŒæœŸå†³è®®é—®é¢˜æå‰åˆ°ç¼–è¯‘æœŸå†³è®®**ï¼ˆ**æ¯ä¸ªè¿­ä»£å™¨éƒ½å¿…é¡»å®šä¹‰å‹åˆ« `iterator_category`**ï¼‰ï¼Œå®ç°äº†**é¿å…åœ¨è¿è¡Œæ—¶åˆ¤æ–­è¿­ä»£å™¨çš„ç±»å‹**ã€‚[æ¥æº](https://ivanzz1001.github.io/records/post/cplusplus/2018/03/14/cpluscplus_stl_iterator)

## ç±»åˆ«

### åŸºæœ¬è¿­ä»£å™¨ç±»å‹

![è¿­ä»£å™¨ç±»å‹](/home/linbird/Londa/img/lang/cpp_iterator_top.jpg)

|     è¾“å…¥å‹     |     è¾“å‡ºå‹     |                 å‰å‘å‹                 |       åŒå‘å‹       |      éšæœºè·å–å‹      |
| :------------: | :------------: | :-------------------------------------: | :----------------: | :-------------------: |
| å•æ­¥å‘å‰ã€åªè¯» | å•æ­¥å‘å‰ã€åªå†™ |           å•æ­¥å‘å‰ã€åŒºé—´è¯»å†™           | åŒå‘å•æ­¥ã€åŒºé—´è¯»å†™ |    éšæœºè·³è½¬ã€è¯»å†™    |
|  `istream`  |  `ostream`  | `forward_list,unordered_`<multi>`[map |       set]`       | `list,`<multi>`[map |

### è¿­ä»£å™¨é€‚é…å™¨

#### æ’å…¥é€‚é…å™¨

1. æ’å…¥é€‚é…å™¨ `inserter`ï¼šè¦æ±‚å®¹å™¨æœ‰ `insert`æˆå‘˜å‡½æ•°ï¼Œå¦‚ `vector`ï¼Œ`list`ï¼Œ`map`ï¼Œ`set`ï¼Œ`deque`(æœ‰ç‚¹ç ´å `deque`æ•°æ®ç»“æ„)ï¼Œ `inserter()`å¯ä»¥å¿«é€Ÿåˆ›å»ºè¯¥ç±»å‹è¿­ä»£å™¨ï¼Œå‚æ•°ä¸­çš„ä½ç½®å‚æ•°ä»…åšæŒ‡ç¤ºä½œç”¨ã€‚
2. å‰å‘æ’å…¥é€‚é…å™¨ `front_insert_iterator`ï¼šè¦æ±‚ç±»æœ‰ `push_front`å‡½æ•°æ”¯æŒï¼Œå¦‚ `list`å’Œ `deque`ã€‚å¯ä»¥å€ŸåŠ© `front_inserter()`å¿«é€Ÿåˆ›å»ºã€‚
3. åå‘æ’å…¥è¿­ä»£å™¨ `back_insert_iterator`ï¼šè¦æ±‚æˆå‘˜å‡½æ•° `push_back`æ”¯æŒï¼Œå¦‚ `vector`ã€listã€`deque`ã€‚å¯ä»¥å€ŸåŠ© `back_inserter()`åˆ›å»ºã€‚

#### é€†å‘è¿­ä»£å™¨é€‚é…å™¨

1. `reverse_iterator`ï¼š

#### ç§»åŠ¨è¿­ä»£å™¨

1. `move_inserter`ï¼šC++11å¼•å…¥ã€‚å¯ä»¥å®ç°ä»¥ç§»åŠ¨è€Œéå¤åˆ¶çš„æ–¹å¼ï¼Œå°†æŸä¸ªåŒºåŸŸç©ºé—´ä¸­çš„å…ƒç´ ç§»åŠ¨è‡³å¦ä¸€ä¸ªæŒ‡å®šçš„ç©ºé—´ã€‚

+ è°ƒç”¨ `make_move_iterator`å‡½æ•°å¯ä»¥ç”±åŸºç¡€è¿­ä»£å™¨å¿«é€Ÿåˆ›å»º `move_iterator`è¿­ä»£å™¨.
+ æ­¤åŸºç¡€è¿­ä»£å™¨çš„ç±»å‹è™½ç„¶æ²¡æœ‰æ˜ç¡®è¦æ±‚ï¼Œä½†è¯¥æ¨¡æ¿ç±»ä¸­æŸäº›æˆå‘˜æ–¹æ³•çš„åº•å±‚å®ç°ï¼Œéœ€è¦æ­¤åŸºç¡€è¿­ä»£å™¨ä¸ºåŒå‘è¿­ä»£å™¨æˆ–è€…éšæœºè®¿é—®è¿­ä»£å™¨ã€‚
+ é€šè¿‡ç§»åŠ¨è¿­ä»£å™¨å°†å®¹å™¨ä¸­æŸåŒºåŸŸçš„å…ƒç´ ç§»åŠ¨åˆ°äº†å…¶ä»–å®¹å™¨ä¸­ï¼Œè¯¥åŒºåŸŸå†…ä»å¯èƒ½æ®‹ç•™æœ‰ä¹‹å‰å­˜å‚¨çš„å…ƒç´ ï¼Œä½†è¿™äº›å…ƒç´ æ˜¯ä¸èƒ½å†è¢«ä½¿ç”¨çš„ï¼Œå¦åˆ™ææœ‰å¯èƒ½ä½¿ç¨‹åºäº§ç”Ÿå„ç§å…¶ä»–é”™è¯¯ã€‚
  |                                        è¿­ä»£å™¨é€‚é…å™¨                                        |                                          åˆ›å»ºå‡½æ•°                                          |      è¦æ±‚      |
  | :----------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------: | :------------: |
  |      [`reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/reverse_iterator)      | [`make_reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_reverse_iterator) |                |
  |         [`move_iterator`](https://zh.cppreference.com/w/cpp/iterator/move_iterator)         |    [`make_move_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_move_iterator)    |                |
  |  [`back_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/back_insert_iterator)  |         [`back_inserter`](https://zh.cppreference.com/w/cpp/iterator/back_inserter)         | `push_back` |
  | [`front_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/front_insert_iterator) |        [`front_inserter`](https://zh.cppreference.com/w/cpp/iterator/front_inserter)        | `push_front` |
  |       [`insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/insert_iterator)       |              [`inserter`](https://zh.cppreference.com/w/cpp/iterator/inserter)              |   `insert`   |

## è¿­ä»£å™¨æ¨¡æ¿

```c++
///äº”ç§åŸºæœ¬è¿­ä»£å™¨ç±»å‹çš„å®šä¹‰ï¼šåªæ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è¯†ï¼Œä¸éœ€è¦å…·ä½“çš„å…ƒç´ 
struct input_iterator_tag{};
struct output_iterator_tag{};
struct forward_iterator_tag:public input_iterator_tag{};
struct bidirectional_iterator_tag:public forward_iterator_tag{};
struct random_access_iterator_tag:public bidirectional_iterator_tag{};

template <class _Tp, class _Distance> struct input_iterator {///è¾“å…¥è¿­ä»£å™¨
  typedef input_iterator_tag iterator_category;
  typedef _Tp                value_type;
  typedef _Distance          difference_type;
  typedef _Tp*               pointer;
  typedef _Tp&               reference;
};

struct output_iterator {///è¾“å‡ºè¿­ä»£å™¨
  typedef output_iterator_tag iterator_category;
  typedef void                value_type;
  typedef void                difference_type;
  typedef void                pointer;
  typedef void                reference;
};

template <class _Tp, class _Distance> struct forward_iterator {///å‰å‘è¿­ä»£å™¨
  typedef forward_iterator_tag iterator_category;
  typedef _Tp                  value_type;
  typedef _Distance            difference_type;
  typedef _Tp*                 pointer;
  typedef _Tp&                 reference;
};


template <class _Tp, class _Distance> struct bidirectional_iterator {///åŒå‘è¿­ä»£å™¨
  typedef bidirectional_iterator_tag iterator_category;
  typedef _Tp                        value_type;
  typedef _Distance                  difference_type;
  typedef _Tp*                       pointer;
  typedef _Tp&                       reference;
};

template <class _Tp, class _Distance> struct random_access_iterator {///éšæœºè®¿é—®è¿­ä»£å™¨
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                        value_type;
  typedef _Distance                  difference_type;
  typedef _Tp*                       pointer;
  typedef _Tp&                       reference;
};
```

### è¿­ä»£å™¨ç±»å‹èƒå–

é€šè¿‡STLå®šä¹‰çš„**`iterator_traits`æ¨¡æ¿å¯ä»¥èƒå–ä¸åŒç§ç±»çš„è¿­ä»£å™¨ç‰¹æ€§**ï¼Œ`iterator_traits`è¿˜å¯¹æŒ‡é’ˆå’Œå¸¸é‡æŒ‡é’ˆæœ‰ç‰¹åŒ–ç‰ˆæœ¬ï¼Œå› æ­¤ä¹Ÿå¯ä»¥èƒå–åŸç”ŸæŒ‡é’ˆçš„ç‰¹æ€§ã€‚

```c++
template<class Category,class T,class Distance = ptrdiff_t,class Pointer=T*,class Reference=T&>
class iterator{
    typedef Category iterator_category;///è¿­ä»£å™¨ç±»åˆ«
    typedef T        value_type;///å…ƒç´ ç±»å‹
    typedef Distance difference_type;///è¿­ä»£å™¨ä¹‹å·®çš„ç±»å‹
    typedef Pointer  pointer;///å…ƒç´ çš„æŒ‡é’ˆç±»å‹
    typedef Reference reference;///å…ƒç´ çš„å¼•ç”¨ç±»å‹
};///STLä¸­çš„è¿­ä»£å™¨æ¨¡æ¿

template <class _Tp> struct iterator_traits<_Tp*> {///ç‰¹åŒ–ç‰ˆæœ¬ï¼šèƒå–æŒ‡é’ˆç±»è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                         value_type;
  typedef ptrdiff_t                   difference_type;
  typedef _Tp*                        pointer;
  typedef _Tp&                        reference;
};

template <class _Tp> struct iterator_traits<const _Tp*> {///ç‰¹åŒ–ç‰ˆæœ¬ï¼šèƒå–å¸¸æŒ‡é’ˆç±»è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                         value_type;
  typedef ptrdiff_t                   difference_type;
  typedef const _Tp*                  pointer;
  typedef const _Tp&                  reference;
};

template <class _Iterator> struct iterator_traits {///èƒå–ä¸€èˆ¬è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef typename _Iterator::iterator_category iterator_category;
  typedef typename _Iterator::value_type        value_type;
  typedef typename _Iterator::difference_type   difference_type;
  typedef typename _Iterator::pointer           pointer;
  typedef typename _Iterator::reference         reference;
};
```

## è¿­ä»£å™¨çš„ç§»åŠ¨

1. `advance`ï¼šå‚æ•°æœ¬èº«è¢«æ”¹å˜ï¼Œè¿­ä»£å™¨è‡³å°‘ä¸ºå•å‘è¿­ä»£å™¨ï¼Œå½“æ­¥æ•°å‚æ•°å°äº0åˆ™å¿…é¡»æ˜¯åŒå‘è¿­ä»£å™¨ã€‚
2. `prev`ï¼šä¸æ”¹å˜å‚æ•°ã€‚è·å–ä¸€ä¸ªè·ç¦»æŒ‡å®šè¿­ä»£å™¨ n ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚è¦æ±‚ä¸ºåŒå‘æˆ–è€…éšæœºè¿­ä»£å™¨ã€‚**è‡ªèº«ä¸ä¼šæ£€éªŒæ–°è¿­ä»£å™¨çš„æŒ‡å‘æ˜¯å¦åˆç†**
3. `next`ï¼šä¸æ”¹å˜å‚æ•°ã€‚è¿­ä»£å™¨ç±»å‹è¦æ±‚åŒ1ï¼Œå•å‘è¿­ä»£å™¨åªèƒ½ç”¨æ­£å‚æ•°ã€‚**ä¹Ÿä¸ä¼šæ£€æŸ¥æ–°è¿­ä»£å™¨æŒ‡å‘çš„æœ‰æ•ˆæ€§**ã€‚

## è¿­ä»£å™¨å¤±æ•ˆ

å¯¹å®¹å™¨çš„**æ“ä½œæ”¹å˜äº†å…ƒç´ çš„å­˜æ”¾ä½ç½®**ï¼Œä½¿ä¹‹å‰å­˜å‚¨äº†å­˜å‚¨ä½ç½®çš„è¿­ä»£å™¨æ— æ³•è®¿é—®åˆ°æ­£ç¡®æ•°æ®çš„ç°è±¡ã€‚[å‚è€ƒ](https://blog.csdn.net/richenyunqi/article/details/86563479)

|                                 åº•å±‚ï¼šç»“æ„                                 |  æ’å…¥  |     åˆ é™¤     |
| :-------------------------------------------------------------------------: | :----: | :----------: |
|                 æ•°ç»„è¿ç»­å†…å­˜ï¼š`vector,deque,string,array`                 | åå¤±æ•ˆ |    åå¤±æ•ˆ    |
|                    é“¾è¡¨ä¸è¿ç»­å†…å­˜ï¼š`list,forward_list`                    | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
|               çº¢é»‘æ ‘ä¸è¿ç»­å†…å­˜ï¼š`map,multimap,set,multiset`               | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
| å“ˆå¸Œï¼š`unordered_map,unordered_multimap,unordered_set,unordered_multiset` | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
|                    å †æ ˆï¼š`stack,priority_queue,queue`                    | ä¸æ”¯æŒ |    ä¸æ”¯æŒ    |

## æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨

### æŒ‡é’ˆ

**æŒ‡é’ˆä½œä¸ºä¸€ä¸ªå®ä½“å­˜åœ¨**ï¼Œå æœ‰å…·ä½“çš„å­˜å‚¨å•å…ƒï¼Œè¯¥å­˜å‚¨å•å…ƒä¸­å­˜å‚¨çš„æ˜¯è¢«æŒ‡å‘å¯¹è±¡çš„åœ°å€ã€‚ä½¿ç”¨æŒ‡é’ˆæ“ä½œè®¿é—®åŸå§‹å¯¹è±¡æ—¶å¿…é¡»æ‰‹åŠ¨å¯¹æŒ‡é’ˆè§£å¼•ç”¨ã€‚

#### constä¸æŒ‡é’ˆ

ä»å³å‘å·¦è¯»ç”³æ˜ï¼Œé‡åˆ°*ç¿»è¯‘ä¸º `pointer to`

```c
char * const p; // p is a const pointer to char;
char const * p; // p is a pointer to constr char;
const char * p; // p is a pointer to constr char;
```

#### æŒ‡é’ˆä¸æ•°ç»„

```c
int (*p)[n];//æ•°ç»„æŒ‡é’ˆï¼ˆä¹Ÿç§°è¡ŒæŒ‡é’ˆï¼‰,()ä¼˜å…ˆçº§é«˜ï¼Œé¦–å…ˆè¯´æ˜pæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªæ•´å‹çš„ä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦æ˜¯n
int *p[n];//æŒ‡é’ˆæ•°ç»„ï¼Œ[]ä¼˜å…ˆçº§é«˜ï¼Œå…ˆä¸pç»“åˆæˆä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå†ç”±int*è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ•´å‹æŒ‡é’ˆæ•°ç»„ï¼Œå®ƒæœ‰nä¸ªæŒ‡é’ˆç±»å‹çš„æ•°ç»„å…ƒç´ ã€‚
int a[5];//æ•°ç»„åaä»£è¡¨æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ï¼Œå’Œ&a[0]åœ¨æ•°å€¼ä¸Šæ˜¯ç­‰ä»·çš„ï¼Œå¯¹ä»–ä»¬è¿›è¡Œç®—æœ¯è¿ç®—çš„æ­¥é•¿éƒ½æ˜¯æ•°ç»„é¦–å…ƒç´ ç±»å‹çš„å¤§å°
int b[2][3];//bä»£è¡¨æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ï¼Œb[0]è¡¨ç¤ºçš„æ˜¯ç¬¬ä¸€è¡Œçš„é¦–åœ°å€ï¼Œä¸¤è€…åœ¨æ•°å€¼ä¸Šå…·æœ‰ç­‰ä»·å…³ç³»
auto c = &a;//å¯¹æ•°ç»„åè¿›è¡Œå–åœ°å€æ“ä½œå¾—åˆ°çš„æ˜¯æ•´ä¸ªæ•°ç»„çš„åœ°å€ï¼Œå¯¹å…¶è¿›è¡Œç®—æœ¯æ“ä½œçš„æ­¥é•¿æ˜¯æ•´ä¸ªæ•°ç»„çš„å¤§å°
```

1. æ•°ç»„åçš„å†…æ¶µåœ¨äºå…¶æŒ‡ä»£å®ä½“æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯æ•°ç»„ï¼›
2. æ•°ç»„åçš„å¤–å»¶åœ¨äºå…¶å¯ä»¥è½¬æ¢ä¸ºæŒ‡å‘å…¶æŒ‡ä»£å®ä½“çš„æŒ‡é’ˆï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªåªè¯»æŒ‡é’ˆå˜é‡ `T* const`ï¼ˆç”±äºç¼–è¯‘å™¨ä¼šé˜»æ­¢æ‰€æœ‰å¯¹åªè¯»å˜é‡çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°ç»„åä¸èƒ½è¿›è¡Œè‡ªå¢è‡ªå‡çš„æ“ä½œï¼‰ï¼Œå¯¹å…¶è¿›è¡Œ `sizeof`æ“ä½œæ—¶å¾—åˆ°çš„æ˜¯æ•°ç»„æ•´ä½“çš„ç©ºé—´çš„å¤§å°.
3. å½“æ•°ç»„åä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’æ—¶ï¼Œä½œä¸ºå¸¸é‡æŒ‡é’ˆçš„æ•°ç»„åçš„å€¼è¢«èµ‹å€¼åˆ°ä¸€ä¸ªæŒ‡é’ˆå˜é‡
4. æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆåˆ™æ˜¯å¦å¤–ä¸€ç§å˜é‡ç±»å‹ï¼ˆåœ¨WIN32å¹³å°ä¸‹ï¼Œé•¿åº¦ä¸º4ï¼‰ï¼Œä»…ä»…æ„å‘³ç€æ•°ç»„çš„å­˜æ”¾åœ°å€ï¼

æ•°ç»„åå’Œ&æ•°ç»„åè™½ç„¶åœ¨æ•°å€¼ä¸Šç›¸åŒï¼Œä½†æ˜¯åœ¨ç±»å‹ä¸Šä¸åŒâ€”â€”æ•°ç»„åæ˜¯æŒ‡å‘é¦–ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œ&æ•°ç»„åæ˜¯æŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆã€‚åœ¨æŒ‡é’ˆåŠ å‡æ•´æ•°çš„æ—¶å€™ï¼Œå‰è€…ä»¥ä¸€ä¸ªå…ƒç´ ä¸ºé¢—ç²’åº¦ï¼Œåè€…ä»¥æ•´ä¸ªæ•°ç»„ä¸ºé¢—ç²’åº¦ã€‚

#### ç±»æˆå‘˜æŒ‡é’ˆ

è¦ä½¿ç”¨ï¼ˆ&ç±»å::æˆå‘˜åï¼‰è·å–æŒ‡å‘æˆå‘˜çš„æŒ‡é’ˆè¿™ä¸ªæˆå‘˜å¿…é¡»æ˜¯å¯¹å¤–å¯è§çš„ï¼š

|      æŒ‡å‘      |                     ç”³æ˜æ–¹å¼                     |                    èµ‹å€¼                    |                                è°ƒç”¨                                |
| :------------: | :----------------------------------------------: | :----------------------------------------: | :----------------------------------------------------------------: |
|  ç±»çš„æ™®é€šæˆå‘˜  | `typedef è¿”å›å€¼ (ç±»å::*æŒ‡é’ˆç±»å‹å)(å‚æ•°åˆ—è¡¨)` | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å‡½æ•°å` | `(ç±»å¯¹è±¡.*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)`æˆ–è€… `(ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)` |
| ç±»æ™®é€šæ•°æ®æˆå‘˜ |    `typedef æ•°æ®ç±»å‹å (ç±»å::*æŒ‡é’ˆç±»å‹å)`    | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å˜é‡å` |             `ç±»å¯¹è±¡.*æŒ‡é’ˆå`æˆ–è€… `ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå`             |

ç±»çš„é™æ€æˆå‘˜å’Œæ™®é€šæˆå‘˜çš„åŒºåˆ«åœ¨äºï¼Œä»–ä»¬æ˜¯ä¸ä¾èµ–äºå…·ä½“å¯¹è±¡çš„ï¼Œæ‰€æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½å…±äº«åŒä¸€ä¸ªé™æ€æˆå‘˜ï¼Œæ‰€ä»¥é™æ€æˆå‘˜ä¹Ÿæ²¡æœ‰thisæŒ‡é’ˆçš„æ¦‚å¿µï¼Œæ‰€ä»¥æŒ‡å‘ç±»çš„é™æ€æˆå‘˜çš„æŒ‡é’ˆå°±æ˜¯æ™®é€šçš„æŒ‡é’ˆã€‚

### å¼•ç”¨

**å¼•ç”¨åªæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡çš„åˆ«åï¼Œå®ƒæŒ‡å‘å¯¹è±¡æœ¬èº«**ï¼Œåœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–å¼•ç”¨ï¼Œä¸”ä¸€æ—¦å®šä¹‰äº†å¼•ç”¨å°±æ— æ³•å†ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ï¼Œä¹‹åæ¯æ¬¡ä½¿ç”¨è¿™ä¸ªå¼•ç”¨è®¿é—®çš„éƒ½æ˜¯æœ€åˆç»‘å®šçš„å¯¹è±¡ï¼Œ**å·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½å æœ‰å­˜å‚¨ç©ºé—´**ã€‚

```c++
class Test{char& b};//64bit:sizeof(b) == 8
```

å¼•ç”¨å¤§å¤šæ•°æ—¶è¡¨ç°ä¸ºä¸€ä¸ªè¢«æ–½åŠ äº†è®¸å¤šé™åˆ¶çš„æŒ‡é’ˆï¼ˆå¯ä»¥çœ‹ä½œ `const`æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡è¿™äº›è¯­æ³•ä¸Šçš„é™åˆ¶è§„é¿äº†ä½¿ç”¨è£¸æŒ‡é’ˆæ—¶çš„ä¸€äº›å±é™©è¡Œä¸ºï¼Œå…¶æ•ˆç‡å’Œè£¸æŒ‡é’ˆç›¸åŒã€‚

### è¿­ä»£å™¨

è¿­ä»£å™¨æ˜¯æ¨¡ä»¿æŒ‡é’ˆçš„è¡Œä¸ºè®¾è®¡çš„ç±»æ¨¡æ¿ï¼Œæ˜¯**å¯¹æŒ‡é’ˆæ¦‚å¿µçš„ä¸€ç§æå‡**ã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥è¢«è§†ä¸ºä¸€ç§è¿­ä»£å™¨ã€‚è¿­ä»£å™¨æ›´åƒæ˜¯ä¸€ç»„æŠ½è±¡çš„æ¥å£ï¼Œæ»¡è¶³äº†è¿™ä¸€ç»„æ¥å£å°±å¯ä»¥ç§°ä¹‹ä¸ºè¿­ä»£å™¨ï¼Œæ»¡è¶³è¿™äº›æ¥å£çš„å…·ä½“å®ç°æ–¹æ³•é«˜åº¦ä¾èµ–äºå®é™…çš„æ•°æ®ç»“æ„ã€‚

# STLæ­£åˆ™è¡¨è¾¾å¼

+ å­—ç¬¦ä¸²å¤„ç†çš„åˆ©å™¨

## æ„æˆ

### æ­£åˆ™è¡¨è¾¾å¼regex

+ æ­£åˆ™è¡¨è¾¾å¼çš„æ ¸å¿ƒï¼Œè¡¨è¾¾å¼æå¤§çš„å½±å“äº†æœ€ç»ˆçš„æ•ˆç‡
+ æ”¯æŒæ–‡æ³•ï¼šSTLçš„regexåº“é»˜è®¤æ”¯æŒECMAScriptæ–‡æ³•ï¼Œæ­¤å¤–ä¹Ÿæä¾›äº†grepã€egrepã€awkç­‰æ–‡æ³•çš„æ”¯æŒã€‚å…¶æ–‡æ³•å¤§åŒå°å¼‚ï¼Œåœ¨è¿™é‡Œä¸åšå…·ä½“å±•å¼€ã€‚

1. [æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://deerchao.cn/tutorials/regex/regex.htm)
2. [C++æ­£åˆ™çŸ¥è¯†](https://github.com/HesseSummer/cspSolution/blob/master/C%2B%2B%E7%9F%A5%E8%AF%86/%E6%AD%A3%E5%88%99.md)
3. [learn-regex](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)
4. [å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼](https://github.com/cdoco/common-regex/blob/master/README.md)

### æœç´¢åŒ¹é…ç®—æ³•

1. `regex_match()`:ä¼šåœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­å°è¯•å®Œå…¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚
2. `regex_search()`:åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­æœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†,æŸ¥æ‰¾ç»“æœåŒ…å«äº†åŒ¹é…çš„å­ä¸²å’Œå­ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹å’Œç»“æŸåœ°å€ã€‚
3. `regex_replace()`:æŸ¥æ‰¾ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²å¹¶æ›¿æ¢ã€‚
4. `sregex_iterator()`:è¿­ä»£å™¨é€‚é…å™¨ï¼Œè°ƒç”¨ `regex_search`æ¥éå†ä¸€ä¸ªstringä¸­æ‰€æœ‰åŒ¹é…çš„å­ä¸²

### ç»“æœåŒ¹é…é›†

1. smatch/cmatch:ä»¥ `string/const char*`æ ¼å¼ä¿å­˜åŒ¹é…é›†åˆ

## å®ä¾‹

1. [C++ä¸æ­£åˆ™è¡¨è¾¾å¼](https://paul.pub/cpp-regex/)

# CPP IOå¤„ç†

+ C++åŒ…å«ä¸¤ä¸ªè¾“å…¥/è¾“å‡ºåº“ï¼šç°ä»£çš„ã€åŸºäºæµçš„I/Oåº“å’ŒCé£æ ¼I/Oå‡½æ•°çš„æ ‡å‡†é›†åˆã€‚
+ åŸºäºæµçš„IOå›´ç»•æŠ½è±¡çš„è¾“å…¥/è¾“å‡ºè®¾å¤‡ã€‚é€šè¿‡è¿™äº›æŠ½è±¡å¯ä»¥ä»¥ç›¸åŒçš„ä»£ç æ¥å¤„ç†é¢å‘æ–‡ä»¶ã€å†…å­˜æµæˆ–å…¶ä»–è‡ªå®šä¹‰çš„é€‚é…å™¨è®¾å¤‡æ‰§è¡ŒIOæ“ä½œã€‚
+ æ¯ä¸ªCæµä¸å¤–éƒ¨ç‰©ç†è®¾å¤‡ï¼ˆæ–‡ä»¶ã€æ ‡å‡†è¾“å…¥æµã€æ‰“å°æœºã€åºåˆ—ç«¯å£ç­‰ï¼‰å…³è”ï¼Œåªèƒ½é€šè¿‡ `std::FILE*`ç±»å‹æŒ‡é’ˆè®¿é—®åŠæ“ä½œ

## åŸºæœ¬æµå¯¹è±¡

![æµå¯¹è±¡ç»§æ‰¿å…³ç³»](img/lang/io.svg)

|                              ç±»                              |                         ä½œç”¨                         |
| :----------------------------------------------------------: | :---------------------------------------------------: |
|  [`ios_base`](https://zh.cppreference.com/w/cpp/io/ios_base)  |      çŠ¶æ€ä¿¡æ¯ã€æ§åˆ¶ä¿¡æ¯ã€å†…éƒ¨å­˜å‚¨ã€å›è°ƒã€å¼‚å¸¸ç­‰      |
| [`basic_ios`](https://zh.cppreference.com/w/cpp/io/basic_ios) | æä¾›äº† `std::basic_streambuf`çš„æ¥å£ï¼Œç®¡ç†ä»»æ„æµç¼“å†² |

`cinã€coutã€cerrã€clog`éƒ½æ˜¯é¢„å…ˆå·²ç»å®šä¹‰çš„å…¨å±€å¯¹è±¡ã€‚æ¯ä¸ªIO å¯¹è±¡éƒ½ç»´æŠ¤ä¸€ç»„æ¡ä»¶çŠ¶æ€ï¼Œç”¨æ¥æŒ‡å‡ºæ­¤å¯¹è±¡ä¸Šæ˜¯å¦å¯ä»¥è¿›è¡Œ IO æ“ä½œã€‚å¦‚æœé‡åˆ°é”™è¯¯ï¼ˆä¾‹å¦‚è¾“å…¥æµé‡åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼‰ï¼Œåˆ™å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºæ˜¯å¤±æ•ˆï¼Œæ‰€æœ‰çš„åç»­è¾“å…¥æ“ä½œéƒ½ä¸èƒ½æ‰§è¡Œï¼Œç›´åˆ°é”™è¯¯çº æ­£ã€‚

|  çŠ¶æ€æ ‡è®°ä½å¸¸é‡  |                              å«ä¹‰                              |     `good()`     |     `eof()`     |     `fail()`     |     `bad()`     |
| :--------------: | :------------------------------------------------------------: | :----------------: | :----------------: | :----------------: | :----------------: |
| `ios::goodbit` |                            æ²¡æœ‰é”™è¯¯                            | **`true`** |     `false`     |     `false`     |     `false`     |
| `ios::eofbit` |                          å·²åˆ°è¾¾æ–‡ä»¶å°¾                          |     `false`     | **`true`** |     `false`     |     `false`     |
| `ios::failbit` | éè‡´å‘½å¯æŒ½å›çš„**é€»è¾‘é”™è¯¯(å¦‚è¯»æ•°å­—é‡åˆ°å­—æ¯)ï¼Œå¯ç»§ç»­ä½¿ç”¨** |     `false`     |     `false`     | **`true`** |     `false`     |
| `ios::badbit` |   è‡´å‘½æ€§ä¸å¯æŒ½å›çš„**ç‰©ç†é”™è¯¯(å¦‚ç‰©ç†ä¸Š)ï¼Œä¸å¯ç»§ç»­ä½¿ç”¨**   |     `false`     |     `false`     | **`true`** | **`true`** |

æµå¯¹è±¡è¿˜æä¾›äº†**é€»è¾‘åˆ¤æ–­çš„è¿ç®—ç¬¦é‡è½½** `ios::operator!() ã€ios::operator bool()`ï¼Œå½“æµå¯¹è±¡å•ç‹¬å‡ºç°åœ¨æ¡ä»¶è¯­å¥ä¸­æ—¶ï¼Œå°±é—´æ¥è°ƒç”¨å¸ƒå°”è¿ç®—ï¼Œå¸ƒå°”è¿ç®—ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç”¨æ³•å°±æ˜¯æ£€æµ‹æ–‡ä»¶ç»“æŸã€‚

### æ–‡ä»¶æµ

`fstream`å¤´æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æµå¯¹è±¡ï¼ˆ`ifstreamã€ofstreamã€fstreamã€filebuf`ï¼‰ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ `ofstreamã€fstreamã€ifstream`ä¹‹é—´æ²¡æœ‰ç»§æ‰¿çš„å…³ç³»ï¼Œä½¿ç”¨ `fstream`ä¹Ÿå¹¶ä¸æ˜¯ä½¿ç”¨äº† `ifstream`ä¸ `ofstream`çš„äº¤é›†ã€‚

|    æµå¯¹è±¡    | é»˜è®¤IOæ–¹å¼ |        æ–‡ä»¶ä¸å­˜åœ¨çš„åŠ¨ä½œ        |
| :----------: | :--------: | :----------------------------: |
| `ifstream` |    åªè¯»    |             ä¸åˆ›å»º             |
| `ofstream` |    åªå†™    |              åˆ›å»º              |
| `fstream` |    è¯»å†™    | åªå†™æ–¹å¼æ‰“å¼€æ‰åˆ›å»ºï¼Œå¦åˆ™ä¸åˆ›å»º |

|      æ“ä½œæ ‡å¿—      |                  æ“ä½œæ–¹å¼                  |
| :----------------: | :----------------------------------------: |
|  `ios::in/out`  |       ä¸ºè¾“å…¥(è¯»)/è¾“å‡º(å†™)è€Œæ‰“å¼€æ–‡ä»¶       |
|  `ios::binary`  |       ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€       |
|    `ios::ate`    |              åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾              |
|    `ios::app`    |           æ‰€æœ‰è¾“å‡ºé™„åŠ åœ¨æ–‡ä»¶æœ«å°¾           |
|   `ios::trunc`   |        å¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™å…ˆåˆ é™¤è¯¥æ–‡ä»¶        |
| `ios::nocreate` |    ä¸å»ºç«‹æ–‡ä»¶ï¼Œæ‰€ä»¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ‰“å¼€å¤±è´¥    |
| `ios::noreplace` | ä¸è¦†ç›–æ–‡ä»¶ï¼Œæ‰€ä»¥æ‰“å¼€æ–‡ä»¶æ—¶å¦‚æœæ–‡ä»¶å­˜åœ¨å¤±è´¥ |

|    0    |    1    |    2    |    3    |
| :------: | :------: | :------: | :------: |
| æ™®é€šæ–‡ä»¶ | åªè¯»æ–‡ä»¶ | éšè—æ–‡ä»¶ | ç³»ç»Ÿæ–‡ä»¶ |

|         æ“ä½œç¬¦         |           æ ¼å¼           |    åœºæ™¯    |
| :---------------------: | :----------------------: | :--------: |
|     `dec/hex/oct`     | æ ¼å¼åŒ–ä¸ºåã€åå…­ã€å…«è¿›åˆ¶ | è¾“å…¥å’Œè¾“å‡º |
| `setpxecision(int p)` |   è®¾ç½®æµ®ç‚¹æ•°çš„ç²¾åº¦ä½æ•°   |    è¾“å‡º    |

#### æµæŒ‡é’ˆ

+ æ‰€æœ‰è¾“å…¥/è¾“å‡ºæµå¯¹è±¡éƒ½æœ‰è‡³å°‘ä¸€ä¸ªæµæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆåœ¨è¾“å…¥æµå¯¹è±¡ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªå°†è¢«è¯»å–çš„å…ƒç´ ï¼Œåœ¨è¾“å‡ºæµå¯¹è±¡ä¸­æŒ‡å‘å†™å…¥ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚
+ è·å–æµæŒ‡é’ˆï¼š`tellg(void)`æˆ– ` tellp(void)`è¿”å› `pos_type` ç±»å‹çš„å€¼ `(int)`ä»£è¡¨å½“å‰ `get` æµæŒ‡é’ˆçš„ä½ç½®æˆ– `put` æµæŒ‡é’ˆçš„ä½ç½®ã€‚
+ æ”¹å˜æµæŒ‡é’ˆï¼š`seekg()` æˆ– `seekp()`å¯ä»¥ä»¥ç»å¯¹(ä»æ–‡ä»¶å¼€å§‹è®¡ç®—)æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ”¹å˜æµæŒ‡é’ˆget å’Œputçš„ä½ç½®ã€‚

|  ios::beg  |    ios::cur    | ios::end |
| :--------: | :------------: | :------: |
| æµå¼€å§‹ä½ç½® | æµæŒ‡é’ˆå½“å‰ä½ç½® |  æµæœ«å°¾  |

+ **NOTE:**å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æµæŒ‡é’ˆçš„è®¡ç®—æ–¹æ³•æ˜¯ä¸åŒçš„ã€‚ç”±äºæ–‡æœ¬æ¨¡å¼çš„æ–‡ä»¶ä¸­æŸäº›ç‰¹æ®Šå­—ç¬¦å¯èƒ½è¢«ä¿®æ”¹ï¼Œå»ºè®®å¯¹ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æ€»æ˜¯ä½¿ç”¨ `seekg`å’Œseekp `çš„`ç»å¯¹ä½ç½®ç‰ˆæœ¬ï¼Œè€Œä¸”ä¸è¦å¯¹ `tellg` æˆ– `tellp` çš„è¿”å›å€¼è¿›è¡Œä¿®æ”¹ã€‚å¯¹äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥ä»»æ„ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»»ä½•æ„å¤–çš„è¡Œä¸ºäº§ç”Ÿã€‚

#### è¡Œç»“æŸæ ‡å¿—

+ æ¢åˆ°ä¸‹ä¸€è¡Œå¼€å§‹è¿™æ ·ä¸€ä¸ªæ§åˆ¶å‘½ä»¤åœ¨windowså’Œlinuxç³»ç»Ÿä¸‹çš„æ§åˆ¶æ–¹æ³•ä¸åŒã€‚åœ¨windowsä¸‹ä¸º\r\nï¼Œåœ¨linuxä¸º\nã€‚(\rä¸ºå›è½¦ï¼Œ\nä¸ºæ¢è¡Œ)

## ç¼“å†²

+ é‡è¦æœºåˆ¶ï¼šæ¯ä¸ªæ ‡å‡†C++è¾“å…¥è¾“å‡ºæµå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘streambufçš„æŒ‡é’ˆï¼Œbasic_ioså…è®¸å¤šä¸ªæµå¯¹è±¡ç»‘å®šåŒä¸€ä¸ªç¼“å†²åŒºå¯¹è±¡streambufï¼ˆæµå’Œ I/O è®¾å¤‡ä¹‹é—´åŠ å…¥çš„æŠ½è±¡ä¸­é—´å±‚ï¼Œä¸€æ—¦æµå¯¹è±¡ç»‘å®šçš„ç¼“å†²åŒºå¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œæœ€ç»ˆçš„ I/O æ•ˆæœä¹Ÿä¼šéšä¹‹å‘ç”Ÿå˜åŒ–ï¼‰ã€‚

### ç¼“å†²åŒº

+ å¦‚æœæœªæ˜¾ç¤ºç»‘å®šç¼“å†²åŒº(é€šè¿‡setvbuf()å’Œ setbuf())ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä¸ºæ ‡å‡†è¾“å…¥è¾“å‡ºè®¾ç½®ä¸€ä¸ªç¼“å†²åŒº(å¤§å°ç”±å®BUFSIZå®šä¹‰,ä¸ç³»ç»Ÿç›¸å…³,win=512B,linux=1024B)ã€‚
+ setbuf()éƒ½å°†ç¼“å†²åŒºè®¾ç½®çš„å¤§å°ä¸ºBUFSIZï¼›setvbufè®¾ç½®ç¼“å†²åŒºå¤§å°ä»¥åŠç¼“å†²åŒºçš„æ¨¡å¼ï¼ˆè¡Œç¼“å†²ã€å…¨ç¼“å†²ã€æ— ç¼“å†²ï¼‰ã€‚
+ **NOTE**ï¼šä¸Šè¿°ä¸¤ä¸ªå‡½æ•°è®¾ç½®çš„æ˜¯**Cçš„è¾“å…¥è¾“å‡ºç¼“å†²åŒº**ï¼Œå› ä¸ºc++å’Œcçš„ç¼“å†²åŒºé»˜è®¤æ˜¯åŒæ­¥çš„ï¼Œæ‰€æœ‰è¯¥å‡½æ•°ä¼šå¯¹c++æœ‰å½±å“ã€‚
+ ç¼“å†²åˆ·æ–°/åŒæ­¥
  1. æ—¶æœºï¼šç¼“å†²æ»¡ã€**è¡Œç¼“å†²åŒº**é‡å›è½¦ã€å…¶ä»–ç›´æ¥æˆ–é—´æ¥è°ƒç”¨flushçš„å‡½æ•°ã€è°ƒç”¨æ— å‚ç‰ˆæœ¬å‡½æ•°sync()ã€è¿›ç¨‹ç»“æŸ(æµå…³é—­ã€æ–‡ä»¶å…³é—­)
  2. åŠ¨ä½œï¼šè¾“å‡ºç¼“å†²åŒºçš„åˆ·æ–°åŠ¨ä½œä¸€èˆ¬å¯¼è‡´ç¼“å†²åŒºå†…çš„å†…å®¹è¢«æ‰§è¡ŒIOåˆ°å…¶å…³è”çš„æ–‡ä»¶æè¿°ç¬¦ä¸­ï¼Œç„¶åæ¸…ç©ºç¼“å†²åŒºã€‚è€Œå¯¹äºè¾“å…¥ç¼“å†²åŒºï¼Œä¸å¯èƒ½å¼ºåˆ¶å®ç°å°†è¾“å…¥ç¼“å†²åŒºå¼ºåˆ¶æ³¨å…¥åˆ°å…³è”çš„å®ä½“ä¸­ï¼Œå› ä¸ºè¾“å…¥æ˜¯ä¸å¯é¢„æµ‹æŒæ§çš„ï¼Œæ‰€ä»¥å¯¹è¾“å…¥ç¼“å†²åŒºçš„åˆ·æ–°è¡¨ç°ä¸ºæ¸…ç©ºç¼“å†²åŒºé‡Œçš„å½“å‰å†…å®¹ï¼Œç­‰å¾…è¾“å…¥è¿›å…¥è¾“å…¥ç¼“å†²åŒºã€‚| ç¼“å†²ç±»å‹ |                         ç‰¹ç‚¹                         |    å…¸å‹ä»£è¡¨    |
     | :------: | :---------------------------------------------------: | :------------: |
     |  è¡Œç¼“å†²  | å½“ç¼“å†²åŒºå†…å®¹é‡åˆ°**æ¢è¡Œ**æ—¶ï¼Œå³è¿›è¡Œå®é™…çš„I/Oæ“ä½œ |  è¯»å†™ç£ç›˜æ–‡ä»¶  |
     |  å…¨ç¼“å†²  |         å¡«æ»¡æ ‡å‡†I/Oç¼“å†²åŒºæ‰è¿›è¡Œå®é™…çš„I/Oæ“ä½œ         | æ ‡å‡†è¾“å…¥å’Œè¾“å‡º |
     |  æ— ç¼“å†²  |                      ç›´æ¥I/Oæ“ä½œ                      |    æ ‡å‡†é”™è¯¯    |

|  ç¼“å†²æ“ä½œå‡½æ•°  |                         ä½œç”¨                         |
| :------------: | :--------------------------------------------------: |
|      endl      |            æ·»åŠ æ¢è¡Œlineã€è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº            |
|      ends      |     æ·»åŠ ç©ºæ ¼spaceã€è¾“å‡ºã€‚**ä¸åˆ·æ–°ç¼“å†²åŒº**     |
|     flush     |                   è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº                   |
| **sync** | åˆ·æ–°**è¾“å…¥**ç¼“å†²åŒº(æ¸…é™¤è¾“å…¥ç¼“å†²åŒº)æˆ–è¾“å‡ºç¼“å†²åŒº |
|    unitbuf    |      å¯ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåéƒ½è‡ªåŠ¨åˆ·æ–°      |
|   ununitbuf   |      ç¦ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåçš„è‡ªåŠ¨åˆ·æ–°      |

### åº”ç”¨

#### IOåŠ é€Ÿ

+ é€šè¿‡è°ƒç”¨æˆå‘˜å‡½æ•°rdbuf()è·å–æŒ‡é’ˆ,ç›´æ¥è®¿é—®åº•å±‚streambufå¯¹è±¡ï¼Œè¿›è¡Œæ•°æ®çš„ç›´æ¥è¯»å†™ï¼Œè·³è¿‡ä¸Šå±‚çš„æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºæ“ä½œï¼Œæé«˜äº†è¯»å†™æ•ˆç‡ã€‚å¯¹äºæ–‡ä»¶æµã€å­—ç¬¦ä¸²æµç±»ï¼Œéƒ½å¯ä»¥ä½¿ç”¨

#### æµåŒæ­¥

+ iostreamå’Œcstdioé»˜è®¤å…±ç”¨ä¸€å¥—æ ‡å‡†è¾“å…¥ã€è¾“å‡ºç¼“å†²åŒºï¼Œå› æ­¤å¯ä»¥åœ¨ç¨‹åºä¸­æ··ç”¨é…å¯¹çš„æµå¯¹ï¼Œå…¶æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚
+ æµåŒæ­¥å¯¼è‡´æ‰€ä»¥cinã€coutæ¯”scanfã€printfé€Ÿåº¦è¦æ…¢(ç»´æŠ¤å…¼å®¹æ€§çš„å¼€é”€)ï¼Œå¯ä»¥ç”¨std::ios_base::sync_with_stdio(false)æ¥å–æ¶ˆè¿™ç§åŒæ­¥ï¼Œå–æ¶ˆåé…å¯¹çš„æµå¯¹çš„è¾“å‡ºé¡ºåºå¯èƒ½å’Œæ··ç”¨çš„é€»è¾‘é¡ºåºä¸åŒã€‚

#### æµå…³è”

+ C++ æ ‡å‡†åº“ä¸ºIOæµæä¾›äº†ä¸€ä¸ªæˆå‘˜å‡½æ•°tieå¯ä»¥æŠŠ ä¸€ä¸ªistream å¯¹è±¡å…³è”åˆ°ä¸€ä¸ªostreamï¼Œä¹Ÿå¯ä»¥æŠŠ ä¸€ä¸ªostream å…³è”åˆ°å¦ä¸€ä¸ª ostreamã€‚

1. æ ‡å‡†åº“é»˜è®¤æŠŠcinå’Œcoutå…³è”åœ¨ä¸€èµ·ï¼Œcin ä¼šåˆ·æ–°coutçš„ç¼“å†²åŒºï¼Œå¯ä»¥ç”¨å‡½æ•°cin.tie(nullptr)æ¥è§£é™¤å…³è”ã€‚
2. å®ç°æµåº•å±‚çš„streambufåœ¨ä¸åŒæµä¹‹é—´çš„å…³è”ç»‘å®š

```cpp
std::ifstream fin{"oj.test.txt"};
auto cin_buf = std::cin.rdbuf(fin.rdbuf()); //è¿”å›å…³è”å‰çš„ç¼“å†²åŒºï¼Œç»‘å®šfinçš„ç¼“å†²åˆ°cin
std::cin.tie(nullptr);     					//è§£é™¤cinå’Œcoutçš„ç¼“å†²åŒºç»‘å®š
std::string temp;
std::getline(std::cin, temp);
```

### å½±å“

#### \nä¸ç¼“å†²åˆ·æ–°

+ æ— ç¼“å†²çš„è¾“å‡ºæµ(å¦‚cerr)ï¼šendlä¸\nå®Œå…¨ä¸€è‡´ã€‚
+ å¸¦ç¼“å†²çš„è¾“å‡ºæµ(clogç­‰)ï¼š
  + endlé™¤äº†è¾“å‡ºæ¢è¡Œä¹‹å¤–ï¼Œè¿˜åˆ·æ–°è¾“å‡ºæµæˆ–é”™è¯¯æµç¼“å†²åŒºã€‚
  + \nå¯¼è‡´çš„è¡Œä¸ºåœ¨æ ‡å‡†è¾“å‡ºå’Œéæ ‡å‡†è¾“å‡ºè¡¨ç°å¹¶ä¸ä¸€è‡´(åœ¨manjaro linux5.10 gcc10.2ä¸‹éªŒè¯)
    1. éæ ‡å‡†è¾“å‡ºï¼Œ\nåªä¼šè¾“å‡ºå¸¦æ¢è¡Œçš„å†…å®¹ï¼Œå¹¶ä¸ä¼šå»åˆ·æ–°æµã€‚
    2. **å¤šæ•°å®ç°ä¸­**æ ‡å‡†è¾“å‡ºæ˜¯è¡Œç¼“å†²çš„ï¼Œé™¤éæ‰§è¡Œ `std::ios::sync_with_stdio(false)`å¦åˆ™'\n'ä¼šå¯¼è‡´ç¼“å†²åˆ·æ–°ã€‚[æ¥æº](https://zh.cppreference.com/w/cpp/io/manip/endl)

#### è¯¡å¼‚çš„std::cin

+ æ ¹æœ¬åŸå› :cinèƒŒåæ˜¯ä¸€ä¸ªè¡Œç¼“å†²ï¼Œä»é‡Œé¢å–èµ°æ•°æ®ä¹‹åå¹¶æ²¡æœ‰å–èµ°å…¨éƒ¨æ•°æ®(ç•™ä¸‹äº†æ ‡å¿—ã€æ¢è¡Œç¬¦ç­‰)è€Œä¸”ä¹Ÿæ²¡æœ‰åˆ·æ–°ç¼“å†²ï¼Œé€ æˆç¼“å†²ä¸å¹²å‡€è€Œå½±å“ä¸‹ä¸€æ¬¡è¯»å–ç¼“å†²ã€‚
+ æ ‡å‡†è¾“å…¥æµçš„â€œæ–‡ä»¶æœ«å°¾â€ï¼šwinä¸‹ctrl+zè¡¨ç¤ºè¾“å…¥ç»“æŸï¼Œlinuxä¸‹ctrl+dè¡¨ç¤ºè¾“å…¥ç»“æŸ

|       æ–¹æ³•       |                ä½œç”¨                |
| :--------------: | :---------------------------------: |
|   cin.clear()   |     æ¸…ç©ºæµä¸­çš„æ ‡å¿—(EOFã€é”™è¯¯ç­‰)     |
| cin.ingore(a,ch) | å¿½ç•¥æµä¸­çš„å­—ç¬¦ç¬¬ä¸€ä¸ªchæˆ–aä¸ªä»»æ„å­—ç¬¦ |
|    cin.sync()    |         æ¸…é™¤ç¼“å­˜åŒºçš„æ•°æ®æµ         |

## æµç›¸å…³è¿­ä»£å™¨

+ å­˜åœ¨æµè¿­ä»£å™¨å’Œæ”¯æŒæµè¿­ä»£å™¨çš„æµç¼“å†²è¿­ä»£å™¨ã€‚
+ é€šè¿‡æµç¼“å†²è¿­ä»£å™¨ç”¨æˆ·å¯ä»¥è·¨è¿‡iostreamï¼Œç›´æ¥è·Ÿæµç¼“å†²åŒºæ‰“äº¤é“ã€‚
+ æµç¼“å†²åŒºè¿­ä»£å™¨ä»…ä¼šå°†å…ƒç´ **ä»¥å­—ç¬¦çš„å½¢å¼ï¼ˆ`charã€wchar_tã€char16_tã€char32_t`ï¼‰**è¯»æˆ–è€…å†™åˆ°æµç¼“å†²åŒºä¸­ï¼Œç”±äºä¸ä¼šæ¶‰åŠæ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œè¯»å†™æ•°æ®çš„é€Ÿåº¦æ¯”æµè¿­ä»£å™¨è¦å¿«ã€‚

### è¾“å…¥æµè¿­ä»£å™¨istream_iterator

+ `istream_iterator<T,CharT=char>(istream)`åœ¨**æ–‡æœ¬æ¨¡å¼(charã€wcharç­‰ï¼Œä¸æ”¯æŒäºŒè¿›åˆ¶)**ä¸‹ä»istreamæµä¸­æå–æ•°æ®ã€‚
+ è¦æ±‚Tç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å®ç°äº†å°†è¾“å‡ºæµå†™å…¥Tä¸­çš„operator >>()æ–¹æ³•ã€‚
+ **NOTE**:
  1. é»˜è®¤è·³è¿‡ç©ºç™½å­—ç¬¦(é™¤éæ˜ç¡®ç¦æ­¢)
  2. å½“å¤šä¸ªè¾“å…¥æµè¿­ä»£å™¨æŒ‡å‘åŒä¸€ä¸ªè¾“å…¥æµæ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªè¿­ä»£å™¨ä½ç½®çš„æ”¹å˜ä¹Ÿä¼šä½¿å¦ä¸€ä¸ªè¿­ä»£å™¨çš„ä½ç½®æ”¹å˜(ä»–ä»¬ç›¸å½“äºå…±äº«äº†ä¸€ä¸ªåº•å±‚ç»“æ„)

### è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator

+ `ostream_iterator<T, CharT=char>(ostream <,const CharT* delim>)`:ä»¥ `CharT`çš„å½¢å¼ `(charã€wchar)`å°†è‹¥å¹²ä¸ªTå†™å…¥åˆ°è¾“å‡ºæµ `ostream`ï¼Œæ¯å†™ä¸€ä¸ªTå¯¹è±¡è¿½åŠ ä¸€ä¸ª `delim`ã€‚
+ è¦æ±‚Tç±»å‹æ˜¯å®ç°äº†å°†Tå¯¹è±¡å†™å…¥æµä¸­çš„ `operator <<()`æ–¹æ³•æ•°æ®ç»“æ„æˆ–è€…æ™®é€šæ•°æ®ç±»å‹ã€‚
+ å…¶ `operator *()ã€++()ã€++(int)`æ–¹æ³•å§‹ç»ˆè¿”å›å½“å‰æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸åŒ…å«å…¶ä»–ä»»ä½•æ“ä½œã€‚è¿™äº›å‡½æ•°çš„å­˜åœ¨åªæ˜¯ä¸ºäº†æ»¡è¶³è¿­ä»£å™¨çš„è§„èŒƒã€‚
+ **NOTE:**
  1. è¾“å‡ºæµè¿­ä»£å™¨çš„è¾“å‡ºæ›´æ–°æœ¬è´¨ä¸Šæœ€ç»ˆéƒ½æ˜¯é€šè¿‡operator =()å‡½æ•°å®ç°ã€‚

### è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator

### è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator

# ç±»å‹æ¨å¯¼

## `auto`

+ èƒŒæ™¯ï¼š`auto`ä½œä¸ºå˜é‡å­˜å‚¨å…³é”®å­—é•¿æœŸä»¥æ¥å¹¶æ²¡æœ‰å‘æŒ¥å¤§çš„ä½œç”¨ï¼ŒC++11å†³å®šç”¨ `auto`ä¾æ®åˆå§‹å€¼å®ç°ç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼
+ **NOTEï¼š**
  1. `auto`ä»…ä»…æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨ç¼–è¯‘æœŸé—´ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼ŒC++ä¸­çš„å˜é‡ä¾ç„¶æœ‰æ˜ç¡®çš„ç±»å‹ã€‚
  2. `auto`è¡¨è¾¾å¼æ¨å¯¼å‡ºçš„ç±»å‹å’Œ `auto`è¢«æ›¿æ¢æ—¶çš„ç±»å‹ä¸åŒï¼Œè¢«æ›¿æ¢æˆçš„å­—ç¬¦åªæ˜¯æœ€ç»ˆç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚

### ç”¨æ³•

+ ç”±äº `auto`ç”¨æ¥åšç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥ `auto`ç±»å‹çš„å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ã€‚

1. å½“ä¸€ä¸ª `auto`ä¿®é¥°å¤šä¸ªå˜é‡æ—¶ï¼Œå˜é‡æ¨å¯¼å‡ºçš„ç±»å‹ä¸èƒ½æœ‰å†²çªã€‚
2. `auto`ä¸*å’Œ&æ··ç”¨ï¼šæ­¤æ—¶ `auto`è¢«æ¨å¯¼ä¸ºä¸å¸¦æŒ‡é’ˆæˆ–å¼•ç”¨çš„ç±»å‹ï¼Œä½†æ˜¯ `auto`å£°æ˜çš„å˜é‡çš„ç±»å‹ä¸º `auto+cv`é™å®šç¬¦ã€‚
3. å½“ `auto`çš„=å³è¾¹çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ—¶ï¼Œ`auto` ä¼šæŠŠå¼•ç”¨æŠ›å¼ƒï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚
4. `auto`ä¸ `const`çš„ç»“åˆï¼šå½“å·¦è¾¹çš„ç±»å‹å£°æ˜å«æœ‰å¼•ç”¨æˆ–è€…æŒ‡é’ˆç¬¦å·æ—¶ï¼Œæ¨å¯¼å‡ºçš„æœ€ç»ˆç±»å‹å«æœ‰ `const`å±æ€§ï¼Œå¦åˆ™ `const`è¢«å»é™¤ã€‚
5. å°å¿ƒç”¨äºåªæ”¯æŒç§»åŠ¨è¯­ä¹‰çš„ç±»å‹ï¼ˆå› ä¸ºæŸäº›æ¨å¯¼å‡ºçš„ç±»å‹å¯èƒ½è§¦å‘å¤åˆ¶æ“ä½œï¼‰

```c++
int a = 1, *pa = &a;
auto c = a, *d = pa, &e = a;//åˆæ³•ï¼šé€‚ç”¨äºç¬¬äºŒæ¡
auto f = e;//is_reference<decltype(f)>::value = falseï¼šç¬¦åˆç¬¬ä¸‰æ¡
///////////////////éœ€è¦å®Œå–„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
```

### é™åˆ¶

1. ä¸èƒ½åšå‡½æ•°å‚æ•°ï¼ˆC++11ä¸å…è®¸ï¼›C++14å·²ç»å…è®¸ï¼Œä½†æ˜¯åœ¨è®¾ç½®é»˜è®¤å‚æ•°å¯èƒ½æ— æ³•åŒ¹é…ï¼‰
2. ä¸èƒ½ä½œç”¨äºç±»çš„éé™æ€æˆå‘˜å˜é‡ï¼ˆç±»çš„é™æ€æˆå‘˜å˜é‡ä¼¼ä¹ä¹Ÿä¸è¡Œï¼Œæ²¡å®éªŒæˆåŠŸï¼‰ã€‚
3. **ä¸èƒ½ç”¨äºå®šä¹‰æ•°ç»„**ï¼Œå³ä¸èƒ½æ˜¯auto var[]çš„å½¢å¼ã€‚
4. ä¸èƒ½ä½œç”¨äºæ¨¡æ¿å‚æ•°ï¼Œä½†åœ¨æ³›å‹ç¼–ç¨‹ä¸­å¯ä»¥å¾—åˆ°å¤§é‡åº”ç”¨ã€‚

## `decltype`

+ èƒŒæ™¯ï¼šC++11æ–°å¢ï¼Œæ ¹æ®è¡¨è¾¾å¼ï¼ˆå¿…é¡»æœ‰ç±»å‹ï¼‰å‚æ•°å®Œæˆç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼ã€‚

### `decltype(exp)`æ¨å¯¼è§„åˆ™

1. å¦‚æœ `exp`æ˜¯ä¸€ä¸ªä¸è¢«æ‹¬å· `( )`åŒ…å›´çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª**å•ç‹¬çš„**å˜é‡ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±å’Œ `exp`ä¸€è‡´ã€‚
2. å¦‚æœ `exp`æ˜¯å‡½æ•°è°ƒç”¨ï¼ˆå½¢å¼è¦æ»¡è¶³å‡½æ•°è°ƒç”¨ï¼Œä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸€è‡´ã€‚
3. å¦‚æœ `exp`æ˜¯ä¸€ä¸ªå·¦å€¼è¡¨è¾¾å¼ï¼ˆæ³¨æ„ä¸1ä¸­çš„å•ç‹¬çš„å˜é‡åŒºåˆ†ï¼‰ï¼Œæˆ–è€…è¢«æ‹¬å·( )åŒ…å›´ï¼Œé‚£ä¹ˆ `decltype(exp)`çš„ç±»å‹å°±æ˜¯expçš„å¼•ç”¨ã€‚

## autoä¸decltypeçš„ä¸åŒ

### å¯¹cvé™å®šç¬¦çš„å¤„ç†

+ `decltype`ï¼šä¿ç•™ `cv`é™å®šç¬¦
+ `auto`ï¼šå¦‚æœè¡¨è¾¾å¼çš„ç±»å‹æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œä¿ç•™cvé™å®šç¬¦ï¼Œå¦åˆ™ä¸¢å¼ƒé™å®šç¬¦ã€‚

### å¯¹å¼•ç”¨çš„å¤„ç†

1. `decltype` ä¼šä¿ç•™å¼•ç”¨ç±»å‹.
2. `auto`ä¼šæŠ›å¼ƒå¼•ç”¨ç±»å‹ï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚

### æ€»ç»“

+ autoä¹¦å†™ç®€å•ã€æ¨å¯¼å¤æ‚(æœ‰æ—¶ä¼šæ”¹å˜åŸå§‹ç±»å‹)ã€‚`decltype`ä¹¦å†™å¤æ‚ã€æ¨å¯¼ç®€å•

## traits(ç±»å‹èƒå–)

+ æå‡ºèƒŒæ™¯ï¼š

1. `template`å‚æ•°æ¨å¯¼ï¼šæ— æ³•ç”¨äºå‡½æ•°è¿”å›ç±»å‹
2. å†…åµŒå£°æ˜å‹åˆ«ï¼šæ— æ³•å¤„ç†åŸç”ŸæŒ‡é’ˆ

+ æ€æƒ³ï¼šåŠ å…¥ä¸­é—´å±‚ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£å¯ä»¥è·å–å¯¹è±¡/æ•°æ®çš„ç±»å‹ï¼Œå…¶ä»–çš„å®¹å™¨å®ç°è¿™ä¸€æ¥å£

### è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–

1. `value_type`ï¼š ä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„ç±»å‹ã€‚
2. `difference_type`ï¼šä»£è¡¨ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»
3. `reference_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨ç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯ `operator*()`çš„è¿”å›ç±»å‹
4. `pointer_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€è‡´å¯¹è±¡çš„æŒ‡é’ˆç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯ `operator->()`çš„è¿”å›ç±»å‹
5. `iterator_category`ï¼šä»£è¡¨1ä¸­æå‡ºçš„äº”ç§è¿­ä»£å™¨çš„ç±»å‹æ ‡è¯†

### åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°

1. åŸç”ŸæŒ‡é’ˆï¼šåˆ©ç”¨æ¨¡æ¿ç±»çš„åç‰¹åŒ–ï¼Œä¸ºåŸç”Ÿçš„æŒ‡é’ˆå’Œ `const`æŒ‡é’ˆæä¾› `iterator_traits`ã€‚
2. ä¸€èˆ¬è¿­ä»£å™¨ï¼šåœ¨æ•°æ®ç»“æ„ä¸­çš„å®ç°é‡Œï¼Œç»Ÿä¸€æä¾›ä¸€ä¸ªæ¥å£æ¥æ ‡æ˜è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä¾›å¤–éƒ¨è®¿é—®ã€‚

## [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](# æ¨¡æ¿å‚æ•°ç±»å‹æ¨å¯¼)

## [`std::common_type`](# `std::common_type`)

# å¯è°ƒç”¨å¯¹è±¡

C++ä¸­çš„å¯è°ƒç”¨å¯¹è±¡å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ï¼šå‡½æ•°æŒ‡é’ˆã€å…·æœ‰ `operator()`æˆå‘˜å‡½æ•°çš„ç±»çš„å¯¹è±¡ï¼ˆä»¿å‡½æ•°ã€`lambda`è¡¨è¾¾å¼ï¼‰ã€å¯è¢«è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆçš„ç±»å¯¹è±¡ã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€‚

## lambdaè¡¨è¾¾å¼/é—­åŒ…

### é—­åŒ…

é—­åŒ…ï¼ˆClosureï¼‰ï¼Œåˆç§°è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰æˆ–å‡½æ•°é—­åŒ…ï¼ˆfunction closuresï¼‰ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚ç®€å•æ¥è¯´ï¼š**é—­åŒ…å¯ä»¥è®°å¿†ä½åˆ›å»ºå®ƒæ—¶å€™çš„é‚£äº›å˜é‡**ã€‚

```c++
void getMinMax(vector<int>& number, function<void ()>& printer) {
	int min = *min_element(number.begin(), number.end());
	int max = *max_element(number.begin(), number.end());
	printer = [=] () { cout << "min:" << min << "max:" << max << endl;};
}

function<void()> printer;
getMinMax(numbers, printer);
///......
printer();///è°ƒç”¨é—­åŒ…
```

### å¤§è‡´åŸç†

  åœ¨C++ä¸­ï¼Œlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°å¯¹è±¡çš„è¯­æ³•ç³–ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ª `lambda`è¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé‡è½½äº† `operatr ()`çš„åŒ¿åç±»/é—­åŒ…ç±»å‹ï¼ˆclosure typeï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œlambdaè¡¨è¾¾å¼å°±ä¼šè¿”å›ä¸€ä¸ªåŒ¿åçš„é—­åŒ…å®ä¾‹ã€‚

### å½¢å¼è¯´æ˜

`[capture] <(parameters) mutable noexcpt/throw() attribute -> return_type> { body }`ï¼Œå°–æ‹¬å·å†…å¯é€‰ï¼Œä½† `param`å’Œ `mutable`ä»¥åŠå¼‚å¸¸ç®¡ç†ä¸­çš„ä»»æ„å¤šä¸ªå¿…é¡»åŒæ—¶å‡ºç°ã€‚

#### æ•è·å˜é‡åˆ—è¡¨ `capture`

1. [<[ ï¼Œ=ï¼Œ&][var]>]ï¼š<>å†…å‰åŠéƒ¨åˆ†çš„ä¸‰ä¸ªç¬¦å·å¯ä»¥ä¸ `var`éšæ„ç»“åˆ/ä¸ç»“åˆç”¨æ¥è¡¨ç¤ºæ•è·å˜é‡çš„æ–¹å¼ã€‚ä¸ºç©ºåˆ™ä¸æ•è·ä»»ä½•å˜é‡ï¼Œ=è¡¨ç¤ºå€¼æ•è·ï¼Œ&ä¸ºå¼•ç”¨æ•è·ï¼Œä¸varç»“åˆè¡¨ç¤ºå¯¹è¯¥å˜é‡ä½¿ç”¨ç»“åˆçš„æ•è·æ–¹å¼ï¼Œä¸ç»“åˆè¡¨ç¤ºæ•è·åœ¨è¡¨è¾¾å¼å†…éƒ¨è¢«ç”¨åˆ°çš„å…¨éƒ¨å˜é‡ï¼Œå•ç‹¬varè¡¨ç¤ºå€¼æ•è·ã€‚é€šç”¨çš„æ•è·åœ¨æ•è·åˆ—è¡¨å‰éƒ¨ï¼Œç‰¹æ®Šæ•è·åœ¨åï¼Œä»¥é€—å·åˆ†å‰²ã€‚
2. å˜é‡æ¥æºï¼šä½¿ç”¨é‚£äº›**åˆ°å®šä¹‰ `Lambda`ä¸ºæ­¢æ—¶** `Lambda`æ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡(åŒ…æ‹¬ `Lambda`æ‰€åœ¨ç±»çš„ `this`)ã€‚éå±€éƒ¨å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å…¨å±€å˜é‡ç­‰å¯ä»¥ä¸ç»æ•è·ï¼Œç›´æ¥ä½¿ç”¨ï¼›
3. æ•è·æ—¶æœºï¼š`lambda`è¢«å£°æ˜æ—¶è€Œéè¿è¡Œæ—¶ï¼Œå¯¹äºå¼•ç”¨åˆ™æ˜¯è¿è¡Œæ—¶åœ¨è®¿é—®å¤–éƒ¨ã€‚
4. æ•è·thisï¼šåªæœ‰åŒ…å«ä¸”æœ€é è¿‘lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä¸æ˜¯é™æ€æˆå‘˜å‡½æ•°æ—¶æ‰èƒ½è¢«æ•è·thisã€‚åœ¨C++17ä¹‹å‰åªèƒ½é€šè¿‡å¼•[this]ä»¥å¼•ç”¨æ•è·å½“å‰å¯¹è±¡ï¼ˆå…¶å®æ˜¯å¤åˆ¶æŒ‡é’ˆï¼‰ï¼Œc++17ä»¥åå¯ä»¥é€šè¿‡[*this]è¿›è¡Œå€¼æ•è·ã€‚æ•è·ä¹‹ålambda è¡¨è¾¾å¼æ‹¥æœ‰å’Œå½“å‰ç±»æˆå‘˜å‡½æ•°åŒæ ·çš„è®¿é—®æƒé™ã€æ§åˆ¶æƒé™å’Œè®¿é—®æ–¹å¼ã€‚

##### å…¶ä»–è¯´æ˜

1. noteï¼šå¦‚æœä¸€ä¸ªé—­åŒ…å«æœ‰å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œåœ¨è¶…å‡ºåˆ›å»ºå®ƒçš„ä½œç”¨åŸŸä¹‹å¤–çš„åœ°æ–¹è¢«ä½¿ç”¨çš„è¯ï¼Œè¿™ç§è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„!
2. æ•æ‰åˆ—è¡¨ä¸å…è®¸å˜é‡é‡å¤ä¼ é€’

#### `parameters`

1. ä¸æ”¯æŒé»˜è®¤å‚æ•°ã€ä¸æ”¯æŒå¯å˜å‚æ•°ã€ä¸æ”¯æŒåŒ¿åå‚æ•°ã€‚

#### `multable`

1. èƒŒæ™¯ï¼šå¯¹äºå€¼æ•æ‰æ–¹å¼ï¼Œç±»ä¼šç›¸åº”æ·»åŠ å¯¹åº”ç±»å‹çš„éé™æ€æ•°æ®æˆå‘˜ï¼Œåœ¨è¿è¡Œæ—¶ä¼šç”¨å¤åˆ¶çš„å€¼åˆå§‹åŒ–è¿™äº›æˆå‘˜å˜é‡ï¼Œä»å¯¹äºå¼•ç”¨æ•è·çš„å˜é‡ï¼Œæ ‡å‡†ä¸­æ²¡æœ‰è§„å®šå…¶åœ¨ç±»ä¸­çš„è¡¨ç¤ºæ–¹æ³•ï¼ˆclangçš„å®ç°å¤§æ¦‚æ˜¯åœ¨é—­åŒ…ä¸­æ”¾äº†ä¸ªæŒ‡é’ˆï¼‰ã€‚
2. é‡è½½çš„ `operator()`é»˜è®¤çš„å‡½æ•°ç­¾åæ˜¯ `const operator()`é™ï¼Œå› æ­¤æ— æ³•ä¿®æ”¹å€¼ä¼ é€’åæ„å»ºçš„æˆå‘˜ã€‚è€Œå¯¹äºå¼•ç”¨çš„ä¼ é€’æ–¹å¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜å¼•ç”¨æœ¬èº«ï¼Œè€Œåªä¼šæ”¹å˜å¼•ç”¨çš„å€¼ï¼Œå› æ­¤å°±å¯ä»¥æ”¹å˜ã€‚
3. ä½œç”¨ï¼šmutableå…³é”®å­—å¯ä»¥ä½¿é‡è½½çš„operator()å‡½æ•°ä¸¢å¼ƒå‡½æ•°å£°æ˜æœ«å°¾çš„consté™å®šç¬¦ï¼Œä»è€Œä¿®æ”¹ä¼ é€’è¿›æ¥çš„æ‹·è´ã€‚

#### `noexcept/throw()`

`noexcept`è¡¨ç¤ºä¸æŠ›å‡ºé—äº§ï¼Œthrowè¡¨ç¤ºåªæŠ›å‡ºæŒ‡å®šç±»å‹çš„å¼‚å¸¸ã€‚

#### `attribute`

  å¯¹äºattributeçš„æè¿°å¯ä»¥å‚è§[è¿™é‡Œ](http://en.cppreference.com/w/cpp/language/attributes)

#### `return_type`

å½“è¿”å›å€¼ä¸º `void`ï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„ `return`ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚

### å…¶å®ƒ

1. lambdaç¦ç”¨äº†èµ‹å€¼æ“ä½œç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°(å¯ä»¥ç”¨å·²æœ‰çš„lambdaè¡¨è¾¾å¼åˆå§‹åŒ–æ–°çš„lambdaè¡¨è¾¾å¼)ã€‚
2. lambdaå¯ä»¥èµ‹å€¼ç»™å…·æœ‰ç›¸åŒå½¢å¼çš„å‡½æ•°æŒ‡é’ˆ
3. å¦‚æœlambdaçš„ç”Ÿå­˜æœŸé•¿äºæ•è·çš„å¯¹è±¡ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ‚¬ç©ºå¼•ç”¨çš„é—®é¢˜ã€‚
4. åˆ©ç”¨lambdaçš„ç«‹å³è°ƒç”¨å®ç°çš„[magic](httpsï¼š//lesleylai.info/zh/c++-lambda/)ï¼Œæ¨èè¿™ä½[åšä¸»](httpsï¼š//lesleylai.info/zh)
5. æ²¡æœ‰æ•è·å˜é‡çš„lambdaè¡¨è¾¾å¼å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆï¼Œè€Œæ•è·å˜é‡çš„lambdaè¡¨è¾¾å¼åˆ™ä¸èƒ½è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆã€‚

#### [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#lambdaè¡¨è¾¾å¼)

## ä»¿å‡½æ•°

## `std::function`ä¸ `std::bind`

C++ä¸­**å¯è°ƒç”¨å¯¹è±¡**çš„è™½ç„¶éƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒç»Ÿä¸€çš„æ“ä½œå½¢å¼ï¼Œä½†æ˜¯å®šä¹‰æ–¹æ³•äº”èŠ±å…«é—¨ï¼Œè¿™æ ·å°±å¯¼è‡´ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼ä¿å­˜å¯è°ƒç”¨å¯¹è±¡æˆ–è€…ä¼ é€’å¯è°ƒç”¨å¯¹è±¡æ—¶ï¼Œä¼šååˆ†ç¹çã€‚C++11ä¸­æä¾›äº† `std::function`å’Œ `std::bind`ç»Ÿä¸€äº†å¯è°ƒç”¨å¯¹è±¡çš„å„ç§æ“ä½œã€‚

### `std::function`

æ¨¡æ¿ `std::function<å‡½æ•°ç±»å‹>`æ˜¯ä¸€ä¸ª**å¯è°ƒç”¨å¯¹è±¡åŒ…è£…å™¨**ï¼Œå¯ä»¥å®¹çº³**é™¤äº†ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆ**ä¹‹å¤–çš„æ‰€æœ‰å¯è°ƒç”¨å¯¹è±¡ï¼Œç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å‡½æ•°ã€å‡½æ•°å¯¹è±¡ã€å‡½æ•°æŒ‡é’ˆï¼Œå¹¶å…è®¸ä¿å­˜å’Œå»¶è¿Ÿå®ƒä»¬çš„æ‰§è¡Œï¼ˆé€‚åˆå›è°ƒå‡½æ•°ï¼‰ã€‚

```c++
int add(int a, int b){return a+b;}
auto mod = [](int a, int b){ return a % b;}
struct divide{
    int operator()(int denominator, int divisor){
        return denominator/divisor;
    }
};

vector<std::function<int(int ,int)>> funcs{add, mod, divide()};
```

### `std::bind`

`std::bind`å‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª**é€šç”¨çš„å‡½æ•°é€‚é…å™¨**ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å’Œä¸€äº›å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ï¼ˆå‚æ•°ä¸ªæ•°å’Œé¡ºåºï¼ˆé€šè¿‡å ä½ç¬¦å®ç°ï¼‰éƒ½å¯æ”¹å˜ï¼‰å¯è°ƒç”¨å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡çš„ `operator()`å®ç°å®é™…çš„å‡½æ•°è°ƒç”¨ï¼‰æ¥é€‚åº”åŸå¯¹è±¡çš„å‚æ•°åˆ—è¡¨ã€‚å³å¯ä»¥æ”¹å˜å‡½æ•°çš„å‡½æ•°ç­¾åè€Œä¸å½±å“å…¶ä½œç”¨ã€‚

```c++
auto newCallable = std::bind(callable, arg_list);
///newCallableæ˜¯ä¸€ä¸ªæœªæŒ‡å®šç±»å‹Tçš„å‡½æ•°å¯¹è±¡ï¼Œè¿™ä¸ªç±»å‹Tæ»¡è¶³ä»¥ä¸‹æ¡ä»¶:
std::is_bind_expression<T>::value == true;
```

#### å‚æ•°ç»‘å®š

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`bind`çš„**å‚æ•°é‡‡ç”¨å€¼æ‹·è´**çš„æ–¹å¼è¿›å…¥å¯è°ƒç”¨å¯¹è±¡ï¼Œè‹¥å¸Œæœ›ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼ˆæ•°æ®ä¸å…è®¸æ‹·è´ç­‰æƒ…å†µï¼‰ï¼Œåˆ™éœ€å€ŸåŠ© `std::ref()ã€std::cfref()`ä¼ é€’å‚æ•°ã€‚å¯¹äºå½“å‰ä¸èƒ½ç¡®å®šä¸‹æ¥çš„å‚æ•°ï¼Œæ ‡å‡†åº“æ”¯æŒå ä½ç¬¦å®ç°å‚æ•°çš„è°ƒç”¨æ—¶ä¼ é€’ï¼ˆå ä½ç¬¦ `_1ã€_2ã€...`ç­‰ä½äºå¤´æ–‡ä»¶ `functional`çš„ `std::placeholders`å‘½åç©ºé—´ä¸‹ï¼‰ã€‚

```c++
double my_divide (double x, double y) {return x/y;}
auto fn_half = std::bind (my_divide,_1,2); ///æ™®é€šå‡½æ•°åšå®å‚æ—¶ï¼Œä¼šéšå¼è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ

struct Foo {void print_sum(int n1, int n2){}};
auto f = std::bind(&Foo::print_sum, &foo, 95, std::placeholders::_1);
///bindç»‘å®šç±»æˆå‘˜å‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå¯¹è±¡çš„æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆï¼ˆç¼–è¯‘å™¨ä¸ä¼šå°†å¯¹è±¡çš„æˆå‘˜å‡½æ•°éšå¼è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¯¹è±¡çš„åœ°å€ã€‚
```

```c++
///è°ƒç”¨ç±»æˆå‘˜å‡½æ•°
struct Foo {void f() { }};
void apply(Foo* foo1, void (Foo::*fun)()) {
    (foo1->*fun)();///funä¸ºç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆï¼Œæ‰€ä»¥è°ƒç”¨æ˜¯è¦é€šè¿‡è§£å¼•ç”¨çš„æ–¹å¼è·å–æˆå‘˜å‡½æ•°*fun
}
Foo foo1{1};
apply(&foo1, &Foo::f);
```

# æ¨¡æ¿

æ¨èä½¿ç”¨https://cppinsights.io/ï¼Œä»–ä¼šå°†æ¨¡æ¿çš„å®ä¾‹åŒ–ç»“æœç¿»è¯‘å‡ºæ¥ä¾›éªŒè¯æœ¬èŠ‚ã€‚

## [æ¨¡æ¿å‡½æ•°](https://www.cnblogs.com/zhangyachen/p/13919732.html)

### æ¨¡æ¿å‚æ•°

#### é»˜è®¤æ¨¡æ¿å‚æ•°

æ¨¡æ¿å‡½æ•°æ”¯æŒ**é»˜è®¤å‚æ•°å†™åœ¨æ¨¡æ¿å‚æ•°çš„ä»»æ„ä½ç½®**ï¼ˆä¸åŒäºæ™®é€šå‡½æ•°çš„é»˜è®¤å‚æ•°å¿…é¡»å†™åœ¨æœ€åé¢ï¼‰ï¼Œå½“è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å®šçš„æ¨¡æ¿å‚æ•°ä¸è¶³ä»¥ä½œç”¨åˆ°é»˜è®¤æ¨¡æ¿å‚æ•°æ—¶ï¼Œå…ˆç”±æ¨¡æ¿å‚æ•°æ¨å¯¼å°è¯•ç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ï¼Œå½“ä»¥ä¸Šä¸¤æ­¥éƒ½ä¸èƒ½ç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹æ—¶é»˜è®¤æ¨¡æ¿å‚æ•°æ‰èµ·ä½œç”¨ã€‚é»˜è®¤æ¨¡æ¿å‚æ•°ä¸€èˆ¬å¯ä»¥ç”¨äºæ¨¡æ¿å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚

```c++
template <typename RT , typename T1 = int, typename T2> RT _max(T1 a, T2 b) {
    cout << typeid(RT).name() << '=' << typeid(T1).name() << '-' << typeid(T2).name() << "\t";
	return b < a ? a : b;
}

cout << _max<double,int,char>(7.2, 4) << endl;///d=i-c   7
cout << _max<double,double>(7.2, 4) << endl;///d=d-i   7.2
cout << _max<double>(7.2, 4.2) << endl;///d=d-d   7.2

template <typename T1, typename T2> typename std::common_type<T1, T2>::type max(T1 a, T2 b) {
  return b < a ? a : b;
}///ä½¿ç”¨common_type
```

#### [å¯å˜æ¨¡æ¿å‚æ•°](# å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)

#### æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°

##### è°ƒç”¨å‚æ•°

æ¨¡æ¿å‡½æ•°çš„ç±»å‹å‚æ•°Tå¯ä»¥é€šè¿‡åœ¨è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å®šï¼Œ**ä¹Ÿå¯ä»¥ä¸æŒ‡å®š**å‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹è€Œç”±æ¨¡æ¿å‡½æ•°çš„å‚æ•°æ¨å¯¼è§„åˆ™ç¡®å®šã€‚

##### è¿”å›å‚æ•°

æ¨¡æ¿å‡½æ•°çš„è¿”å›å€¼ç±»å‹**å¿…é¡»æ˜ç¡®æŒ‡å®šã€ä¸èƒ½åˆ©ç”¨æ¨¡æ¿çš„è‡ªåŠ¨æ¨å¯¼æœºåˆ¶è·å¾—**ï¼ˆå’Œè°ƒç”¨å‚æ•°ç›¸åŒæ—¶å¯ä»¥ä¸ç”¨æŒ‡å®šï¼‰ã€‚

```c++
template<typename T>  T retV(T p) {}///æ­¤æ—¶è¿”å›å‚æ•°å¯ä»¥ä¸ç”¨æ˜ç¡®ç»™å®š

template<typename T1, typename T2, typename RT> RT max(T1 a, T2 b){};///è¦æ±‚æ˜¾å¼æŒ‡æ˜

///åˆ©ç”¨ç±»å‹æ¨å¯¼
template <typename T1, typename T2> auto max(T1 a, T2 b) -> decltype(b < a ? a : b) {}///C++11
template<typename T1, typename T2> auto max (T1 a, T2 b) {}///C++14

///c++11æ–°ç‰¹æ€§std::common_type
template <typename T1, typename T2> typename std::common_type<T1, T2>::type max(T1 a, T2 b) {}///C++11
template <typename T1, typename T2> std::common_type_t<T1, T2> max(T1 a, T2 b) {}///C++14
```

###### å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹

`std::remove_reference<>`å¯ä»¥å°†å¼•ç”¨ç±»å‹å˜ä¸ºå€¼ç±»å‹ã€ä¹Ÿå¯ä»¥åˆ©ç”¨ `auto`æ¨å¯¼è§„åˆ™ä¸­ä¸¢å¤±å¼•ç”¨çš„ç‰¹æ€§è¿”å›å€¼ç±»å‹ã€‚

```c++
template<typename T> T retV(T p) { return T{...};} /// retV<int&>(x)å°†æ— æ³•è¿”å›å€¼ç±»å‹

template<typename T> typename std::remove_reference<T>::type retV(T p) { return T{...};}///å»é™¤å¼•ç”¨
template<typename T> auto retV(T p)  { return T{...};}///å»é™¤å¼•ç”¨
```

#### [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](https://www.jianshu.com/p/589a747557ce)

åªèƒ½ç”¨äºæ¨å¯¼æ¨¡æ¿å‡½æ•°å½¢å‚ï¼Œä¸èƒ½ç”¨äºæ¨å¯¼è¿”å›å€¼ã€‚

```c++
// æ¨¡æ¿å‚æ•°å€¼paramç±»å‹ ?= (æ¨¡æ¿å‚æ•°Tç±»å‹ == æ¨¡æ¿å½¢å‚xTç±»å‹) ?= æ¨¡æ¿å®å‚/è¡¨è¾¾å¼exprç±»å‹
// æ³¨ï¼šå‚æ•°ç±»å‹ï¼ˆå³xçš„ç±»å‹ï¼‰æ˜¯æ¨¡æ¿å½¢å‚ä¸å…¶ä»–æ ‡è¯†ç¬¦çš„ç»“åˆï¼Œä¸ä¸€å®šæ˜¯Tç±»å‹

template<typename T> // T:æ¨¡æ¿å‚æ•°ç±»å‹ï¼ˆå³Tçš„ç±»å‹ï¼‰
void f(T param); // Tï¼šæ¨¡æ¿å½¢å‚ï¼Œè¿˜å¯ä»¥ä¸cvã€*ã€&ã€&&ç»“åˆ

int expr, *p;
const int* q;
f(expr); // iï¼šæ¨¡æ¿å®å‚ï¼Œint
```

##### æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³ `T`ï¼‰

```c++
template<typename T> void f(T param);///æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹

int expr, *p;
const int* q;

f(expr); // Tå’Œxéƒ½æ˜¯int
f(p); // Tå’Œxéƒ½æ˜¯int*
f(q); // Tå’Œxéƒ½æ˜¯const int*
```

###### æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰

å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºéæŒ‡é’ˆæ—¶ä¼šé€ æˆæ¨æ–­å‡ºçš„æ¨¡æ¿å‚æ•°**è¡°å‡(decaying)**ï¼ˆæ¨¡æ¿å®å‚ä¸æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ä¸åŒï¼šå¦‚æ•°ç»„å’Œå‡½æ•°ç±»å‹é€€åŒ–ä¸ºæ™®é€šæŒ‡é’ˆã€**ä¸¢å¤± `const`å’Œ `volatile`å±æ€§ã€ä¸¢å¤±å¼•ç”¨ç±»å‹**ï¼‰ã€‚ä¸ºäº†ç¼“è§£æ¨¡æ¿å‚æ•°ä¼ é€’çš„è¡°å‡ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

* [**ä½¿ç”¨ `std::ref()`å’Œ `std::cref()`**]()å‘åŸæœ¬ä»¥å€¼æ–¹å¼æ¥å—å‚æ•°çš„æ¨¡æ¿å‡½æ•°å®ç°ä¼ é€’å¼•ç”¨çš„æ•ˆæœã€‚
* ä½¿ç”¨ `enable_if`åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„ï¼šä¸ç¬¦åˆ `enable_if`è®¾ç½®çš„æ¡ä»¶çš„å®ä¾‹åŒ–è¯·æ±‚ä¸ä¼šè¢«æ‰§è¡Œ:

```c++
template<class T, typename = std::enable_if_t<std::is_array<T>::value> > void destroy(T* t) {
	for(std::size_t i = 0; i < std::extent<T>::value; ++i) {destroy((*t)[i]);}
}
```

###### æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ

å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºæŒ‡é’ˆæ—¶æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°å’Œæ¨¡æ¿å‡½æ•°å€¼ç±»å‹å°†ä¿ç•™è¡¨è¾¾å¼ä¸­çš„cvé™å®šç¬¦å’ŒæŒ‡é’ˆç±»å‹ã€‚

##### æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³ `T&ã€T&&`æˆ– `T*`ï¼‰

æ¨å¯¼å‡ºçš„**æ¨¡æ¿å‚æ•°å€¼ç±»å‹å°†**ä¸€å®šä¿ç•™è¡¨è¾¾å¼ä¸­çš„ `cv`é™å®šç¬¦ã€‚å¯¹äº `T*`ä¿ç•™æŒ‡é’ˆï¼›å¯¹äº `T&`ï¼Œå¦‚æœ**è¡¨è¾¾å¼æœ¬èº«å’Œå½¢å‚ä¸­å«æœ‰ä»»æ„ä¸ªå³å€¼å¼•ç”¨ä¼šæ¶‰åŠåˆ°å¼•ç”¨æŠ˜å **ï¼Œå¦åˆ™ä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ç±»å‹ã€‚

```c++
int i, &r, &&rr, *p;
const int& cr;
const int* const q;

template<typename T> void f(T& x); // æ­¤ä¸ºå¼•ç”¨ï¼Œä½†å¯èƒ½æ¶‰åŠåˆ°å¼•ç”¨æŠ˜å 

f(i); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(r); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(rr); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(cr); // xæ˜¯const int& => T&æ˜¯const int& => Tæ˜¯const int
f(p); // xæ˜¯int* & => T&æ˜¯int* & => Tæ˜¯int*
f(q); // xæ˜¯const int* const & => T&æ˜¯const int* const & => Tæ˜¯const int* const
```

```c++
template<typename T> void f(T* x); // æ­¤ä¸ºåœ°å€ä¼ é€’ï¼Œä¸ä¼šå‘ç”Ÿæ¨æ–­è¡°å‡

f2(&i); // xæ˜¯int* => T*æ˜¯int* => Tæ˜¯int
f2(&cr); // xæ˜¯const int* => T*æ˜¯const int* => Tæ˜¯const int
f2(p); // xæ˜¯int* => T*æ˜¯int* => Tæ˜¯int
f2(q); // xæ˜¯const int* => T*æ˜¯const int* => Tæ˜¯const int
```

### æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™

å»ºè®®åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å€¼ä¼ é€’ï¼ˆç®€å•ã€å°å¯¹è±¡æ‹·è´å¼€é”€å°ã€ä¹Ÿå¯ä»¥å®ç°å¼•ç”¨ä¼ é€’çš„æ•ˆæœï¼‰ï¼Œåœ¨éœ€è¦æ”¹å˜å‚æ•°ã€éœ€è¦å®Œç¾è½¬å‘å’Œæ‹·è´å¼€é”€å¤§çš„æƒ…å†µä¸‹ä½¿ç”¨å¼•ç”¨ä¼ é€’ã€‚

[std::make_pair()æ¨¡æ¿å‚æ•°å†å²æ¼”è¿›](https://www.cnblogs.com/zhangyachen/p/14013629.html)

### æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–

å»ºè®®ä¸ä½¿ç”¨æ¨¡æ¿å‡½æ•°çš„ç‰¹åŒ–ã€‚

#### æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–

|                |                 æ¨¡æ¿                 |                      å‡½æ•°é‡è½½                      |
| :------------: | :----------------------------------: | :------------------------------------------------: |
| **å¤ç”¨** | å®šä¹‰åŠŸèƒ½ç›¸ä¼¼çš„åŒåå‡½æ•°ï¼ˆå‡½æ•°åå¤ç”¨ï¼‰ | å®ç°é€»è¾‘ä¸€æ ·åªæ˜¯å‚æ•°ç±»å‹ä¸åŒçš„ä¸€ç±»å‡½æ•°ï¼ˆé€»è¾‘å¤ç”¨ï¼‰ |
| **ç›®çš„** |           æé«˜å‡½æ•°çš„æ˜“ç”¨æ€§           |                 æé«˜å‡½æ•°ç¼–å†™çš„æ•ˆç‡                 |

æ¨¡æ¿å‡½æ•°é€šè¿‡ç‰¹åŒ–æ¨¡æ¿å‚æ•°ï¼ˆ**åªæ”¯æŒå…¨ç‰¹åŒ–**ï¼‰ï¼Œå¯ä»¥å®šä¹‰åŒåçš„æ¨¡æ¿å‡½æ•°ï¼Œåœ¨å®ä¾‹åŒ–æ—¶ç±»å‹åŒæ—¶åŒ¹é…ç‰¹åŒ–åçš„æ¨¡æ¿å’Œä¸€èˆ¬æ¨¡æ¿æ—¶ä¼˜å…ˆä½¿ç”¨ç‰¹åŒ–åçš„æ¨¡æ¿ï¼Œç”±äºç‰¹åŒ–åçš„æ¨¡æ¿çš„å®ç°å¯ä»¥ç‹¬ç«‹ä¸æ™®é€šæ¨¡æ¿ï¼Œå› æ­¤å®ç°äº†**æ¨¡æ¿å‡½æ•°çš„é‡è½½**ã€‚

```c++
template <typename T> const T &max(const T &a, const T &b){}
template <> const char *const &max(const char *const &a, const char *const &b){}/// å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–
template <typename T> const T &max(const T &a, const T &b, const T &c){}/// å‡½æ•°æ¨¡æ¿é‡è½½

const int &max(const int &a, const int &b){}/// éæ¨¡æ¿å‡½æ•°é‡è½½
const char *const &max(const char *const &a, const char *const &b){}/// éæ¨¡æ¿å‡½æ•°é‡è½½

class Test{} t1, t2;
const char *str1 = "aaa", *str2 = "zzz";

::max(5.5, 6.6);//è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const double&, const double&);
::max('a', 'c');//è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const char&, const char&);
::max(t1, t2); // è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const Test&, const Test&);
::max(str1, str2); //ä¼˜å…ˆé€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼šmax(const char* const&a, const char* const& b)
::max<>(str1, str2); //æŒ‡å®šä½¿ç”¨æ¨¡æ¿ï¼Œè¿›è€Œæ‰¾åˆ°æ¨¡æ¿ç‰¹åŒ–ï¼štemplate <> max(const char* const&a, const char* const& b)
::max(1, 5, 3); // æ¨¡æ¿åŒ¹é…ï¼Œè¿›è€Œè‡ªåŠ¨æ¨å¯¼ï¼štemplate max(const int& a, const int& b, const int& c)
::max('a', 50); // 'a'å³97;é€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼ˆcharå¯ä»¥éšå¼è½¬æ¢æˆintï¼‰:max(const int& a, const int& b)
::max(97, 100);// ä¼˜å…ˆé€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼šmax(const int& a, const int& b)
::max<>(97, 100);// æŒ‡å®šä½¿ç”¨æ¨¡æ¿ï¼Œè¿›è€Œè‡ªåŠ¨æ¨å¯¼ï¼štemplate max(const int& a, const int& b)
::max<int>(97, 100); // æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‡½æ•°ï¼štemplate max(const int& a, const int& b)
::max<int>('a', 50); // æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‡½æ•°ï¼štemplate max(const int& a, const int& b)
```

#### éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–

**C++æ ‡å‡†å¹¶ä¸æ”¯æŒå‡½æ•°æ¨¡æ¿åç‰¹åŒ–**ï¼Œä¸ºäº†å®ç°æ¨¡æ¿å‡½æ•°åç‰¹åŒ–çš„æ•ˆæœï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š**â‘ å€ŸåŠ©åç‰¹åŒ–æ¨¡æ¿ç±»**ï¼ˆåç‰¹åŒ–æ¨¡æ¿ç±»+ä»¿å‡½æ•°ï¼‰ï¼Œ**â‘¡ä½¿ç”¨æ ‡ç­¾åˆ†å‘**ï¼ˆæ¯”è¾ƒéº»çƒ¦ï¼Œæ ‡å‡†å§”å‘˜ä¼šæ¨èçš„ä¸€ç§æ–¹æ³•ï¼‰ï¼Œ**â‘¢ä½¿ç”¨C++20 Concepts**ã€‚

```c++
// æ ‡ç­¾åˆ†å‘demo
struct NormalVersionTag {};///æ™®é€šæ ‡ç­¾
struct IntPartialVersionTag {};///åç‰¹åŒ–intçš„æ ‡ç­¾

template<class T> struct TagDispatchTrait { using Tag = NormalVersionTag; };///æ™®é€šç±»å‹
template<> struct TagDispatchTrait<int> { using Tag = IntPartialVersionTag; };///ç‰¹åŒ–ç±»å‹ï¼šint

template <typename A, typename B> void internal_f(A a, B b, NormalVersionTag){}///fçš„æ™®é€šæ¨¡æ¿å‡½æ•°
template <typename A, typename B> void internal_f(A a, B b, IntPartialVersionTag){}///fçš„intåç‰¹åŒ–å‡½æ•°

template <typename A, typename B> void f(A a, B b) {///å¯¹ä¸åŒç±»å‹çš„Bè¿›è¡Œåç‰¹åŒ–
    return internal_f(a, b, typename TagDispatchTrait<B>::Tag {});///åˆ†å‘åˆ°ç‰¹åŒ–ã€æ™®é€šå‡½æ•°æ‰§è¡Œ
}

f(1, 1);///f<int, int>()->f<int, int, TagDispatchTrait<int>::IntPartialVersionTag>()
f(1, 1.0);///f<int, float>()->f<int, int, TagDispatchTrait<float>::NormalVersionTag>()
```

## [æ¨¡æ¿ç±»](https://www.cnblogs.com/zhangyachen/p/13946442.html)

### å®šä¹‰

é€šå¸¸ç±»æ¨¡æ¿åªèƒ½å®šä¹‰åœ¨ `global/namespace `ä½œç”¨åŸŸï¼Œæˆ–è€…æ˜¯å…¶å®ƒç±»çš„å£°æ˜é‡Œé¢ï¼Œä¸å¯ä»¥å°†ç±»æ¨¡æ¿å£°æ˜æˆ–å®šä¹‰åœ¨å‡½æ•°æˆ–è€…å—ä½œç”¨åŸŸå†…ã€‚åœ¨æ¨¡æ¿ç±»ä½¿ç”¨è¯¥ç±»çš„æ¨¡æ¿å‡½æ•°å’Œæ™®é€šå‡½æ•°ä¸éœ€è¦å¸¦æ¨¡æ¿å‚æ•°ã€‚

### å®ä¾‹åŒ–

æ¨¡æ¿ç±»çš„å®ä¾‹åŒ–å’Œæ¨¡æ¿å‡½æ•°ç›¸åŒï¼Œä¸€ä¸ªæ¨¡æ¿ç±»å’Œå…¶æ¨¡æ¿æˆå‘˜å‡½æ•°åªæœ‰è¢«è°ƒç”¨åˆ°æ‰ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥**å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡æ¿ç±»æ—¶ä¸ä¸€å®šå®ä¾‹åŒ–å®ƒæ‰€æœ‰çš„æ¨¡æ¿å‡½æ•°**ã€‚

### ç‰¹åŒ–

æŒ‡å®šæ¨¡æ¿ç±»ä¸­çš„å‡ ä¸ªï¼ˆ**åç‰¹åŒ–**ï¼‰æˆ–å…¨éƒ¨ï¼ˆ**å…¨ç‰¹åŒ–**ï¼‰æ¨¡æ¿å‚æ•°ã€‚åœ¨å½¢å¼ä¸Šçš„**æ”¹å˜æœ‰ä¸‰å¤„**ï¼š`template<>`é‡Œã€æ¨¡æ¿ç±»åååŠ äº†å†…å®¹ã€æ¨¡æ¿ç±»é‡Œé¢çš„æ”¹åˆ°å®é™…ç±»å‹ã€‚

```c++
#define INFO(arg) cout << arg << "ClassName<" << typeid(a).name() << ", " << typeid(b).name() << ", " << typeid(c).name() << ">" << endl

template<typename A, typename B, typename C=float> class ClassName {A a; B b; C c;
public: void operator()(){if(typeid(C) != typeid(float)) INFO("æ³›åŒ–ç‰ˆæœ¬: "); else INFO("æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬");};};///å¸¦é»˜è®¤æ¨¡æ¿å‚æ•°çš„æ³›åŒ–æ¨¡æ¿ç±»

template<> class ClassName<int, char, string> {int a; char b; string c;
public: void operator()(){INFO("å…¨ç‰¹åŒ–ç‰ˆæœ¬: ");};};///å…¨ç‰¹åŒ–ã€ç‰¹åŒ–ä¸ºç»å¯¹ç±»å‹

template<typename A, typename B, typename C> class ClassName<A*, B, C>{A* a; B b; C c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///é’ˆå¯¹æŒ‡é’ˆè¿›è¡Œåç‰¹åŒ–ï¼Œç‰¹åŒ–ä¸ºæŒ‡é’ˆç±»å‹

template<typename A, typename C> class ClassName<A*, A, C>{A* a; A b; C c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

template<typename A, typename B> class ClassName<A, B, int>{A a; B b; int c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

template<typename A> class ClassName<A, char, int>{A a; char b; int c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

ClassName<int, double>()();///æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬ClassName<i, d, f>
ClassName<int, double, char>()();///æ³›åŒ–ç‰ˆæœ¬: ClassName<i, d, c>
ClassName<int, double, float>()();///æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬ClassName<i, d, f>
ClassName<int*, double, char>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<Pi, d, c>
ClassName<int*, int, double>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<Pi, i, d>
ClassName<double, float, int>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<d, f, i>
ClassName<double, char, int>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<d, c, i>
ClassName<int, char, string>()();///å…¨ç‰¹åŒ–ç‰ˆæœ¬: ClassName<i, c, NSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE
```

### æ¨¡æ¿ç±»ä¸å‹å…ƒ

å…³äºç±»æ¨¡æ¿å‹å…ƒè§„åˆ™æœ‰å¾ˆå¤šï¼ˆFriend Classes of Class Templatesã€Friend  Functions of Class Templatesã€Friend Templatesï¼‰ï¼Œè¯¦ç»†å‚è€ƒã€ŠC++  Templates Second Editionã€‹12.5å°èŠ‚ã€‚

```c++
/// ä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„æ¨¡æ¿å‚æ•°,Tå’ŒUæ„æˆä¸€å¯¹å¤šå…³ç³»
/// æ­¤æ—¶å¯¹äºfoo<char>æ¥è¯´bar<ä»»ä½•ç±»å‹>ã€function<ä»»ä½•ç±»å‹>éƒ½æ˜¯å…¶å‹å…ƒ
template<typename T> class foo {
	template<typename U> friend class bar;///å‹å…ƒç±»æ—
	template <typename V> friend V function(V arg);///å‹å…ƒå‡½æ•°æ—
};
```

```c++
/// ä½¿ç”¨åŒä¸€ä¸ªæ¨¡æ¿å‚æ•°T
/// æ­¤æ—¶å¯¹äºfoo<char>æ¥è¯´bar<cahr>ã€function<char>æ‰æ˜¯å…¶å‹å…ƒï¼Œå…¶ä»–çš„éƒ½ä¸æ˜¯
template<typename T> class foo;///å‰ç½®å£°æ˜
template<typename T> class bar;///å‰ç½®å£°æ˜
template<typename T> void func(Stack<T>);///å‰ç½®å£°æ˜

template<typename T>class foo {
	friend class bar<T>;///å•ä¸ªå‹å…ƒç±»
	friend void func<T>(foo<T>);///å•ä¸ªå‹å…ƒå‡½æ•°
};
```

## éç±»å‹æ¨¡æ¿å‚æ•°

å³æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°é‡Œçš„**å®šä¹‰å¼æ—¶æ¨¡æ¿å‚æ•°ä¸æ˜¯ä¸€ä¸ªå¾…å®šçš„ç±»å‹è€Œæ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹**ï¼Œå®ä¾‹åŒ–è¿™ç§æ¨¡æ¿æ—¶çš„**å®ä¾‹åŒ–å‚æ•°ä¸å†æ˜¯ç±»å‹å€¼è€Œæ˜¯ç¡®åˆ‡çš„å€¼**ã€‚æ¨¡æ¿å‚æ•°æ‰€æœ‰æ±‚çš„å…·ä½“çš„ç±»å‹å–å€¼æ˜¯æœ‰é™çš„ã€‚æ³¨æ„ä¸é»˜è®¤æ¨¡æ¿å‚æ•°åŒºåˆ†ã€‚

**æ¨¡æ¨¡å‚æ•°ç±»å‹é™åˆ¶**ï¼šå¿…é¡»æ˜¯æ•´å‹å¸¸é‡/æšä¸¾ã€æŒ‡å‘å¯¹è±¡/å‡½æ•°/æˆå‘˜å˜é‡çš„æŒ‡é’ˆã€å¯¹è±¡/å‡½æ•°çš„å·¦å€¼å¼•ç”¨ã€std::nullptr_tä¸­çš„ä¸€ç§ï¼›å½“ä¼ é€’æŒ‡é’ˆæˆ–è€…å¼•ç”¨æ—¶ï¼ŒæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€ä¸´æ—¶å˜é‡ã€æ•°æ®æˆå‘˜ä»¥åŠå…¶å®ƒå­å¯¹è±¡ã€‚

```c++
///æ¨¡æ¿ç±»éç±»å‹æ¨¡æ¿å‚æ•°
using array3 = array<int, 3>;///åº“ä¸­çš„éç±»å‹æ¨¡æ¿å‚æ•°ç±»
template <typename T, int size> class MyTempalte{};///ç”³æ˜å’Œå®ç°éç±»å‹æ¨¡æ¿å‚æ•°ç±»
MyTempalte<int, 3> mytemplate;///å®ä¾‹åŒ–å’Œä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æ¨¡æ¿ç±»
```

```c++
///æ¨¡æ¿å‡½æ•°éç±»å‹æ¨¡æ¿å‚æ•°
template<int Val, typename T> T addValue (T x) {}///ç”³æ˜å’Œå®ç°éç±»å‹æ¨¡æ¿å‚æ•°å‡½æ•°
addValue<5, int>(3);///å®ä¾‹åŒ–å’Œä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æ¨¡æ¿å‡½æ•°
```

## [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](https://www.cnblogs.com/zhangyachen/p/14013605.html)

## å¹²é¢„æ¨¡æ¿ç¼–è¯‘

### æ¨¡æ¿ç±»[`enable_if<>/ enable_if_t<>`](https://zh.cppreference.com/w/cpp/types/enable_if)

åŸºäº `C++11 SFINAE`ç‰¹æ€§ï¼Œæ¨¡æ¿ç±» `enable_if<exprssion, T>`åªæœ‰åœ¨æ¨¡æ¿å‚æ•° `expression`ä¸ºçœŸæ—¶æ‰ä¼šç»è¿‡å‚æ•°æ¨å¯¼æœºåˆ¶è¿›å…¥åç‰¹åŒ–çš„æ¨¡æ¿ç±» `enable_if<true, T>`ä¸­ï¼ˆè¯¥ç±»ä¸­æ‹¥æœ‰å…¬å¼€æˆå‘˜ `typedef T type`ï¼‰ï¼Œä½¿ç”¨ `typename enable_if<true,T>::type`å¯ä»¥è·å¾—**ç±»å‹** `T`ï¼Œ`enable_if_t<expression, T>`å¯ä»¥ç›´æ¥è¿”å› `type`ï¼Œä»¥ä¸‹æ˜¯ `enable_if`çš„ç®€å•å®ç°ã€‚

```c++
template< bool B, class T = void > using enable_if_t = typename enable_if<B, T>::type;

template<bool Cond, class T = void> struct enable_if {};
///æ¨¡æ¿ç±»ç”³æ˜ï¼šè¿›å…¥æ­¤æ¨¡æ¿å®ä¾‹åŒ–åå¼•ç”¨typeä¼šå‡ºé”™ï¼Œåœ¨SFINAEä¸‹å°±ä¸ä¼šå®ä¾‹åŒ–å’Œç¼–è¯‘è¯¥æ¨¡æ¿ç±»
template<class T> struct enable_if<true, T> { typedef T type; };
```

### [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](# æ¨¡æ¿ç±» `enable_if`)

ä¸€èˆ¬å°†æ¨¡æ¿ç±» `enable_if<>`ä¸ `is_integral<T>ã€is_trivial<T>ã€is_void<>ã€is_pointer<>ã€...`ç­‰ç”¨äº[**ç±»å‹èƒå–**](http://www.cplusplus.com/reference/type_traits/)çš„æ¨¡æ¿ç±»ä¸­çš„ `::value`æˆå‘˜ç»“åˆä½¿ç”¨ï¼Œä»¥æ­¤ç”¨æ¥æ ¹æ®æ¨¡æ¿å‚æ•°æ§åˆ¶æ¨¡æ¿å®ä¾‹åŒ–å’Œç¼–è¯‘çš„è¿‡ç¨‹ã€‚

[ç”¨æ³•ä¸€ï¼šç±»å‹åç‰¹åŒ–](# ç±»å‹åç‰¹åŒ–)ã€[ç”¨æ³•äºŒï¼šæ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](# æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)ã€[ç”¨æ³•ä¸‰ï¼šæ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](# æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)

## ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜

### ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶

ç”±äºåœ¨c/c++ä¸­ï¼Œé¦–å…ˆæ ¹æ®å•ä¸ªæ–‡ä»¶ç¼–è¯‘æˆå„è‡ªçš„ç›®æ ‡æ–‡ä»¶objï¼Œå½“åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå‘ç°ä¸€ä¸ªç¬¦å·åªæœ‰å£°æ˜æ²¡æœ‰å®šä¹‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå‡è®¾å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå°†å¯»æ‰¾å®šä¹‰çš„ä»»åŠ¡äº¤ç»™åç»­çš„é“¾æ¥é˜¶æ®µã€‚

### é—®é¢˜ä¸æ–¹æ³•

ç”±äºC++çš„ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶ï¼Œæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸èƒ½åˆ†åˆ«æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­è¿›è¡Œç¼–è¯‘ã€‚ç”±äºè°ƒç”¨æ¨¡æ¿å‡½æ•°çš„æ–‡ä»¶éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µæ ¹æ®å‡½æ•°çš„å®šä¹‰å®ä¾‹åŒ–æ¨¡æ¿ï¼Œä½†ç”±äºä¸Šé¢ä¸¤ä¸ªcppæ–‡ä»¶éƒ½æ˜¯**å•ç‹¬çš„ç¼–è¯‘å•å…ƒæ–‡ä»¶**ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ç¼–è¯‘æ— æ³•å®ä¾‹åŒ–æ¨¡æ¿å‡½æ•°ï¼Œè€Œåªèƒ½å°†å¯»æ‰¾æ¨¡æ¿å‡½æ•°å®ä¾‹çš„ç¬¦å·çš„ä»»åŠ¡äº¤ç»™é“¾æ¥å™¨ã€‚è€Œç¼–è¯‘æ¨¡æ¿å‡½æ•°æ–‡ä»¶æ—¶æ²¡æœ‰æ¨¡æ¿çš„è°ƒç”¨ä¹Ÿå°±æ— æ³•å®ä¾‹åŒ–äº§ç”Ÿæœ‰ç”¨çš„ç¬¦å·ä¾›é“¾æ¥å™¨ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨é“¾æ¥é˜¶æ®µå°±ä¼šå‡ºé”™ã€‚

æ‰€ä»¥æŠŠæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨ä¸€èµ·æ„æˆ `hpp`æ–‡ä»¶ï¼ˆå¦‚STLï¼‰ï¼Œæˆ–è€…åœ¨æ¨¡æ¿çš„å®šä¹‰æ–‡ä»¶ä¸­åŠ å…¥æ‰€æœ‰å¯èƒ½çš„æ¨¡æ¿å‡½æ•°è°ƒç”¨ï¼ˆå‚»é›•å†™æ³•ï¼‰ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥åˆ©ç”¨ `export`å…³é”®å­—

#### `export`ï¼ˆC++11å‰ï¼‰

ä¸ºäº†è®¿é—®å…¶ä»–ç¼–è¯‘å•å…ƒï¼ˆå¦‚å¦ä¸€ä»£ç æ–‡ä»¶ï¼‰ä¸­çš„å˜é‡æˆ–å¯¹è±¡ï¼Œå¯¹æ™®é€šç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»ã€ç»“æ„å’Œç±»ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å…³é”®å­— `extern`æ¥ä½¿ç”¨è¿™äº›å˜é‡æˆ–å¯¹è±¡æ—¶ï¼›ä½†æ˜¯å¯¹æ¨¡æ¿ç±»å‹ï¼Œåˆ™å¿…é¡»åœ¨å®šä¹‰è¿™äº›æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ ‡å‡†C++æ–°å¢åŠ çš„å…³é”®å­— `export`ï¼šåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜æ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½ï¼Œåœ¨ä»£ç æ–‡ä»¶ä¸­ä½¿ç”¨å…³é”®å­— `export`æ¥å®šä¹‰å…·ä½“çš„æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°ï¼Œç„¶ååœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ï¼ŒåŒ…å«å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥è¿™äº›å¯¹è±¡å’Œå‡½æ•°äº†ã€‚

```c++
// out.h:ï¼ˆå£°æ˜å¤´æ–‡ä»¶â€”â€”åªåŒ…å«outå‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼‰
template<class T> void out (const T& t);

// out.cpp:ï¼ˆå®šä¹‰ä»£ç æ–‡ä»¶â€”â€”åŒ…å«outå‡½æ•°çš„å£°æ˜[é€šè¿‡include]å’Œå®šä¹‰ç­‰å…¨éƒ¨ä¿¡æ¯ï¼‰
#include â€œout.hâ€
export template<class T> void out (const T& t) {}

//user.cpp:ï¼ˆç”¨æˆ·ä»£ç æ–‡ä»¶â€”â€”åŒ…å«å‡½æ•°çš„å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°ï¼‰
#include â€œout.hâ€
```

## `typename`ä¸ `class`

æœ€åˆå®šä¹‰æ¨¡æ¿æ—¶ä½¿ç”¨çš„æ˜¯ `class`ï¼Œåæ¥ä¸ºäº†é¿å… `class`åœ¨å¸¦æ¥æ··æ·†ï¼Œæ‰€ä»¥å¼•å…¥ `typename`å…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨åŒ `class`ä¸€æ ·è¡¨æ˜åé¢çš„ç¬¦å·ä¸ºä¸€ä¸ªç±»å‹ï¼Œåœ¨æ¨¡æ¿å®šä¹‰è¯­æ³•ä¸­å…³é”®å­— `class`ä¸ `typename`çš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚

`typename`å¦å¤–ä¸€ä¸ªä½œç”¨ä¸ºä½¿ç”¨**åµŒå¥—ä¾èµ–ç±»å‹**ï¼Œé€šçŸ¥ç¼–è¯‘å™¨ `typename`åé¢çš„å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å‡½æ•°æˆ–è€…æˆå‘˜å˜é‡ã€‚

```c++
struct MyArray{
	typedef int LengthType;
};

template<class T> void MyMethod(T myarr){
	typedef typename T::LengthType LengthType;
	LengthType length = myarr.GetLength();
}
```

# ç±»ç›¸å…³

## æƒé™æ§åˆ¶

### å¤–éƒ¨è®¿é—®æ§åˆ¶

+ Publicï¼ŒProtectedï¼ŒPrivateæ§åˆ¶æœ¬ç±»ã€å­ç±»ã€å¤–éƒ¨è°ƒç”¨å¯¹ç±»ä¸­æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè®¿é—®æ§åˆ¶é€æ¸ä¸¥æ ¼(protectå±è”½å¤–éƒ¨è®¿é—®ï¼Œprivateåªæœ‰æœ¬ç±»å¯è§)ã€‚

### ç‰¹æ®Šæƒé™æ§åˆ¶

+ æ¦‚è¿°ï¼šä¸ºäº†æ»¡è¶³æŸäº›ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯èƒ½å¯¹The Big Threeç­‰ç‰¹æ®Šçš„åŸºç¡€å‡½æ•°çš„æƒé™åŠ ä»¥çº¦æŸ(protectæˆ–è€…private)ï¼Œæ­¤æ—¶ç¨‹åºä¸­å¯¹è¿™äº›å‡½æ•°çš„æ˜¾å¼æˆ–éšå¼è°ƒç”¨å°†ä¼šè¢«ç¼–è¯‘å™¨é˜»æ­¢ã€‚è€Œå¯¹è¿™äº›å‡½æ•°çš„è®¿é—®æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œä¸ºäº†è®¿é—®è¿™äº›å‡½æ•°å®Œæˆå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå¿…é¡»å€Ÿç”¨ç±»çš„å†…éƒ¨æˆå‘˜é—´æ¥è°ƒç”¨è¿™äº›å‡½æ•°å¹¶è¿”å›ä¿¡æ¯ã€‚
+ è®¿é—®æ–¹æ³•

1. å€ŸåŠ©ç±»çš„staticæˆå‘˜(å‡½æ•°æˆ–è€…æ•°æ®æˆå‘˜)å±äºç±»ä½†å´ç‹¬ç«‹äºç±»å­˜åœ¨çš„ç‰¹æ€§ï¼Œåˆ©ç”¨å…¬æœ‰çš„staticæˆå‘˜é—´æ¥è°ƒç”¨
2. å€ŸåŠ©ç±»çš„å‹å…ƒå‡½æ•°æˆ–è€…å‹å…ƒç±»ï¼Œåˆ©ç”¨å‹å…ƒæˆå‘˜(å‹å…ƒå¯ä»¥æ— è§†ä¸€åˆ‡æƒé™æ§åˆ¶)é—´æ¥è°ƒç”¨

#### æ„é€ å‡½æ•°privateåŒ–

##### å½±å“

1. ç¦æ­¢è¯¥ç±»è¢«ç»§æ‰¿ï¼šåˆ©ç”¨å­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»é¦–å…ˆè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™ç§å¤–éƒ¨è°ƒç”¨è¦æ±‚åŸºç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ˜¯**publicæˆ–è€…protect**çš„è®¿é—®æ§åˆ¶æƒé™
2. åœ¨é—´æ¥è°ƒç”¨æ„é€ å‡½æ•°è¿”å›å¯¹è±¡æ—¶ä¸èƒ½ä½¿ç”¨å€¼ä¼ é€’(éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸´æ—¶å¯¹è±¡)ï¼Œæ‰€ä»¥**åªèƒ½ä»¥æŒ‡é’ˆæˆ–è€…å¼•ç”¨**çš„æ–¹å¼è¿”å›å¯¹è±¡å’Œä¼ é€’å‚æ•°ï¼Œæ­¤æ—¶çš„å¯¹è±¡**æ—¢å¯ä»¥åˆ›å»ºåœ¨å †ä¸Šä¹Ÿå¯ä»¥åœ¨æ ˆä¸Š**ã€‚

#### æ„é€ å‡½æ•°protectåŒ–

##### å½±å“

1. å’Œæ„é€ å‡½æ•°privateåŒ–ç›¸æ¯”ï¼Œè¿™ç§é™åˆ¶ä¸‹ç±»å¯ä»¥è¢«ç»§æ‰¿(protecté™å®šçš„æˆå‘˜å¯ä»¥è¢«å­ç±»ç›´æ¥è®¿é—®)ã€‚

#### ææ„å‡½æ•°privateåŒ–

##### å½±å“

1. åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å¯¹è±¡çš„æ„é€ å’Œææ„å‡½æ•°æ˜¯å¦å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨ã€‚

+ å¦‚æœæ„é€ å‡½æ•°ä¸å…è®¸è¢«å¤–éƒ¨è°ƒç”¨ï¼Œç¼–è¯‘å™¨å°†ä¼šæ‹’ç»ä¸ºå…¶è‡ªåŠ¨ç”Ÿæˆå¯¹è±¡(å‚è€ƒä¸Šé¢çš„è§£å†³åŠæ³•)ã€‚
+ å¦‚æœææ„å‡½æ•°ä¸å…è®¸è¢«å¤–éƒ¨è°ƒç”¨ï¼Œå³ä½¿é€šè¿‡å…¶ä»–æ–¹æ³•è°ƒç”¨æ„é€ å‡½æ•°åœ¨æ ˆä¸Šåˆ›å»ºäº†å¯¹è±¡ï¼Œç¼–è¯‘å™¨åœ¨å°è¯•ç›´æ¥æˆ–é—´æ¥è°ƒç”¨ææ„å‡½æ•°å‡½æ•°æ—¶ä»»ç„¶ä¼šå¤±è´¥ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¹Ÿä¼šæ‹’ç»åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡(å› ä¸ºæ— æ³•å®Œæˆè‡ªåŠ¨å›æ”¶)ã€‚

## åˆå§‹åŒ–æ–¹æ³•

+ åˆå§‹åŒ–åˆ—è¡¨å‘ç”Ÿåœ¨å°±åœ°åˆå§‹åŒ–ä¹‹åï¼Œå³æœ€ç»ˆçš„åˆå§‹åŒ–ç»“æœä»¥åˆå§‹åŒ–åˆ—è¡¨ä¸ºå‡†ã€‚

### åˆå§‹åŒ–åˆ—è¡¨

1. å¿…ç”¨æƒ…å†µï¼š`const`æˆå‘˜æˆ–å¼•ç”¨ç±»å‹çš„æˆå‘˜ã€æˆå‘˜ç±»å‹æ˜¯æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ã€‚
2. å¥½å¤„ï¼š**C++åœ¨è¿›å…¥æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¹‹å‰å·²ç»å®Œæˆå¯¹ç±»æ•°æ®æˆå‘˜çš„æ„é€ **ã€‚ä½¿ç”¨**åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥ä¸€æ­¥æ„å»ºå‡ºæˆå‘˜**ï¼Œè€Œ**æ„é€ å‡½æ•°å‡½æ•°ä½“å†…çš„è¿›è¡Œçš„æ˜¯èµ‹å€¼åˆå§‹åŒ–**ï¼Œå®ƒé’ˆå¯¹å·²ç»æ„é€ å¥½çš„ç±»å¯¹è±¡è°ƒç”¨æ‹·è´èµ‹å€¼æ“ä½œç¬¦å®Œæˆèµ‹å€¼ã€‚
3. åˆå§‹åŒ–é¡ºåºï¼š**æŒ‰ç…§å£°æ˜çš„é¡ºåºåˆå§‹åŒ–**çš„ï¼Œè€Œä¸æ˜¯æŒ‰ç…§å‡ºç°åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„é¡ºåºã€‚

### å°±åœ°åˆå§‹åŒ–

å®šä¹‰ç±»æ—¶ç»™å˜é‡èµ‹åˆå§‹å€¼ï¼ŒC++11å‰åªèƒ½å¯¹ç»“æ„ä½“æˆ–ç±»çš„é™æ€å¸¸é‡æˆå‘˜è¿›è¡Œå°±åœ°åˆå§‹åŒ–ã€‚

```cpp
class Info{
 private:
  int _type {0};
  char _a = 'a';
  std::string x = "hello world"; //å¯ä»¥
};
```

### åˆ—è¡¨åˆå§‹åŒ–list_initialization

+ ä½œç”¨ï¼šæä¾›äº†ç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹å¼ï¼Œä½¿è¿‡å»é€‚ç”¨äºPODç±»å‹çš„åˆ—è¡¨åˆå§‹åŒ–å¾—ä»¥åº”ç”¨åˆ°å…¶å®ƒé€šç”¨ç±»å‹çš„åˆå§‹åŒ–ä¸Šã€‚åŒæ—¶ä¹Ÿé€‚ç”¨äºä½¿ç”¨newæ“ä½œç­‰åˆå§‹åŒ–æ–¹å¼ã€‚
+ é€‚ç”¨èŒƒå›´ï¼šèšåˆä½“ç±»å‹å’ŒPODç±»å‹ï¼Œå°¤å…¶æ˜¯è¿åèšåˆä½“è§„å®š1çš„åˆ—è¡¨åˆå§‹åŒ–åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å®é™…ä¸Šèµ‹å€¼çš„æ˜¯ä¸€ä¸ªéšæœºå€¼ï¼Œä¼šé€ æˆéš¾ä»¥å‘ç°çš„Bugã€‚
+ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»å‹çš„æ„é€ å‡½æ•°æ¥ä½¿éèšåˆä½“ç±»å‹çš„ç±»å‹æ”¯æŒåˆ—è¡¨åˆå§‹åŒ–ã€‚
+ é¢å¤–æ”¶ç›Šï¼šè¯¥æœºåˆ¶å¯ä»¥**é˜²æ­¢ç±»å‹æ”¶çª„**ï¼Œé¿å…ä¸€äº›éšå¼çš„ç±»å‹è½¬æ¢ã€‚

#### èšåˆä½“

1. æ— ç”¨æˆ·è‡ªå®šä¹‰æ„é€ å‡½æ•°
2. æ— åŸºç±»ã€è™šå‡½æ•°
3. æ— ç§æœ‰æˆ–è€…å—ä¿æŠ¤çš„éé™æ€æ•°æ®æˆå‘˜
4. æ— {}å’Œ=ç›´æ¥åˆå§‹åŒ–çš„éé™æ€æ•°æ®æˆå‘˜ã€‚

#### std::initializer_list

+ stdæä¾›çš„ä¸€ä¸ªè½»é‡åŒ–çš„ç±»æ¨¡æ¿å®¹å™¨ï¼Œå¯ä»¥æ¥å—ä»»æ„é•¿åº¦çš„åŒç±»å‹çš„æ•°æ®ï¼Œè¯¥å®¹å™¨å®ç°äº†è¿­ä»£å™¨ç­‰å®¹å™¨çš„ä¸€èˆ¬æ¥å£(è¿­ä»£å™¨ã€beginã€endã€size)ã€‚
+ æ³¨æ„äº‹é¡¹

1. æ¥å—çš„å¯å˜å‚æ•°ä¸­çš„å‚æ•°å¿…é¡»æ˜¯åŒç±»å‹æˆ–è€…æ˜¯å¯ä»¥è½¬æ¢ä¸ºæ˜¾å¼æŒ‡å®šè¿‡çš„ç±»å‹ã€‚
2. åªèƒ½è¢«æ•´ä½“çš„åˆå§‹åŒ–å’Œå¤åˆ¶ï¼Œè¿­ä»£å™¨è®¿é—®åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸å¯æ›´æ”¹çš„ã€‚
3. å…¶ä¿å­˜çš„å€¼æ˜¯å¯¹æ•°æ®æ¥æºçš„å¼•ç”¨ï¼Œè¦æ³¨æ„åˆ—è¡¨åˆå§‹åŒ–æ—¶ä½¿ç”¨çš„æ•°æ®æºçš„ç”Ÿå‘½å‘¨æœŸã€‚

### å§”æ‰˜æ„é€ å‡½æ•°

è¯­æ³•è§„åˆ™ï¼šåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­æ˜¾å¼è°ƒç”¨è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°ã€‚

æŠŠæ„é€ çš„ä»»åŠ¡å§”æ´¾ç»™ç›®æ ‡æ„é€ å‡½æ•°æ¥å®Œæˆç±»çš„æ„é€ ï¼Œé¿å…å¤šä¸ªæ„é€ å‡½æ•°æ‰§è¡Œç±»ä¼¼æ“ä½œï¼ˆ**ç¼–è¯‘å™¨åŸåˆ™ä¸Šä¸å…è®¸åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°**æ­¢ï¼‰ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°è´Ÿè´£å¤„ç†è‡ªå·±çš„ä¸åŒæƒ…å†µï¼ŒæŠŠæœ€åŸºæœ¬çš„æ„é€ å·¥ä½œå§”æ‰˜ç»™æŸä¸ªåŸºç¡€æ„é€ å‡½æ•°å®Œæˆï¼Œå®ç°åˆ†å·¥åä½œã€‚

#### NOTE

1. ä¸èƒ½åœ¨å§”æ‰˜æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–å…¶ä»–æ•°æ®æˆå‘˜ï¼Œå³**ä¸èƒ½åŒæ—¶ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å’Œå§”æ‰˜æ„é€ å‡½æ•°**
2. **å§”æ‰˜æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­çš„æ“ä½œåœ¨æœ€åæ‰§è¡Œ**
3. è¯¥æœºåˆ¶ä¸‹å¯èƒ½æ„æˆå§”æ‰˜é“¾æˆ–è€…å§”æ‰˜ç¯ï¼Œç¼–è¯‘å™¨ä¸èƒ½æ£€æŸ¥å§”æ‰˜ç¯çš„å‡ºç°ï¼ˆä¼šå¯¼è‡´é€’å½’æ ˆçˆ†æ ˆï¼‰
4. ç›®æ ‡/è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°å¯ä»¥æ˜¯ `private`çš„æ„é€ å‡½æ•°

##### ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°

C++ä¸æ”¯æŒåœ¨æ„é€ å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶å¯¹è±¡ï¼Œè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°å®Œæˆäº†åŒ¿åä¸´æ—¶å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸ä¼šåæ˜ åˆ°å½“å‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´å†…ï¼Œç›¸å½“äºåšäº†æ— ç”¨åŠŸã€‚**è¦æƒ³å¤ç”¨å…¶ä»–æ„é€ å‡½æ•°å¯ä»¥é‡‡ç”¨å§”æ‰˜æ„é€ å‡½æ•°æˆ–è€… `placement new`æ–¹æ³•**ã€‚

#### å¼‚å¸¸å¤„ç†

å¦‚æœåœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ `try`çš„è¯ï¼Œé‚£ä¹ˆä»ç›®æ ‡æ„é€ å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œéƒ½å¯ä»¥åœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­è¢«æ•æ‰åˆ°ã€‚

```cpp
class DCExcept {
public:
  DCExcept(double d)
      try : DCExcept(1, d) {
          cout << "Run the body." << endl;
          // å…¶ä»–åˆå§‹åŒ–æ“ä½œ
      }catch(...) {
          cout << "caught exception." << endl;
          // å¼‚å¸¸å¤„ç†
      }
private:
  DCExcept(int i, double d){
      cout << "going to throw!" << endl;
      throw 0;//æŠ›å‡ºå¼‚å¸¸
  }
  int type;
  double data;
};
int main() {
  DCExcept a(1.2);
}
/*è¾“å‡º:
going to throw!
caught exception.
terminate called after throwing an instance of 'int'
Aborted*/
```

## å‡½æ•°

### The Big Three

+ æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°ä¸€èµ·æ„æˆC++ä¸‰å¤§å‡½æ•°

1. ç”³æ˜æ—¶åˆå§‹åŒ–ã€å‚æ•°çš„å€¼ä¼ é€’ã€ä»¥å€¼è¿”å›æ—¶è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œå½“ç”¨æˆ·æ²¡æœ‰è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ‰§è¡Œæµ…æ‹·è´/ä½æ‹·è´çš„æ‹·è´æ„é€ å‡½æ•°(åˆæˆçš„æ‹·è´æ„é€ å‡½æ•°)ã€‚
2. èµ‹å€¼/èµ‹å€¼æ„é€ å‡½æ•°åº”ç”¨äºä¸¤ä¸ªå·²ç»æ„é€ çš„å¯¹è±¡ï¼Œä¸ºäº†æé«˜èµ‹å€¼æ—¶çš„å¼‚å¸¸å®‰å…¨æ€§ï¼Œèµ‹å€¼æ“ä½œåº”å½“éµå®ˆcopy/move and swapçš„å®ç°åŸåˆ™ã€‚

### ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)

#### ç”Ÿæˆå†…å®¹

+ 4(æ„é€ å‡½æ•°ã€[æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°/è¿ç®—ç¬¦ã€ææ„å‡½æ•°](#The Big Three)) + 2(c++11æ–°å¢ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°)ï¼Œä¸€å…±6ä¸ª `public`çš„ `inline`å‡½æ•°

#### ç”Ÿæˆè§„åˆ™

+ åªæœ‰åœ¨è¢«éœ€è¦ä¸”ç”¨æˆ·æœªæä¾›è‡ªå®šä¹‰ç‰ˆæœ¬çš„æ—¶å€™æ‰ä¼šç”Ÿæˆï¼Œä¾‹å¦‚C++ä¸ä¼šä¸ºä¸€ä¸ªæœªä½¿ç”¨çš„ç©ºç±»ç”Ÿæˆæ„é€ å‡½æ•°

1. é»˜è®¤æ„é€ å‡½æ•°ï¼šåªåœ¨ç”¨æˆ·æ²¡æœ‰å®šä¹‰å…¶å®ƒä»»ä½•ç±»å‹çš„æ„é€ å‡½æ•°æ—¶æ‰ä¼šç”Ÿæˆï¼Œæ¦‚æ‹¬æ¥è®²æœ‰å››ç§æƒ…å†µ[å‚è€ƒæ¥æº](https://cloud.tencent.com/developer/article/1036240)ï¼š

   1. Bç±»å«A**ç±»æˆå‘˜å¯¹è±¡ï¼Œä¸”è¯¥ç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°**ï¼šå› ä¸ºæ­¤æ—¶ ç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“Aç±»é»˜è®¤æ„é€ å‡½æ•°åšäº†ä»€ä¹ˆï¼Œå‡ºäºæ¶ˆé™¤Aç±»çš„ä¸å½“æ“ä½œçš„åŸå› ï¼Œç¼–è¯‘å™¨å°†ä¸ºBç±»ç”Ÿæˆæ„é€ å‡½æ•°
   2. ç±»çš„**åŸºç±»æä¾›äº†é»˜è®¤çš„æ„é€ å‡½æ•°**ã€‚
   3. ç±»å†…å®šä¹‰äº†**è™šå‡½æ•°**
   4. ç±»ä½¿ç”¨äº†**è™šç»§æ‰¿**
2. æ‹·è´æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
3. æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
4. ææ„å‡½æ•°ï¼šç”¨æˆ·æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°
5. ç§»åŠ¨æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ
6. ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ

#### å‡½æ•°ç”Ÿæˆç®¡ç†

##### ä½¿ç”¨ç¼ºçœå‡½æ•°=default

åœ¨é»˜è®¤å‡½æ•°å®šä¹‰æˆ–å£°æ˜æ—¶åŠ ä¸Š `=default`ï¼Œæ¥è®©ç¼–è¯‘å™¨ç”Ÿæˆè¯¥å‡½æ•°çš„é»˜è®¤ç‰ˆæœ¬ã€‚

##### ç¦æ­¢å‡½æ•°=delete

+ åœ¨C++98ä¸­ï¼Œå¯ä»¥æŠŠè¯¥å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œä¸å®šä¹‰ï¼Œè¿™æ ·ï¼Œå¦‚æœæœ‰äººè°ƒç”¨å°±ä¼šæŠ¥é”™ã€‚
+ åœ¨c++11ä¸­ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è¢«ç¦æ­¢(åŒ…æ‹¬éæˆå‘˜å‡½æ•°ã€æ¨¡æ¿å‡½æ•°çš„å…·åŒ–å®ç°ã€é»˜è®¤ç”Ÿæˆçš„æˆå‘˜å‡½æ•°)

```cpp
  bool isLucky(int number) = delete;
  bool isLucky(float) = delete;      //é˜»æ­¢int->floatçš„éšå¼è½¬æ¢

  template<typename T> void ProcessPointer(T* ptr);
  template<> void ProcessPointer(void*) = delete; //é˜»æ­¢void*å…·åŒ–
  template<> void ProcessPointer(char*) = delete; //é˜»æ­¢char*å…·åŒ–
```

##### ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit

1. èƒŒæ™¯ï¼šåœ¨ç±»çš„æ„é€ å‡½æ•°åªä¼ é€’**ä¸€ä¸ªæœ‰æ•ˆå‚æ•°(å•å‚æˆ–è€…å¤šå‚æ—¶åé¢éƒ½æœ‰é»˜è®¤å‚æ•°)æ—¶**ï¼ŒC++åœ¨ç¼–è¯‘æ—¶ä¼šé»˜è®¤å°†è¯¥æ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºè¯¥ç±»å¯¹è±¡ã€‚
2. `explicit`å¯ä»¥é˜»æ­¢æ„é€ å‡½æ•°çš„è¿™ç§è½¬æ¢ï¼Œé¿å…ä¸€äº›éš¾ä»¥å‘ç°çš„é”™è¯¯ã€‚

### æ„é€ å‡½æ•°

æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¼šåˆ†æˆ**ä¸¤ä¸ªé˜¶æ®µ**ï¼šåˆå§‹åŒ–é˜¶æ®µï¼ˆå˜é‡æˆ–è€…ç±»åœ¨å®šä¹‰å’Œåˆ†é…ç©ºé—´åçš„ç¬¬ä¸€æ¬¡èµ‹äºˆåˆå€¼å³ä¸ºåˆå§‹åŒ–ï¼ŒæŒ‰ç…§ç”³æ˜å’Œç»§æ‰¿çš„é¡ºåºåˆå§‹åŒ–ï¼‰å’Œèµ‹å€¼é˜¶æ®µï¼ˆæ„é€ å‡½æ•°ä½“å†…çš„éƒ¨åˆ†ï¼‰ã€‚

ç”±äº**`const` æˆå‘˜**æˆ–**å¼•ç”¨ç±»å‹**çš„æˆå‘˜åªæœ‰ä¸€æ¬¡èµ‹å€¼çš„æœºä¼šï¼Œæ‰€ä»¥ä»–ä»¬å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œåˆå§‹åŒ–ã€‚

#### [é»˜è®¤æ„é€ å‡½æ•°](https://blog.csdn.net/hankai1024/article/details/7947989)

##### å¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆtrivial constructorï¼‰

å½“ç”¨æˆ·å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ°å®šä¹‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ï¼Œ**å‡ºäºä¿è¯ç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¿è¡Œçš„éœ€æ±‚**ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ— å…³ç´§è¦ï¼ˆtrivialï¼‰çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œ**è¯¥å‡½æ•°æ—¢ä¸ä¼šè®²å…¶æˆå‘˜å˜é‡ç½®é›¶ï¼Œä¹Ÿä¸ä¼šåšå…¶ä»–çš„ä»»ä½•äº‹æƒ…**ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ã€‚

##### éå¹³å‡¡é»˜è®¤æ„é€ å‡½æ•°ï¼ˆnon-trivial constructorï¼‰

è¯¥ç±»æ„é€ å‡½æ•°æ˜¯ç±»å®ç°æ‰€å¿…é¡»çš„ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å®ƒä»¬ä¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚

### è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½

åç¼€å½¢å¼çš„è‡ªå¢/å‡é‡è½½æ¥å—ä¸€ä¸ªæ— ç”¨çš„ `int` å½¢å‚æ¥ä¸å‰ç¼€å½¢å¼åŒºåˆ†

### [`inline`å‡½æ•°](https://www.cnblogs.com/fnlingnzb-learner/p/6423917.html)

æ™®é€šçš„ `inline`å‡½æ•°æ²¡æœ‰å‡½æ•°åœ°å€ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å°†ä»£ç å±•å¼€æ›¿æ¢ã€‚åœ¨ç±»ä¸­å£°æ˜å¹¶å®šä¹‰çš„æ‰€æœ‰å‡½æ•°é»˜è®¤éƒ½æ˜¯å†…è”å‡½æ•°ï¼Œä½†å’Œ `rigister`å…³é”®å­—ä¸€æ ·ï¼Œ`inline`å¯¹äºç¼–è¯‘å™¨æ¥è¯´åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå¹¶ä¸å¼ºåˆ¶è¦æ±‚å°†å…¶åšå†…æ•›å±•å¼€ï¼Œäº‹å®ä¸Šï¼Œ**ç¼–è¯‘å™¨ä¼šæ‹’ç»å°†å¤æ‚çš„å‡½æ•°ä»¥åŠè™šå‡½æ•°è¿›è¡Œå†…è”å±•å¼€**ï¼Œæ‰€ä»¥ `inline`å’Œ `virtual`å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šå¿½ç•¥ `inline`è€Œä¿ç•™ `virtual`ã€‚

#### æ³¨æ„äº‹é¡¹

1. å†…è”å‡½æ•°çš„å‡½æ•°ä½“å†…éƒ¨ä¸æ”¯æŒå¤æ‚çš„æ§åˆ¶é€»è¾‘ï¼Œå¦‚whileã€switchçš„ç»“æ„ä¼šè¢«ç¼–è¯‘å™¨æ‹’ç»inline
2. å†…è”å‡½æ•°ä¸èƒ½æ˜¯é€’å½’çš„å‡½æ•°
3. å»ºè®®inlineå‡½æ•°çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­(ç¼–è¯‘å™¨å¿…é¡»éšå¤„å¯è§å†…è”å‡½æ•°çš„å®šä¹‰)
4. å…³é”®å­—inline å¿…é¡»ä¸å‡½æ•°å®šä¹‰ä½“æ”¾åœ¨ä¸€èµ·æ‰èƒ½ä½¿å‡½æ•°æˆä¸ºå†…è”ï¼Œä»…å°†inline æ”¾åœ¨å‡½æ•°å£°æ˜å‰é¢ä¸èµ·ä»»ä½•ä½œç”¨ã€‚
5. è¦å½“å¿ƒæ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯èƒ½ä¼šéšè—ä¸€äº›è¡Œä¸ºï¼Œå¦‚â€œå·å·åœ°â€æ‰§è¡Œäº†åŸºç±»æˆ–æˆå‘˜å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚æ‰€ä»¥**ä¸è¦éšä¾¿åœ°å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„å®šä¹‰ä½“æ”¾åœ¨ç±»å£°æ˜ä¸­**ã€‚

## `friend`æˆå‘˜

é€šè¿‡ `friend`å…³é”®å­—å¯ä»¥åœ¨ç±»çš„ç”³æ˜ä¸­å°†å…¶ä»–ç±»/å‡½æ•°ä½œä¸ºæœ¬ç±»çš„å‹å…ƒï¼Œæˆä¸ºå‹å…ƒçš„å‡½æ•°/ç±»å¯ä»¥**ä¸å—ç±»æƒé™æ§åˆ¶**è®¿é—®ç±»ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚**è¢«å‹å…ƒçš„ç±»ä¼šä½œä¸ºæ˜¾å¼å‚æ•°**ä¼ é€’åˆ°å‹å…ƒå‡½æ•°/ç±»ä¸­ï¼Œå› æ­¤**å‹å…ƒå‡½æ•°ä¸å«æœ‰ `this`æŒ‡é’ˆ**ã€‚

`note`ï¼šå‹å…ƒå…³ç³»ä¸å…·æœ‰ç»§æ‰¿æ€§å’Œä¼ é€’æ€§ï¼Œ**å‹å…ƒçš„ç”³æ˜åªèƒ½åœ¨ç±»çš„ç”³æ˜ä¸­å®Œæˆ**ã€‚

## ç»§æ‰¿

### è™šå‡½æ•°

|    ä¸å¯virtual    |                                  åŸå›                                   |
| :----------------: | :--------------------------------------------------------------------: |
|   `inline`å‡½æ•°   |                         `inline`å‡½æ•°æ²¡æœ‰åœ°å€                         |
|   `static`å‡½æ•°   |                    `static`å‡½æ•°æ²¡æœ‰ `this`æŒ‡é’ˆ                    |
| **æ„é€ å‡½æ•°** | å¯¹è±¡ä¸­çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆå’Œè™šå‡½æ•°è¡¨åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µï¼ˆç¼–è¯‘æœŸï¼‰åˆ†é… |

è™šå‡½æ•°éœ€è¦ä¾èµ–å¯¹è±¡ä¸­æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼ˆè¿™ä¸ªå·¥ä½œæ˜¯ç¼–è¯‘å™¨åšçš„ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ï¼‰ï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œè€Œæ­¤æ—¶è™šå‡½æ•°è¡¨æŒ‡é’ˆå¹¶æœªåˆå§‹åŒ–å®Œæˆï¼Œè¿™å°±ä¼šå¼•èµ·é”™è¯¯ã€‚

### é™åˆ¶ç»§æ‰¿ `final`

+ ä½¿ç”¨æ–¹æ³•ï¼šå°† `final`å…³é”®å­—æ·»åŠ åˆ°å®šä¹‰ç±»æ—¶çš„ç±»çš„åç§°çš„åé¢
+ å½±å“ï¼šè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿

### ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶

+ å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æ§åˆ¶æƒé™ç”±çˆ¶ç±»æ§åˆ¶ï¼Œä¸‰ç§ç»§æ‰¿æ–¹å¼ä¸å½±å“å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æƒé™ã€‚
+ ç»§æ‰¿æ–¹å¼æ˜¯ä¸ºäº†æ§åˆ¶å­ç±»çš„è°ƒç”¨æ–¹å¯¹çˆ¶ç±»çš„è®¿é—®ï¼Œä¸‰ç§ç»§æ‰¿ç›¸å½“äºå°†çˆ¶ç±»çš„publicå’Œprotectæˆå‘˜è®¿é—®æƒé™å˜ä¸ºç»§æ‰¿æ–¹å¼æ‰€æ ‡æ˜çš„æƒé™ã€‚çˆ¶ç±»çš„Privateæˆå‘˜åœ¨å­ç±»ä¸­å§‹ç»ˆä¸å¯è§

| çˆ¶ç±»æˆå‘˜\ç»§æ‰¿æ–¹å¼ |      Public      |     Protect     |     Private     |
| :---------------: | :--------------: | :--------------: | :--------------: |
|      Public      |      Public      |     Protect     |     Private     |
|      Protect      |     Protect     |     Protect     |     Private     |
|      Private      | **ä¸å¯è§** | **ä¸å¯è§** | **ä¸å¯è§** |

### ç»§æ‰¿çš„å†…å®¹

|           çˆ¶ç±»           |          å­ç±»          |                     åŸå› /ä½¿ç”¨æ–¹æ³•                     |
| :----------------------: | :--------------------: | :---------------------------------------------------: |
|     æ‰€æœ‰æ™®é€šæ•°æ®æˆå‘˜     |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
|         æ‰€æœ‰æ¥å£         |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
|       é™æ€æ•°æ®æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    åŸºç±»åŠæ‰€æœ‰å­ç±»å…±ç”¨åŸºç±»çš„åŒä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ç©ºé—´    |
|       é™æ€å‡½æ•°æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    staticå‡½æ•°å®é™…ä¸Šæ˜¯â€œåŠ ä¸Šäº†è®¿é—®æ§åˆ¶çš„å…¨å±€å‡½æ•°â€    |
|       å‹å…ƒå‡½æ•°/ç±»       |         ä¸ç»§æ‰¿         |                    é‡å†™å…¥ç±»çš„å‹å…ƒ                    |
|      æ™®é€šè¿ç®—ç¬¦é‡è½½      |          ç»§æ‰¿          |                 å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
| =é‡è½½ï¼šæ‹·è´/ç§»åŠ¨èµ‹å€¼å‡½æ•° | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |          `using BaseClassName::operator=;`          |
|         æˆå‘˜å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** | `using BaseClassName::function_name;`ï¼Œå¯ä»¥é¿å…éšè— |
|       æ‰€æœ‰æ„é€ å‡½æ•°       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |        `using BaseClassName::BaseClassName;`        |
|         ææ„å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |                    ææ„æ—¶è‡ªåŠ¨è°ƒç”¨                    |

```cpp
class Base{
    static int global;
public:
    Base& operator=(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    Base& operator+(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    Base& common_function(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    static void static_function(){cout << "Global::" << __FUNCTION__ << "> <global=" << global << endl;}
};

class Derive : public Base{
    public:
        using Base::operator=;
        using Base::common_function;
        Derive& common_function(double a){cout << "Derive::" << __FUNCTION__ << endl; return *this;}
};

int Base::global = 12;

int main(){
    Derive derive;
    derive.common_function(0.1).common_function(0);
    derive.operator+(1);
    derive.operator=(2);
    Derive::static_function();
    Base::static_function();
    return 0;
}
/*è¾“å‡º
Derive::common_function
Base::common_function
Base::operator+
Base::operator=
Globalstatic_function> <global=12
Globalstatic_function> <global=12
*/
```

##### ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½

+ C++çš„ç±»ä¼šé»˜è®¤ç”Ÿæˆè‡ªå·±çš„æ‹·è´èµ‹å€¼å‡½æ•°(`operator =()`)ï¼Œæ­¤æ—¶çˆ¶ç±»çš„æ‹·è´èµ‹å€¼è¿ç®—ç¬¦å°±è¢«è¦†ç›–éšè—äº†ï¼Œæ­¤æ—¶çˆ¶ç±»çš„æ‹·è´èµ‹å€¼å‡½æ•°ä¹Ÿå°±ä¸è¢«ç»§æ‰¿ã€‚

##### [ç»§æ‰¿æ„é€ å‡½æ•°](https://www.cnblogs.com/5iedu/p/11291124.html)

1. ä¸€æ—¦ä½¿ç”¨usingæ¥å£°æ˜ç»§æ‰¿åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±**ä¸å†ä¸ºæ´¾ç”Ÿç±»ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°**ã€‚
2. ç»§æ‰¿æ„é€ å‡½æ•°åªä¼šåˆå§‹åŒ–åŸºç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œå¯¹äºæ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å˜é‡åˆ™éœ€ç”±æ´¾ç”Ÿç±»è‡ªè¡Œåˆå§‹åŒ–ï¼ˆå¦‚â€œå°±åœ°åˆå§‹åŒ–â€ã€åˆå§‹åŒ–åˆ—è¡¨ç­‰ï¼‰
3. å¯¹äºç»§æ‰¿æ„é€ å‡½æ•°æ¥è¯´ï¼Œåƒæ•°çš„é»˜è®¤å€¼æ˜¯ä¸ä¼šè¢«ç»§æ‰¿çš„????ã€‚å¹¶ä¸”åŸºç±»æ„é€ å‡½æ•°çš„é»˜è®¤å€¼ä¼šå¯¼è‡´åŸºç±»äº§ç”Ÿå¤šä¸ªæ„é€ å‡½æ•°ç‰ˆæœ¬å·ï¼ˆå³ä»é»˜è®¤åƒæ•°å¼€å§‹å‰é¢å‡é»˜è®¤å‚æ•°ï¼Œç›´åˆ°åŒ…æ‹¬æ— é»˜è®¤å‚æ•°çš„æ„é€ å‡½æ•°ï¼‰ï¼Œè¿™äº›å‡½æ•°ç‰ˆæœ¬å·éƒ½ä¼šè¢«æ´¾ç”Ÿç±»ç»§æ‰¿ã€‚
4. å½“æ´¾ç”Ÿç±»æ‹¥æœ‰å¤šä¸ªåŸºç±»æ—¶ï¼Œå¤šä¸ªåŸºç±»ä¸­çš„åŒå‚çš„æ„é€ å‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»ä¸­çš„ç»§æ‰¿æ„é€ å‡½æ•°çš„å‡½æ•°åå†²çªã€‚å¯¹æ­¤å¯ä»¥å†æ´¾ç”Ÿç±»ä¸­æ˜¾å¼ç”³æ˜è‡ªå·±æ„é€ å‡½æ•°ï¼Œå…¶å‚æ•°å’ŒåŸºç±»é—´å†²çªçš„æ„é€ å‡½æ•°çš„å‚æ•°ç›¸åŒã€‚
5. å¦‚æœåŸºç±»çš„æ„é€ å‡½æ•°è¢«å£°æ˜ä¸º**ç§æœ‰æ„é€ å‡½æ•°**æˆ–è€…æ´¾ç”Ÿç±»æ˜¯ä»åŸºç±»**è™šç»§æ‰¿**çš„ï¼Œé‚£ä¹ˆå°±ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­å£°æ˜ç»§æ‰¿æ„é€ å‡½æ•°ã€‚
6. C++11ä¸­ç»§æ‰¿æ„é€ å‡½æ•°ä¸æ´¾ç”Ÿç±»çš„å„ç§ç±»é»˜è®¤å‡½æ•°ä¸€æ ·ï¼Œæ˜¯éšå¼å£°æ˜çš„ã€‚å³å¦‚æœä¸€ä¸ªç»§æ‰¿æ„é€ å‡½æ•°ä¸è¢«ç›¸å…³ä»£ç ä½¿ç”¨ï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶äº§ç”ŸçœŸæ­£çš„å‡½æ•°ä»£ç ã€‚è¿™æ¯”æ˜¾å¼å£°æ˜å‡½æ•°æ›´åŠ èŠ‚çœç›®æ ‡ä»£ç ç©ºé—´ã€‚

```cpp
#include <iostream>
using namespace std;

class Base1{
public:
//   Base1() { cout << "Base1::" << __FUNCTION__ << " void " << endl; }
    explicit Base1(char first) { cout << "Base1::" << __FUNCTION__ << " char " <<endl; }
    explicit Base1(char* first, double second = 2.0, double third = 3.0, double forth = 4.0){ cout << "Base1::" << __FUNCTION__ << " char*, double=, double=, double= " <<endl; }
    explicit Base1 (string zero = string("")){ cout << "Base1::" << __FUNCTION__ <<" string= "  << endl;}
    Base1(char first, int second){ cout << "Base1::" << __FUNCTION__ << " char, int " <<endl; }
    Base1(char first, double second){ cout << "Base1::" << __FUNCTION__ << " char, double " <<endl; }
    Base1(int zero, char* first, double second = 2.0, double third = 3.0, double forth = 4.0){ cout << "Base1::" << __FUNCTION__ << " int, char*, double=, double=, double= " <<endl; }
};


class Derive: public Base1{
private:
   int d{ 0 }; //å°±ä¼šåˆå§‹åŒ–æ´¾ç”Ÿç±»æˆå‘˜
public:
    using Base1::Base1;  //ç»§æ‰¿æ„é€ å‡½æ•°
};


class Base2{
public:
    Base2(){cout << "Base2::" << __FUNCTION__ <<endl;}
    Base2(char first) { cout << "Base2::" << __FUNCTION__ << " char " <<endl; }
};

class Derive12: public Base1, Base2{
private:
   int d{ 0 }; //å°±ä¼šåˆå§‹åŒ–æ´¾ç”Ÿç±»æˆå‘˜
public:
    using Base1::Base1;  //ç»§æ‰¿æ„é€ å‡½æ•°
    using Base2::Base2;  //ç»§æ‰¿æ„é€ å‡½æ•°
    Derive12(){cout << "Derive12::" << __FUNCTION__  <<endl;}                   //æ¶ˆé™¤äºŒä¹‰æ€§
    Derive12(char x){cout << "Derive12::" << __FUNCTION__ << " char " <<endl;}  //æ¶ˆé™¤äºŒä¹‰æ€§

};

int main(){
    Derive d0,                          //Base1::Base1 string=
           d1(string("hello")),         //Base1::Base1 string=
           d2(-1, nullptr),             //Base1::Base1 int, char*, double=, double=, double=
           d3('0',1),                   //Base1::Base1 char, int
           d4('0', 1.0),                //Base1::Base1 char, double
           d5(0, nullptr, 1.0, 2.0),    //Base1::Base1 int, char*, double=, double=, double=
           d6(nullptr),                 //Base1::Base1 char*, double=, double=, double=
           d7('c');                     //Base1::Base1 char
    Derive12 e0,                        //Base1::Base1 string=
                                        //Base2::Base2
                                        //Derive12::Derive12
             e1('x');                   //Base1::Base1 string=
                                        //Base2::Base2
                                        //Derive12::Derive12 char
    return 0;
}
```

### è™šç»§æ‰¿

* è§£å†³ä»ä¸åŒé€”å¾„ç»§æ‰¿æ¥çš„åŒä¸€åŸºç±»ï¼Œä¼šåœ¨å­ç±»ä¸­å­˜åœ¨å¤šä»½æ‹·è´çš„é—®é¢˜ï¼Œé¿å…æµªè´¹å­˜å‚¨ç©ºé—´å’ŒäºŒä¹‰æ€§é—®é¢˜ï¼Œå¯¹åŸæœ¬å†—ä½™çš„æ•°æ®æˆå‘˜ä¹Ÿåªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚

#### [å®ç°åŸç†](https://blog.csdn.net/qq_44777506/article/details/104320649)

* è™šç»§æ‰¿åº•å±‚å®ç°åŸç†ä¸ç¼–è¯‘å™¨ç›¸å…³ï¼Œä¸€èˆ¬é€šè¿‡è™šåŸºç±»æŒ‡é’ˆå’Œè™šåŸºç±»è¡¨å®ç°ã€‚
* æ¯ä¸ªè™šç»§æ‰¿çš„å­ç±»éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„è™šåŸºç±»è¡¨æŒ‡é’ˆ `vbptr`ï¼Œé€šè¿‡è™šåŸºç±»è¡¨çš„åç§»åœ°å€**ä¸åŒçš„ç»§æ‰¿è·¯å¾„æœ€ç»ˆä¼šè®¿é—®åˆ°åŒä¸€ä¸ªè™šåŸºç±»æˆå‘˜**
* å½“è™šç»§æ‰¿çš„ç±»è¢«å½“åšçˆ¶ç±»ç»§æ‰¿æ—¶ï¼Œè™šåŸºç±»æŒ‡é’ˆä¹Ÿä¼šè¢«ç»§æ‰¿ï¼Œä¸”æœ€ç»ˆçš„å­ç±»ä¸­çš„**è™šåŸºç±»è¡¨æŒ‡é’ˆçš„ä¸ªæ•°å’Œå®ƒæ‰€ç»§æ‰¿çš„è™šç»§æ‰¿çš„ç±»çš„ä¸ªæ•°ç›¸åŒ**ã€‚

##### [è™šåŸºç±»è¡¨](https://www.cnblogs.com/fanzhidongyzby/archive/2013/01/14/2859064.html)

å­˜å‚¨**åœ¨ `.rodate`æ®µå†…**ã€ä¸å ç”¨ç±»å¯¹è±¡çš„å­˜å‚¨ç©ºé—´ã€‚æ¯ä¸ªè¡¨é¡¹ç›®**è®°å½•äº†æ¯ä¸ªè™šåŸºç±»çš„æ•°æ®ç›¸å¯¹æ´¾ç”Ÿç±»èµ·å§‹åœ°å€çš„åç§»é‡**ï¼Œé€šè¿‡åç§»åœ°å€å°±å¯ä»¥åœ¨æ´¾ç”Ÿç±»çš„å†…å­˜ç©ºé—´é‡Œæ‰¾åˆ°åŸºç±»æˆå‘˜

```cpp
// 64bit OS
class Myclass{int var;};						//4
class MyclassA :virtual public Myclass{int varA;};		//16=8+4+4
class MyclassB :virtual public Myclass{int varB;};		//16=8+4+4
class MyclassC :public MyclassB, public MyclassA{int varC;};	//40=8+4+(4)+8+4+(4)+8+4
/*
         0 | class MyclassC
         0 |   class MyclassB (primary base)
         0 |     (MyclassB vtable pointer)
         8 |     int varB
        16 |   class MyclassA (base)
        16 |     (MyclassA vtable pointer)
        24 |     int varA
        28 |   int varC
        32 |   class Myclass (virtual base)
        32 |     int var
           | [sizeof=40, dsize=36, align=8, nvsize=32, nvalign=8]
*/

// 64bit OS
class Myclass{int var; virtual void fun();};//16=8+4+(4)
void MyClass fun(){};
class MyclassA :virtual public Myclass{int varA;};//32=8+4+(4)+8+4+(4)
class MyclassB :virtual public Myclass{int varB;};//32=8+4+(4)+8+4+(4)
class MyclassC :public MyclassB, public MyclassA{int varC;};//40=8+4+(4)+8+4+4+8
/*
         0 | class MyclassC
         0 |   class MyclassB (primary base)
         0 |     (MyclassB vtable pointer)
         8 |     int varB
        16 |   class MyclassA (base)
        16 |     (MyclassA vtable pointer)
        24 |     int varA
        28 |   int varC
        32 |   class Myclass (virtual base)
        32 |     (Myclass vtable pointer)
        40 |     int var
           | [sizeof=48, dsize=44, align=8, nvsize=32, nvalign=8]
*/
```

![](img/lang/virtual_inherit.jpg)

==æ­¤å¤„è¿˜éœ€å¯¹å›¾è¡¨è¿›è¡Œè¯´æ˜==

#### NOTE

1. åœ¨ç»§æ‰¿é“¾é¡¶éƒ¨è¢«è™šç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºè™šåŸºç±»
2. è™šæ´¾ç”Ÿåªå½±å“ä»æŒ‡å®šäº†è™šåŸºç±»çš„æ´¾ç”Ÿç±»ä¸­è¿›ä¸€æ­¥æ´¾ç”Ÿå‡ºæ¥çš„ç±»ï¼Œå®ƒ**ä¸å½±å“æ´¾ç”Ÿç±»æœ¬èº«**ã€‚
3. èƒ½ç”¨å•ä¸€ç»§æ‰¿è§£å†³çš„é—®é¢˜å°±ä¸è¦ä½¿ç”¨å¤šç»§æ‰¿
4. åœ¨ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­åŒæ—¶å‡ºç°å¯¹è™šåŸºç±»å’Œéè™šåŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶ï¼Œè™šåŸºç±»çš„æ„é€ å‡½æ•°å…ˆäºéè™šåŸºç±»çš„æ„é€ å‡½æ•°æ‰§è¡Œã€‚

# å‡½æ•°ä¸è¿ç®—ç¬¦

C++è¿ç®—ç¬¦åŒ…å« `sizeofã€newã€delete`ä¸‰ç§ï¼Œä»–ä»¬éƒ½ä»¥å…³é”®å­—çš„å½¢å¼å­˜åœ¨ï¼Œæ˜¯è¯­è¨€è‡ªèº«çš„ç‰¹æ€§ï¼Œå®ƒ**æœ‰å›ºå®šçš„è¯­ä¹‰**ï¼ˆæ‰€ä»¥ `newã€delete`**ä¸èƒ½è¿›è¡Œé‡è½½**ï¼‰ï¼Œç¼–è¯‘å™¨è´Ÿè´£è§£é‡Šè¯­ä¹‰ç”Ÿæˆç›¸åº”çš„ä»£ç ï¼Œå…¶å®ç°å’Œè¯­ä¹‰ä¾èµ–äºè¯­è¨€è€Œ**ä¸ä¾èµ–å‡½æ•°åº“**ã€‚

## `sizeof`

`sizeof`å¯ä»¥æ±‚**é™¤ `void`å¤–**æ‰€æœ‰ç±»å‹çš„å¤§å°ï¼Œç¡®å®šé™æ€åˆ†é…çš„æ•°ç»„çš„å¤§å°ï¼Œ**å½“è¡¨è¾¾å¼æˆ–è€…å‡½æ•°è°ƒç”¨åšæ“ä½œæ•°æ—¶**ï¼Œ`sizeof`è®¡ç®—è¡¨è¾¾å¼çš„å€¼/å‡½æ•°è¿”å›å€¼çš„ç±»å‹çš„å¤§å°ä½†**ä¸å¯¹è¡¨è¾¾å¼æ±‚å€¼/ä¸æ‰§è¡Œå‡½æ•°ä½“**ã€‚

```c
int  num1 = 1, num2 = 2;
int  n1 = sizeof(num1 + num2);
int  n2 = sizeof(num1 += num2);
printf("%d %d %d %d\n",num1, num2, n1, n2);//1 2 3 4
```

# ç±»å‹æ£€æŸ¥ä¸è½¬æ¢

## ç±»å‹å¯¹æ¯”

### `std::is_same<>`

åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œåˆ¤æ–­ç»“æœä¸º `std::is_same<Type1, Type2>::value`ã€‚è¯¥åˆ¤æ–­çš„æ ‡å‡†ä¸­å°†å¸¦ `cv`é™å®šç¬¦æˆ–å¼•ç”¨çš„ç±»å‹å’Œä¸å¸¦è¿™äº›æ ‡è¯†çš„ç±»å‹è§†ä½œä¸åŒçš„ç±»å‹ã€‚

#### [`std::decay`ç±»å‹é€€åŒ–](https://zh.cppreference.com/w/cpp/types/decay)

å°†åŸå§‹ç±»å‹ä¸­çš„ `cv`é™å®šç¬¦æˆ–å¼•ç”¨æ ‡è¯†å»æ‰ä½†**ä¸æ”¯æŒå¯¹æŒ‡é’ˆçš„é€€åŒ–**ï¼ˆ`decay`çš„å®ç°ä¸­æ²¡æœ‰ `remove_pointer`ï¼‰ï¼Œä¾‹å¦‚æŠŠ `cosnt int&`é€€åŒ–ä¸º `int`ã€‚

## `std::common_type`

`std::common_type<Type1, Type2>::type`å¯ä»¥äº§ç”Ÿå¹¶è·å¾— `Type1`å’Œ `type2`çš„å…±åŒç±»å‹ã€‚

## ç±»å‹è½¬æ¢

### ä¼ ç»Ÿç±»å‹è½¬æ¢

+ å³Cé£æ ¼çš„ç±»å‹è½¬æ¢å¯èƒ½å¸¦æ¥ä¸€äº›éšæ‚£ï¼Œè®©ä¸€äº›é—®é¢˜éš¾ä»¥å¯Ÿè§‰.
+ åœ¨ç±»æ¨¡å‹ä¸­æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°ä¼ ç»Ÿçš„ç±»å‹è½¬æ¢æ–¹å¼ï¼Œä¾‹å¦‚é‡è½½ `operator T`å‡½æ•°å®ç°ç±»å‘ç±» `T`çš„è½¬æ¢ã€‚

#### éšå¼ç±»å‹è½¬æ¢

ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼Œä¸€èˆ¬åªä½œç”¨åˆ°åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°†å°å†…å­˜çš„ç±»å‹å‘å¤§å†…å­˜æˆ–ç›¸åŒå†…å­˜å¤§å°çš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯å…¶ç»“æœé€šå¸¸æ˜¯ä¸å¯é¢„æœŸçš„ã€‚

#### æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢

æ˜¾å¼è¦æ±‚ç¼–è¯‘å™¨è¦è½¬æ¢çš„ç›®æ ‡ç±»å‹

### æ ‡å‡†ç±»å‹è½¬æ¢

ä½¿ç”¨æ–°çš„è½¬æ¢å‡½æ•°å¯ä»¥æ¸…æ¥šçš„ç†è§£è½¬æ¢çš„å…·ä½“å«ä¹‰ï¼Œä¸”æ”¯æŒä¸€å®šç¨‹åº¦çš„å®‰å…¨æ£€æŸ¥

#### [`static_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/31/cpp_cast_operator_part4.html)

ç”¨äº**æœ‰ä¸€å®šå…³ç³»**çš„å¯¹è±¡ï¼ˆåŒ…å«åŸºç¡€æ•°æ®ï¼‰çš„æŒ‡é’ˆ/å¼•ç”¨ä¹‹é—´ã€‚æ‰€è°“å…³ç³»**åœ¨æŒ‡é’ˆå’Œå¼•ç”¨ä¸Šé€šå¸¸æŒ‡ç»§æ‰¿å…³ç³»**ï¼ˆä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©ï¼‰ï¼Œ**åœ¨å¯¹è±¡é—´é€šå¸¸æŒ‰ç…§å…ˆæ„é€ å‡½æ•°åç±»å‹è½¬æ¢è¿ç®—ç¬¦(`operator TYPE`)çš„é¡ºåºè½¬æ¢**ã€‚ä¹Ÿå¯ä»¥å®ç°C++ä¸­**å†…ç½®åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´**çš„ç›¸äº’è½¬æ¢ã€‚

#### [`const_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/22/cpp_cast_operator_part2.html)

ç”¨äº**å»é™¤æŒ‡é’ˆ/å¼•ç”¨çš„ `const/volatile`é™å®šç¬¦**ï¼Œè½¬æ¢å‰å**æ•°æ®çš„æœ€ç»ˆæŒ‡å‘å¹¶ä¸ä¼šæ”¹å˜**ã€‚ä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥å¯¹åŸå¯¹è±¡ä¿®æ”¹ï¼ˆå–å†³äºæºå¯¹è±¡çš„é™å®šç¬¦ï¼‰ã€‚åŠ  `const`ç”± `static_cast<>()`å®Œæˆã€‚`const_cast`åŸºäºC++å¯¹äºæŒ‡é’ˆçš„è½¬æ¢æ˜¯ä»»æ„çš„ï¼Œä»»ä½•æŒ‡é’ˆä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œäº’ç›¸è½¬æ¢ï¼Œå› æ­¤ `const_cast`å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ˜¾ç¤ºè½¬æ¢æ¥ä»£æ›¿ã€‚

#### [`reinterpret_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)

`reinterpret_cast`è¿ç®—ç¬¦æ˜¯ç”¨æ¥å¤„ç†æ— å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼›å®ƒä¼šäº§ç”Ÿä¸€ä¸ªä¸åŸå§‹å‚æ•°ï¼ˆ`expressoin`ï¼‰æœ‰å®Œå…¨ç›¸åŒçš„æ¯”ç‰¹ä½çš„æ–°å€¼ã€‚`reinterpret_cast`è™½ç„¶çœ‹ä¼¼å¼ºå¤§ï¼Œä½œç”¨å´æ²¡æœ‰é‚£ä¹ˆå¹¿ï¼Œé”™è¯¯çš„ä½¿ç”¨ `reinterpret_cast`å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºçš„ä¸å®‰å…¨ï¼Œ**åªæœ‰å°†è½¬æ¢åçš„ç±»å‹å€¼è½¬æ¢å›åˆ°å…¶åŸå§‹ç±»å‹**ï¼Œè¿™æ ·æ‰æ˜¯æ­£ç¡®ä½¿ç”¨ `reinterpret_cast`æ–¹å¼ã€‚

[IBMçš„C++æŒ‡å—](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/language_ref/keyword_reinterpret_cast.htm)æ¨èä»¥ä¸‹å‡ ç§è½¬æ¢æ–¹å¼ï¼šæ•´å‹->æŒ‡é’ˆ->å¤§æ•´å‹ï¼ˆå¤§å°ä¸å°äºæŒ‡é’ˆï¼‰ã€ä»»æ„å¯¹è±¡æŒ‡é’ˆã€å¯¹è±¡å¼•ç”¨ã€å‡½æ•°æŒ‡é’ˆã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€ç±»æ•°æ®æˆå‘˜æŒ‡é’ˆä¹‹é—´çš„è½¬æ¢

#### [`dynamic_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)

åªæ¥å—åŸºäºç±»å¯¹è±¡çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„ç±»è½¬æ¢ï¼Œä¸”è¦æ±‚æºå’Œç›®æ ‡çš„ç±»å‹å…·**æœ‰ç»§æ‰¿å…³ç³»**ã€‚ä¸”è¯¥è½¬æ¢çš„å®ç°ä¾èµ–è™šå‡½æ•°è¡¨ï¼Œéœ€è¦æœ‰ `RTTI`æ”¯æŒã€‚

### å»ºè®®

|      ä¼ ç»Ÿè½¬æ¢      |       `static_cast`       |   `const_cast`   |     `daynamic_cast`     | `reinterpreter_cast` |
| :----------------: | :--------------------------: | :-----------------: | :-----------------------: | :--------------------: |
| **ä½¿ç”¨å¯¹è±¡** |          æœ‰ä¸€å®šå…³ç³»          |      æŒ‡é’ˆ/å¼•ç”¨      | åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„æŒ‡é’ˆ/å¼•ç”¨ |        ä»»æ„æŒ‡é’ˆ        |
| **ç±»å‹è¦æ±‚** |          åŸºæœ¬ç±»å‹é—´          | **å»** `cv` |         å¤šæ€ç±»é—´         |  ä¸åŒç±»å‹çš„æŒ‡é’ˆ/å¼•ç”¨  |
|   **å¤‡æ³¨**   | **ä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©** |                    |      éœ€ `RTTI`æ”¯æŒ      |    æ”¯æŒé€†è½¬æ¢æ‰å®‰å…¨    |
|  **è¿”å›å€¼**  |        ç­‰äºæ—§å€¼çš„å³å€¼        |   æŒ‡å‘æ—§å€¼çš„å³å€¼   |                          |    æ¯æ¯”ç‰¹ç›¸ç­‰çš„å³å€¼    |

+ `static_cast`å’Œ `reinterpret_cast`è¿ç®—ç¬¦è¦ä¹ˆç›´æ¥è¢«ç¼–è¯‘å™¨æ‹’ç»è¿›è¡Œè½¬æ¢ï¼Œè¦ä¹ˆå°±ä¸€å®šä¼šå¾—åˆ°ç›¸åº”çš„ç›®æ ‡ç±»å‹çš„å€¼ã€‚
+ `dynamic_cast`ä¼šå…ˆè¿›è¡Œåˆ¤åˆ«ï¼Œç¡®å®šæºæŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹æ˜¯å¦çœŸçš„åˆé€‚è¢«ç›®æ ‡æŒ‡é’ˆæ¥å—ã€‚å¦‚æœæ˜¯å¦å®šçš„ï¼Œé‚£ä¹ˆ `dynamic_cas`tåˆ™ä¼šè¿”å› `null`ã€‚è¿™æ˜¯é€šè¿‡æ£€æŸ¥**è¿è¡ŒæœŸç±»å‹ä¿¡æ¯**ï¼ˆRuntime type informationï¼ŒRTTIï¼‰æ¥åˆ¤å®šçš„ï¼Œå®ƒè¿˜å—åˆ°ç¼–è¯‘å™¨çš„å½±å“ï¼Œæœ‰äº›ç¼–è¯‘å™¨éœ€è¦è®¾ç½®å¼€å¯æ‰èƒ½è®©ç¨‹åºæ­£ç¡®è¿è¡Œã€‚
+ `const_cast<>`ä¸é€‚ç”¨äºè¿­ä»£å™¨çš„è½¬æ¢ã€‚å› ä¸ºå…¶åªæ˜¯ç”¨äºå»æ‰ç±»å‹å‰çš„é™å®šç¬¦ï¼Œè€Œ `const_iterator`å’Œ `iterator`æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»ï¼Œå…¶è½¬æ¢å¯ä»¥å€ŸåŠ© `void advance(ï¼Œint distance())`çš„å‡½æ•°ç»„åˆã€‚

# å…³é”®å­—è¡¥å……è¯´æ˜

## cvé™å®šç¬¦

### [`const`](https://blog.csdn.net/qfturauyls/article/details/110408027)

|  å¸¸é‡æ€§è´¨  |          ç‰¹ç‚¹          |             è¡¥å……             |
| :--------: | :--------------------: | :--------------------------: |
| ç‰©ç†å¸¸é‡æ€§ | æ¯ä¸ª `bit`éƒ½ä¸å¯æ”¹å˜ |   æŸäº›ä¿®æ”¹ä¼šè¿èƒŒé€»è¾‘å¸¸é‡æ€§   |
| é€»è¾‘å¸¸é‡æ€§ |   å¯¹è±¡çš„è¡¨ç°ä¿æŒä¸å˜   | å…è®¸æ”¹å˜å¯¹è±¡ä¸­å¤–éƒ¨ä¸å¯è§çš„åŸŸ |

C++ä¸­é‡‡ç”¨çš„æ˜¯**ç‰©ç†å¸¸é‡æ€§**ï¼Œå®ƒ**é€šè¿‡ç¼–è¯‘å™¨æ¥ä¿è¯å¯¹è±¡çš„å¸¸é‡æ€§**ï¼Œå¼ºåˆ¶ç¼–è¯‘å™¨é˜»æ­¢é™¤åˆå§‹åŒ–èµ‹å€¼ï¼ˆå¯åœ¨ç¼–è¯‘æœŸä¹Ÿ**å¯åœ¨è¿è¡Œæ—¶åˆå§‹åŒ–**ï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ‹å€¼è¡Œä¸ºã€‚è¢« `const`ä¿®é¥°çš„å˜é‡çš„å¯è§èŒƒå›´ä¸ºé»˜è®¤ä¸º**æ–‡ä»¶ä½œç”¨åŸŸ**ï¼ŒåŠ ä¸Š `extern`å…³é”®å­—å¯ä»¥æ‰©å±•å…¶ä½œç”¨åŸŸã€‚

#### `mutable`

é€šè¿‡ `mutable`å…³é”®å­—å¯ä»¥ä½¿ `const`ä¿®é¥°çš„å˜é‡æ”¯æŒä¸€å®šçš„é€»è¾‘å¸¸é‡æ€§ã€‚

#### `const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨

`const`ä¿®é¥°å¼•ç”¨æ—¶ï¼Œå…¶æ„ä¹‰ä¸ä¿®é¥°å˜é‡ç›¸åŒã€‚ä¿®é¥°æŒ‡é’ˆæ—¶å¯ä»¥å°†æ•´ä¸ªç±»å‹ç”³æ˜**æŒ‰å˜é‡åå·¦è¾¹æœ€è¿‘çš„*åˆ†æˆä¸¤éƒ¨åˆ†**ï¼Œ**å³è¾¹è¡¨ç¤ºæŒ‡é’ˆå˜é‡çš„æ€§è´¨ï¼Œå·¦è¾¹è¡¨ç¤ºå®ƒæŒ‡å‘å…ƒç´ çš„æ€§è´¨**ã€‚

#### `const`ä¿®é¥°å‡½æ•°

å½“**ä¿®é¥°ç±»çš„éé™æ€æˆå‘˜å‡½æ•°**ä¿è¯è¯¥å‡½æ•°æ‰€å¯¹åº”çš„å¯¹è±¡æœ¬èº«çš„ `const`æ€§ã€‚åœ¨ `const`æˆå‘˜å‡½æ•°ä¸­ï¼Œæ‰€æœ‰å¯èƒ½è¿èƒŒ `this`æŒ‡é’ˆï¼ˆæ­¤æ—¶ç­‰åŒäº**`const Type * const this`**ï¼‰ç±»å‹ç‰¹ç‚¹çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆèµ‹å€¼ã€å¯¹é `const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ã€å¯¹æˆå‘˜çš„é `const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ï¼Œå¯¹é `mutable`æˆå‘˜çš„ä¿®æ”¹ï¼‰ã€‚ä½†**å¯¹å£°æ˜ä¸º `mutable`çš„æˆå‘˜å˜é‡æ‰€åšçš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«é˜»æ­¢**ã€‚

**`const`ä¿®é¥°å‡½æ•°æ—¶è¿˜ä¼šå‚ä¸åˆ°å‡½æ•°çš„é‡è½½ä¸­**ï¼Œå³é€šè¿‡ `const`å¯¹è±¡ã€`const`æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨ `const`æ–¹æ³•ï¼Œ**å½“æ²¡æœ‰ä¸€èˆ¬æˆå‘˜å‡½æ•°æ—¶ï¼Œé `const`å¯¹è±¡/å¼•ç”¨/æŒ‡é’ˆä¹Ÿä¼šè°ƒç”¨ `const`æˆå‘˜æ–¹æ³•ã€‚**

**é‡è½½åŸå› **ï¼ˆä¸ªäººæ¨æµ‹ï¼‰ï¼šç±»æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è‡ªåŠ¨åŠ å…¥ `this`æŒ‡é’ˆå‚æ•°ï¼Œå¦‚å‰æ–‡æ‰€è¿°ï¼Œconstæˆå‘˜å‡½æ•°ä¼ é€’è¿‡æ¥çš„ `this`æŒ‡é’ˆçš„ç±»å‹æ˜¯å¸¦æœ‰ `const`é™å®šçš„ï¼Œæ­¤æ—¶ä¸¤ç§å‡½æ•°çš„å‡½æ•°ç­¾åä¹Ÿå°±æ˜¯ä¸åŒçš„ã€‚

#### `const`ä¸ `static`

`const`ï¼šç±»ä¸­çš„**å¸¸é‡å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰ `static`å±æ€§æ—¶é™¤å¤–**ï¼‰ã€‚

`static`ï¼šç±»ä¸­çš„**é™æ€å˜é‡å¿…é¡»åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰ `const`å±æ€§ä¸”ä¸ºåŸºæœ¬æ•´æ•°ç±»å‹æ—¶é™¤å¤–**ï¼Œæ­¤æ—¶ä¸ºå°±åœ°åˆå§‹åŒ–ï¼‰ã€‚å¦‚æœå°±åœ°åˆå§‹åŒ–ååœ¨ä»£ç ä¸­éœ€è¦åšå–å€¼ä¹‹å¤–çš„æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦åœ¨ç±»å¤–ç»™å®ƒæä¾›ä¸€ä¸ªå®šä¹‰ï¼ˆä¸éœ€è¦åˆå§‹å€¼ï¼‰ã€‚

```c++
class Test{
    const static int x = 0;//ok
    const static char y = '0';//ok
    const static float z = 3.14;//error ä¸æ˜¯åŸºæœ¬æ•´æ•°ç±»å‹
    constexpr float a = 3.14;//error,constç±»å‹å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨
    static constexpr float b = 3.14;//ok
    const static string c = string("hello");//error
};

Test test;
const char* py = &test.y;//error:undefined reference to `Test::y',éœ€è¦åœ¨ç±»å¤–æä¾›å®šä¹‰
```

## `CPP14: constexpr `

ä¸ºäº†è§£å†³ `const`å…·æœ‰çš„åªè¯»å’Œå¸¸é‡çš„åŒé‡è¯­ä¹‰é€ æˆçš„æ­§ä¹‰é—®é¢˜ï¼ŒC++11å¼•å…¥äº†**`constexpr`ï¼ˆéšå«äº† `const`å±æ€§ï¼‰ä»£è¡¨å¸¸é‡è¡¨è¾¾å¼**ï¼ˆå€¼ä¸ä¼šæ”¹å˜ä¸”åœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å¾—åˆ°ç»“æœçš„è¡¨è¾¾å¼ï¼‰ï¼Œè€Œç”¨**`const`ä»£è¡¨åªè¯»å˜é‡**ã€‚

### å¸¸é‡ä¸åªè¯»

**å¸¸é‡ä¸€å®šåªè¯»**ï¼šå¸¸é‡æ˜¯è¢«ç¼–è¯‘å™¨æ”¾åœ¨å†…å­˜ä¸­çš„åªè¯»åŒºåŸŸï¼Œå¯¹è¿™ä¸€ç‰‡å†…å­˜åªèƒ½è¯»å–è€Œä¸èƒ½å¤Ÿå»ä¿®æ”¹å®ƒã€‚ä»–ä»¬é€šå¸¸é€šè¿‡å­—é¢é‡ã€å®ã€æšä¸¾å€¼è¿›è¡Œå®šä¹‰ã€‚

**åªè¯»å˜é‡**ï¼šåªè¯»å˜é‡é¦–å…ˆ**æ˜¯ä¸€ä¸ªå˜é‡**ã€åªè¯»åªæ˜¯é™„åŠ åœ¨è¿™ä¸ªå˜é‡ä¸Šçš„ä¸€ä¸ªç‰¹æ€§ï¼Œç¼–è¯‘å™¨åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªåœ°æ–¹æ¥å­˜æ”¾å˜é‡çš„å€¼ï¼Œç”±ç¼–è¯‘å™¨é€šè¿‡ `const`ç­‰é™å®šæ­¤å€¼ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œä½†æˆ‘ä»¬ä»»ç„¶æœ‰å¯èƒ½ç»•è¿‡ç¼–è¯‘å™¨ä¿®æ”¹å…¶å€¼ã€‚

### `constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼

+ `constexpr`ä¿®é¥°çš„å‡½æ•°å¦‚æœç¼–è¯‘æœŸå¯ä»¥ç¡®å®šï¼ˆå‚æ•°éƒ½æ˜¯ `constexpr`ï¼‰å°±ç¡®å®šï¼Œå¦åˆ™çš„è¯å‡½æ•°æˆä¸ºæ™®é€šå‡½æ•°
+ `constexpr`å¯ä»¥ä¿®é¥°å‡½æ•°æ¨¡æ¿ï¼Œå¦‚æœå…¶å®ä¾‹åŒ–ç‰ˆæœ¬ä¸æ»¡è¶³ `constexpr`çš„è¦æ±‚åˆ™å‡½æ•°è‡ªåŠ¨é€€åŒ–ä¸ºæ™®é€šå‡½æ•°ã€‚

  1. è¢«ä¿®é¥°çš„å‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰è¢«å®šä¹‰ã€‚
  2. CPP11è¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ï¼Œè€Œä¸”å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€æ¡æœ‰æ•ˆè¯­å¥ï¼ˆå¯ä»¥æœ‰ `static_assertï¼Œusingï¼Œtypedef`ç­‰ä¸ä¼šäº§ç”Ÿå®é™…ä»£ç çš„è¯­å¥ï¼‰ï¼Œè¯¥è¯­å¥ä¸º `return`è¯­å¥ã€‚
  3. CPP14åªè¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ã€‚
  4. è¢«ä¿®é¥°çš„å‡½æ•°åªèƒ½è°ƒç”¨å…¶ä»– `constexpr`ä¿®é¥°çš„å‡½æ•°ã€åªèƒ½å¼•ç”¨å…¨å±€ä¸å˜å¸¸é‡ã€‚

### `constexpr`ä¿®é¥°å˜é‡

`constexpr`ä¿®é¥°çš„å˜é‡ç±»å‹åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€å¼•ç”¨å’Œè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆéœ€**æ»¡è¶³è¦æ±‚**ï¼‰ï¼Œä¸èƒ½æ˜¯å…¶å®ƒæ ‡å‡†åº“ç±»å‹ã€‚ä¸”éšå«è¦æ±‚äº†è¯¥å˜é‡ä¸º `const`ç±»å‹ï¼Œå…¶**å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š**ã€‚

1. è¦æ±‚ï¼šè‡ªå®šä¹‰**å¸¸é‡æ„é€ å‡½æ•°+ç©ºæ„é€ å‡½æ•°+åˆå§‹åŒ–åˆ—è¡¨ç”±å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼**

   ```cpp
   class Point{
       public:
           constexpr Point( double x = 0, double y = 0 ): x_( x ), y_( y ){  }
       private:
           double x_, y_;
   };
   constexpr string str = "hello"; // error: constexpr variable cannot have non-literal type
   constexpr Point pt( 10, 20 ); // Evaluate at compiling time
   ```

### `constexpr`ä¿®é¥°æŒ‡é’ˆ

å¯¹äºæŒ‡é’ˆè€Œè¨€ï¼Œ`constexpr`**ä»…å¯¹æŒ‡é’ˆæœ¬èº«æœ‰æ•ˆ**ï¼Œ**ä¸æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡æ— å…³**ï¼Œè¢«å…¶ä¿®é¥°çš„æŒ‡é’ˆ**æ—¢å¯ä»¥æŒ‡å‘å¸¸é‡ä¹Ÿå¯ä»¥æŒ‡å‘å˜é‡**ã€‚

## `volatile`

+ å«ä¹‰ï¼šè¢« `volatile`ä¿®é¥°çš„å˜é‡è¡¨æ˜å®ƒ**å¯èƒ½è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹**ï¼ˆæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ï¼‰ã€‚
+ è¡¨ç°ï¼ˆ**ä¸ä¼˜åŒ–ã€ä¸ç¼“å­˜**ï¼‰ï¼šç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç ä¸å†è¿›è¡Œä¼˜åŒ–ï¼›åœ¨è¿è¡Œæ—¶ç³»ç»Ÿæ€»æ˜¯é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œå³ä½¿å®ƒå‰é¢çš„æŒ‡ä»¤åˆšåˆšä»è¯¥å¤„è¯»å–è¿‡æ•°æ®ï¼Œè€Œä¸”è¯»å–çš„æ•°æ®ç«‹åˆ»è¢«ä¿å­˜ã€‚

### ä½¿ç”¨åœºæ™¯

1. ä¸­æ–­æœåŠ¡ç¨‹åºä¸­ä¿®æ”¹çš„ä¾›å…¶å®ƒç¨‹åºæ£€æµ‹çš„å˜é‡éœ€è¦åŠ  `volatile`
2. å¹¶è¡Œè®¾å¤‡çš„ç¡¬ä»¶å¯„å­˜å™¨
3. å¤šä»»åŠ¡ç¯å¢ƒä¸‹å„ä»»åŠ¡é—´å…±äº«çš„æ ‡å¿—åº”è¯¥åŠ  `volatile`ï¼›
4. å­˜å‚¨å™¨æ˜ å°„çš„ç¡¬ä»¶å¯„å­˜å™¨é€šå¸¸ä¹Ÿè¦åŠ  `volatile` è¯´æ˜ï¼Œå› ä¸ºæ¯æ¬¡å¯¹å®ƒçš„è¯»å†™éƒ½å¯èƒ½ç”±ä¸åŒæ„ä¹‰ï¼›

# é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)

## é‡è½½**overload**

æ¶‰åŠçš„å¤šæ–¹åœ¨**åŒä¸€ä¸ªä½œç”¨åŸŸ**ä¸­(åŒä¸€ç±»ä¸­æˆ–è€…éƒ½åœ¨å…¨å±€ä½œç”¨åŸŸ...)ï¼Œä¸”å¤šæ–¹çš„å‡½æ•°åä¸€å®šç›¸åŒï¼Œå‡½æ•°å‚æ•°åˆ—è¡¨ä¸€å®šä¸åŒï¼Œé‡è½½å’Œè¢«é‡è½½å‡½æ•°å¯ä»¥è¢«virtualä¿®é¥°ä¹Ÿå¯ä»¥ä¸è¢«ä¿®é¥°ã€‚

### [é‡è½½å†³è®®](https://zh.cppreference.com/w/cpp/language/overload_resolution)

ä¸ºäº†ç¼–è¯‘å‡½æ•°è°ƒç”¨ï¼Œç¼–è¯‘å™¨å¿…é¡»ç»å†åå­—æŸ¥æ‰¾ã€é‡è½½å†³è®®ã€å¯è®¿é—®æ€§æ£€æŸ¥ã€ç¼–è¯‘å‡½æ•°ç­‰è¿‡ç¨‹ã€‚è¯¦ç»†å†…å®¹ï¼šã€ŠC++ Primer Plusï¼ˆç¬¬äº”ç‰ˆï¼‰ã€‹8.5.4å°èŠ‚ã€‚

#### [åå­—æŸ¥æ‰¾](https://zh.cppreference.com/w/cpp/language/lookup)

å°†è¦è°ƒç”¨çš„å‡½æ•°ä¸å…·æœ‰ç›¸åŒå‡½æ•°åçš„å¤šä¸ªå‡½æ•°ç”³æ˜å»ºç«‹è”ç³»ã€‚å¯¹äºæ™®é€šå‡½æ•°çš„åå­—æŸ¥æ‰¾å¯èƒ½æ¶‰åŠ[å®å‚ä¾èµ–æŸ¥æ‰¾](https://zh.cppreference.com/w/cpp/language/adl)ï¼Œè€Œå¯¹äºå‡½æ•°æ¨¡æ¿å¯èƒ½åéš[æ¨¡æ¿å®å‚æ¨å¯¼](https://zh.cppreference.com/w/cpp/language/template_argument_deduction)ã€‚è‹¥è¿™äº›æ­¥éª¤äº§ç”Ÿå¤šäºä¸€ä¸ªå€™é€‰å‡½æ•°ï¼Œåˆ™è¿›è¡Œé‡è½½å†³è®®é€‰æ‹©å°†è¦å®é™…è°ƒç”¨çš„å‡½æ•°ã€‚

#### é‡è½½å†³è®®

##### [å‚æ•°ç±»å‹åŒ¹é…](https://doowzs.com/blog/2020-05-06-cpp-interview-questions/)

å‡†ç¡®åŒ¹é… > ç±»å‹æå‡è½¬æ¢ > éšå¼è½¬æ¢ >  ç”¨æˆ·å®šä¹‰çš„ç±»ç±»è½¬æ¢

- å‡†ç¡®åŒ¹é…ï¼šä¸è¦æ±‚è½¬æ¢ï¼›å€¼ â†” å¼•ç”¨ï¼›å·¦å€¼â†’å³å€¼ï¼›`[] â†’*`ï¼›`type(argument-list â†’(type *)(argument-list)`ã€é™å®šæ€§åŠ å¼ºçš„è½¬æ¢ï¼ˆ`type â†’const/volatile typeã€type*â†’ const/volatile type*`ï¼‰ã€‚
- æå‡è½¬æ¢ï¼ˆæ•´å‹æå‡ã€æµ®ç‚¹æå‡ï¼‰ï¼š`char/shortâ†’ intâ†’ floatâ†’ double`ã€‚
- éšå¼è½¬æ¢ï¼šæ•´å‹è½¬æ¢ã€æµ®ç‚¹è½¬æ¢ã€æµ®ç‚¹æ•´å‹è½¬æ¢ã€æŒ‡é’ˆè½¬æ¢ã€æˆå‘˜æŒ‡é’ˆè½¬æ¢ã€å¸ƒå°”è½¬æ¢ã€‚
- ç”¨æˆ·å®šä¹‰çš„ç±»ç±»å‹è½¬æ¢ï¼šç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œç±»å‹è½¬æ¢å‡½æ•°ç­‰ã€‚

  ![å‚æ•°ç±»å‹åŒ¹é…è§„åˆ™](/home/linbird/Londa/img/lang/pair-order.jpg)

##### å‡½æ•°åŒ¹é…é¡ºåº

æ™®é€šå‡½æ•° > æ™®é€šæ¨¡æ¿å‡½æ•°ï¼ˆæœªç‰¹åŒ–çš„æ¨¡æ¿ï¼‰ > å…¨ç‰¹åŒ–å‡½æ•°ã€‚å½“æ™®é€šæ¨¡æ¿å‡½æ•°ä¸å…¨ç‰¹åŒ–æ¨¡æ¿éƒ½èƒ½åŒ¹é…å‡½æ•°å‚æ•°æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©åœ¨åŒ¹é…ç±»å‹çš„è¿‡ç¨‹ä¸­éœ€è¦è½¬æ¢/å¢åŠ å…³é”®å­—æ¬¡æœ€å°‘çš„å‡½æ•°ã€‚

```c++
struct A {};
struct B: public A {};
struct C {};

void foo(A const&) {}///#1
void foo(B const&) {}///#2

foo( A() );///åŒ¹é…#2å¤±è´¥ï¼ŒåŒ¹é…#1æˆåŠŸã€‚é€šè¿‡ç¼–è¯‘
foo( B() );///åŒ¹é…#2æˆåŠŸï¼ŒåŒ¹é…#1æˆåŠŸã€‚æœ‰ä¸¤ä¸ªå€™é€‰ï¼Œ#2å®Œå…¨åŒ¹é…ï¼Œæœ€ç»ˆä½¿ç”¨#2é€šè¿‡ç¼–è¯‘
foo( C() );///åŒ¹é…#2å¤±è´¥ï¼ŒåŒ¹é…#1å¤±è´¥ã€‚ä¸èƒ½é€šè¿‡ç¼–è¯‘
```

#### å¯è®¿é—®æ€§æ£€æŸ¥

[æˆå‘˜è®¿é—®](https://zh.cppreference.com/w/cpp/language/access)çš„è§„åˆ™åªä¼šåœ¨åå­—æŸ¥æ‰¾å’Œé‡è½½è§£æä¹‹åæ‰ä¼šè¿›è¡Œï¼Œä¹‹å‰çš„åå­—æŸ¥æ‰¾å’Œé‡è½½å†³è®®å¹¶ä¸ä¼šè€ƒè™‘æˆå‘˜çš„å¯è®¿é—®æ€§ã€‚è®¿é—®æ£€æŸ¥åå¦‚æœä»æœ‰å¤šä¸ªå€™é€‰å‡½æ•°ï¼Œåˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ä¾›å€™é€‰åˆ™å®ä¾‹åŒ–è¯¥å‡½æ•°ã€‚

## è¦†ç›–**override**

æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªç±»ä¸­**ï¼Œå¤šæ–¹çš„å‡½æ•°åã€å‚æ•°åˆ—è¡¨ä»¥åŠè¿”å›å€¼ç±»å‹å®Œå…¨ç›¸åŒï¼ŒåŸºç±»çš„å‡½æ•°å¿…é¡»ç”±virtualä¿®é¥°ï¼Œå­ç±»é‡å†™çš„æ–¹æ³•å¯ä»¥åŠ  `override`å…³é”®å­—ã€‚**è¿”å›å€¼ç±»å‹å¯ä»¥ä¸åŒ**ï¼Œæ­¤æ—¶ä¸åŒæ˜¯æŒ‡å‡½æ•°è¿”å›æœ¬ç±»ç±»å‹çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µç§°ä¸º**åå˜**ã€‚

## æ”¹å†™**overwrite**/éšè—

æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªä½œç”¨åŸŸ**ï¼Œå¤šæ–¹çš„å‡½æ•°åä¸€å®šç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸ä¸€å®šç›¸åŒï¼Œä¹Ÿæ— è®ºåŸºç±»å‡½æ•°æ˜¯å¦è¢«virtualä¿®é¥°ã€‚è¢«éšè—çš„å‡½æ•°æ— æ³•é€šè¿‡å­ç±»è°ƒç”¨åˆ°ï¼Œå³ä½¿å®å‚æ•°åˆ—è¡¨å®Œå…¨åŒ¹é…è¢«éšè—å‡½æ•°çš„å½¢å¼å‚æ•°åˆ—è¡¨ã€‚

## æ€»ç»“

|                        | é‡è½½overload |               è¦†ç›–override               |      æ”¹å†™overwrite/éšè—      |
| :---------------------: | :----------: | :---------------------------------------: | :--------------------------: |
|    **å…³é”®å­—**    |      æ—       |                 override                 |              æ—               |
|    **ä½œç”¨åŸŸ**    |  åŒä¸€ä½œç”¨åŸŸ  |                ç»§æ‰¿ç±»ä¹‹é—´                |          å¤šä¸ªä½œç”¨åŸŸ          |
| **virtualå…³é”®å­—** |   å¯æœ‰å¯æ—    |                çˆ¶ç±»å¿…é¡»æœ‰                | å¯æœ‰å¯æ— (å’Œè¦†ç›–å†²çªåˆ™ä¸ºè¦†ç›–) |
|    **æ–¹æ³•å**    |   å®Œå…¨ç›¸åŒ   |                 å®Œå…¨ç›¸åŒ                 |           å®Œå…¨ç›¸åŒ           |
|   **æ–¹æ³•å‚æ•°**   |     ä¸åŒ     |                 å®Œå…¨ç›¸åŒ                 |          å¯åŒå¯ä¸åŒ          |
|  **è¿”å›å€¼ç±»å‹**  |  å¯åŒå¯ä¸åŒ  | ä¸€èˆ¬ç›¸åŒï¼ˆä¸åŒï¼šåå˜,è¿”å›thisæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰ |          å¯åŒå¯ä¸åŒ          |
|     **ä½œç”¨**     |   é™æ€å¤šæ€   |                 åŠ¨æ€å¤šæ€                 |     å±è”½å…¶ä»–ä½œç”¨åŸŸçš„å½±å“     |

# å¼‚å¸¸å¤„ç†

* C++å¤„ç†å¼‚å¸¸çš„æœºåˆ¶æ˜¯ç”±æ£€æŸ¥(try)ã€æŠ›å‡º(throw)å’Œæ•æ‰(catch)3ä¸ªéƒ¨åˆ†ç»„æˆ
* å½“å¼‚å¸¸è¢«æ­£ç¡®æ•æ‰åï¼Œæ‰€æœ‰ä»tryåˆ°throwè¯­å¥ä¹‹é—´æ„é€ èµ·æ¥çš„å¯¹è±¡çš„ææ„å‡½æ•°å°†è¢«è‡ªåŠ¨è°ƒç”¨ã€‚å¦åˆ™å½“ç³»ç»Ÿè°ƒç”¨terminate()ç»ˆæ­¢æ•´ä¸ªç¨‹åºï¼Œè¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä¿è¯æ‰€æœ‰å±€éƒ¨å¯¹è±¡ä¼šè¢«æ­£ç¡®åœ°é”€æ¯ã€‚

## catchå—

* Catchå—å¯ä»¥ä»»ä½•é¡ºåºæ’åˆ—ï¼Œå¼‚å¸¸å¤„ç†çš„é¡ºåºæ˜¯é¦–å…ˆè¿›å…¥ä¸å¼‚å¸¸ç±»å‹åŒ¹é…ä¸”ç¦»æŠ›å‡ºå¼‚å¸¸ä½ç½®æœ€è¿‘çš„é‚£ä¸€ä¸ªã€‚
* catchå—ä»…é€šè¿‡ç±»å‹è€Œä¸æ˜¯é€šè¿‡å€¼æ¥åŒ¹é…çš„ï¼Œæ‰€ä»¥catchå—çš„å‚æ•°å¯ä»¥æ²¡æœ‰å‚æ•°åç§°ï¼Œåªéœ€è¦å‚æ•°ç±»å‹ã€‚
* å¦‚æœç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸æ²¡æœ‰å¯¹åº”ç±»å‹çš„catchå—æ•æ‰å¤„ç†ï¼Œé»˜è®¤å°†ä¼šæŠŠè¿™ç§å¼‚å¸¸äº¤ç»™unexpected()å‡½æ•°å¤„ç†ã€‚
* catchå—ä¸èƒ½è®¿é—®tryå—ä¸­å®šä¹‰çš„å˜é‡

### catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢

1. éå¸¸é‡è½¬æ¢åˆ°å¸¸é‡çš„ç±»å‹è½¬æ¢
2. æ´¾ç”Ÿç±»åˆ°åŸºç±»çš„è½¬æ¢
3. æ•°ç»„è¢«è½¬æ¢æˆä¸ºæŒ‡å‘æ•°ç»„ï¼ˆå…ƒç´ ï¼‰ç±»å‹çš„æŒ‡é’ˆï¼Œå‡½æ•°è¢«è½¬æ¢æˆæŒ‡å‘è¯¥å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼ˆé™çº§é—®é¢˜ï¼‰
4. æ ‡å‡†ç®—æœ¯ç±»å‹çš„è½¬æ¢å’Œç±»ç±»å‹è½¬æ¢(ä½¿ç”¨ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦å’Œè½¬æ¢æ„é€ å‡½æ•°)ã€‚

## throw

* throwå…ˆé€šè¿‡Copyæ„é€ å‡½æ•°æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå†æŠŠè¯¥æ–°å¯¹è±¡ä¼ é€’ç»™ catch.
* å¼‚å¸¸æŠ›å‡ºçš„æ–°å¯¹è±¡å¹¶éåˆ›å»ºåœ¨å‡½æ•°æ ˆä¸Šï¼Œè€Œæ˜¯åˆ›å»ºåœ¨ä¸“ç”¨çš„å¼‚å¸¸æ ˆä¸Šï¼Œå› æ­¤å®ƒæ‰å¯ä»¥è·¨æ¥å¤šä¸ªå‡½æ•°è€Œä¼ é€’åˆ°ä¸Šå±‚

## å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨

* C++ å…è®¸åœ¨å‡½æ•°å£°æ˜å’Œå®šä¹‰æ—¶ï¼Œåœ¨å‡½æ•°çš„()åæ–¹åŠ ä¸Šthrowå…³é”®å­—å’Œå®ƒæ‰€èƒ½æ‹‹å‡ºçš„å¼‚å¸¸ç±»å‹åˆ—è¡¨ã€‚å¦‚æœä¸å†™åˆ™è¡¨ç¤ºå¯ä»¥æŠ›å‡ºä»»æ„ç±»å‹çš„å¼‚å¸¸ï¼Œåˆ—è¡¨ä¸ºç©ºä»£è¡¨ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

## å¼‚å¸¸ç§ç±»

### æ ‡å‡†å¼‚å¸¸

* æ ‡å‡†å¼‚å¸¸éƒ½æ˜¯ä»ç±» `exception`ä¸­æ´¾ç”Ÿçš„ç±»ï¼Œéƒ½å«æœ‰æ–¹æ³• `what()`ç”¨ä»¥ä»¥å­—ç¬¦ä¸²å½¢å¼æ˜¾å¼å¼‚å¸¸ä¿¡æ¯ã€‚
  ![](./img/lang/exception.jpg)

### è‡ªå®šä¹‰å¼‚å¸¸

* éœ€è¦ä»æ ‡å‡†å¼‚å¸¸ä¸­ç»§æ‰¿

# çº¿ç¨‹ä¸åŸå­æ“ä½œ

[çº¿ç¨‹å’ŒåŸå­æ“ä½œ](./C++å¹¶å‘.md)

# C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§

## C++ 11

### `tuple`å®¹å™¨(CPP11)

+ ä½œç”¨ï¼šæä¾›ä¸€ä¸ªå¯ä»¥å­˜å‚¨å¤šç§å¤šä¸ªç±»å‹çš„å€¼çš„ä¸€ä¸­æ³›å‹å®¹å™¨ç±»ã€‚
+ å¯¹ `tuple<>`ç±»å‹çš„è®¿é—®æœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯ `std::get<index>(obj)`æ–¹æ³•ï¼Œä¸€ç§æ˜¯ `std::tie(varname...) = var`æ–¹æ³•ã€‚å‰è€…éœ€è¦æä¾›æ‰€éœ€æˆå‘˜åœ¨tupleä¸­çš„ä¸‹æ ‡indexï¼Œåè€…æ‹¬å·å†…çš„varnameéƒ½å¿…é¡»æå‰ç”³æ˜ã€‚

### `decltype`åç½®è¿”å›ç±»å‹

+ `auto function_name(Args...) -> decltype`(è¿”å›ç±»å‹è®¡ç®—è¡¨è¾¾å¼);

### æ–°åˆå§‹åŒ–æœºåˆ¶

#### [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)

#### [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)

#### [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)

### å¤–éƒ¨æ¨¡æ¿(CPP11)

+ èƒŒæ™¯ï¼šæ¨¡æ¿å‡½æ•°åœ¨ä¸åŒçš„ç¼–è¯‘å•å…ƒå¯èƒ½è¢«åŒä¸€ä¸ªç±»å‹å®ä¾‹åŒ–å¤šæ¬¡é€ æˆä»£ç è†¨èƒ€(é“¾æ¥æ—¶æ˜¯éšæœºé€‰å–ä¸€ä¸ªå®ä¾‹åŒ–åçš„æ¨¡æ¿)ã€‚
+ å½¢å¼:`extern template [class] function_name/class_name<å®ä¾‹åŒ–çš„ç±»å‹>[(Args...)]`;
+ æ˜¾å¼å‘Šè¯‰ç¼–è¯‘å™¨ä½•æ—¶è¿›è¡Œæ¨¡æ¿çš„å®ä¾‹åŒ–ï¼Œä¸Šå¼çš„æ„æ€æ˜¯å‘ŠçŸ¥ç¼–è¯‘å™¨æ­¤æ—¶ä¸è¦å®ä¾‹åŒ–ï¼Œå®ä¾‹åŒ–å·²ç»åœ¨å…¶å®ƒåœ°æ–¹å®ç°ã€‚

### ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·

### ç±»å‹åˆ«å

**`typedef Old/CertainType NewType`**ä¹Ÿå¯ä»¥å®šä¹‰ç±»å‹åˆ«åï¼Œä½†æ˜¯å…¶è¡¨è¾¾æ–¹å¼ä¸å¤Ÿç›´è§‚ï¼Œä¹Ÿç¼ºä¹å¯¹æ¨¡æ¿çš„ä¸€äº›æ”¯æŒï¼Œäºæ˜¯C++11å¼•å…¥äº† `using`ï¼Œä½¿ç”¨** `using NewType = Old/CertainType`**å¯ä»¥å®Œæˆå’Œ `typedef`ä¸€æ ·å®šä¹‰ç±»å‹åˆ«åçš„å·¥ä½œï¼Œ`using`åŒæ—¶æ”¯æŒäº† `typedef`ä¸æ”¯æŒçš„åŠŸèƒ½ï¼ˆå¯¹æ¨¡æ¿åˆ«åçš„æ”¯æŒï¼‰ã€‚

å’Œå½“åœ¨ç±»ä¸­æˆ–åˆ«çš„ä½œç”¨åŸŸä¸­å®šä¹‰äº†ç±»å‹åˆ«åè€Œåˆæƒ³è·å–å…¶ä¸­çš„ç±»å‹æ—¶ï¼Œå¿…é¡»åœ¨è¿™ä¸ªç±»å‹å‰åŠ ä¸Š**`typename`**ä»¥é¿å…ç¼–è¯‘å™¨å°†ç±»ä¸­çš„ç±»å‹å½“ä½œæ™®é€šå˜é‡ã€‚

```c++
template <typename T> class MyStack{
	public:	typedef int iterator0;
};

class HeStack{
	public:
		typedef int iterator0;
		using iterator1 = int;
};

typedef void (*FP)(int, const std::string&);/// ä¸ºæ™®é€šå‡½æ•°å®šä¹‰åˆ«åFP
typedef std::string (Foo::*fooMemFnPtr) (const std::string&);/// ä¸ºç±»æˆå‘˜å‡½æ•°å®šä¹‰åˆ«åfooMemFnPtr
typedef stack<int> IntStack;//ä¸ºåº“ä¸­çš„å®ä¾‹åŒ–æ¨¡æ¿å®šä¹‰åˆ«åIntStack
using FP = void (*)(int, const std::string&);/// ä¸ºæ™®é€šå‡½æ•°å®šä¹‰åˆ«å
using fooMemFnPtr = std::string (Foo::*) (const std::string&);/// ä¸ºç±»æˆå‘˜å‡½æ•°å®šä¹‰åˆ«å
using IntStack = stack<int>;//ä¸ºåº“ä¸­çš„å®ä¾‹åŒ–æ¨¡æ¿å®šä¹‰åˆ«å

template <typename T> using AliasAtack = MyStack<T>;///ä¸ºæ¨¡æ¿ç±»å®šä¹‰åˆ«å
//template <typename T> typedef MyStack<T> AliasAtack;//typedefä¸æ”¯æŒæ¨¡æ¿ï¼Œç¼–è¯‘é”™è¯¯ã€‚

typedef typename HeStack::iterator0 Aliasitr1;
template <typename T> using alais_iter0 = typename MyStack<T>::iterator0;
template <typename T> using alais_iter1 = typename MyStack<T>::iterator1;
//template <typename T> typedef typename MyStack<T>::iterator0 Aliasitr0;//typedefä¸æ”¯æŒæ¨¡æ¿ï¼Œç¼–è¯‘é”™è¯¯ã€‚
```

### `nullptr`

ä¸ºäº†**é˜²æ­¢é‡æŒ‡é’ˆ**ã€ç¨‹åºéœ€è¦å°†ä¸€äº›æŒ‡é’ˆè®¾ç½®ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨Cå¯ä»¥ä½¿ç”¨ `NULLã€0ã€(type *)0`æ¥ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå…¶ä¸­çš„ `NULL`æ˜¯æ ‡å‡†åº“ä¸­çš„å®å®šä¹‰ï¼ŒC/C++æ ‡å‡†è§„å®šå…¶å€¼ï¼ˆç”±å®ç°å®šä¹‰ï¼‰ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆå¸¸é‡ã€‚

```c++
#if defined(__cplusplus)
	# define NULL 0    // C++ä¸­ä½¿ç”¨0ä½œä¸ºNULLçš„å€¼
#else
	# define NULL ((void *)0)    // Cä¸­ä½¿ç”¨((void *)0)ä½œä¸ºNULLçš„å€¼
#endif
```

åœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œå‡ºäºå…¼å®¹æ€§çš„è€ƒè™‘ï¼Œå­—é¢å¸¸é‡0çš„äºŒä¹‰æ€§å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ã€‚ä½†æ–°æ ‡å‡†æä¾›äº†ç¼–è¯‘æœŸå¸¸é‡ `nullptr`ä»£è¡¨æŒ‡é’ˆç©ºå€¼ç±»å‹çš„å¸¸é‡ã€‚

```c++
typedef decltype(nullptr) nullptr_t;
```

|     å€¼     |              æœ¬è´¨              |               è¿ç®—               |
| :---------: | :-----------------------------: | :------------------------------: |
|  `NULL`  |    æ ‡å‡†åº“å®šä¹‰çš„**å®**    |        æ”¯æŒç®—æœ¯ã€å…³ç³»è¿ç®—        |
| `nullptr` | `nullptr_t`ç±»å‹çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ | ä¸æ”¯æŒç®—æœ¯ã€ä»…æ”¯æŒä¸æŒ‡é’ˆå…³ç³»è¿ç®— |

`nullptr_t`ç±»å‹æ•°æ®å¯ä»¥éšå¼è½¬æ¢æˆä»»æ„ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œä¸èƒ½ä»¥ä»»ä½•æ‰‹æ®µï¼ˆåŒ…å« `reinterpret_acst<>()`ï¼‰è½¬æ¢ä¸ºä»»æ„å…¶ä»–éæŒ‡é’ˆç±»å‹ã€‚

æ‰€æœ‰ `nullptr_t`ç±»å‹çš„æ•°æ®æ˜¯ç­‰ä»·çš„ã€ä¸èƒ½å‚ä¸ç®—æœ¯è¿ç®—ã€åªèƒ½å’ŒæŒ‡é’ˆç±»å‹è¿›è¡Œå…³ç³»è¿ç®—ã€‚

### å¯å˜å‚æ•°

å‚æ•°ä¸ªæ•°ä¸ºä»»æ„å¤šä¸ªï¼ˆC++ä¸­å¯ä»¥ä¸º0ä¸ªï¼‰ã€‚

#### å¯å˜å‡½æ•°å‚æ•°

| [å…¥æ ˆè§„åˆ™](https://blog.csdn.net/yexiangCSDN/article/details/83900366) |   æ¸…ç†æ–¹   |                å‚æ•°é¡ºåº                |        å‡½æ•°ç­¾åè§„åˆ™        |
| :-----------------------------------------------------------------: | :--------: | :------------------------------------: | :------------------------: |
|                              `cdecl`                              | å‡½æ•°è°ƒç”¨æ–¹ |                ä»å³å‘å·¦                |       ä¸‹åˆ’çº¿+å‡½æ•°å       |
|                             `stdcall`                             | è¢«è°ƒç”¨å‡½æ•° |                ä»å³å‘å·¦                | ä¸‹åˆ’çº¿+å‡½æ•°å+@+å‚æ•°å­—èŠ‚æ•° |
|                            `fastcall`                            | è¢«è°ƒç”¨å‡½æ•° | å‰ä¸¤ä¸ª `DWORD`è¿›å¯„å­˜å™¨ï¼Œå…¶ä½™è‡ªå³å‘å·¦ |    @+å‡½æ•°å+@å‚æ•°å­—èŠ‚æ•°    |
|                             `pacall`                             | è¢«è°ƒç”¨å‡½æ•° |                ä»å·¦å‘å³                |            å¤æ‚            |

å¯å˜å‚æ•°çš„å®ç°**ä¾èµ–äºå‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„**ï¼ŒCä¸­çš„å¯å˜å‚æ•°ç”±**å¼ºåˆ¶å‚æ•°**ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰å’Œ**å¯é€‰å‚æ•°**ï¼ˆç±»å‹å¯å˜åŒ–ã€æ•°é‡ç”±å¼ºåˆ¶å‚æ•°æˆ–å¯é€‰å‚æ•°åˆ—è¡¨ä¸­çš„ç‰¹æ®Šå€¼å†³å®šï¼‰ä¸¤éƒ¨åˆ†æ„æˆã€‚å¸¸è§„çš„å‡½æ•°è°ƒç”¨å‚æ•°å…¥æ ˆè§„åˆ™æ˜¯ä»å³åˆ°å·¦å…¥æ ˆçš„ï¼Œè¿™æ ·æœ€å·¦è¾¹çš„å¼ºåˆ¶å‚æ•°ä¼šåœ¨æœ€åå…¥æ ˆï¼Œå…¶åœ°å€å°±æ˜¯æ ˆä¸­æœ‰æ•ˆå‚æ•°çš„è¾¹ç•Œã€‚ç”±äº**å†…å­˜å¯¹é½**ï¼Œæ ˆä¸­å‚æ•°çš„æœ‰æ•ˆæ•°æ®å¹¶ä¸æ˜¯ç›¸é‚»çš„ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å˜å‚çš„ç±»å‹å°†å…¶æ”¾åˆ°æ»¡è¶³ç±»å‹å¯¹é½çš„åœ°å€ä¸Šï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨åœ¨32ä½OSä¸‹å°†**æ ˆå•å…ƒ**é™å®šä¸º `sizeof(int)`ï¼Œ**æ¯ä¸ªå‚æ•°æ‰€å å¤§å°ä»¥æ ˆå•å…ƒä¸ºåŸºç¡€å•ä½**ã€‚

åŸºäºä»¥ä¸Šå­˜å‚¨ç»“æ„ç‰¹å¾ï¼Œå¯å˜å‚æ•°å‡½æ•°å¿…é¡»**ä»å¼ºåˆ¶å‚æ•°æ¥é€ä¸ªå¯»å€åç»­çš„æ‰€æœ‰å¯å˜å‚æ•°çš„ç±»å‹åŠå…¶å€¼**ã€‚ä¸ºæ­¤Cæ ‡å‡†åº“ `stdarg.h`æä¾›äº†ä¸€ç³»åˆ—å®ç”¨æ¥è§£æå¯å˜å‚æ•°ã€‚

```c
typedef char* va_list;//å‚æ•°æŒ‡é’ˆç±»å‹ï¼šç”¨è¯¥ç±»å‹çš„å˜é‡ä»£è¡¨æ ˆè¾¹ç•Œï¼ˆå½“å‰å‚æ•°ï¼‰çš„åœ°å€

void va_start(va_list argptr, lastparam);//å¿…é¡»å…ˆè°ƒç”¨è¯¥å®ï¼Œæ‰å¯ä»¥å¼€å§‹ä½¿ç”¨å¯é€‰å‚æ•°ï¼šè¯¥å®ä½¿ç”¨æœ€åä¸€ä¸ªæœ‰åç§°å‚æ•°çš„ä½ç½®æ¥åˆå§‹åŒ–argptrå‚æ•°æŒ‡é’ˆ

type va_arg(va_list argptr, type);//å°†argptræ‰€æŒ‡å‘çš„åœ°å€çš„æ•°æ®è§£é‡Šä¸ºtypeå¹¶è¿”å›ï¼Œå‚æ•°æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ­£ç¡®ä½ç½®

void va_end(va_list argptr);//å½“ä¸å†éœ€è¦ä½¿ç”¨å‚æ•°æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤å®

void va_copy(va_list dest, va_list src);//ä½¿ç”¨å½“å‰çš„srcå€¼æ¥åˆå§‹åŒ–å‚æ•°æŒ‡é’ˆdest
```

#### [å¯å˜æ¨¡æ¿å‚æ•°](https://www.cnblogs.com/qicosmos/p/4325949.html)

##### å¯å˜å‚æ•°æ¨¡æ¿ç±»

```c++
template< class... Types > class tuple;///åº“ä¸­çš„tupleç±»
```

å…¶å‚æ•°çš„å±•å¼€å¯ä»¥å€ŸåŠ©åç‰¹åŒ–æˆ–è€…ç»§æ‰¿æ¥å®Œæˆã€‚

###### åç‰¹åŒ–å±•å¼€

å…¶å±•å¼€åŸç†ä¸é€’å½’å±•å¼€ç±»ä¼¼ï¼Œåˆ©ç”¨äº†æ¨¡æ¿çš„å‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæ¯æ¬¡å±•å¼€éƒ½ä¼šè¿›å…¥ä¸€ä¸ªåç‰¹åŒ–çš„ç±»ä¸­ã€‚ä»¥ä¸‹çš„ `struct Sum`å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå¯å˜æ¨¡æ¿ç±»çš„å‚æ•°å¤§å°ä¹‹å’Œã€‚

```c++
template<typename First, typename ...Rest> struct Sum{///æ­¤å†™æ³•è¦æ±‚è‡³å°‘ä¸€ä¸ªç±»æ¨¡æ¿å‚æ•°
    int value = Sum<First>::value + Sum<Rest...>::value;///é€’å½’è¿›å…¥åç‰¹åŒ–å±•å¼€å‚æ•°
}

template<typename End, typename End_1> struct Sum<End, End_1>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…åªæœ‰ä¸¤ä¸ªå‚æ•°æ—¶ç»“æŸé€’å½’
    int value = sizeof(End) + sizeof(End_1);
}

template<typename End> struct Sum<End>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ç»“æŸé€’å½’
    int value = sizeof(End);
}

template<> struct Sum<>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…ä¸ºç©ºæ—¶ç»“æŸé€’å½’
    int value = 0;
}
//Sum<int,double,short>::value;//å€¼ä¸º14
```

###### ç»§æ‰¿å±•å¼€

å±•å¼€åŸç†ä¸ºé€’å½’çš„å±•å¼€ç»§æ‰¿çŸ¥é“ç»§æ‰¿åˆ°æœ€ç»ˆçš„ç±»ã€‚

```c++
///æ•´å‹åºåˆ—çš„å®šä¹‰
template<int...> struct IndexSeq{};

//å¼€å§‹åˆ©ç”¨ç»§æ‰¿å±•å¼€å‚æ•°åŒ…
template<int N, int ...Indexes> struct MakeIndexes : MakeIndexes<N - 1, N - 1, Indexes...> {};

// æ¨¡æ¿ç‰¹åŒ–ï¼Œç»ˆæ­¢å±•å¼€å‚æ•°åŒ…çš„æ¡ä»¶
template<int ...Indexes> struct MakeIndexes<0, Indexes...>{
    typedef IndexSeq<Indexes...> type;
};

using T = MakeIndexes<3>::type;/// T = IndexSeq<0, 1, 2>
/*å±•å¼€è¿‡ç¨‹
MakeIndexes<3> : MakeIndexes<2, 2>{}
MakeIndexes<2, 2> : MakeIndexes<1, 1, 2>{}
MakeIndexes<1, 1, 2> : MakeIndexes<0, 0, 1, 2>{
    typedef IndexSeq<0, 1, 2> type;
}
*/
```

##### å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°

```c++
template <class ...T>///å¯ä»¥å°†å‚æ•°åŒ…å±•å¼€æˆä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹çš„å‚æ•°
void f(T... args){///å£°æ˜ä¸€ä¸ªå‚æ•°åŒ…T... argsï¼Œè¿™ä¸ªå‚æ•°åŒ…ä¸­å¯ä»¥åŒ…å«0åˆ°ä»»æ„ä¸ªæ¨¡æ¿å‚æ•°ï¼›
    cout << sizeof...(args) << endl; ///sizeof...()æ‰“å°å˜å‚çš„ä¸ªæ•°
}
```

`arg`å‚æ•°åŒ…ä¸­çš„å‚æ•°åªèƒ½ä½¿ç”¨å‚æ•°åŒ…å±•å¼€çš„æ–¹å¼æ‰èƒ½è·å–ï¼Œæ— æ³•ç›´æ¥è·å–åˆ°æ‰€æœ‰çš„å‚æ•°ã€‚

###### é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…

éœ€è¦æä¾›ä¸€ä¸ªå‚æ•°åŒ…å±•å¼€çš„å‡½æ•°å’Œä¸€ä¸ªé€’å½’ç»ˆæ­¢å‡½æ•°ï¼Œå‚æ•°åŒ…å±•å¼€å‡½æ•°åˆ©ç”¨æ¨¡æ¿å‚æ•°çš„iåŒ¹é…æœºåˆ¶æ¯æ¬¡å±•å¼€ä¸€ä¸ªå‚æ•°ï¼Œå°†å…¶ä½™çš„å‚æ•°é€šè¿‡é€’å½’è°ƒç”¨è¯¥å‡½æ•°åœ¨ä¸‹ä¸€å±‚å±•å¼€ï¼Œç”±äºå‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæœ€åä¸€æ¬¡é€’å½’è°ƒç”¨å°†è¿›å…¥ç©ºå‚æ•°çš„åŒåå‡½æ•°ï¼Œä»è€Œç»“æŸé€’å½’ï¼Œå±•å¼€æ‰€æœ‰çš„å‡½æ•°å‚æ•°ã€‚

```c++
void get_param(){return ;}//ä¸çŸ¥é“æœ€åä¸€ä¸ªå‚æ•°çš„ç±»å‹æ—¶ä½¿ç”¨çš„é€’å½’å‡ºå£
void get_param(const char *param){return ;}//çŸ¥é“æœ€åä¸€ä¸ªå‚æ•°çš„ç±»å‹æ—¶ä½¿ç”¨çš„é€’å½’å‡ºå£

template <typename First, typename ...Rest>
void get_param(First first, Rest... rest){
	cout << "å‚æ•°ï¼š" << typeid(first).name() << first << endl;///è·å–å‚æ•°åŒ…ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°
	get_param(rest...);///å±•å¼€å‚æ•°åŒ…ä¸­çš„å…¶ä»–å‚æ•°
}
get_param(1, 2.0, '3', "4");
/*
å‚æ•°ï¼ši1 // int
å‚æ•°ï¼šd2 // double
å‚æ•°ï¼šc3 // char
å‚æ•°ï¼šPKc4 // pointer(P) const(K) char
*/

template <typename First, typename ...Rest> void get_param(First first, Rest... rest){
	if constexpr(sizeof...(rest) > 0){
		get_param(rest);
	}
}///åˆ©ç”¨C++17çš„æ–°ç‰¹æ€§å¯ä»¥é¿å…å®šä¹‰é€’å½’å‡ºå£å‡½æ•°
```

###### é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…

åªéœ€è¦ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¯æ¬¡åªè´Ÿè´£å¤„ç†å¤„ç†ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦å±•å¼€å‚æ•°æ—¶å€ŸåŠ©é€—å·è¡¨è¾¾å¼å¤šæ¬¡è°ƒç”¨æ™®é€šå‡½æ•°ã€‚

```c++
template <class T> void printarg(T t){///ç”¨ä½œå±•å¼€å‚æ•°çš„æ™®é€šæ¨¡æ¿å‡½æ•°
   cout << t << endl;
}
template <class ...Args> void expand(Args... args){
   int arr[] = {(printarg(args), 0)...};///é€—å·è¡¨è¾¾å¼ï¼Œæ­¤å¤„å°†åˆ›å»ºä¸€ä¸ªæ‰€æœ‰å€¼éƒ½æ˜¯çš„intæ•°ç»„
}
expand(1,2,3,4);

/// ä½¿ç”¨lambdaè¡¨è¾¾å¼å°‘åˆ›å»ºä¸€ä¸ªå…·åå‡½æ•°
template<typename Fun, typename ...Args> void get_param(const Fun &fun, Args&& ...arg){
	initializer_list<int>{(fun(forward<Args>(arg)), 0)...};
}

get_param([](int i){cout<<i<<endl;}, 1, 2, 3);///C++11
get_param([](auto i){cout<<i<<endl;}, 1, 2.0, â€testâ€);///C++14
```

**åŸç†**ï¼š`{(printarg(args), 0)...}`çš„å®ç°åŸºç¡€ä¸ºé€—å·è¡¨è¾¾å¼+åˆå§‹åŒ–åˆ—è¡¨

```c++
{(printarg(args), 0)...} = {((printarg(arg1),0), (printarg(arg2),0), (printarg(arg3),0),  etc... )}
/*
æ¯ä¸ªé€—å·è¡¨è¾¾å¼ä»å·¦å‘å³æ‰§è¡Œï¼Œprintarg()å®Œæˆäº†ä¸€ä¸ªå‚æ•°çš„å±•å¼€ï¼Œè¡¨è¾¾å¼è¿”å›ç»“æœä½œä¸ºåˆå§‹åŒ–åˆ—è¡¨çš„å‚æ•°
æœ€ç»ˆä¼šåˆ›å»ºä¸€ä¸ªå…ƒç´ å€¼éƒ½ä¸º0çš„æ•°ç»„int arr[sizeof...(Args)]ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯ä¸ºäº†å±•å¼€å‚æ•°è€Œé€ æˆçš„å‰¯äº§ç‰©
*/
```

##### ä½¿ç”¨åœºæ™¯

###### æ¶ˆé™¤ä»£ç å†—ä½™

```c++
struct A{A(int){}};
struct B{B(int,double){}};

/// ä¸ä½¿ç”¨å¯å˜æ¨¡æ¿å‚æ•°çš„å‡½æ•°æ”¯æŒå·¥å‚æ¨¡å¼
template<typename T, typename T0>T* Instance(T0 arg0){return new T(arg0);}///ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œ
template<typename T, typename T0, typename T1>T* Instance(T0 arg0, T1 arg1){///ä¸¤ä¸ªæ¨¡æ¿å‚æ•°
    return new T(arg0, arg1);
}

/// ä¸ä½¿ç”¨å¯å˜æ¨¡æ¿å‚æ•°çš„å‡½æ•°æ”¯æŒå·¥å‚æ¨¡å¼
template<typenameâ€¦  Args> T* Instance(Args&&â€¦ args){///æ”¯æŒä»»æ„å¤šä¸ªæ¨¡æ¿å‚æ•°
    return new T(std::forward<Args>(args)...);
}

A* pa = Instance<A>(1);
B* pb = Instance<B>(1,2);
```

###### å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰

```c++
template <class T, class R, typename ...Args> class  MyDelegate{
public:
    MyDelegate(T* t, R  (T::*f)(Args...) ):m_t(t),m_f(f) {}

    R operator()(Args&&... args) {
            return (m_t->*m_f)(std::forward<Args>(args) ...);///å°†å®é™…æ•°æ®äº¤åˆ°ä¼ å…¥çš„å‡½æ•°ä½“ä¸­æ‰§è¡Œ
    }
private:
    T* m_t;///æä¾›å®é™…å¤„ç†æ–¹æ³•çš„ç±»å¯¹è±¡
    R  (T::*m_f)(Args...);///å¯¹è±¡Tçš„æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ
};

template <class T, class R, typename ...Args> MyDelegate<T, R, Args...> CreateDelegate(T* t, R (T::*f)(Args...)){
    return MyDelegate<T, R, Args...>(t, f);
}

struct A{
    void Fun(int i){cout << i << endl;}
    void Fun1(int i, double j){cout << i+j << endl;}
};

A a;
auto d = CreateDelegate(&a, &A::Fun); //åˆ›å»ºå§”æ‰˜
d(1); //è°ƒç”¨å§”æ‰˜ï¼Œå°†è¾“å‡º1
auto d1 = CreateDelegate(&a, &A::Fun1); //åˆ›å»ºå§”æ‰˜
d1(1, 2.5); //è°ƒç”¨å§”æ‰˜ï¼Œå°†è¾“å‡º3.5
//å€ŸåŠ©https://cppinsights.ioå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªautoç”³æ˜åˆ†åˆ«ä¼šè¢«å±•å¼€ï¼Œæ¨¡æ¿ç±»ä¹Ÿä¼šè¢«å®ä¾‹åŒ–ï¼š
MyDelegate<A, void, int> d = CreateDelegate(&a, &A::Fun);
MyDelegate<A, void, int, double> d1 = CreateDelegate(&a, &A::Fun1);
/*
åœ¨ä»¥ä¸Šçš„æ¨¡æ¿å‚æ•°é‡Œé¢ï¼ŒTä»£è¡¨äº†ä¸€ä¸ªç±»ç±»å‹ï¼ŒRä»£è¡¨äº†ä¸€ä¸ªè¿”å›å€¼ç±»å‹ï¼Œ...Argsåˆ™ä»£è¡¨äº†è¦ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°åŒ…ã€‚
CreateDelegate()å‡½æ•°ç”³æ˜çš„ç¬¬äºŒä¸ªå‚æ•°R (T::*f)(Args...)å°±ä»£è¡¨äº†ä¸€ä¸ªè¿”å›å€¼ä¸ºRç±»å‹ï¼Œå‚æ•°ä¸ºå¯å˜å‚æ•°çš„å±äºTç±»å‹å‡½æ•°æˆå‘˜çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°æŒ‡é’ˆfã€‚
*/
```

#### å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)

##### `initializer_list`å®ç°

åœ¨å‚æ•°çš„ç±»å‹éƒ½ç›¸åŒä½†æ˜¯å‚æ•°ä¸ªæ•°ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä¼ é€’ `initializer_list`ç±»å‹çš„å‚æ•°ï¼Œè¯¥ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚

```c++
size_t func(initializer_list<string> li){
	for(auto beg=li.begin(); beg!=li.end(); ++beg);
	return li.size();
}

func({"This", "is", "C++", "!"});
```

##### [`...`å®ç°](https://www.jianshu.com/p/fc6476265327)

å°† `...`æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åä¸€é¡¹ç”¨æ¥è¡¨ç¤ºå˜é•¿å‚æ•°éƒ¨åˆ†ã€‚è¯¥æ–¹æ³•åº”è¯¥**åªç”¨äºCå’ŒC++çš„çš„åŸºæœ¬ç±»å‹**ï¼ˆç”±äºå¤åˆæ•°æ®ç±»å‹åœ¨ä¼ é€’å‚æ•°æ—¶å¯èƒ½æ— æ³•æ­£ç¡®ä¼ é€’ï¼‰ã€‚è¯¥æ–¹æ³•éœ€è¦ç”¨åˆ°åº“æä¾›çš„å‡ ä¸ªå®ç”¨æ¥è·å–æ¯ä¸€ä¸ªå‚æ•°

```c++
#include<cstdarg>  // Cä¸­æ˜¯<stdarg.h>

void add_nums(int count, ...){
	int result = 0;
	va_list args;/// åº“ä¸­ï¼štypedef char* va_list;å³ç”¨valistç±»å‹çš„argså˜é‡æ¥æŒæœ‰æ‰€æœ‰å¯å˜å‚æ•°
	va_start(args, count);///å°†argæŒ‡å‘é•¿åº¦ä¸ºcountçš„å¯å˜å‚æ•°åˆ—è¡¨argsä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°
	for(int i=0; i<count; ++i)
		result += va_arg(args, int);///va_arg()å‡½æ•°ä»argä¸­ä¾æ¬¡è·å–ç±»å‹ä¸ºintçš„å˜é‡å¹¶è¿”å›
	va_end(args);///é‡Šæ”¾va_listç±»å‹çš„argså˜é‡
}

add_nums(4, 25, 25, 50, 50);
```

#### å¯å˜å‚æ•°åŸºç±»

å¯ä»¥çµæ´»çš„æ§åˆ¶éœ€è¦è¢«ç»§æ‰¿çš„çˆ¶ç±»çš„ä¸ªæ•°å’Œç±»åˆ«

```c++
class Gemfield{
    public:
        void test1(){
            std::cout<<"This is base class Gemfield."<<std::endl;
        }
};

class CivilNet{
    public:
        void test2(){
            std::cout<<"This is base class CivilNet."<<std::endl;
        }
};

template<typename... Bases> class SYSZUX : public Bases...{};

SYSZUX<Gemfield, CivilNet>().test1().test2();
/*
This is base class Gemfield.
This is base class CivilNet.
*/
```

### [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](https://zhuanlan.zhihu.com/p/21314708)

ä¸ºäº†å®ç°å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨éœ€è¦æ¯ä¸€ä¸ªé‡è½½è°ƒç”¨é€‰æ‹©æœ€åˆé€‚çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå½“è¿™äº›**é‡è½½å‡½æ•°åŒ…å«æ¨¡æ¿å‡½æ•°**æ—¶ï¼Œå°±æ¶‰åŠåˆ°æ›¿æ¢çš„é—®é¢˜ã€‚å³ç¼–è¯‘å™¨é¦–å…ˆç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ã€ç„¶åå°†å‡½æ•°å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼çš„æ¨¡æ¿å‚æ•°æ›¿æ¢æ‰ï¼ˆsubstituteï¼‰ï¼Œåœ¨è¿™ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ä¸­ä¼šæ¨å¯¼å‡ºå¤šç§å¯èƒ½çš„æ›¿æ¢æ–¹æ³•ï¼Œå¦‚æœå…¶ä¸­æŸä¸€ä¸ªæˆ–è€…æŸå‡ ä¸ªæ¨¡æ¿å‡½æ•°æ¨å¯¼å‡ºæ¥æ›¿æ¢ç»“æœæ— æ„ä¹‰ï¼ˆæ— æ³•ç¼–è¯‘ï¼‰ï¼Œé‚£ä¹ˆ**åªè¦æœ‰ä¸€ä¸ªå¯ä»¥æ­£ç¡®æ¨å¯¼å‡ºæ¥**ï¼Œé‚£ä¹ˆé‚£äº›æ— æ„ä¹‰çš„æ¨å¯¼æ›¿æ¢**ä¸ä¼šè§¦å‘ç¼–è¯‘å™¨çš„é”™è¯¯**ï¼Œè¿™æ ·ä¸€å¥—è§„åˆ™å³ `SFINAE`è§„åˆ™ã€‚

```c++
struct Test { typedef int foo;};

template <typename T> void f(typename T::foo) {} // Definition #1
template <typename T> void f(T) {}               // Definition #2

f<Test>(10); // Call #1ï¼š
f<int>(10);  // Call #2ï¼š#1,#2éƒ½å¯ä»¥è¢«åˆæ­¥åŒ¹é…ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨#1çš„è¯åˆ™ç¼ºå°‘fooå±æ€§
```

**æ›¿æ¢**å‘ç”Ÿåœ¨**å®ä¾‹åŒ–**ä¹‹å‰ï¼Œå³ä½¿æœ€ç»ˆä¸éœ€è¦è¢«å®ä¾‹åŒ–çš„æ¨¡æ¿ä¹Ÿè¦è¿›è¡Œæ›¿æ¢ï¼ˆåªä¼šæ›¿æ¢ç›´æ¥å‡ºç°åœ¨å‡½æ•°å£°æ˜ä¸­çš„ç›¸å…³å†…å®¹ï¼ˆä¸åŒ…å«å‡½æ•°ä½“ï¼‰ï¼‰ï¼Œå°†æ‰€æœ‰çš„å¯èƒ½é€‰æ‹©æ›¿æ¢å®Œä¹‹åï¼Œæ‰ä¼šæ ¹æ®**é‡è½½å†³è®®**ç¡®å®šå€™é€‰å‡½æ•°ï¼Œå½“æœ‰å¤šä¸ªå€™é€‰å‡½æ•°åˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ï¼Œæ²¡æœ‰å€™é€‰å¼•å‘æ— å®ç°é”™è¯¯ï¼Œåªæœ‰æœ‰å”¯ä¸€å€™é€‰å‡½æ•°æ—¶ä¸”è¯¥å€™é€‰å‡½æ•°ä¸ºæ¨¡æ¿å‡½æ•°æ—¶ç¼–è¯‘å™¨æ‰ä¼šå®ä¾‹åŒ–æ­¤å‡½æ•°ã€‚

### æ¨¡æ¿ç±» `enable_if`

[SFINAEï¼šsubstitution failure is not an error](https://www.wikiwand.com/zh-cn/%E6%9B%BF%E6%8D%A2%E5%A4%B1%E8%B4%A5%E5%B9%B6%E9%9D%9E%E9%94%99%E8%AF%AF) è§„åˆ™æ˜¯æ¨¡æ¿ç±» `enable_if<>`æœ€æ ¸å¿ƒçš„åŸç†ï¼Œåˆ©ç”¨è¯¥æ¨¡æ¿ç±»å¯ä»¥æ›´å¥½çš„æ§åˆ¶æ¨¡æ¿çš„ç¼–è¯‘å’Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚

#### ç±»å‹åç‰¹åŒ–

åœ¨**ç¼–è¯‘æ—¶æ ¡éªŒæ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§**ï¼Œæ ¹æ®æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œä¸åŒç±»å‹çš„å®ç°çš„é€‰æ‹©ï¼Œå³å®ç°äº†è‡ªå®šä¹‰å®½æ¾åº¦ï¼ˆå–å†³äº `enable_if<>`çš„æ ¡éªŒå¼ºåº¦ï¼‰çš„ç±»å‹åç‰¹åŒ–ã€‚

```c++
template <typename T, typename Enable=void> struct check;

template <typename T> struct check<T, typename std::enable_if<T::value>::type> {};
/// checkåªå¸Œæœ›é€‰æ‹©T::value==trueçš„ç±»å‹Tï¼Œå¦åˆ™å°±æŠ¥ç¼–è¯‘æ—¶é”™è¯¯ã€‚
```

#### æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹

å˜ç›¸å®ç°æ¨¡æ¿å‡½æ•°çš„åç‰¹åŒ–ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡æ¿å‚æ•°è¿”å›ä¸åŒç±»å‹çš„å€¼ã€‚å¦‚åº“ä¸­çš„ `std::get<>(std::tuple<>)`æ ¹æ®ä¸åŒä¸‹æ ‡è¿”å›ä¸åŒç±»å‹çš„å…ƒç´ ï¼š

```c++
template <std::size_t k, class T, class... Ts>
typename std::enable_if<k==0, typename element_type_holder<0, T, Ts...>::type&>::type
get(tuple<T, Ts...> &t) {
  return t.tail;
}

template <std::size_t k, class T, class... Ts>
typename std::enable_if<k!=0, typename element_type_holder<k, T, Ts...>::type&>::type
get(tuple<T, Ts...> &t) {
  tuple<Ts...> &base = t;
  return get<k-1>(base);
}
```

#### æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹

é™å®šç‰¹å®šçš„ç±»å‹æ‰å¯ä»¥å¯ä»¥è°ƒç”¨æŸä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼ˆæ§åˆ¶æ˜¯å¦å®ä¾‹åŒ–è¿™ä¸ªå‡½æ•°æ¨¡æ¿å³å¯ï¼‰ã€‚

```c++
template <typename T> typename std::enable_if<std::is_integral<T>::value, bool>::type is_odd(T t) {}
///åªæœ‰is_odd(int_value)æˆ–is_odd<int>(value)çš„ä½¿ç”¨æ–¹æ³•æ‰ä¼šå®ä¾‹åŒ–å’Œç¼–è¯‘å‡ºç›¸åº”çš„æ¨¡æ¿å‡½æ•°
```

### å¼ºåˆ¶å¼•ç”¨

åœ¨C++çš„å‡½æ•°å¼æ¥å£å¦‚ `bind(...)ã€thread()`ä¸­ï¼Œå…¶å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æ‹·è´åçš„å€¼ä¼ é€’ï¼Œå³ä½¿ `bind(fun, ...)`ä¸­çš„å‡½æ•° `fun(Type &)`è¦æ±‚ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼Œ`bind`è¿˜æ˜¯ä¼šåœ¨åˆ›å»ºæ—¶å°±å°†éœ€è¦çš„å‚æ•°ä»¥æ‹·è´çš„å½¢å¼ä¼ é€’ç»™ `fun()`ï¼Œä¸ºäº†å®ç°å¯¹å‚æ•°çš„å¼•ç”¨ä¼ é€’ï¼Œ`C++11`å®šä¹‰äº†æ¨¡æ¿å‡½æ•° `ref<>(param)ã€cref<>(param)`ç”Ÿæˆ [std::reference_wrapper](https://zh.cppreference.com/w/cpp/utility/functional/reference_wrapper) ç±»å‹çš„å¯¹è±¡å®ç°å¯¹ `param`å‚æ•°çš„å¼•ç”¨ä¼ é€’ã€‚

**`std::reference_wrapper` ç”¨äºæŒ‰å¼•ç”¨ä¼ é€’å¯¹è±¡ç»™ [std::bind](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Futility%2Ffunctional%2Fbind) æˆ– [std::thread](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Fthread%2Fthread) çš„æ„é€ å‡½æ•°**

```c++
void f(int& n1, int& n2, const int& n3){
    std::cout << "In function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
    ++n1, ++n2;
}

int n1 = 1, n2 = 2, n3 = 3;
std::function<void()> bound_f = std::bind(f, n1, std::ref(n2), std::cref(n3));
///åˆ›å»ºæ—¶n1å·²ç»æŒ‰ç…§æ‹·è´ä¼ é€’åˆ°fï¼Œè€Œn2å’Œn3åªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰ä¼šä»¥å¼•ç”¨ä¼ é€’åˆ°fä¸­
n1 = 10, n2 = 11, n3 = 12;
std::cout << "Before function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
bound_f();
std::cout << "After function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
/*
Before function: 10 11 12
In function: 1 11 12
After function: 10 12 12
*/
```

### å­—é¢é‡

#### æ ‡å‡†å­—é¢é‡

##### æ•´æ•°å­—é¢é‡

###### å½¢å¼

|        å­—é¢é‡ç±»å‹        |       å‰ç¼€       |           æ•°ä½           |
| :----------------------: | :--------------: | :-----------------------: |
| **åå…­è¿›åˆ¶å­—é¢é‡** | `0x` æˆ– `0X` |   ä¸€æˆ–å¤šä¸ªåå…­è¿›åˆ¶æ•°ä½   |
|  **åè¿›åˆ¶å­—é¢é‡**  |        æ—         | éé›¶åè¿›åˆ¶ä½+ä»»æ„åè¿›åˆ¶ä½ |
|  **å…«è¿›åˆ¶å­—é¢é‡**  |   æ•°ä½é›¶ `0`   |      ä»»æ„ä¸ªå…«è¿›åˆ¶ä½      |
|  **äºŒè¿›åˆ¶å­—é¢é‡**  | `0b` æˆ– `0B` |     ä¸€æˆ–å¤šä¸ªäºŒè¿›åˆ¶ä½     |

è‹¥æä¾›**æ•´æ•°åç¼€**ï¼Œåˆ™å¯å«æœ‰ä¸‹åˆ—ä¸€æˆ–ä¸¤è€…ï¼ˆè‹¥å‡æä¾›ï¼Œåˆ™å¯ä»¥ä»»æ„é¡ºåºå‡ºç°ï¼‰ï¼š

- æ— ç¬¦å·åç¼€ï¼ˆå­—ç¬¦ u æˆ–å­—ç¬¦ Uï¼‰
- é•¿åç¼€ï¼ˆå­—ç¬¦ l æˆ–å­—ç¬¦ Lï¼‰æˆ– é•¿é•¿åç¼€ï¼ˆå­—ç¬¦åºåˆ— ll æˆ–å­—ç¬¦åºåˆ— LLï¼‰ (C++11 èµ·)

###### note

æ•´æ•°å­—é¢é‡æ•°ä½é—´å¯æ’å…¥ä½œä¸ºåˆ†éš”ç¬¦çš„å¯é€‰çš„å•å¼•å·ï¼ˆ`'`ï¼‰ï¼Œè¯¥å•å¼•å·åªä¸ºäº†æ–¹ä¾¿ç”¨æˆ·è¯†åˆ«ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥è¯¥ç¬¦å·ã€‚æ²¡æœ‰è´Ÿæ•´æ•°å­—é¢é‡ã€‚ç”±äº[æœ€å¤§åå™¬](https://www.apiref.com/cpp-zh/cpp/language/translation_phases.html#.E6.9C.80.E5.A4.A7.E5.90.9E.E5.99.AC)è§„åˆ™ï¼Œä»¥ `e` å’Œ `E` ç»“æŸçš„åå…­è¿›åˆ¶æ•´æ•°å­—é¢é‡åœ¨åéšè¿ç®—ç¬¦ `+` æˆ– `-` æ—¶ï¼Œæºç ä¸­å¿…é¡»ä»¥ç©ºç™½ç¬¦æˆ–æ‹¬å·å°†å®ƒä»¬ä¸è¿ç®—ç¬¦åˆ†éš”

#### [æµ®ç‚¹å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/floating_literal)

#### [å­—ç¬¦å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/character_literal)

#### [å­—ç¬¦å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/string_literal)

#### [å¸ƒå°”å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/bool_literal)

```cpp
using namespace std::literals::chrono_literals;///500ms
using namespace std::literals::string_literals;///"Hello world"s
using namespace std::literals::complex_literals;

string s1 = "abc\0\0def", s2 = "abc\0\0def"s;
///ä»¥Cå¼å­—ç¬¦ä¸²åˆå§‹åŒ–stringæ—¶ä¼šä»Cå¼å­—ç¬¦ä¸²ç»“å°¾æˆªæ–­ï¼Œè€Œå­—é¢é‡ä¼šå°†â€œ\0â€ä¹Ÿä½œä¸ºä¸€ä¸ªå­—ç¬¦ã€‚
cout << "s1: " << s1.size() << " \"" << s1 << "\"\n";//s1: 3 "abc"
cout << "s2: " << s2.size() << " \"" << s2 << "\"\n";//s2: 8 "abcdef"
```

#### [ç”¨æˆ·å®šä¹‰å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/user_literal)

##### å‚æ•°ä¸åŒ¹é…

|  å®å‚  |        ç¬¬ä¸€å½¢å‚        |                                               å¤‡é€‰å½¢å‚ä¸å¤‡æ³¨                                               |
| :----: | :--------------------: | :--------------------------------------------------------------------------------------------------------: |
|  æ•´å½¢  | `unsigned long long` | `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–[æ— æ³•æ»¡è¶³æ—¶](https://www.cnblogs.com/Braveliu/p/12241837.html)è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰ |
| æµ®ç‚¹å‹ |    `long double`    |                         `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–æ— æ³•æ»¡è¶³æ—¶è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰                         |
|  å­—ç¬¦  |  `const`<w>`char<8  |                                                     16                                                     |
| å­—ç¬¦ä¸² |  `const`<w>`char<8  |                                                     16                                                     |

##### å®šä¹‰å­—é¢é‡

ä½¿ç”¨åˆæ³•å‚æ•°è‡ªå®šä¹‰å­—é¢é‡æ“ä½œç¬¦ `<constexpr> RT operator"" _name(param) `ä¾¿å®ç°äº†è‡ªå®šä¹‰å­—é¢é‡ï¼Œä¹‹ååœ¨ä½¿ç”¨å­—é¢é‡ `value_name`ä¼šè¢«è‡ªåŠ¨ç¿»è¯‘ä¸º `_name(value)`ï¼Œå½“è‡ªå®šä¹‰çš„å­—é¢é‡æ“ä½œç¬¦ç­¾åå« `constexpr`æ—¶ï¼Œè¯¥è½¬æ¢ç»“æœä¼šåœ¨ç¼–è¯‘æ—¶å°±å®Œæˆã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰**åç¼€å¿…é¡»ä»¥ä¸‹åˆ’çº¿å­—ç¬¦ `_`å¼€å§‹**ï¼Œæ ‡å‡†åº“çš„åç¼€ä¸ä»¥ä¸‹åˆ’çº¿å¼€å§‹ã€‚

```c++
long double operator"" _mm(long double x) { return x / 1000; }
size_t operator"" _len(char const*, size_t n){return n;}
char const* operator"" _r(char const* s){return s;}
unsigned long operator"" _rs(unsigned long long s){return s;}
string operator"" _rs(char const* s){return 'x' + string(s) + 'y';}///æ— ä¸Šä¸€è¡Œæ‰åŒ¹é…åˆ°æ­¤è¡Œ

cout << 1.0_mm << '\t' << "ABCDEFGH"_len << '\t' << 12_r << '\t' << 512_rs << '\n';///0.001 8 12	x512y
```

## C++14

### autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼

+ `auto function_name(Args...);`

### lambdaè¡¨è¾¾å¼

1. é€šç”¨æ•è·ï¼šå¸¦æœ‰åˆå§‹åŒ–å™¨çš„æ•è·ç¬¦ï¼Œå®ä¾‹ï¼š`[x = 1]{ return x; // 1 }`
2. ä½¿ç”¨é€šç”¨æ•è·æ•è·ä»…å¯ç§»åŠ¨çš„ç±»å‹ï¼Œå®ä¾‹ï¼š`unique_ptr<T> x = ...; [u=move(u)] {  do_something_with( u );}`
3. æ³›å‹ `lambda`è¡¨è¾¾å¼ï¼šå‚æ•°å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜å…·ä½“ç±»å‹ã€‚
4. è¡¨è¾¾å¼æ•æ‰ï¼šå…è®¸ç”¨ä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼åˆå§‹åŒ–æ•æ‰çš„å˜é‡(ä¸1ï¼Œ2ç›¸å…³)ã€‚

### [`constexpr`](# `CPP14: constexpr `)

## C++17

### ç»“æ„åŒ–ç»‘å®š(CPP17)

+ å½¢å¼ï¼šç±»ä¼¼äºpythonä¸­å¯¹è¿”å›å€¼çš„ç›´æ¥åˆ†ç‰‡ã€‚`auto [x,y,z] = obj_var;`æ–¹æ‹¬å·å†…ä¸ºç»“æ„åŒ–ç»‘å®šåçš„å˜é‡çš„åç§°ï¼Œå…¶ä¸­autoå¯ä»¥ä¸cvé™å®šç¬¦ã€å¼•ç”¨ç»„åˆè¡¨è¾¾ä¸åŒçš„ç»‘å®šæ–¹æ³•ã€‚
+ ä½œç”¨ï¼šæ–¹ä¾¿äº†ä»£ç çš„ç¼–å†™ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹å¯ä»¥æ›¿æ¢tupleã€‚æ–¹ä¾¿å¯¹è¢«ç»‘å®šç»“æ„çš„è®¿é—®(ä¾‹å¦‚å¯¹mapä¸­key-valueçš„è®¿é—®ï¼Œå¤„ç†å¤šè¿”å›å€¼å‡½æ•°ç­‰)ã€‚
+ é‡è¦åŸåˆ™ï¼šç»“æ„åŒ–ç»‘å®šçš„æœ¬æ„æ˜¯ä¸€ä¸ªç»‘å®šè€Œéç”³æ˜ï¼Œä»…åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ç»“æ„æ—¶æ‰èƒ½ä½¿ç”¨ç»“æ„åŒ–ç»‘å®šï¼Œä»»ä½•è¿åè¿™ä¸€åŸåˆ™çš„å†™æ³•éƒ½æ˜¯ä¸è¢«ç¼–è¯‘å™¨å…è®¸çš„,ç»“æ„åŒ–ç»‘å®šçŸ¢é‡ä¸æ˜¯è¿™ç§æƒ…å†µ.

#### ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)

+ å¯ç»‘å®šéƒ¨åˆ†ï¼šæ•°ç»„ã€arrayã€pairã€tupleçš„å„ä¸ªå…ƒç´ ã€‚å®ä½“çš„éé™æ€publicæ•°æ®æˆå‘˜ä¸”è¢«ç»‘å®šæˆå‘˜ä¸èƒ½åˆ†æ•£åœ¨å¤šä¸ªç±»ä¸­ã€‚

1. éå¼•ç”¨ï¼šæ­¤æ—¶å„ä¸ªå˜é‡æ˜¯è¢«ç»‘å®šå˜é‡ä¸­å¯ä»¥è¢«ç»‘å®šçš„å„ä¸ªå±æ€§çš„æ‹·è´ã€‚
2. å¼•ç”¨ï¼šå„ä¸ªå˜é‡ç»‘å®šçš„æ˜¯è¢«ç»‘å®šå˜é‡ä¸­å¯ä»¥è¢«ç»‘å®šéƒ¨åˆ†çš„æœ¬èº«ã€‚

### [æŠ˜å è¡¨è¾¾å¼](https://www.jianshu.com/p/8df794addfed)

å°†äºŒå…ƒè¿ç®—ï¼ˆ`+`ã€`-`ã€`*`ã€` /`ã€` %`ã€` ^`ã€` &`ã€` |`ã€` =`ã€` <`ã€` >`ã€` <<`ã€` >>`ã€` +=`ã€` -=`ã€` *=`ã€` /=`ã€` %=`ã€` ^=`ã€` &=`ã€` |=`ã€` <<=`ã€` >>=`ã€` ==`ã€` !=`ã€` <=`ã€` >=`ã€` &&`ã€`||`ã€`,`ã€` .*`ã€` ->*`ï¼‰ä¸å‚æ•°åŒ…ç»“åˆï¼Œå°†å‚æ•°åŒ…ä¸­çš„å‚æ•°å±•å¼€ä¾æ¬¡è¿›è¡Œè¿ç®—ã€‚Foldè¡¨è¾¾å¼ä¸€å…±æœ‰å››ç§å½¢å¼(äºŒå…ƒæŠ˜å è¦æ±‚ä¸¤ä¸ªopå¿…é¡»ç›¸åŒï¼Œæ‰€æœ‰ `op`ä¸­åªæœ‰ `&&`ã€`||`ã€ `,`æ”¯æŒpackä¸ºç©ºï¼Œæ­¤æ—¶åˆ†åˆ«ä»£è¡¨ `trueã€falseã€void()`)ã€‚

1. ä¸€å…ƒå³æŠ˜å ï¼š`(pack op ...) <=> (pack1 op (... op (pack"N-1" op packN)))`
2. ä¸€å…ƒå·¦æŠ˜å ï¼š`(... op pack) <=> (((pack1 op pack2) op ...) op packN)`
3. äºŒå…ƒå³æŠ˜å ï¼š`(pack op ... op init) <=> (pack1 op (... op (packNâˆ’1 op (packN op I))))`
4. äºŒå…ƒå·¦æŠ˜å ï¼š`(init op ... op pack) <=> ((((init op pack1) op pack2) op ...) op packN)`

```c++
//(1) ( pack op ... )ä¸€å…ƒå³æŠ˜å 
template<class T, class... Args> void push_back_vec(std::vector<T>& v, Args&&... args){
    (v.push_back(args), ...);
}

//(4) (init op ... op pack)äºŒå…ƒå·¦æŠ˜å 
template<class ...Args> void printer(Args&&... args){
    (std::cout << ... << args) << '\n';
}

std::vector<int> v;
push_back_vec(v, 6, 2, 45, 12);///vä¸­çš„å†…å®¹æ˜¯6 2 45 12
printer(1, 2, 3, "abc");   //123abc

template <typename... Args> auto empty_pack_unary_fold_operator_and(Args&&... args){
    return (args && ...);
}

template <typename... Args>auto empty_pack_unary_fold_operator_or(Args&&... args){
    return (args || ...);
}

template <typename... Args>auto empty_pack_unary_fold_operator_comma(Args&&... args){
    return (args , ...);
}

empty_pack_unary_fold_operator_and();///true
empty_pack_unary_fold_operator_or();///false
is_void<decltype(empty_pack_unary_fold_operator_comma())>::value;///true
```

### æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼[CTAD](https://zh.cppreference.com/w/cpp/language/class_template_argument_deduction)

#### æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°

éœ€è¦ä¸ºæƒ³å®ç°è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„æ¨¡æ¿ç±»æä¾›èƒ½æ¨æ–­å‡ºç±»æ¨¡å‹ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `Deduction Guides`æ¥æä¾›é¢å¤–çš„æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™ï¼Œæˆ–è€…ä¿®æ­£å·²æœ‰çš„æ¨¡æ¿å‚æ•°æ¨æ–­è§„åˆ™ã€‚

```c++
template<typename T>class Stack {
	public:
		Stack () = default;//
		Stack (T elem) : elems({std::move(elem)}) {}//æ¨å¯¼è§„åˆ™
		Stack(char const*) -> Stack<std::string>;///ä¿®æ­£æ¨å¯¼è§„åˆ™
};

Stack<int> intStack1; // stack of strings
Stack<int> intStack2 = intStack1; // OK in all versions
Stack intStack3 = intStack1; // OK since C++17
Stack stringStack{"bottom"};// OK: Stack<std::string> deduced since C++17
```

#### `auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°

```c++
template <auto value> void f() { }///c++17
f<10>();///è‡ªåŠ¨æ¨å¯¼ä¸ºint
```

### ç¼–è¯‘æœŸIF

`if constexpr()`åœ¨ç¼–è¯‘æœŸå†³å®šç¼–è¯‘ `if`æ¡ä»¶çš„å“ªä¸ªåˆ†æ”¯ï¼Œæ¯”å¦‚ç”¨åœ¨ç¼–è¯‘æœŸçš„æ¨¡æ¿å®ä¾‹åŒ–ä¸­ã€‚

### æŠ˜å è¡¨è¾¾å¼è¡¥å……

```c++
template <typename... Args> void print(Args... args) {
    std::cout << ... << args << endl;//äºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼æ— ç©ºæ ¼éå†è¾“å‡º
    auto printWhiteSpace = [](const auto arg) { std::cout << " " << arg; };
    (..., printWhiteSpace(args));//ä¸€å…ƒå·¦æŠ˜å +lambdaè¡¨è¾¾å¼ç©ºæ ¼éå†è¾“å‡º
}

template<typename... T> void printDoubled (T const&... args) {
    print ((args + args)...);///print(arg1+arg1, arg2+arg2, arg3+arg3);
    print (args + args...);///print((arg1+arg1), (arg2+arg2), (arg3+arg3));
}///å°†æ¯ä¸ªå‚æ•°æ‰“å°ä¸¤æ¬¡

template<typename C, typename... Idx> void printElems (C const& coll, Idx... idx) {
	print (coll[idx]...);///print (coll[2], coll[0], coll[3])ã€å¯¹æ¯ä¸ªidxè°ƒç”¨ä¸€æ¬¡coll[idx];
}

print("hello","world","copyright");
printDoubled(7.5, std::string("hello"), std::complex<float>(4,2));
printElems({"good", "times", "say", "bye"}, 2, 0, 3);
```

### [å˜é•¿ `using`å£°æ˜](https://www.cnblogs.com/zwvista/p/9256655.html)

```c++
template<class... Ts> struct overloaded : Ts... { using Ts::operator()...; };///å¯å˜åŸºç±»æ¨¡æ¿ç±»ã€‚usingè¢«å±•å¼€ä¸ºusing A::operator(), B::operator(), C::operator()...
template<class... Ts> overloaded(Ts...) -> overloaded<Ts...>;///æ¨å¯¼æŒ‡å¼•

overloaded s{
    [](int){cout << "int" << endl;},
    [](double){cout << "double" << endl;},
    [](string){cout << "string" << endl;},
};///æ¯ä¸ªåŒ¿åå¯¹è±¡çš„operator()å°†ä¼šæˆä¸ºç»“æ„ä½“çš„çš„æˆå‘˜å‡½æ•°ï¼Œåœ¨så¯¹è±¡å†…éƒ¨å½¢æˆé‡è½½å…³ç³»ã€‚
```

## C++20

### Ranges

### View

### æ¨¡å—Modules

### åç¨‹(Coroutines)

# æ–‡ä»¶ç³»ç»Ÿ

* å®šä¹‰äºå¤´æ–‡ä»¶`<filesystem>`ï¼Œå­˜åœ¨äºå‘½åç©ºé—´ `std::filesystem`ï¼›

## åŸºæœ¬ç±»

1. pathï¼šè·¯å¾„å¤„ç†
2. directory_entryï¼šæ–‡ä»¶å…¥å£
3. directory_iteratorï¼šè·å–æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­æ–‡ä»¶çš„è¿­ä»£å™¨å®¹å™¨
4. file_statusï¼šè·å–å’Œä¿®æ”¹æ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰çš„å±æ€§

# æ—¶é—´ä¸æ—¥æœŸ

+ C++çš„æ—¶é’Ÿåº“æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ `std::chrono`åº“ï¼ˆchronologyï¼‰ï¼Œä¸€ä¸ªæ˜¯Cæ ·å¼çš„æ—¥æœŸå’Œæ—¶é—´åº“(å¦‚ `std::time_t`)ã€‚

## Cé£æ ¼

![ctimeæ•°æ®å…³ç³»](./img/lang/ctime.png)

å›¾ä¸­ä»¥æ•°æ®ç±»å‹ä¸ºä¸­å¿ƒï¼Œå¸¦æ–¹å‘çš„å®çº¿ç®­å¤´è¡¨ç¤ºè¯¥å‡½æ•°èƒ½è¿”å›ç›¸åº”ç±»å‹çš„ç»“æœï¼Œæ—¶é’Ÿå‘¨æœŸé™¤ä»¥ `CLOCKS_PER_SEC`æ‰æ˜¯ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ï¼Œè¯¥æ—¶é—´å¯å¤§äºã€ç­‰äºã€å°äºçœŸå®ä¸–ç•Œæ—¶é—´ã€‚

|    `clock_t`    | `time_t` | `timespec`(C++17) |  `tm`  |
| :----------------: | :--------: | :------------------: | :------: |
| è¿›ç¨‹è¿è¡Œçš„æ—¶é’Ÿå‘¨æœŸ |  çºªå…ƒæ—¶é—´  | ä»¥ç§’å’Œçº³ç§’è¡¨ç¤ºçš„æ—¶é—´ | æ—¥å†æ—¶é—´ |

å¯ä»¥é€šè¿‡ `strftime`æˆ–è€… `wcsftime`å‡½æ•°æ¥[æŒ‡å®šæ ¼å¼è¾“å‡º](https://zh.cppreference.com/w/cpp/chrono/c/strftime)ï¼Œéœ€è¦æ³¨æ„ `tm::tm_yearï¼Œtm::tm_mmon`éœ€è¦åˆ†åˆ«åŠ ä¸Š1900å’Œ1çš„åç§»æ‰æ˜¯çœŸå®æ—¥å†æ—¶é—´ã€‚

é™¤äº† `<ctime>`ä¹‹å¤–ï¼Œä¸ºäº†æ–¹ä¾¿æ—¶é—´çš„è¾“å…¥è¾“å‡ºï¼Œä»C++11å¼€å§‹ï¼Œåœ¨ `<iomanip>`å¤´æ–‡ä»¶ä¸­è¿˜å¢åŠ äº†[put_time](https://zh.cppreference.com/w/cpp/io/manip/put_time)ä¸[get_time](https://zh.cppreference.com/w/cpp/io/manip/get_time)ä¸¤ä¸ªå‡½æ•°ã€‚ä¸ºäº†æé«˜æ—¶é—´ç²¾åº¦ï¼ŒC++17ä¸Šå¢åŠ äº† `timespec`ç±»å‹æä¾›äº†çº³ç§’çº§åˆ«çš„ç²¾åº¦ï¼Œ`timespec_get()`ç”¨æ¥è·å–çº³ç§’çº§åˆ«æ—¶é—´ã€‚

```c++
timespec ts;
timespec_get(&ts, TIME_UTC);
char buff[100];
strftime(buff, sizeof buff, "%D %T", std::gmtime(&ts.tv_sec));
printf("Current time: %s.%09ld UTC\n", buff, ts.tv_nsec);
//Current time: 12/27/19 09:03:29.497456000 UTC
```

## `std::chrono`

### `duration` æ—¶é•¿

#### `std::ratio`

  `std::ratio<Num, Denom>`æ¨¡æ¿ç±»æè¿°äº†[ç¼–è¯‘æ—¶çš„æœ‰ç†æ•°](https://zh.cppreference.com/w/cpp/numeric/ratio)å€¼$Num/Denom$ã€‚ratioå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†éƒ¨åˆ†é¢„å®šä¹‰çš„å€¼ã€‚æ­¤å¤–è¿˜å®šä¹‰äº† `ratio_addï¼Œratio_subtractï¼Œratio_multiplyï¼Œratio_divide`æ¥å®Œæˆ `ratio<>`é—´çš„åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—ã€‚

```cpp
typedef ratio<1,       1000000000000000000> atto;
typedef ratio<1,          1000000000000000> femto;
typedef ratio<1,             1000000000000> pico;
typedef ratio<1,                1000000000> nano;
typedef ratio<1,                   1000000> micro;
typedef ratio<1,                      1000> milli;
typedef ratio<1,                       100> centi;
typedef ratio<1,                        10> deci;
typedef ratio<                       10, 1> deca;
typedef ratio<                      100, 1> hecto;
typedef ratio<                     1000, 1> kilo;
typedef ratio<                  1000000, 1> mega;
typedef ratio<               1000000000, 1> giga;
typedef ratio<            1000000000000, 1> tera;
typedef ratio<         1000000000000000, 1> peta;
typedef ratio<      1000000000000000000, 1> exa;
```

```c++
using sum = std::ratio_add<std::ratio<2, 3>, std::ratio<1, 6>>;
std::cout << "2/3 + 1/6 = " << sum::num << '/' << sum::den << '\n';/// 2/3 + 1/6 = 5/6
```

#### `std::chrono::duration `

è¡¨ç¤ºæ—¶é—´é—´éš”çš„æ¨¡æ¿ç±»ï¼Œæ¨¡æ¿å‚æ•°ä¸ºèŠ‚æ‹æ•°é‡(`Rep`)å’ŒèŠ‚æ‹ç²¾åº¦(`ratio`)ï¼Œæ”¯æŒåŸºäºæ—¶é—´çš„60è¿›åˆ¶çš„å››åˆ™è¿ç®—ã€‚æ ‡å‡†åº“æä¾›çš„å¾ˆå¸¸ç”¨çš„å‡ ä¸ªæ—¶é•¿å•ä½ï¼Œå¹¶é€šè¿‡ `duration_cast<TYPE>(soutrce)`å®ç° `duration`ç±»å‹çš„è½¬æ¢ã€‚

```c++
std::chrono::nanoseconds    duration<long long, std::ratio<1, 1000000000>>
std::chrono::microseconds   duration<long long, std::ratio<1, 1000000>>
std::chrono::milliseconds   duration<long long, std::ratio<1, 1000>>
std::chrono::seconds        duration<long long>
std::chrono::minutes        duration<int, std::ratio<60>>
std::chrono::hours          duration<int, std::ratio<3600>>
```

```c++
chrono::hours two_hours(2);
chrono::minutes five_minutes(5);
auto duration = two_hours + five_minutes;
auto seconds = chrono::duration_cast<chrono::seconds>(duration);
cout << "02:05 is " << seconds.count() << " seconds" << endl;
///02:05 is 7500 seconds
```

### `clock` æ—¶é’Ÿ

æ—¶é’Ÿç±»å¿…é¡»æä¾›æ—¶é—´å€¼ï¼ˆ`time_point`ç±»å‹ï¼Œé€šè¿‡é™æ€æˆå‘˜å‡½æ•° `now()`è·å¾—ï¼‰ã€æ—¶é—´ç±»å‹ï¼ˆ`duration`ï¼‰ã€æ—¶é’ŸèŠ‚æ‹ï¼ˆ`rep`ï¼‰å’Œæ—¶é’Ÿç¨³å®šæ€§ï¼ˆ`is_steady`ï¼‰**å››ç§**ä¿¡æ¯ã€‚

æ ‡å‡†åº“ä¸­æä¾›äº†ä¸‰ç§ç±»å‹çš„æ—¶é’Ÿ,å…¶ä¸­çš„ `system_clock`æä¾›äº†ä¸¤ä¸ªé™æ€å‡½æ•° `to_time_t()ã€from_time_t()`ç”¨æ¥ä¸ `std::time_t`æ¥å›è½¬æ¢ã€‚

1. `std::chrono::system_clock`ï¼šæœ¬åœ°ç³»ç»Ÿçš„å½“å‰æ—¶é—´ (å¯ä»¥è°ƒæ•´)ï¼Œé™æ€æˆå‘˜å‡½æ•°to_time_t()æ”¯æŒé£æ ¼è½¬æ¢
2. `std::chrono::steady_clock`ï¼šä¸èƒ½è¢«è°ƒæ•´çš„ï¼Œç¨³å®šå¢åŠ çš„æ—¶é—´
3. `std::chrono::high_resolution_clock`ï¼šæä¾›æœ€é«˜ç²¾åº¦çš„è®¡æ—¶å‘¨æœŸï¼Œä¸åŒæ ‡å‡†åº“å®ç°çš„è¡Œä¸ºæœ‰å·®å¼‚

![ä¸C-styleè½¬æ¢](./img/lang/conversion.png)

### `time_point` æ—¶é—´ç‚¹

`std::chrono::time_point<clock, duration>`æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·ç¦»æ—¶é’ŸåŸç‚¹çš„å…·ä½“æ—¶é—´ç‚¹çš„ç±»æ¨¡æ¿ï¼Œä»–åŒ…å«äº†æ—¶é’Ÿå’Œæ—¶é•¿ä¸¤ä¸ªä¿¡æ¯ã€‚å®ƒæ”¯æŒåŠ å‡ `duration`ã€ç›¸äº’ç›¸å‡ï¼ˆå€¼ä¸º `duration`ï¼‰ï¼Œé™¤äº†ç›¸åŠ å’Œç›¸å‡ï¼Œä¸¤ä¸ªæ—¶é—´ç‚¹è¿˜**æ”¯æŒæ¯”è¾ƒ**æ“ä½œï¼ˆ `==`ï¼Œ`!=`ï¼Œ`<`ï¼Œ`<=`ï¼Œ`>`ï¼Œ`>=`ï¼‰ã€‚

### `std::chrono_literals` (c++14)

`std::chrono_literals`é€šè¿‡å­—é¢è¿ç®—ç¬¦æ¨¡æ¿æä¾›äº†æ—¶é—´çš„åç¼€æ”¯æŒã€‚

```cpp
constexpr std::chrono::minutes operator ""min(unsigned long long m){
    return std::chrono::minutes(m);
}

auto x = 45min;
auto y = std::chrono::minutes(45);
x == y;//true
```

# æ‚é¡¹

## æƒ¯ç”¨æ³•

### PIML(pointer to implementation)

1. ç›®çš„ï¼šé€šè¿‡ä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼éšè—å¯¹è±¡çš„å®ç°ç»†èŠ‚ï¼Œå°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½çš„æ–¹æ³•ä¹‹ä¸€ã€‚
2. å®ç°åŸç†ï¼šåˆ©ç”¨äº†å‰ç½®ç”³æ˜ã€‚åœ¨C++è¯­è¨€ä¸­ï¼Œè¦å®šä¹‰æŸä¸ªç±»å‹çš„å˜é‡æˆ–è€…ä½¿ç”¨ç±»å‹çš„æŸä¸ªæˆå‘˜ï¼Œå°±å¿…é¡»çŸ¥é“è¿™ä¸ªç±»çš„å®Œæ•´å®šä¹‰ï¼Œå…¶ä¾‹å¤–æƒ…å†µæ˜¯ï¼šå¦‚æœå®šä¹‰è¿™ä¸ªç±»å‹çš„æŒ‡é’ˆï¼Œæˆ–è€…è¯¥ç±»å‹æ˜¯å‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›ç±»å‹(å³ä½¿æ˜¯ä¼ å€¼ç±»å‹çš„)ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å‰ç½®å£°æ˜å¼•å…¥è¿™ä¸ªç±»å‹çš„åå­—ï¼Œè€Œä¸éœ€è¦æä¾›æš´éœ²å…¶å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œä»è€Œç±»å‹çš„å®Œæ•´å®šä¹‰å¯ä»¥è¢«éšè—åœ¨å…¶ä»–hppå¤´æ–‡ä»¶æˆ–è€…cppå®ç°æ–‡ä»¶ä¸­ï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿè¢«ç§°ä¸ºä¸é€æ˜æŒ‡é’ˆ(opaque pointer)ã€‚
3. å®ç°æ–¹æ³•ï¼šåœ¨APIçš„å¤´æ–‡ä»¶ä¸­æä¾›æ¥å£ç±»çš„å®šä¹‰ä»¥åŠå®ç°ç±»çš„å‰ç½®å£°æ˜**æ¥å£ç±»ä¸èƒ½includeå®ç°ç±»çš„å¤´æ–‡ä»¶ï¼Œå¦åˆ™ç™½å¹²**ï¼Œå®ç°ç±»çš„æœ¬èº«å®šä¹‰å’Œæˆå‘˜å‡½æ•°çš„å®ç°éƒ½éšè—åœ¨cppæ–‡ä»¶ä¸­å»ï¼ŒåŒæ—¶ä¸ºäº†é¿å…å®ç°ç±»çš„ç¬¦å·æ±¡æŸ“å¤–éƒ¨åå­—ç©ºé—´ï¼Œå®ç°ç±»å¤§å¤šä½œä¸ºæ¥å£ç±»çš„å†…éƒ¨åµŒå¥—ç±»çš„å½¢å¼ã€‚
4. å…¶ä»–ä¼˜ç‚¹ï¼šä¿¡æ¯éšè”½ã€åŠ é€Ÿç¼–è¯‘ã€æ›´å¥½çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€æƒ°æ€§åˆ†é…

### è®¾è®¡è§„åˆ™

#### åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰

C++/C ç¨‹åºè®¾è®¡é£æ ¼çš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼šå£°æ˜ä¸å®šä¹‰ä¸å¯æ··ä¸ºä¸€è°ˆï¼Œç”¨æˆ·åœ¨é˜…è¯»æºä»£ç å£°æ˜æ—¶æ²¡æœ‰å¿…è¦ã€ä¹Ÿä¸åº”è¯¥çŸ¥é“å‡½æ•°æ˜¯å¦éœ€è¦å†…è”ã€é»˜è®¤å‚æ•°æ˜¯ä»€ä¹ˆã€‚

##### å¤´æ–‡ä»¶

ä¸€èˆ¬æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­ç»™å‡ºç±»çš„å®šä¹‰æˆ–å…¨å±€å‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼Œè€Œåœ¨ä»£ç æ–‡ä»¶ä¸­ç»™å‡ºå…·ä½“çš„ï¼ˆç±»æˆå‘˜å‡½æ•°æˆ–å…¨å±€å‡½æ•°çš„ï¼‰å‡½æ•°å®šä¹‰ã€‚ç„¶ååœ¨å¤šä¸ªç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­åŒ…å«è¯¥å¤´æ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¶ä¸­å®šä¹‰æˆ–å£°æ˜çš„ç±»å’Œå‡½æ•°ã€‚

å¤´æ–‡ä»¶ä¸­ä¸€èˆ¬ä¸åŒ…å«å˜é‡ã€ç»“æ„å’Œç±»å¯¹è±¡çš„å®šä¹‰ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´é‡å¤å®šä¹‰çš„ç¼–è¯‘é”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨æŸä¸ªä»£ç æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰ï¼Œåœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ç”¨ `extern`æ¥å¼•ç”¨å®ƒä»¬ï¼Œå¯¹äºæ¨¡æ¿åˆ™ä½¿ç”¨ `export`å…³é”®å­—ã€‚

## [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](https://www.cnblogs.com/wolf-lifeng/p/3156936.html)

ä¸€ä¸ªäº§ç”Ÿå˜é‡çš„è¯­å¥è¦ç»è¿‡å£°æ˜å’Œå®šä¹‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œåœ¨å˜é‡çš„å®šä¹‰çš„è¯­å¥ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œæ˜¾å¼çš„èµ‹å€¼ã€é‚£ä¹ˆç³»ç»Ÿå°±ä¼šè¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–æ“ä½œï¼ˆæ•´å½¢èµ‹0ï¼Œå­—ç¬¦ä¸²ç½®ç©ºï¼‰ã€‚é’ˆå¯¹å‡½æ•°å¯ä»¥ç›´æ¥å°†å£°æ˜å’Œå®šä¹‰æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé’ˆå¯¹å˜é‡ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¯­å¥åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼Œé€šè¿‡åœ¨è¯­å¥å‰**åŠ  `extern`å…³é”®å­—å¯ä»¥é™åˆ¶è¯­å¥åªå®Œæˆå˜é‡çš„å£°æ˜é˜¶æ®µ**ï¼ˆå¦‚å£°æ˜å…¨å±€å˜é‡ï¼Œå…¶å®šä¹‰å°†ç”±ç¼–è¯‘å™¨å»å¯»æ‰¾ï¼‰ã€‚

**ä¸€æ¬¡å®šä¹‰æ³•åˆ™ï¼š**ä¸€ä¸ªå˜é‡å¯ä»¥è¢«å£°æ˜å¤šæ¬¡ï¼Œä½†åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ã€‚å…¨å±€å¯¹è±¡å’Œå…¨å±€å‡½æ•°æˆ–è€…åªæœ‰ä¸€æ¬¡å®šä¹‰ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªç¨‹åºä¸­æœ‰**å¤šä¸ªå®Œå…¨ç›¸åŒçš„å®šä¹‰**ï¼ˆå†…è”å‡½æ•°å’Œå…¨å±€å¸¸é‡çš„æƒ…å†µï¼‰ã€‚

|      é˜¶æ®µ      |                  åŠ¨ä½œ                  |                 å¤‡æ³¨                 |
| :------------: | :------------------------------------: | :----------------------------------: |
| **å£°æ˜** |        å¼•å…¥äº†ä¸€ä¸ªåŠ©è®°ç¬¦ï¼ˆåç§°ï¼‰        |         å»ºç«‹ç¬¦å·ã€æ— å†…å­˜åˆ†é…         |
| **å®šä¹‰** | å…³è”åŠ©è®°ç¬¦åˆ°ä¸€æ®µç‰¹å®šçš„å†…å­˜ï¼Œè¿›è¡Œåˆå§‹åŒ– | å†…å­˜åˆ†é…ï¼šå†…å­˜çš„å¤§å°ç”±å˜é‡çš„ç±»å‹å†³å®š |

### åå­—è§£æ

![](img/lang/name-resolve.jpg)

åå­—è§£æçš„é¡ºåºæ˜¯ï¼šä»åå­—çš„è¢«ä½¿ç”¨ä½ç½®å¼€å§‹ï¼Œä»å°ä½œç”¨åŸŸåˆ°å¤§ä½œç”¨åŸŸçš„é¡ºåºè¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“æŸ¥æ‰¾åˆ°è¯¥åå­—çš„å£°æ˜æˆ–å®šä¹‰åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œç»“æŸã€‚å½“åœ¨ä¸¤ä¸ªä¸åŒçš„ä½œç”¨åŸŸä¸­å®šä¹‰ç›¸åŒåç§°çš„å®ä½“çš„æ—¶å€™ï¼Œå°ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ã€‚å› ä¸ºç¼–è¯‘å™¨ä»å°ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåç§°çš„å®šä¹‰æˆ–å£°æ˜åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œåœæ­¢ï¼Œæ‰€ä»¥å°ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ã€‚

|        C++ä½œç”¨åŸŸ        |              è¯´æ˜              |                æ³¨                |
| :----------------------: | :----------------------------: | :------------------------------: |
| **åå­—ç©ºé—´ä½œç”¨åŸŸ** |        å¯åµŒå¥—ã€å¯è·¨æ–‡ä»¶        | å…¨å±€ä½œç”¨åŸŸæ˜¯æœ€å¤§çš„åå­—ç©ºé—´ä½œç”¨åŸŸ |
|      **ç±»åŸŸ**      | ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜éƒ½å±äºè¯¥ç±»åŸŸ |   æ¯å®šä¹‰ä¸€ä¸ªç±»å°±ä¼šå¼•å…¥ä¸€ä¸ªç±»åŸŸ   |
|   **å±€éƒ¨ä½œç”¨åŸŸ**   |  èµ·å§‹å’Œç»“æŸäºå‡½æ•°ä½“ä¸¤ç«¯çš„æ‹¬å·  |                                  |
|   **è¯­å¥ä½œç”¨åŸŸ**   |       è¯­å¥å—æ„æˆçš„ä½œç”¨åŸŸ       |                                  |

å°†**å˜é‡å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­å¯èƒ½é€ æˆé“¾æ¥å†²çª**ï¼ˆåŒ…å«è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½æœ‰æ­¤å˜é‡çš„å®šä¹‰ï¼‰ï¼Œä½†**å¤´æ–‡ä»¶ä¸­çš„ `const`å˜é‡ä¸ä¼šé€ æˆå†²çª**ï¼ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥å˜é‡æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„åŒ¿å `namespace`ä¸­ï¼‰ã€‚

![](img/lang/finfluce-iled.png)

## æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ

![](img/lang/C++ Mem.png)

C/C++ä¸»è¦æœ‰ä»¥ä¸‹äº”ç§å†…å­˜å­˜å‚¨åŒºï¼š

**å…¨å±€/é™æ€å­˜å‚¨åŒºåŸŸ**ï¼šå­˜æ”¾**å…¨å±€å˜é‡å’Œé™æ€å˜é‡**ã€‚ç¨‹åºç¼–è¯‘æ—¶å†…å­˜å·²åˆ†é…å¥½ï¼Œå¹¶å­˜åœ¨äºç¨‹åºæ•´ä¸ªè¿è¡ŒæœŸé—´ï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿç»Ÿä¸€é‡Šæ”¾

* C ï¼šå…¨å±€å˜é‡åˆåˆ†ä¸ºåˆå§‹åŒ–çš„å’Œæœªåˆå§‹åŒ–çš„ã€‚åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼ˆ`.data`ï¼‰ï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸï¼ˆ`.bss`ï¼‰ã€‚åŒæ—¶æœªè¢«åˆå§‹åŒ–çš„å¯¹è±¡å­˜å‚¨åŒºå¯ä»¥é€šè¿‡ `void*`æ¥è®¿é—®å’Œæ“çºµï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿè‡ªè¡Œé‡Šæ”¾ã€‚
* C++ï¼šæ²¡æœ‰åŒºåˆ†ï¼Œå…±åŒå ç”¨åŒä¸€å—å†…å­˜åŒºã€‚

**æ ˆ**ï¼šå­˜æ”¾**å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡**ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚æ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡é«˜ï¼Œä½†æ˜¯å®¹é‡æœ‰é™ã€‚

**å †ï¼ˆåŠ¨æ€å†…å­˜åˆ†é…ï¼‰**ï¼š**é€šè¿‡ `new`å’Œ `malloc`ç”±ä½åˆ°é«˜åˆ†é…ï¼Œç”± `delete`æˆ– `free`æ‰‹åŠ¨é‡Šæ”¾æˆ–è€…ç¨‹åºç»“æŸè‡ªåŠ¨é‡Šæ”¾**ã€‚åŠ¨æ€å†…å­˜çš„ç”Ÿå­˜æœŸäººä¸ºå†³å®šï¼Œä½¿ç”¨çµæ´»ã€‚ç¼ºç‚¹æ˜¯å®¹æ˜“åˆ†é…/é‡Šæ”¾ä¸å½“å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œé¢‘ç¹åˆ†é…/é‡Šæ”¾ä¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ã€‚ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSï¼ˆæ“ä½œç³»ç»Ÿï¼‰å›æ”¶

**ç¨‹åºä»£ç åŒº**ï¼š å­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ä¸éƒ¨åˆ†æ•´æ•°å¸¸é‡

**å­—ç¬¦/æ–‡å­—å¸¸é‡åŒº**ï¼š å­˜æ”¾**å¸¸é‡å­—ç¬¦ä¸²**ï¼ˆç¼–è¯‘å™¨ä¿è¯é‡å¤çš„å­—ç¬¦ä¸²å¸¸é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰ï¼Œç¨‹åºç»“æŸæ—¶ç”±ç³»ç»Ÿé‡Šæ”¾ã€‚**ç®€å•çš„æ•°å­—å¸¸é‡ä¼šè¢«ä½œä¸ºç«‹å³æ•°ç¼–ç åˆ°ä»£ç æ®µ**ã€‚

# å…¶ä»–æ¨è

1. **å¼ºçƒˆæ¨è**ç”¨[==**ç½‘ç«™**==](https://cppinsights.io/)ç¿»è¯‘ä»£ç ï¼ŒéªŒè¯è‡ªå·±çš„æƒ³æ³•ã€‚å°¤å…¶æ˜¯ `autoã€decltypeã€lambda`ç­‰ä¸€äº›ç« èŠ‚ã€‚
2. [é™ˆç¡•çš„C++å·¥ç¨‹å®è·µç»éªŒè°ˆ](https://github.com/downloads/chenshuo/documents/CppPractice.pdf)
3. [C++17é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/23052754)
4. [C++20é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/137646370)
5. [Glibc å†…å­˜ç®¡ç†](https://paper.seebug.org/papers/Archive/refs/heap/glibc%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86ptmalloc%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90.pdf)
6. [æ¨¡æ¿ç³»åˆ—ä¹è®²](https://www.cnblogs.com/zhangyachen/p/13919732.html)
7. [C++è¯­è¨€çš„å•å…ƒæµ‹è¯•ä¸ä»£ç è¦†ç›–ç‡](https://paul.pub/gtest-and-coverage/#id-gcov)
8. [çŸ¥æ— æ¶¯ä¹‹std::sortæºç å‰–æ](https://feihu.me/blog/2014/sgi-std-sort/)
9. [C++ä¸æ­£åˆ™è¡¨è¾¾å¼](https://paul.pub/cpp-regex/)
10. [ä¸é‚£ä¹ˆæ–°çš„C++æ ‡å‡†å­¦ä¹ ç¬”è®°](https://missdeer.github.io/cxxstd/)
11. [C++çš„å±æ€§æŒ‡ç¤ºç¬¦](https://blog.csdn.net/duandianR/article/details/72784828)
12. [STLå­¦ä¹ ç¬”è®°](https://github.com/steveLauwh/SGI-STL)
13. [å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)è¯¦è§£](https://www.cnblogs.com/liyulong1982/p/6013002.html)
14. [==äººè¯ç¿»è¯‘å™¨==ï¼šæ‰’å¼€å¤æ‚æŒ‡é’ˆç±»å‹](https://www.cdecl.org/)
15. [æ™ºèƒ½æŒ‡é’ˆçš„æ ‡å‡†ä¹‹äº‰ï¼šBoost vs. Loki](https://dev.gameres.com/Program/Abstract/Design/Boost.htm)
16. [é¢è¯•ç³»åˆ—ä¹‹C++çš„å¯¹è±¡å¸ƒå±€ã€å»ºè®®æ”¶è—ã€‘](https://segmentfault.com/a/1190000023098876)
17. [C++ä¸­çš„inlineç”¨æ³•](https://segmentfault.com/a/1190000023098876)

tree 05f3014f158ea1a79f3fd9b5bc13d044bc33de9c

.github/
.gitignore
C++å¹¶å‘.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit ac944bfa04bb02a79a80297f0abdd66c28f7b73b
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:06 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®
# **ç›®å½•**

<!-- vim-markdown-toc GFM -->

* [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
    * [æ ‡å‡†åº“æ”¯æŒ](#æ ‡å‡†åº“æ”¯æŒ)
    * [new(new operator)çš„å®ç°](#newnew-operatorçš„å®ç°)
        * [æ¦‚è¿°](#æ¦‚è¿°)
        * [`operator new()`](#operator-new)
            * [é‡è½½`operator new/new[]`](#é‡è½½operator-newnew)
                * [å†…å­˜å¯¹é½](#å†…å­˜å¯¹é½)
        * [`placement new`](#placement-new)
            * [NOTE](#note)
            * [ä½¿ç”¨](#ä½¿ç”¨)
        * [`new`çš„åˆå§‹åŒ–](#newçš„åˆå§‹åŒ–)
            * [`trivial && non-trivial`](#trivial--non-trivial)
            * [`new`çš„ä½¿ç”¨](#newçš„ä½¿ç”¨)
                * [åˆ†ç¦»åˆ†é…ä¸æ„é€ ](#åˆ†ç¦»åˆ†é…ä¸æ„é€ )
    * [`malloc`çš„å®ç°](#mallocçš„å®ç°)
        * [å†…å­˜åŒºåŸŸ](#å†…å­˜åŒºåŸŸ)
            * [`bins`](#bins)
            * [`fast_bin`](#fast_bin)
            * [`unsorted_bin`](#unsorted_bin)
            * [`top chunk`](#top-chunk)
        * [åˆ†é…è¿‡ç¨‹](#åˆ†é…è¿‡ç¨‹)
        * [é‡Šæ”¾è¿‡ç¨‹](#é‡Šæ”¾è¿‡ç¨‹)
    * [`new` ä¸ `malloc` çš„åŒºåˆ«](#new-ä¸-malloc-çš„åŒºåˆ«)
* [å¤šæ€](#å¤šæ€)
    * [åŠ¨æ€å¤šæ€](#åŠ¨æ€å¤šæ€)
        * [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³)
        * [å®æ–½æ¡ä»¶](#å®æ–½æ¡ä»¶)
        * [å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰](#å®æ–½æœºåˆ¶è™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨)
            * [å†…å­˜æ¨¡å‹](#å†…å­˜æ¨¡å‹)
                * [è™šè¡¨](#è™šè¡¨)
            * [ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨](#ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨)
            * [è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°](#è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°)
                * [è™šå‡½æ•°](#è™šå‡½æ•°)
                * [çº¯è™šå‡½æ•°](#çº¯è™šå‡½æ•°)
        * [æ€»ç»“](#æ€»ç»“)
            * [æ€§èƒ½](#æ€§èƒ½)
    * [é™æ€å¤šæ€](#é™æ€å¤šæ€)
        * [è®¾è®¡æ€æƒ³](#è®¾è®¡æ€æƒ³-1)
* [æ™ºèƒ½æŒ‡é’ˆ](#æ™ºèƒ½æŒ‡é’ˆ)
    * [`auto_ptr`(å·²å¼ƒç”¨)](#auto_ptrå·²å¼ƒç”¨)
    * [`unique_ptr(boost::scoped_ptr)`](#unique_ptrboostscoped_ptr)
    * [`shared_ptr`](#shared_ptr)
        * [æ•°æ®ç»“æ„](#æ•°æ®ç»“æ„)
            * [å¼•ç”¨è®¡æ•°](#å¼•ç”¨è®¡æ•°)
        * [ç”¨æ³•](#ç”¨æ³•)
            * [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
        * [åˆ é™¤å™¨](#åˆ é™¤å™¨)
        * [å¾ªç¯å¼•ç”¨](#å¾ªç¯å¼•ç”¨)
            * [`weak_ptr`](#weak_ptr)
        * [çº¿ç¨‹å®‰å…¨](#çº¿ç¨‹å®‰å…¨)
    * [å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ](#å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ)
* [è¡¨è¾¾å¼](#è¡¨è¾¾å¼)
    * [å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰](#å€¼ç±»åˆ«value-category)
        * [ä¸¤ç§æ··åˆç±»åˆ«](#ä¸¤ç§æ··åˆç±»åˆ«)
        * [ä¸‰ç§å…·ä½“ç±»åˆ«](#ä¸‰ç§å…·ä½“ç±»åˆ«)
            * [`lvalue`ï¼ˆå·¦å€¼ï¼‰](#lvalueå·¦å€¼)
            * [`prvalue`ï¼ˆçº¯å³å€¼ï¼‰](#prvalueçº¯å³å€¼)
            * [`xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰](#xvaluec11å°†äº¡å€¼)
    * [å€¼ç±»å‹ï¼ˆTypeï¼‰](#å€¼ç±»å‹type)
        * [æŒ‡é’ˆ](#æŒ‡é’ˆ)
        * [å¼•ç”¨](#å¼•ç”¨)
            * [å·¦å€¼å¼•ç”¨](#å·¦å€¼å¼•ç”¨)
            * [å³å€¼å¼•ç”¨](#å³å€¼å¼•ç”¨)
                * [æ— åå³å€¼å¼•ç”¨](#æ— åå³å€¼å¼•ç”¨)
                * [å…·åå³å€¼å¼•ç”¨](#å…·åå³å€¼å¼•ç”¨)
                * [è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨](#è½¬å‘å‹ä¸‡èƒ½é€šç”¨å¼•ç”¨)
                * [å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ](#å¼•ç”¨æŠ˜å å¼•ç”¨åå¡Œ)
        * [å·¦å³å€¼é‡è½½ç­–ç•¥](#å·¦å³å€¼é‡è½½ç­–ç•¥)
            * [ä¸€èˆ¬å‡½æ•°ç­–ç•¥](#ä¸€èˆ¬å‡½æ•°ç­–ç•¥)
            * [ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘](#ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘)
                * [ç§»åŠ¨è¯­ä¹‰`move`](#ç§»åŠ¨è¯­ä¹‰move)
                    * [`move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#moveè¯­ä¹‰that-this)
                    * [`copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰](#copyè¯­ä¹‰that-this)
                * [å®Œç¾è½¬å‘`forward`](#å®Œç¾è½¬å‘forward)
                    * [å«ä¹‰](#å«ä¹‰)
                    * [å®ç°](#å®ç°)
            * [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](#å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§)
* [è¿”å›å€¼ä¼˜åŒ–](#è¿”å›å€¼ä¼˜åŒ–)
    * [ç¼–è¯‘å™¨ä¼˜åŒ–](#ç¼–è¯‘å™¨ä¼˜åŒ–)
        * [`RVO`è‡ªåŠ¨ä¼˜åŒ–](#rvoè‡ªåŠ¨ä¼˜åŒ–)
        * [`NRVO`è‡ªåŠ¨ä¼˜åŒ–](#nrvoè‡ªåŠ¨ä¼˜åŒ–)
    * [æ‰‹åŠ¨ä¼˜åŒ–](#æ‰‹åŠ¨ä¼˜åŒ–)
* [String](#string)
    * [ä¸‰ç§å®ç°æ–¹å¼](#ä¸‰ç§å®ç°æ–¹å¼)
        * [Eager Copy](#eager-copy)
        * [COW](#cow)
        * [SSO](#sso)
    * [æŸ¥æ‰¾ find](#æŸ¥æ‰¾-find)
        * [ä¸€èˆ¬æŸ¥æ‰¾](#ä¸€èˆ¬æŸ¥æ‰¾)
        * [é›†åˆæŸ¥æ‰¾](#é›†åˆæŸ¥æ‰¾)
    * [NOTE](#note-1)
* [éšæœºæ•°](#éšæœºæ•°)
    * [ä¼ªéšæœºæ•°](#ä¼ªéšæœºæ•°)
    * [çœŸéšæœºæ•°](#çœŸéšæœºæ•°)
            * [Linux å†…æ ¸ç†µæ± ](#linux-å†…æ ¸ç†µæ± )
    * [Cé£æ ¼éšæœºæ•°](#cé£æ ¼éšæœºæ•°)
    * [C++11 random](#c11-random)
        * [éšæœºæ•°å¼•æ“](#éšæœºæ•°å¼•æ“)
        * [éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»](#éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»)
        * [ä¸€èˆ¬æ­¥éª¤](#ä¸€èˆ¬æ­¥éª¤)
* [STLå®¹å™¨](#stlå®¹å™¨)
    * [é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)](#é¡ºåºå®¹å™¨çº¿æ€§ç»“æ„)
        * [vector](#vector)
        * [deque](#deque)
    * [æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)](#æœ‰åºå…³è”å¼å®¹å™¨çº¢é»‘æ ‘)
        * [ä¼˜ç‚¹](#ä¼˜ç‚¹)
            * [RB VS AVL](#rb-vs-avl)
    * [æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)](#æ— åºå…³è”å¼å®¹å™¨å“ˆå¸Œè¡¨)
        * [æ‰©å®¹](#æ‰©å®¹)
    * [å®¹å™¨é€‚é…å™¨](#å®¹å™¨é€‚é…å™¨)
    * [å…¶å®ƒ](#å…¶å®ƒ)
    * [å †](#å †)
    * [è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ)
        * [è¿­ä»£å™¨æ”¯æŒæƒ…å†µ](#è¿­ä»£å™¨æ”¯æŒæƒ…å†µ)
        * [è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ](#è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ)
* [STLç®—æ³•](#stlç®—æ³•)
    * [æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼](#æŸ¥æ‰¾ç®—æ³•13ä¸ªåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼)
    * [æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥](#æ’åºå’Œé€šç”¨ç®—æ³•14ä¸ªæä¾›å…ƒç´ æ’åºç­–ç•¥)
        * [`std::sort()`](#stdsort)
    * [åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)](#åˆ é™¤å’Œæ›¿æ¢ç®—æ³•15ä¸ª)
    * [æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ](#æ’åˆ—ç»„åˆç®—æ³•2ä¸ªæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ)
    * [ç®—æœ¯ç®—æ³•(4ä¸ª)](#ç®—æœ¯ç®—æ³•4ä¸ª)
    * [ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)](#ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•6ä¸ª)
    * [å…³ç³»ç®—æ³•(8ä¸ª)](#å…³ç³»ç®—æ³•8ä¸ª)
    * [é›†åˆç®—æ³•(4ä¸ª)](#é›†åˆç®—æ³•4ä¸ª)
    * [å †ç®—æ³•(4ä¸ª)](#å †ç®—æ³•4ä¸ª)
* [STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨](#stlä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨)
    * [ä»¿å‡½æ•°](#ä»¿å‡½æ•°)
    * [å‡½æ•°é€‚é…å™¨](#å‡½æ•°é€‚é…å™¨)
* [STLç©ºé—´é…ç½®å™¨](#stlç©ºé—´é…ç½®å™¨)
    * [é»˜è®¤é…ç½®å™¨](#é»˜è®¤é…ç½®å™¨)
        * [ç±»å‹è¦æ±‚](#ç±»å‹è¦æ±‚)
        * [ç»„æˆç»“æ„](#ç»„æˆç»“æ„)
            * [ä¸€çº§ç©ºé—´é…ç½®å™¨](#ä¸€çº§ç©ºé—´é…ç½®å™¨)
            * [äºŒçº§ç©ºé—´é…ç½®å™¨](#äºŒçº§ç©ºé—´é…ç½®å™¨)
                * [åˆ†é…ç­–ç•¥](#åˆ†é…ç­–ç•¥)
        * [ç¼ºç‚¹](#ç¼ºç‚¹)
    * [è‡ªå®šä¹‰é…ç½®å™¨](#è‡ªå®šä¹‰é…ç½®å™¨)
* [STLè¿­ä»£å™¨](#stlè¿­ä»£å™¨)
    * [ç±»åˆ«](#ç±»åˆ«)
        * [åŸºæœ¬è¿­ä»£å™¨ç±»å‹](#åŸºæœ¬è¿­ä»£å™¨ç±»å‹)
        * [è¿­ä»£å™¨é€‚é…å™¨](#è¿­ä»£å™¨é€‚é…å™¨)
            * [æ’å…¥é€‚é…å™¨](#æ’å…¥é€‚é…å™¨)
            * [é€†å‘è¿­ä»£å™¨é€‚é…å™¨](#é€†å‘è¿­ä»£å™¨é€‚é…å™¨)
            * [ç§»åŠ¨è¿­ä»£å™¨](#ç§»åŠ¨è¿­ä»£å™¨)
    * [è¿­ä»£å™¨æ¨¡æ¿](#è¿­ä»£å™¨æ¨¡æ¿)
        * [è¿­ä»£å™¨ç±»å‹èƒå–](#è¿­ä»£å™¨ç±»å‹èƒå–)
    * [è¿­ä»£å™¨çš„ç§»åŠ¨](#è¿­ä»£å™¨çš„ç§»åŠ¨)
    * [è¿­ä»£å™¨å¤±æ•ˆ](#è¿­ä»£å™¨å¤±æ•ˆ)
    * [æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨](#æŒ‡é’ˆå¼•ç”¨å’Œè¿­ä»£å™¨)
        * [æŒ‡é’ˆ](#æŒ‡é’ˆ-1)
            * [constä¸æŒ‡é’ˆ](#constä¸æŒ‡é’ˆ)
            * [æŒ‡é’ˆä¸æ•°ç»„](#æŒ‡é’ˆä¸æ•°ç»„)
        * [å¼•ç”¨](#å¼•ç”¨-1)
        * [è¿­ä»£å™¨](#è¿­ä»£å™¨)
* [STLæ­£åˆ™è¡¨è¾¾å¼](#stlæ­£åˆ™è¡¨è¾¾å¼)
    * [æ„æˆ](#æ„æˆ)
        * [æ­£åˆ™è¡¨è¾¾å¼regex](#æ­£åˆ™è¡¨è¾¾å¼regex)
        * [æœç´¢åŒ¹é…ç®—æ³•](#æœç´¢åŒ¹é…ç®—æ³•)
        * [ç»“æœåŒ¹é…é›†](#ç»“æœåŒ¹é…é›†)
    * [å®ä¾‹](#å®ä¾‹)
* [CPP IOå¤„ç†](#cpp-ioå¤„ç†)
    * [åŸºæœ¬æµå¯¹è±¡](#åŸºæœ¬æµå¯¹è±¡)
        * [æ–‡ä»¶æµ](#æ–‡ä»¶æµ)
            * [æµæŒ‡é’ˆ](#æµæŒ‡é’ˆ)
            * [è¡Œç»“æŸæ ‡å¿—](#è¡Œç»“æŸæ ‡å¿—)
    * [ç¼“å†²](#ç¼“å†²)
        * [ç¼“å†²åŒº](#ç¼“å†²åŒº)
        * [åº”ç”¨](#åº”ç”¨)
            * [IOåŠ é€Ÿ](#ioåŠ é€Ÿ)
            * [æµåŒæ­¥](#æµåŒæ­¥)
            * [æµå…³è”](#æµå…³è”)
        * [å½±å“](#å½±å“)
            * [\nä¸ç¼“å†²åˆ·æ–°](#nä¸ç¼“å†²åˆ·æ–°)
            * [è¯¡å¼‚çš„std::cin](#è¯¡å¼‚çš„stdcin)
    * [æµç›¸å…³è¿­ä»£å™¨](#æµç›¸å…³è¿­ä»£å™¨)
        * [è¾“å…¥æµè¿­ä»£å™¨istream_iterator](#è¾“å…¥æµè¿­ä»£å™¨istream_iterator)
        * [è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator](#è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator)
        * [è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator](#è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator)
        * [è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator](#è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator)
* [ç±»å‹æ¨å¯¼](#ç±»å‹æ¨å¯¼)
    * [`auto`](#auto)
        * [ç”¨æ³•](#ç”¨æ³•-1)
        * [é™åˆ¶](#é™åˆ¶)
    * [`decltype`](#decltype)
        * [`decltype(exp)`æ¨å¯¼è§„åˆ™](#decltypeexpæ¨å¯¼è§„åˆ™)
    * [autoä¸decltypeçš„ä¸åŒ](#autoä¸decltypeçš„ä¸åŒ)
        * [å¯¹cvé™å®šç¬¦çš„å¤„ç†](#å¯¹cvé™å®šç¬¦çš„å¤„ç†)
        * [å¯¹å¼•ç”¨çš„å¤„ç†](#å¯¹å¼•ç”¨çš„å¤„ç†)
        * [æ€»ç»“](#æ€»ç»“-1)
    * [traits(ç±»å‹èƒå–)](#traitsç±»å‹èƒå–)
        * [è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–](#è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–)
        * [åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°](#åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°)
    * [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™)
    * [`std::common_type`](#stdcommon_type)
* [å¯è°ƒç”¨å¯¹è±¡](#å¯è°ƒç”¨å¯¹è±¡)
    * [lambdaè¡¨è¾¾å¼/é—­åŒ…](#lambdaè¡¨è¾¾å¼é—­åŒ…)
        * [é—­åŒ…](#é—­åŒ…)
        * [å¤§è‡´åŸç†](#å¤§è‡´åŸç†)
        * [å½¢å¼è¯´æ˜](#å½¢å¼è¯´æ˜)
            * [æ•è·å˜é‡åˆ—è¡¨`capture`](#æ•è·å˜é‡åˆ—è¡¨capture)
                * [å…¶ä»–è¯´æ˜](#å…¶ä»–è¯´æ˜)
            * [`parameters`](#parameters)
            * [`multable`](#multable)
            * [`noexcept/throw()`](#noexceptthrow)
            * [`attribute`](#attribute)
            * [`return_type`](#return_type)
        * [å…¶å®ƒ](#å…¶å®ƒ-1)
            * [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#cpp14-lambdaè¡¨è¾¾å¼å¢å¼º)
    * [ä»¿å‡½æ•°](#ä»¿å‡½æ•°-1)
    * [`std::function`ä¸`std::bind`](#stdfunctionä¸stdbind)
        * [`std::function`](#stdfunction)
        * [`std::bind`](#stdbind)
            * [å‚æ•°ç»‘å®š](#å‚æ•°ç»‘å®š)
* [æ¨¡æ¿](#æ¨¡æ¿)
    * [æ¨¡æ¿å‡½æ•°](#æ¨¡æ¿å‡½æ•°)
        * [æ¨¡æ¿å‚æ•°](#æ¨¡æ¿å‚æ•°)
            * [é»˜è®¤æ¨¡æ¿å‚æ•°](#é»˜è®¤æ¨¡æ¿å‚æ•°)
            * [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°)
            * [æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
                * [è°ƒç”¨å‚æ•°](#è°ƒç”¨å‚æ•°)
                * [è¿”å›å‚æ•°](#è¿”å›å‚æ•°)
                    * [å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹](#å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹)
            * [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](#æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°)
                * [æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³`T`ï¼‰](#æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹å³t)
                    * [æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰](#æ¨¡æ¿å®å‚éæŒ‡é’ˆè¡°å‡)
                    * [æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ](#æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ)
                * [æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³`T&ã€T&&`æˆ–`T*`ï¼‰](#æ¨¡æ¿å½¢å‚éå€¼ç±»å‹å³ttæˆ–t)
        * [æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™](#æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™)
        * [æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–)
            * [æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–](#æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–)
            * [éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–](#éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–)
    * [æ¨¡æ¿ç±»](#æ¨¡æ¿ç±»)
        * [å®šä¹‰](#å®šä¹‰)
        * [å®ä¾‹åŒ–](#å®ä¾‹åŒ–)
        * [ç‰¹åŒ–](#ç‰¹åŒ–)
        * [æ¨¡æ¿ç±»ä¸å‹å…ƒ](#æ¨¡æ¿ç±»ä¸å‹å…ƒ)
    * [éç±»å‹æ¨¡æ¿å‚æ•°](#éç±»å‹æ¨¡æ¿å‚æ•°)
    * [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](#æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™)
    * [å¹²é¢„æ¨¡æ¿ç¼–è¯‘](#å¹²é¢„æ¨¡æ¿ç¼–è¯‘)
        * [æ¨¡æ¿ç±»`enable_if<>/ enable_if_t<>`](#æ¨¡æ¿ç±»enable_if-enable_if_t)
        * [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](#æ§åˆ¶æ¨¡æ¿ç¼–è¯‘)
    * [ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜](#ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜)
        * [ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶](#ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶)
        * [é—®é¢˜ä¸æ–¹æ³•](#é—®é¢˜ä¸æ–¹æ³•)
    * [`typename`ä¸`class`](#typenameä¸class)
* [ç±»ç›¸å…³](#ç±»ç›¸å…³)
    * [æƒé™æ§åˆ¶](#æƒé™æ§åˆ¶)
        * [å¤–éƒ¨è®¿é—®æ§åˆ¶](#å¤–éƒ¨è®¿é—®æ§åˆ¶)
        * [ç‰¹æ®Šæƒé™æ§åˆ¶](#ç‰¹æ®Šæƒé™æ§åˆ¶)
            * [æ„é€ å‡½æ•°privateåŒ–](#æ„é€ å‡½æ•°privateåŒ–)
                * [å½±å“](#å½±å“-1)
            * [æ„é€ å‡½æ•°protectåŒ–](#æ„é€ å‡½æ•°protectåŒ–)
                * [å½±å“](#å½±å“-2)
            * [ææ„å‡½æ•°privateåŒ–](#ææ„å‡½æ•°privateåŒ–)
                * [å½±å“](#å½±å“-3)
    * [åˆå§‹åŒ–æ–¹æ³•](#åˆå§‹åŒ–æ–¹æ³•)
        * [åˆå§‹åŒ–åˆ—è¡¨](#åˆå§‹åŒ–åˆ—è¡¨)
        * [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)
        * [åˆ—è¡¨åˆå§‹åŒ–list_initialization](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)
            * [èšåˆä½“](#èšåˆä½“)
            * [std::initializer_list](#stdinitializer_list)
        * [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)
            * [NOTE](#note-2)
                * [ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°](#ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°)
            * [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†)
    * [å‡½æ•°](#å‡½æ•°)
        * [The Big Three](#the-big-three)
        * [ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)](#ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°42)
            * [ç”Ÿæˆå†…å®¹](#ç”Ÿæˆå†…å®¹)
            * [ç”Ÿæˆè§„åˆ™](#ç”Ÿæˆè§„åˆ™)
            * [å‡½æ•°ç”Ÿæˆç®¡ç†](#å‡½æ•°ç”Ÿæˆç®¡ç†)
                * [ä½¿ç”¨ç¼ºçœå‡½æ•°=default](#ä½¿ç”¨ç¼ºçœå‡½æ•°default)
                * [ç¦æ­¢å‡½æ•°=delete](#ç¦æ­¢å‡½æ•°delete)
                * [ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit](#ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit)
        * [æ„é€ å‡½æ•°](#æ„é€ å‡½æ•°)
        * [è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½](#è‡ªå¢å‡è¿ç®—ç¬¦é‡è½½)
        * [`inline`å‡½æ•°](#inlineå‡½æ•°)
    * [`friend`æˆå‘˜](#friendæˆå‘˜)
    * [ç»§æ‰¿](#ç»§æ‰¿)
        * [è™šå‡½æ•°](#è™šå‡½æ•°-1)
        * [é™åˆ¶ç»§æ‰¿`final`](#é™åˆ¶ç»§æ‰¿final)
        * [ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶](#ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶)
        * [ç»§æ‰¿çš„å†…å®¹](#ç»§æ‰¿çš„å†…å®¹)
                * [ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½](#ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½)
                * [ç»§æ‰¿æ„é€ å‡½æ•°](#ç»§æ‰¿æ„é€ å‡½æ•°)
        * [è™šç»§æ‰¿](#è™šç»§æ‰¿)
            * [å®ç°åŸç†](#å®ç°åŸç†)
                * [è™šåŸºç±»è¡¨](#è™šåŸºç±»è¡¨)
            * [NOTE](#note-3)
* [å‡½æ•°ä¸è¿ç®—ç¬¦](#å‡½æ•°ä¸è¿ç®—ç¬¦)
    * [`sizeof`](#sizeof)
* [ç±»å‹æ£€æŸ¥ä¸è½¬æ¢](#ç±»å‹æ£€æŸ¥ä¸è½¬æ¢)
    * [ç±»å‹å¯¹æ¯”](#ç±»å‹å¯¹æ¯”)
        * [`std::is_same<>`](#stdis_same)
            * [`std::decay`ç±»å‹é€€åŒ–](#stddecayç±»å‹é€€åŒ–)
    * [`std::common_type`](#stdcommon_type-1)
    * [ç±»å‹è½¬æ¢](#ç±»å‹è½¬æ¢)
        * [ä¼ ç»Ÿç±»å‹è½¬æ¢](#ä¼ ç»Ÿç±»å‹è½¬æ¢)
            * [éšå¼ç±»å‹è½¬æ¢](#éšå¼ç±»å‹è½¬æ¢)
            * [æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢](#æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢)
        * [æ ‡å‡†ç±»å‹è½¬æ¢](#æ ‡å‡†ç±»å‹è½¬æ¢)
            * [`static_cast<type-id>(expression)`](#static_casttype-idexpression)
            * [`const_cast<type-id>(expression)`](#const_casttype-idexpression)
            * [`reinterpret_cast<type-id>(expression)`](#reinterpret_casttype-idexpression)
            * [`dynamic_cast<type-id>(expression)`](#dynamic_casttype-idexpression)
        * [å»ºè®®](#å»ºè®®)
* [å…³é”®å­—è¡¥å……è¯´æ˜](#å…³é”®å­—è¡¥å……è¯´æ˜)
    * [cvé™å®šç¬¦](#cvé™å®šç¬¦)
        * [`const`](#const)
            * [`mutable`](#mutable)
            * [`const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨](#constä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨)
            * [`const`ä¿®é¥°å‡½æ•°](#constä¿®é¥°å‡½æ•°)
            * [`const`ä¸`static`](#constä¸static)
    * [`CPP14: constexpr `](#cpp14-constexpr-)
        * [å¸¸é‡ä¸åªè¯»](#å¸¸é‡ä¸åªè¯»)
        * [`constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼](#constexprä¿®é¥°å‡½æ•°è¡¨è¾¾å¼)
        * [`constexpr`ä¿®é¥°å˜é‡](#constexprä¿®é¥°å˜é‡)
        * [`constexpr`ä¿®é¥°æŒ‡é’ˆ](#constexprä¿®é¥°æŒ‡é’ˆ)
    * [`volatile`](#volatile)
        * [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
* [é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)](#é‡è½½è¦†ç›–å’Œæ”¹å†™éšè—)
    * [é‡è½½**overload**](#é‡è½½overload)
        * [é‡è½½å†³è®®](#é‡è½½å†³è®®)
            * [åå­—æŸ¥æ‰¾](#åå­—æŸ¥æ‰¾)
            * [é‡è½½å†³è®®](#é‡è½½å†³è®®-1)
                * [å‚æ•°ç±»å‹åŒ¹é…](#å‚æ•°ç±»å‹åŒ¹é…)
                * [å‡½æ•°åŒ¹é…é¡ºåº](#å‡½æ•°åŒ¹é…é¡ºåº)
            * [å¯è®¿é—®æ€§æ£€æŸ¥](#å¯è®¿é—®æ€§æ£€æŸ¥)
    * [è¦†ç›–**override**](#è¦†ç›–override)
    * [æ”¹å†™**overwrite**/éšè—](#æ”¹å†™overwriteéšè—)
    * [æ€»ç»“](#æ€»ç»“-2)
* [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†-1)
    * [catchå—](#catchå—)
        * [catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢](#catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢)
    * [throw](#throw)
    * [å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨](#å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨)
    * [å¼‚å¸¸ç§ç±»](#å¼‚å¸¸ç§ç±»)
        * [æ ‡å‡†å¼‚å¸¸](#æ ‡å‡†å¼‚å¸¸)
        * [è‡ªå®šä¹‰å¼‚å¸¸](#è‡ªå®šä¹‰å¼‚å¸¸)
* [çº¿ç¨‹ä¸åŸå­æ“ä½œ](#çº¿ç¨‹ä¸åŸå­æ“ä½œ)
* [C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§](#cå…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§)
    * [C++ 11](#c-11)
        * [`tuple`å®¹å™¨(CPP11)](#tupleå®¹å™¨cpp11)
        * [`decltype`åç½®è¿”å›ç±»å‹](#decltypeåç½®è¿”å›ç±»å‹)
        * [æ–°åˆå§‹åŒ–æœºåˆ¶](#æ–°åˆå§‹åŒ–æœºåˆ¶)
            * [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–-1)
            * [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–)
            * [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°-1)
        * [å¤–éƒ¨æ¨¡æ¿(CPP11)](#å¤–éƒ¨æ¨¡æ¿cpp11)
        * [ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·](#ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·)
        * [ç±»å‹åˆ«å](#ç±»å‹åˆ«å)
        * [`nullptr`](#nullptr)
        * [å¯å˜å‚æ•°](#å¯å˜å‚æ•°)
            * [å¯å˜å‡½æ•°å‚æ•°](#å¯å˜å‡½æ•°å‚æ•°)
            * [å¯å˜æ¨¡æ¿å‚æ•°](#å¯å˜æ¨¡æ¿å‚æ•°-1)
                * [å¯å˜å‚æ•°æ¨¡æ¿ç±»](#å¯å˜å‚æ•°æ¨¡æ¿ç±»)
                    * [åç‰¹åŒ–å±•å¼€](#åç‰¹åŒ–å±•å¼€)
                    * [ç»§æ‰¿å±•å¼€](#ç»§æ‰¿å±•å¼€)
                * [å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°](#å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)
                    * [é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…](#é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…)
                    * [é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…](#é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…)
                * [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯-1)
                    * [æ¶ˆé™¤ä»£ç å†—ä½™](#æ¶ˆé™¤ä»£ç å†—ä½™)
                    * [å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰](#å®ç°cç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜delegate)
            * [å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)](#å¯å˜æ™®é€šå‚æ•°å˜é•¿å‚æ•°)
                * [`initializer_list`å®ç°](#initializer_listå®ç°)
                * [`...`å®ç°](#å®ç°-1)
            * [å¯å˜å‚æ•°åŸºç±»](#å¯å˜å‚æ•°åŸºç±»)
        * [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](#sfinaeæ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯)
        * [æ¨¡æ¿ç±»`enable_if`](#æ¨¡æ¿ç±»enable_if)
            * [ç±»å‹åç‰¹åŒ–](#ç±»å‹åç‰¹åŒ–)
            * [æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](#æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)
            * [æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](#æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)
        * [å¼ºåˆ¶å¼•ç”¨](#å¼ºåˆ¶å¼•ç”¨)
        * [å­—é¢é‡](#å­—é¢é‡)
            * [æ ‡å‡†å­—é¢é‡](#æ ‡å‡†å­—é¢é‡)
                * [æ•´æ•°å­—é¢é‡](#æ•´æ•°å­—é¢é‡)
                    * [å½¢å¼](#å½¢å¼)
                    * [note](#note-4)
            * [æµ®ç‚¹å­—é¢é‡](#æµ®ç‚¹å­—é¢é‡)
            * [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡)
            * [å­—ç¬¦å­—é¢é‡](#å­—ç¬¦å­—é¢é‡-1)
            * [å¸ƒå°”å­—é¢é‡](#å¸ƒå°”å­—é¢é‡)
            * [ç”¨æˆ·å®šä¹‰å­—é¢é‡](#ç”¨æˆ·å®šä¹‰å­—é¢é‡)
                * [å‚æ•°ä¸åŒ¹é…](#å‚æ•°ä¸åŒ¹é…)
                * [å®šä¹‰å­—é¢é‡](#å®šä¹‰å­—é¢é‡)
    * [C++14](#c14)
        * [autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼](#autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼)
        * [lambdaè¡¨è¾¾å¼](#lambdaè¡¨è¾¾å¼)
        * [`constexpr`](#constexpr)
    * [C++17](#c17)
        * [ç»“æ„åŒ–ç»‘å®š(CPP17)](#ç»“æ„åŒ–ç»‘å®šcpp17)
            * [ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)](#ç»‘å®šæ–¹å¼æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)
        * [æŠ˜å è¡¨è¾¾å¼](#æŠ˜å è¡¨è¾¾å¼)
        * [æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼CTAD](#æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼ctad)
            * [æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°](#æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°)
            * [`auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°](#autoæ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°)
        * [ç¼–è¯‘æœŸIF](#ç¼–è¯‘æœŸif)
        * [æŠ˜å è¡¨è¾¾å¼è¡¥å……](#æŠ˜å è¡¨è¾¾å¼è¡¥å……)
        * [å˜é•¿`using`å£°æ˜](#å˜é•¿usingå£°æ˜)
    * [C++20](#c20)
        * [Ranges](#ranges)
        * [View](#view)
        * [æ¨¡å—Modules](#æ¨¡å—modules)
        * [åç¨‹(Coroutines)](#åç¨‹coroutines)
* [æ–‡ä»¶ç³»ç»Ÿ](#æ–‡ä»¶ç³»ç»Ÿ)
    * [åŸºæœ¬ç±»](#åŸºæœ¬ç±»)
* [æ—¶é—´ä¸æ—¥æœŸ](#æ—¶é—´ä¸æ—¥æœŸ)
    * [Cé£æ ¼](#cé£æ ¼)
    * [`std::chrono`](#stdchrono)
        * [`duration` æ—¶é•¿](#duration-æ—¶é•¿)
            * [`std::ratio`](#stdratio)
            * [`std::chrono::duration `](#stdchronoduration-)
        * [`clock` æ—¶é’Ÿ](#clock-æ—¶é’Ÿ)
        * [`time_point` æ—¶é—´ç‚¹](#time_point-æ—¶é—´ç‚¹)
        * [`std::chrono_literals` (c++14)](#stdchrono_literals-c14)
* [æ‚é¡¹](#æ‚é¡¹)
    * [æƒ¯ç”¨æ³•](#æƒ¯ç”¨æ³•)
        * [PIML(pointer to implementation)](#pimlpointer-to-implementation)
    * [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](#ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ)
        * [åå­—è§£æ](#åå­—è§£æ)
    * [æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ](#æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ)
* [å…¶ä»–æ¨è](#å…¶ä»–æ¨è)

<!-- vim-markdown-toc -->

# å†…å­˜ç®¡ç†

## æ ‡å‡†åº“æ”¯æŒ

+ æ ‡å‡†åº“ä¸º`operator new/new[]å’Œoperator delete/delete[]`åˆ†åˆ«æä¾›äº†æŠ›å‡ºå’Œä¸æŠ›å‡ºå¼‚å¸¸çš„é‡è½½ç‰ˆæœ¬ã€‚ç”¨æˆ·å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸæˆ–ç±»ä½œç”¨åŸŸå®šä¹‰è‡ªå·±çš„é‡è½½å¹¶å®ç°ã€‚
+ noteï¼š`new[]`ä¸`delete[]`éœ€è¦æˆå¯¹ä½¿ç”¨ï¼ŒåŸå› åœ¨äºè¿™ä¸€å¯¹å‡½æ•°æ˜¯ä¸ºå¯¹è±¡æ•°ç»„æœåŠ¡çš„ã€‚`new[]`ä¸ºäº†ä¿å­˜æ•°ç»„çš„å¤§å°ä¿¡æ¯ï¼Œåœ¨ç”³è¯·å†…å­˜æ—¶**å¤šç”³è¯·äº†ä¸€ä¸ªåœ°å€é•¿åº¦**æ”¾åœ¨é¦–éƒ¨æ¥å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼Œè€Œ`delete`ä¹Ÿéœ€è¦é•¿åº¦ä¿¡æ¯æ¥ç¡®å®šè°ƒç”¨ææ„å‡½æ•°çš„æ¬¡æ•°

## new(new operator)çš„å®ç°

### æ¦‚è¿°

+ å…·ä½“å®ç°æ–¹æ³•æ²¡æœ‰ä¸€å®šä¹‹è§„ï¼Œä¸€èˆ¬è¦ç»å†ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š

1. è°ƒç”¨`operator new`å‡½æ•°ï¼ˆ`new[]`è°ƒç”¨çš„æ—¶`operator new[]`å‡½æ•°ï¼‰åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„æœªå‘½åçš„åŸå§‹å†…å­˜ç©ºé—´ã€‚
2. ç¼–è¯‘å™¨è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ„é€ å¯¹è±¡ï¼Œä¼ å…¥åˆå€¼ã€‚
3. å®Œæˆå¯¹è±¡æ„é€ åè¿”å›å¯¹è±¡æŒ‡é’ˆã€‚

### `operator new()`

+ `operator new()`åªåˆ†é…æ‰€è¦æ±‚çš„ç©ºé—´ï¼Œè°ƒç”¨ç›¸å…³å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–ç©ºé—´ç”±`new operator`åœ¨`operator new`è¿”å›ä¹‹åå®Œæˆã€‚

+ `operator new()`å¯ä»¥åœ¨ä¸èƒ½åˆ†é…å†…å­˜è€Œè¿”å›å¼‚å¸¸ï¼ˆæ˜¯å¦è¿”å›å¼‚å¸¸å–å†³äºæ˜¯å¦æœ‰`nothrow`å‚æ•°ï¼‰ä¹‹å‰é€šè¿‡`set_new_handler()`æŒ‡å®šçš„å›è°ƒå‡½æ•°`void new_handler(void)`å®Œæˆä¸€äº›æ“ä½œ(å¯ä»¥å…ˆé‡Šæ”¾ä¸€äº›ç©ºé—´ï¼Œç„¶åå†å°è¯•ç”³è¯·ç©ºé—´)ã€‚

#### é‡è½½`operator new/new[]`

è‹¥æƒ³å®ç°è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é‡è½½å’Œé‡å®šä¹‰ä¸¤ç§æ–¹å¼å®ç°ï¼Œä¸¤ç§æ–¹å¼éƒ½æœ‰å…¶é™åˆ¶ï¼š

|  æ–¹æ³•  |      åŸç†      |               ç¼ºç‚¹               |
| :----: | :------------: | :------------------------------: |
|  é‡è½½  |    å‡½æ•°é‡è½½    |          ä¸åŒçš„å‡½æ•°ç­¾å          |
| é‡å®šä¹‰ | åå­—æŸ¥æ‰¾çš„é¡ºåº | å¦‚æœå‡½æ•°å·²ç»`inline`åˆ™ä¸èƒ½é‡å®šä¹‰ |

+ C++æ ‡å‡†è§„å®š`new operator`ä¸`delete operator`çš„è¡Œä¸ºæ˜¯ä¸èƒ½å¤Ÿä¹Ÿä¸åº”è¯¥è¢«æ”¹å˜ï¼Œåªæœ‰`operator new`ä¸`operator delete`å…è®¸è¢«é‡è½½ã€‚
+ è¦æ±‚ï¼šé‡è½½å¯ä»¥å¸¦å…¶ä»–å‚æ•°ã€ç¬¬ä¸€å‚æ•°å¿…é¡»æ˜¯è¡¨ç¤ºè¦æ±‚åˆ†é…çš„ç©ºé—´å¤§å°çš„`size_t`ç±»å‹ã€è¿”å›å€¼å¿…é¡»æ˜¯`void*`ç±»å‹ã€‚

##### å†…å­˜å¯¹é½

ä¸åŒçš„ç¼–è¯‘å™¨ä¸€èˆ¬éƒ½ä¼šæœ‰é»˜è®¤çš„å¯¹é½é‡ï¼Œä¸€èˆ¬éƒ½ä¸º2çš„å¹‚æ¬¡ã€‚åœ¨Cä¸­å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤`#pragma pack(n)`ä¿®æ”¹å¯¹é½é‡ï¼ŒC++ä¸­æä¾›äº†**`alignas`**ç”¨äºæŒ‡å®šå¯¹é½é‡ï¼Œå¯ä»¥åº”ç”¨äºç±»/ç»“æ„ä½“/union/æšä¸¾çš„å£°æ˜/å®šä¹‰ã€éä½åŸŸçš„æˆå‘˜å˜é‡çš„å®šä¹‰ã€å˜é‡çš„å®šä¹‰ï¼ˆé™¤äº†å‡½æ•°å‚æ•°æˆ–å¼‚å¸¸æ•è·çš„å‚æ•°ï¼‰ï¼Œ`alignas`ä¼šå¯¹å¯¹é½é‡åšæ£€æŸ¥ï¼Œ**å¯¹é½é‡ä¸èƒ½å°äºé»˜è®¤å¯¹é½**ã€‚å¯¹åº”çš„C++è¿˜æä¾›äº†`alignof operator`ï¼Œæ“ä½œæ•°å¦‚æœæ˜¯å¼•ç”¨å°±è¿”å›å¼•ç”¨ç±»å‹çš„å¯¹é½æ–¹å¼ã€å¦‚æœæ˜¯æ•°ç»„åˆ™è¿”å›å…ƒç´ ç±»å‹çš„å¯¹é½æ–¹å¼ã€‚

```c++
struct Foo {
    int i;
    float f;
    char c;
};
struct Empty { };
struct alignas(64) Empty64 { };

cout << alignof(char) << alignof(int*) << alignof(Foo) << alignof(Empty) << alignof(Empty64);
//1 8 4 1 64
```

### `placement new`

`placement new`æ˜¯æ ‡å‡†åº“æä¾›çš„**`operator new`çš„é‡è½½**ç‰ˆæœ¬ï¼Œå®ƒæœ¬èº«å¹¶ä¸åˆ†é…å†…å­˜ã€‚`placement new`æ‰§è¡Œæ—¶å¿½ç•¥äº†`size_t`å‚æ•°ï¼Œåªæ˜¯åœ¨ç¬¬äºŒå‚æ•°ä»£è¡¨çš„çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼ˆå †ã€æ ˆç”šè‡³é™æ€å­˜å‚¨åŒºï¼‰ä¸Šæ„é€ å¯¹è±¡ï¼Œè¿”å›æŒ‡å‘å·²ç»åˆ†é…å¥½çš„æŸæ®µå†…å­˜ï¼ˆæ­¤æ®µå†…å­˜å·²ç»è¢«å¯¹è±¡çš„æ„é€ å‡½æ•°åˆå§‹åŒ–è¿‡ï¼‰çš„ä¸€ä¸ªæŒ‡é’ˆã€‚

```c++
void *operator new( size_t, void * p ) throw() { return p; }///åŸå‹
Object * p = new (address) ClassConstruct(...)///ä½¿ç”¨
```

ç”±äºæ˜¯åœ¨å·²ç»é¢„å…ˆå‡†å¤‡å¥½çš„å†…å­˜ä¸­åˆ†é…å†…å­˜ï¼Œé¿å…äº†æŸ¥æ‰¾å¯ç”¨å†…å­˜ç©ºé—´å’Œä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼Œéå¸¸é€‚åˆé‚£äº›å¯¹æ—¶é—´è¦æ±‚æ¯”è¾ƒé«˜ï¼Œé•¿æ—¶é—´è¿è¡Œä¸å¸Œæœ›è¢«æ‰“æ–­çš„åº”ç”¨ç¨‹åºã€‚

#### NOTE

+ åˆ©ç”¨`placement new`å®ç°çš„å¯¹è±¡ä¸ä¸€å®šèƒ½ä½¿ç”¨`delete`ç³»åˆ—å‡½æ•°é‡Šæ”¾ç©ºé—´(è¿™ä¸ªå†…å­˜ä¸ä¸€å®šæ˜¯`new`åŠ¨æ€ç”³è¯·çš„ï¼‰ï¼Œä½†æ˜¯è¿™ä¸€ç±»å¯¹è±¡**å¿…é¡»æ˜¾å¼è°ƒç”¨ç±»çš„ææ„å‡½æ•°**ã€‚ä½†æ˜¯å¦‚æœæ‰€ä½¿ç”¨çš„ç©ºé—´æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶ä¸€å®šè¦é‡Šæ”¾è¿™å—å †å†…å­˜ã€‚

#### ä½¿ç”¨

  ```cpp
class X{
public:
    X() { cout<<"constructor of X"<<endl; }
    ~X() { cout<<"destructor of X"<<endl;}
    void function(int n) {}
};

int main(){
    char* buf = new char[sizeof(X)]; //1:åˆ†é…å†…å­˜bufï¼ˆå †ä¸Šã€æ ˆä¸Šæˆ–è€…ç›´æ¥æŒ‡å‘æœ‰æ„ä¹‰çš„åœ°å€éƒ½å¯ï¼‰
    X *px = new(buf) X;     //2:åœ¨åˆšæ‰å·²åˆ†é…çš„ç¼“å­˜åŒºè°ƒç”¨placement newæ¥æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚
    px->function(10);     //3:æŒ‰ç…§æ™®é€šæ–¹å¼ä½¿ç”¨åˆ†é…çš„å¯¹è±¡ã€‚
    px->~X();       //4:ä½¿ç”¨å®Œè¿™ä¸ªå¯¹è±¡å°±æ˜¾å¼è°ƒç”¨å®ƒçš„ææ„å‡½æ•°\ã€‚
    delete []buf;      //5:é‡Šæ”¾buf(å–å†³äº1)
    return 0;
}
  ```

### `new`çš„åˆå§‹åŒ–

å¯¹äº`new T initializer;`å½¢å¼çš„è°ƒç”¨ï¼ŒC++`new` è¡¨è¾¾å¼ä¼šå…ˆè°ƒç”¨ `operator new` åˆ†é…ä¸€å—è¶³ä»¥æ”¾ä¸‹ä¸€ä¸ª `T` ç±»å‹çš„å€¼çš„å†…å­˜ï¼Œç„¶åå†æ ¹æ® `initializer` å¯¹ `T` ç±»å‹çš„å€¼è¿›è¡Œ**åˆå§‹åŒ–**ã€‚C++ çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ª[ä¸“é—¨çš„å¤æ‚ä¸»é¢˜](https://zh.cppreference.com/w/cpp/language/initialization)ï¼Œä¸åŒçš„åœºæ™¯ã€ä¸åŒçš„è¯­æ³•å’Œä¸åŒçš„ç±»å‹ä¼šå¯¼è‡´å®Œå…¨ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼å’Œåˆå§‹åŒ–ç»“æœï¼Œè°ƒç”¨æ„é€ å™¨åªæ˜¯åˆå§‹åŒ–çš„å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä¸”åªé€‚ç”¨äº` class type` å’Œ` union type`ã€‚

åœ¨è¿™é‡Œç”¨çš„æ˜¯å…¶ä¸­ä¸€ç§å«åš` value initialization `çš„åˆå§‹åŒ–æ–¹å¼ã€‚C++ è§„å®š` value initialization `çš„è¡Œä¸ºä¸ºï¼š

*  `Tï¼š class type`ï¼Œä¸”å…·æœ‰ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„` default constructor`ï¼Œé‚£ä¹ˆå€¼å°†è¢«é»˜è®¤åˆå§‹åŒ–ï¼›
* `Tï¼š class type`ï¼Œä¸”` default constructor `æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æˆ–è¢«æ ‡è®°ä¸º `default`ï¼Œé‚£ä¹ˆå€¼å°†è¢«ï¼š
  * é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼Œå¦‚æœ` defaut constructor` æ˜¯ `trivial` çš„ï¼›
  * é»˜è®¤åˆå§‹åŒ–ï¼ˆ`default-initialized`ï¼‰ï¼Œå¦‚æœ `default constructor `ä¸æ˜¯ `trivial` çš„ï¼›

* å¦‚æœ `T` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„çš„æ¯ä¸€ä¸ªæˆå‘˜å‡ä¼šè¢«` value-initialized`ï¼›

* å¦åˆ™å€¼å°†è¢«é›¶åˆå§‹åŒ–ï¼ˆ`zero-initialized`ï¼‰ï¼›
	
#### `new`çš„ä½¿ç”¨

```c++
::(optional) new (placement_params)(optional) ( type ) initializer(optional);

p_var = new type(initializer);//ä¸€èˆ¬è¡¨è¾¾å¼
p_var = new type{initializer};//ä¸€èˆ¬è¡¨è¾¾å¼

p_var = new type[size];
delete[] p_var;

auto p = new double[2][2];
auto p = new double[2][2]{ {1.0,2.0},{3.0,4.0} };

new (nothrow) Type (optional-initializer-expression-list);//ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œå¤±è´¥è¿”å›nullptrã€‚

auto p = new auto('c');
```

##### åˆ†ç¦»åˆ†é…ä¸æ„é€ 

`new`æ“ä½œå°†å†…å­˜åˆ†é…å’Œå¯¹è±¡æ„é€ ç»„åˆåœ¨ä¸€èµ·ï¼Œåœ¨æ„é€ ç±»æ—¶å¯èƒ½é€ æˆåˆ›å»ºä¸€äº›ç”¨ä¸åˆ°çš„å¯¹è±¡ã€å¯¹è±¡è¢«èµ‹å€¼ä¸¤æ¬¡ã€æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ç”šè‡³ä¸èƒ½åŠ¨æ€åˆ†é…æ•°ç»„ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨`allocator`éš¾åº¦å®Œæˆå†…å­˜çš„åˆ†é…ã€‚

```c++
allocator<string> alloc; // æ„é€ allocatorå¯¹è±¡
auto const p = alloc.allocate(n); // åˆ†é…nä¸ªæœªåˆå§‹åŒ–çš„string

auto q = p;

alloc.construct(q++, "hello"); // åœ¨åˆ†é…çš„å†…å­˜å¤„åˆ›å»ºå¯¹è±¡
alloc.construct(q++, 10, 'c');

while(q != p)//å°†å·²æ„é€ çš„stringé”€æ¯ï¼š
    alloc.destroy(--q);

alloc.deallocate(p, n);//å°†åˆ†é…çš„nä¸ªstringå†…å­˜ç©ºé—´é‡Šæ”¾
```

ä½†å®é™…ä¸Šå‡ ä¹å¾ˆå°‘ä½¿ç”¨`std::allocator`ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯`std::alloc`ã€‚ä¸»è¦æ˜¯ç”±äºå‰è€…æœ‰æ— æ³•æ§åˆ¶å†…å­˜å¯¹é½ã€éš¾ä»¥åº”ç”¨å†…å­˜æ± ä¹‹ç±»çš„ä¼˜åŒ–æœºåˆ¶ç­‰é—®é¢˜ã€‚

## [`malloc`çš„å®ç°](https://zhuanlan.zhihu.com/p/57863097)

<<<<<<< HEAD
`malloc()`çš„å®ç°**ä¾èµ–äº`brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡`brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMA	P_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨`mmap`çš„åŒ¿åæ˜ å°„åœ¨`MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚
=======
`malloc()`çš„å®ç°**ä¾èµ–äº`brk()ã€sbrk()å’Œmmap()`ç³»ç»Ÿ**è°ƒç”¨ï¼Œå‰è€…é€šè¿‡`brk`æŒ‡é’ˆç›´æ¥åœ¨å †åŒºè·å–å°å†…å­˜ï¼ˆ`DEFAULT_MMAP_THRESHOLD=128KB`ï¼‰ï¼Œåè€…åˆ©ç”¨`mmap`çš„åŒ¿åæ˜ å°„åœ¨`MMS`æ®µè·å–å¤§å—çš„å†…å­˜ã€‚ç”±äºéƒ½æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯æ¬¡ç”³è¯·ç©ºé—´éƒ½éœ€è¦è¿›è¡Œæ¨¡æ€è½¬æ¢å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œæ‰€ä»¥ç”¨æˆ·æ€çš„å†…å­˜åˆ†é…å™¨éƒ½é‡‡ç”¨äº†å†…å­˜æ± æ¥ç®¡ç†å°å†…å­˜ã€‚
>>>>>>> d6cc772463d7c322554dbca975fea31744a38242

![](img/lang/memary_pool.jpg)

![](img/lang/chunk.png)

### å†…å­˜åŒºåŸŸ

|  åç§°   |                 è§£é‡Š                 |
| :-----: | :----------------------------------: |
| `chunk` |   å°†å †å†…å­˜åˆ†æˆäº†å¤§å°ä¸åŒçš„`chunk`    |
|  `bin`  |  ç”±åŒå‘é“¾è¡¨ç»„ç»‡çš„å¤§å°ç›¸ä¼¼çš„`chunk`   |
| `bins`  | `bin`é“¾é¦–åœ°å€ç»„æˆçš„å¤§å°ä¸º`128`çš„æ•°ç»„ |

#### `bins`

|   `bins`ç±»åˆ«   |   åŒºåŸŸ   |                           ç‰¹ç‚¹                           |      ä½œç”¨      |
| :------------: | :------: | :------------------------------------------------------: | :------------: |
|                |  [0,0]   |                          æœªä½¿ç”¨                          |                |
| `unsorted bin` |  [1,1]   |          ç»´æŠ¤éƒ¨åˆ†`free`é‡Šæ”¾ä»¥åŠè¢«åˆ†å‰²çš„`chunk`           |  åŠ å¿«äºŒæ¬¡åˆ†é…  |
|  `small bin`   |  [2,63]  |        æ¯ä¸ª`bin`ä¿å­˜æ‰€æœ‰å¤§å°ä¸º`index*8B`çš„`chunk`        | åˆ†é…`512B`ä»¥ä¸‹ |
|  `large bin`   | [64,127] | `bin`å†…ä¸ºæŒ‡å®šèŒƒå›´å†…æŒ‰å¤§å°æ’åºçš„`chunk`ï¼Œç›¸é‚»`bin`å·®`64B` | åˆ†é…`512B`ä»¥ä¸Š |

#### `fast_bin`

ä¸ºäº†åŠ é€Ÿå°å¯¹è±¡çš„åˆ†é…ï¼Œé‡Šæ”¾ä¸å¤§äº `max_fast`ï¼ˆé»˜è®¤ `64B`ï¼‰çš„ `chunk` é¦–å…ˆå°†ä¼šè¢«æ”¾åˆ° `fast bins`ä¸­ï¼Œ`fast bins` ä¸­çš„ `chunk` å¹¶ä¸æ”¹å˜å®ƒçš„ä½¿ç”¨æ ‡å¿— Pï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•å°†å®ƒä»¬åˆå¹¶ã€‚`malloc` åœ¨æŸä¸ª**ç‰¹å®šçš„æ—¶å€™**ä¼šéå†` fast bins` ä¸­çš„ `chunk`ï¼Œå°†ç›¸é‚»çš„ç©ºé—² `chunk` è¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶åçš„ `chunk` åŠ å…¥ `unsorted bin` ä¸­ã€‚

#### `unsorted_bin`

ä¿å­˜è¢«ç”¨æˆ·é‡Šæ”¾çš„å¤§äº `max_fast`çš„ `chunk` ï¼Œæˆ–è€… `fast bins` ä¸­çš„ç©ºé—² `chunk` åˆå¹¶åäº§ç”Ÿçš„`chunk`ã€‚`unsorted bin` å¯ä»¥çœ‹åšæ˜¯ `bins` çš„ä¸€ä¸ª**ç¼“å†²åŒº**ï¼Œå¢åŠ å®ƒåªæ˜¯ä¸ºäº†åŠ å¿«åˆ†é…çš„é€Ÿåº¦ã€‚

#### `top chunk`

`top chunk`æ˜¯å †é¡¶çš„`chunk`ï¼Œå †é¡¶æŒ‡é’ˆ`brk`ä½äº`top chunk`çš„é¡¶éƒ¨ï¼Œä»–é€šè¿‡ä»`mmap`ç›´æ¥ä½¿ç”¨**å†…å­˜æ˜ å°„**æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´æ¨¡æ‹Ÿ`sub-heap`ï¼Œç”¨äºåˆ†é…æ¯”è¾ƒå¤§çš„å†…å­˜ã€‚ç§»åŠ¨`brk`æŒ‡é’ˆå³å¯æ‰©å……`top chunk`çš„å¤§å°ï¼Œ**å½“åœ¨é‡Šæ”¾å†…å­˜æˆ–è€…è°ƒæ•´`brk`é€ æˆ`top chunk`å¤§å°è¶…è¿‡`128k`ï¼ˆå¯é…ç½®ï¼‰æ—¶ï¼Œä¼šè§¦å‘`malloc_trim`æ“ä½œè°ƒç”¨`sbrk(-size)`å°†å†…å­˜å½’è¿˜æ“ä½œç³»ç»Ÿ**ã€‚

![](img/lang/chunk-layout.png)

### åˆ†é…è¿‡ç¨‹

`glibc`åœ¨å†…å­˜æ± ä¸­æŸ¥æ‰¾åˆé€‚çš„`chunk`æ—¶é‡‡ç”¨äº†**æœ€ä½³é€‚åº”**ï¼ˆæ»¡è¶³æ‰€éœ€ç©ºé—´çš„æœ€å°å€¼ï¼‰ç®—æ³•ï¼Œå½“éœ€è¦ç»™ç”¨æˆ·åˆ†é…çš„ `chunk` å°äºæˆ–ç­‰äº `max_fast` æ—¶ï¼Œ`malloc` é¦–å…ˆä¼šåœ¨ `fast bins `ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç©ºé—²å—ï¼Œç„¶åå†åœ¨`unsorted bin`  ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœ` unsorted bin `ä¸èƒ½æ»¡è¶³åˆ†é…è¦æ±‚ï¼Œ `malloc`ä¾¿ä¼šå°† `unsorted bin` ä¸­çš„ `chunk` éƒ½å½’ç±»æ”¾åˆ°`smallbins`å’Œ`largebins`é‡Œé¢ï¼Œæœ€åæ‰ä¼šå»æŸ¥æ‰¾ `bins` ä¸­çš„ç©ºé—² `chunk`ã€‚

1. å°äº`512B`ï¼Œåˆ™`index = floor(size/8)`ï¼š
   1. å¦‚æœ`smallbins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
   2. å¦‚æœ`smallbins[index]`éç©ºï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª`chunk`
2. å¤§äº`512B`ï¼Œåˆ™`index = 64 + floor((size-512)/64)`ï¼š
   1. å¦‚æœ`largebins[index]`ä¸ºç©ºï¼Œè¿›å…¥æ­¥éª¤3
   2. å¦‚æœ`largebins[index]`éç©ºï¼Œæ‰«æé“¾è¡¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å°äºè¦æ±‚å¤§å°çš„`chunk`ï¼Œå°†æ­¤`chunk`å‰©ä¸‹çš„ç©ºé—´æ”¾å…¥`unsorted bin`ä¸­
3. `index++`ï¼šä»æ›´å¤§çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚å¤§å°çš„`chunk`ä¸ºæ­¢ï¼Œæ‰¾åˆ°åå°†`chunk`æ‹†åˆ†ï¼Œå¹¶å°†å‰©ä½™çš„åŠ å…¥åˆ°`unsorted_list`ä¸­

å½“`fast bin`å’Œ`bins`éƒ½ä¸èƒ½æ»¡è¶³å†…å­˜éœ€æ±‚æ—¶ï¼Œ`malloc`ä¼šè®¾æ³•åœ¨**`top chunk`**ä¸­åˆ†é…ä¸€å—å†…å­˜ç»™ç”¨æˆ·ï¼Œç”šè‡³`top chunk`éƒ½ä¸èƒ½æ»¡è¶³æ—¶ï¼Œ`malloc`ä¼šä»`mmap`æ¥ç›´æ¥ä½¿ç”¨å†…å­˜æ˜ å°„æ¥å°†é¡µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ã€‚

### é‡Šæ”¾è¿‡ç¨‹

é€šè¿‡`mmap`åˆ†é…çš„`chunk`åœ¨é‡Šæ”¾æ—¶å°†ç›´æ¥è§£é™¤æ˜ å°„å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚é‡Šæ”¾çš„`chunk`å¦‚æœå’Œ`top chunk`ç›¸é‚»ï¼Œåˆ™å’Œ`top chunk`åˆå¹¶ï¼ˆå¯èƒ½è§¦å‘`top chunk`çš„è°ƒæ•´ï¼‰ï¼Œå¦åˆ™ç›´æ¥æ’å…¥åˆ°`unsorted bin`ä¸­ã€‚

## `new` ä¸ `malloc` çš„åŒºåˆ«

|            |         new operator          |      malloc      |
| :--------: | :---------------------------: | :--------------: |
|  åˆ†é…å¤§å°  |       è‡ªåŠ¨è®¡ç®—ç±»å‹å¤§å°        |     å‚æ•°æŒ‡å®š     |
| å¯¹è±¡åˆå§‹åŒ– |     è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ      | ä¸æ”¯æŒè‡ªåŠ¨åˆå§‹åŒ– |
|  å¼‚å¸¸å¤„ç†  | `bad_alloc`æˆ–è€…æ„é€ å‡½æ•°çš„å¼‚å¸¸ |      ä¸æ”¯æŒ      |
|   è¿”å›å€¼   |     å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆæˆ–å¼‚å¸¸      | void\*æŒ‡é’ˆæˆ–null |
|  å†…å­˜è°ƒæ•´  |       å€ŸåŠ©`realloc`å‡½æ•°       |      ä¸æ”¯æŒ      |

`realloc`ï¼šå¦‚æœåŸæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´æœ‰è¶³å¤Ÿçš„è¿ç»­ç©ºé—´åˆ™åŸåœ°æ‰©å¤§å¯åˆ†é…çš„å†…å­˜åœ°å€è¿”å›åŸæŒ‡é’ˆï¼Œå¦åˆ™å¯»æ‰¾æ»¡è¶³é•¿åº¦çš„è¿ç»­å†…å­˜ç©ºé—´å¹¶å°†æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´è¿”å›æ–°ç©ºé—´é¦–åœ°å€å¹¶é‡Šæ”¾åŸåœ°å€ç©ºé—´

# å¤šæ€

å¤šæ€æŒ‡çš„æ˜¯å¯¹åŒä¸€æ¥å£è°ƒç”¨ä¼šè¡¨ç°å‡ºä¸åŒè¡Œä¸ºçš„ä¸€ç§ç°è±¡ï¼Œå¯åˆ†ä¸ºé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ã€‚

## åŠ¨æ€å¤šæ€

åˆç§°**è¿è¡Œæ—¶å¤šæ€ã€æ™šç»‘å®šï¼ˆåŸºç±»è™šå‡½æ•°å®šä¹‰æ¥å£ï¼Œç»§æ‰¿ç±»è´Ÿè´£å®ç°ï¼‰**ï¼Œå®ç°æ–¹æ³•ä¸ºè™šå‡½æ•°ã€‚

### è®¾è®¡æ€æƒ³

+ åœ¨åŸºç±»ä¸­æŠŠå¤šä¸ªç›¸å…³çš„å¯¹è±¡å…±åŒçš„åŠŸèƒ½å£°æ˜ä¸ºå¤šä¸ªå…¬å…±çš„è™šå‡½æ•°æ¥å£ã€‚å„ä¸ªå­ç±»é‡å†™è¿™äº›è™šå‡½æ•°ä»¥å®Œæˆå…·ä½“çš„åŠŸèƒ½ã€‚å®¢æˆ·ç«¯çš„ä»£ç ï¼ˆæ“ä½œå‡½æ•°ï¼‰é€šè¿‡æŒ‡å‘åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ“ä½œè¿™äº›å¯¹è±¡ï¼Œå¯¹è™šå‡½æ•°çš„è°ƒç”¨ä¼šè‡ªåŠ¨ç»‘å®šåˆ°å®é™…æä¾›çš„å­ç±»å¯¹è±¡ä¸Šå»ã€‚
+ åªæœ‰å½“ç¨‹åºè¿è¡Œæ—¶æ‰èƒ½æœ€ç»ˆç¡®å®šè°ƒç”¨çš„å…·ä½“çš„æ–¹æ³•

### å®æ–½æ¡ä»¶

1. å«æœ‰è™šå‡½æ•°çš„åŸºç±»
2. ç»§æ‰¿è‡ªè™šåŸºç±»çš„å­ç±»ï¼Œå­ç±»å’ŒåŸºç±»çš„æˆå‘˜å‡½æ•°ç­¾åå®Œå…¨ç›¸åŒ(è¿”å›å€¼ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨)
3. å°†å­ç±»å¯¹è±¡çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨èµ‹å€¼ç»™åŸºç±»ç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨å¹¶ä»¥æ­¤è°ƒç”¨è™šå‡½æ•°

### å®æ–½æœºåˆ¶ï¼ˆè™šå‡½æ•°ä¸è™šå‡½æ•°è¡¨ï¼‰

+ å¯¹äºå«æœ‰è™šå‡½æ•°çš„åŸºç±»ï¼Œå…¶å¯¹è±¡çš„ç©ºé—´çš„æœ€å‰é¢ä¼šå ç”¨ä¸€ä¸ªåœ°å€é•¿åº¦æ¥ä¿å­˜ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨
+ ç¼–è¯‘å™¨åœ¨å¤„ç†éè™šå‡½æ•°æ—¶ï¼Œä¼šå°†å‡½æ•°åœ°å€æˆ–ç›¸å…³ä¿¡æ¯ç›´æ¥ç¼–ç åˆ°äºŒè¿›åˆ¶ä»£ç ä¸­ï¼Œåœ¨äºŒè¿›åˆ¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç›´æ¥è·³è½¬å¯¹åº”çš„ä»£ç æ®µï¼Œè€Œè™šå‡½æ•°åœ¨ç»‘å®šæ—¶ä¸ä¼šæ˜ç¡®ç»‘å®šåˆ°ä¸€ä¸ªå¯æ‰§è¡Œçš„åœ°å€ã€‚
+ ä¸€ä¸ªåŸºç±»çš„å¤šä¸ªå­ç±»å®ä¾‹åœ¨è°ƒç”¨åŒä¸€å‡½æ•°æ—¶ä¹‹æ‰€ä»¥è¡¨ç°ä¸åŒï¼Œæ˜¯å› ä¸ºç±»çš„æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨è‡ªåŠ¨åœ¨å‚æ•°åˆ—è¡¨ä¸­åŠ å…¥äº†`this`æŒ‡é’ˆå‚æ•°ï¼Œä¸åŒå¯¹è±¡çš„`this`æŒ‡é’ˆå„ä¸ç›¸åŒï¼Œé€šè¿‡è™šå‡½æ•°è¡¨æœ€ç»ˆç¡®å®šçš„å‡½æ•°åœ°å€ä¹Ÿä¸ç›¸åŒã€‚

#### [å†…å­˜æ¨¡å‹](https://jacktang816.github.io/post/virtualfunction/)

```C++
class A {
  public:
    virtual void v_a(){}
    virtual ~A(){}
    int64_t _m_a;
};

int main(){
    A* a = new A();
    return 0;
}
```

æ¯ä¸ªç±»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè™šå‡½æ•°è¡¨ï¼ˆä¸åŒç¼–è¯‘å™¨å®ç°æœ‰å·®åˆ«ï¼‰ï¼Œå¯¹è±¡ A å®ä¾‹çš„å¤´éƒ¨æŒæœ‰`vtable` æŒ‡é’ˆï¼ˆæŒ‡å‘ä»£ç æ®µä¸­çš„ A ç±»å‹çš„è™šå‡½æ•°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè™šå‡½æ•°èµ·å§‹åœ°å€ï¼‰ï¼Œç´§æ¥ç€æ˜¯ A å¯¹è±¡æŒ‰ç…§å£°æ˜é¡ºåºæ’åˆ—çš„æˆå‘˜å˜é‡ã€‚

![](img/lang/vptrLocation.png)

##### è™šè¡¨

å­˜åœ¨äºåªè¯»æ•°æ®æ®µ`.rodata`ä¸­ï¼Œç”±**è¡¨å¤´å’Œè™šå‡½æ•°è¡¨**ä¸¤éƒ¨åˆ†ç»„æˆï¼š

**`typeinfo`**ï¼šå­˜å‚¨äº†ä¸€ä¸ªç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç±»åä»¥åŠçˆ¶ç±»ï¼Œå¯¹äºæ²¡æœ‰çˆ¶ç±»çš„ A æ¥è¯´ï¼Œå½“å‰`tinfo`æ˜¯ `class_type_info` ç±»å‹çš„ï¼‰ï¼Œå…³é”®å­—`typeid`è¿”å›çš„å°±æ˜¯æ­¤å­—æ®µã€‚

**`offsets`ï¼š**å³ä¸‹å›¾ä¸­çš„ç´«è‰²æ¡†å†…å®¹ï¼Œè¯¥å†…å®¹**ä»…é™äºè™šç»§æ‰¿**çš„æƒ…å½¢ï¼ˆæ— è™šç»§æ‰¿åˆ™æ— æ­¤å†…å®¹ï¼‰

**`offset to top`ï¼š**æŒ‡åˆ°å¯¹è±¡èµ·å§‹åœ°å€çš„åç§»å€¼ï¼Œåªæœ‰å¤šé‡ç»§æ‰¿çš„æƒ…å½¢æ‰æœ‰å¯èƒ½ä¸ä¸º0ï¼Œå•ç»§æ‰¿æˆ–æ— ç»§æ‰¿çš„æƒ…å½¢éƒ½ä¸º0ã€‚

**`RTTI information`ï¼š**æ˜¯ä¸€ä¸ªæŒ‡å‘`typeinfo`å¯¹è±¡çš„æŒ‡é’ˆï¼ˆå³ä¸Šæ–‡æåˆ°çš„`typeinfo`æŒ‡é’ˆï¼‰ï¼Œå®ƒç”¨äºå”¯ä¸€åœ°æ ‡è¯†è¯¥ç±»å‹

**`virtual function pointers`**ï¼šå³è™šå‡½æ•°è¡¨ï¼Œæ¯ä¸€ä¸ªè¡¨é¡¹**æŒ‰ç…§è™šå‡½æ•°çš„ç”³æ˜é¡ºåº**è®°å½•äº†ä¸€ä¸ªè™šå‡½æ•°çš„åœ°å€ï¼ˆ**æ¯ä¸ªè™šææ„å‡½æ•°åœ¨è™šå‡½æ•°è¡¨ä¸­ä¼šå­˜åœ¨ä¸¤ä¸ªè¡¨é¡¹**ï¼šåˆ†åˆ«å¯¹åº”æ ˆæ„é€ å’Œå †æ„é€ æ—¶çš„ææ„å‡½æ•°ï¼‰ï¼Œ**`vtable`æŒ‡å‘çš„æ˜¯ç¬¬ä¸€ä¸ªè¡¨é¡¹**ã€‚

![](img/lang/virtualTable.png)


```c++
struct Base {
    Base() = default;
    virtual ~Base() = default;
    void FuncA() {}
    virtual void FuncB() {printf("FuncB\n");}
    int a, b;
};

int main() {
    Base a;
    return 0;
}
/*
clang -Xclang -fdump-record-layouts -stdlib=libc++ -c model.cc//æŸ¥çœ‹å¯¹è±¡å¸ƒå±€
clang -Xclang -fdump-vtable-layouts -stdlib=libc++ -c model.cc//æŸ¥çœ‹è™šè¡¨å¸ƒå±€
*/
```

#### ç»§æ‰¿ä¸‹çš„è™šå‡½æ•°è¡¨

1. å•ç»§æ‰¿æ— é‡å†™ï¼šåˆ™è¡¨æ— è¦†ç›–ï¼Œå­ç±»çš„è™šå‡½æ•°è¡¨é¡¹æ¥åˆ°çˆ¶ç±»çš„è¡¨é¡¹ä¹‹åã€‚
2. å•ç»§æ‰¿æœ‰é‡å†™ï¼šå­ç±»é‡å†™çš„è™šå‡½æ•°åœ°å€ä¼šè¦†ç›–çˆ¶ç±»ä¸­è¢«é‡å†™çš„è™šå‡½æ•°çš„è¡¨é¡¹ï¼Œå…¶ä»–å­ç±»è™šå‡½æ•°è¡¨é¡¹æ¥åˆ°åé¢ã€‚
3. å¤šç»§æ‰¿æ— é‡å†™ï¼šå­ç±»å«æœ‰**å¤šä¸ªè™šå‡½æ•°è¡¨å’Œå¤šä¸ªè™šå‡½æ•°è¡¨æŒ‡é’ˆ**ï¼ˆ`linux/g++`ï¼‰ã€‚å­ç±»çš„è™šå‡½æ•°è¡¨é¡¹è¢«æ”¾åœ¨ç¬¬ä¸€ä¸ªç”³æ˜çš„åŸºç±»çš„è™šå‡½æ•°è¡¨é¡¹çš„åè¾¹æ„æˆä¸€å¼ è¡¨ï¼Œå…¶ä½™åŸºç±»çš„è™šå‡½æ•°è¡¨è¢«ä¾æ¬¡æ”¾åˆ°åè¾¹ï¼Œæ­¤æ—¶å­ç±»æŒæœ‰å¤šä¸ªè™šå‡½æ•°è¡¨ã€‚
4. å¤šç»§æ‰¿æœ‰é‡å†™ï¼šå­ç±»é‡å†™çš„è™šå‡½æ•°åœ°å€**ä¼šè¦†ç›–æ‰€æœ‰åŸºç±»**ä¸­è¢«é‡å†™çš„è™šå‡½æ•°çš„è¡¨é¡¹ï¼Œå…¶ä½™åŒç¬¬ä¸‰æ¡ã€‚
5. æœ‰è™šå‡½æ•°çš„è™šç»§æ‰¿ï¼š
6. æ— è™šå‡½æ•°çš„è™šç»§æ‰¿ï¼š

#### è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°

##### è™šå‡½æ•°

**å¸Œæœ›**å­ç±»å¯ä»¥å„è‡ªä¸ºè‡ªå·±çˆ¶ç±»æä¾›çš„è™šå‡½æ•°æä¾›ä¸ªæ€§åŒ–çš„å®ç°ï¼Œå½“å­ç±»æ²¡æœ‰å®ç°æ—¶å¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„ç¼ºçœå®ç°ã€‚å› æ­¤**è™šå‡½æ•°å¿…é¡»æä¾›å®ç°**ã€‚

##### çº¯è™šå‡½æ•°

+ æ€æƒ³ï¼š**å¼ºåˆ¶**å­ç±»å¿…é¡»æä¾›çº¯è™šå‡½æ•°çš„ä¸ªæ€§åŒ–å®ç°ï¼Œå¦åˆ™å­ç±»è¿˜æ˜¯ä¸€ä¸ªçº¯è™šåŸºç±»ã€‚
+ ç”³æ˜åœ¨**åŸºç±»ä¸­ä¸éœ€å®ç°**ï¼ˆä¹Ÿå¯ä»¥æä¾›å®ç°ï¼‰çš„è™šå‡½æ•°ï¼ˆè¿™æ ·çš„ç±»è¢«ç§°ä¸º**æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–**å¯¹è±¡ï¼‰ï¼Œçº¯è™šå‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰ä»¥åï¼Œæ´¾ç”Ÿç±»æ‰èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ã€‚
+ å¦‚æœä¸åŠ æ˜¾å¼çº¦æŸçš„è¯ï¼ŒåŸºç±»çš„çº¯è™šå‡½æ•°åœ¨å­ç±»ä¸­è‡ªåŠ¨å˜ä¸ºäº†è™šå‡½æ•°ã€‚
+ **NOTE**ï¼šææ„å‡½æ•°å¯ä»¥æ˜¯çº¯è™šçš„ï¼Œä½†**çº¯è™šææ„å‡½æ•°å¿…é¡»æœ‰å®šä¹‰ä½“**ï¼Œå› ä¸ºå­ç±»ä¼šéšå«è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ã€‚

### æ€»ç»“

|               ä¼˜ç‚¹               |           ç¼ºç‚¹           |
| :------------------------------: | :----------------------: |
|  **åˆ†ç¦»äº†æ¥å£ä¸å®ç°**ï¼Œæ–¹ä¾¿å¤ç”¨  |     è¿è¡Œæ—¶ç»‘å®šæœ‰å¼€é”€     |
| ä¾¿äºå¤„ç†åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„å¼‚è´¨å¯¹è±¡ | **ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–è™šå‡½æ•°** |
|                                  |      ä¸æ–¹ä¾¿ä¿®æ”¹æ¥å£      |

#### æ€§èƒ½

**å•ç»§æ‰¿ï¼ˆå¼€é”€å¾ˆå°ï¼‰ï¼š**æ—¶é—´ä¸Šä»…ä»…åªæ˜¯å¢åŠ äº†å¾ˆå°‘å‡ æ¬¡å¯»å€çš„è¿‡ç¨‹ï¼Œè€Œä¸”éœ€è¦è·³è½¬çš„åœ°å€éƒ½æ˜¯ä¸éœ€è¦è®¡ç®—çš„ï¼Œå› æ­¤æ—¶é—´ä¸Šå¹¶ä¸ä¼šå¢åŠ å¤šå°‘å¼€é”€ã€‚

**å¤šç»§æ‰¿ï¼š**ç”±äºä¼šæ ¹æ®å¤šä¸ªçˆ¶ç±»ç”Ÿæˆå¤šä¸ª`vptr`ï¼Œåœ¨å¯¹è±¡é‡Œä¸ºå¯»æ‰¾ `vptr` è€Œè¿›è¡Œçš„åç§»é‡è®¡ç®—ä¼šå˜å¾—å¤æ‚ä¸€äº›ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯è™šå‡½æ•°çš„æ€§èƒ½ç“¶é¢ˆã€‚**è™šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€çš„ä»£ä»·ä¸»è¦æ˜¯è™šå‡½æ•°ä¸èƒ½æ˜¯å†…è”å‡½æ•°ï¼ˆä¸èƒ½è¿›è¡Œå†…è”å±•å¼€ï¼‰**

**ç¼–è¯‘å™¨ä¼šç»™æ¯ä¸€ä¸ªåŒ…å«è™šå‡½æ•°æˆ–ç»§æ‰¿äº†è™šå‡½æ•°çš„ç±»è‡ªåŠ¨å»ºç«‹ä¸€ä¸ªè™šå‡½æ•°è¡¨**ï¼Œæ‰€ä»¥è™šå‡½æ•°çš„ä¸€ä¸ªä»£ä»·å°±æ˜¯ä¼šå¢åŠ ç±»çš„ä½“ç§¯ã€‚**å¦‚æœå­˜åœ¨å¤§é‡çš„å­ç±»ç»§æ‰¿ï¼Œä¸”é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°æ¥å£åªå æ€»æ•°çš„ä¸€å°éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå¤§é‡åœ°å€ç©ºé—´æµªè´¹ã€‚**

## é™æ€å¤šæ€

åˆç§°ç¼–è¯‘å™¨å¤šæ€ã€**æ—©ç»‘å®šï¼ˆæ¨¡æ¿å®šä¹‰æ¥å£ï¼Œç±»å‹å‚æ•°å®šä¹‰å®ç°ï¼‰**ï¼Œå®ç°çš„æ–¹æ³•æœ‰å‡½æ•°é‡è½½ä»¥åŠæ¨¡æ¿

### è®¾è®¡æ€æƒ³

+ å¯¹äºç›¸å…³çš„å¯¹è±¡ç±»å‹ï¼Œç›´æ¥å®ç°å®ƒä»¬å„è‡ªçš„å®šä¹‰ï¼Œä¸éœ€è¦å…±æœ‰åŸºç±»ï¼Œç”šè‡³å¯ä»¥æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚åªéœ€è¦å„ä¸ªå…·ä½“ç±»çš„å®ç°ä¸­è¦æ±‚ç›¸åŒçš„æ¥å£å£°æ˜ï¼Œè¿™é‡Œçš„æ¥å£ç§°ä¹‹ä¸ºéšå¼æ¥å£ã€‚å®¢æˆ·ç«¯æŠŠæ“ä½œè¿™äº›å¯¹è±¡çš„å‡½æ•°å®šä¹‰ä¸ºæ¨¡æ¿ï¼Œå½“éœ€è¦æ“ä½œä»€ä¹ˆç±»å‹çš„å¯¹è±¡æ—¶ï¼Œç›´æ¥å¯¹æ¨¡æ¿æŒ‡å®šè¯¥ç±»å‹å®å‚å³å¯ï¼ˆæˆ–é€šè¿‡å®å‚æ¼”ç»è·å¾—ï¼‰ã€‚
+ ç³»ç»Ÿåœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šç¨‹åºå°†è¦æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚

|           ä¼˜ç‚¹           |                             ç¼ºç‚¹                             |
| :----------------------: | :----------------------------------------------------------: |
|      æ–¹ä¾¿äº†æ³›å‹ç¼–ç¨‹      |            æ¨¡æ¿å®ç°ï¼šä»£ç è†¨èƒ€ã€ç¼–è¯‘è€—æ—¶ã€è°ƒè¯•å›°éš¾            |
|  æ•ˆç‡é«˜ï¼šç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–  | ä¸èƒ½å¤„ç†å¼‚è´¨å¯¹è±¡ï¼ˆå­˜å‚¨ã€æŒ‡å‘ç±»å‹ä¸ä¸€è‡´çš„æ•°æ®å¯¹è±¡ï¼Œå¦‚åŸºç±»ä¸‹çš„å‡ ä¸ªå­ç±»ï¼‰ |
| å¯ä»¥é€šè¿‡ç‰¹åŒ–å¤„ç†ç‰¹æ®Šç±»å‹ |                                                              |

# [æ™ºèƒ½æŒ‡é’ˆ](https://www.cnblogs.com/ChinaHook/p/7684268.html)

1. è®¾è®¡ç›®çš„ï¼šä¸ºäº†é¿å…ä½¿ç”¨åŸç”ŸæŒ‡é’ˆä¸å½“é€ æˆçš„å†…å­˜æ³„æ¼ï¼ˆå¿˜è®°é‡Šæ”¾ï¼‰ä»¥åŠéæ³•å¼•ç”¨ï¼ˆè¢«æå‰é‡Šæ”¾å†…å­˜ï¼‰çš„é—®é¢˜ï¼Œè®¾è®¡æ™ºèƒ½æŒ‡é’ˆæ¦‚å¿µæ¥è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå…¶å…·æœ‰æŒ‡é’ˆçš„éƒ¨åˆ†è¡Œä¸ºã€‚
2. è®¾è®¡æ€æƒ³ï¼š`RAII(Resource Acquisition is Initialization)`ä½¿ç”¨ç±»æ¥ç®¡ç†ï¼ˆè€Œéæ‹¥æœ‰ï¼‰èµ„æºï¼Œå°†èµ„æºå’Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ„é€ å‡½æ•°ä¸­ç”³è¯·åˆ†é…èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æºã€‚
3. å®ç°åŸåˆ™ï¼šæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ä½œä¸ºæ™®é€šå˜é‡è¢«åˆ†é…åœ¨æ ˆç©ºé—´ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸæˆ–è€…å…¶å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°æ¥ç®¡ç†å¯¹è±¡æ‰€æŒæœ‰çš„èµ„æºã€‚

ä¸æ™®é€šæŒ‡é’ˆç›¸æ¯”ï¼Œæ™ºèƒ½æŒ‡é’ˆä»…æä¾›`->` ã€`*`å’Œ`==`è¿ç®—ç¬¦ï¼Œæ²¡æœ‰`+`ã€`-`ã€`++`ã€`--`ã€`[]`ç­‰è¿ç®—ç¬¦ã€‚å¯¹äºæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºæ”¯æŒåŸç”ŸæŒ‡é’ˆçš„åˆ¤æ–­æ–¹å¼ï¼Œä¹Ÿæ”¯æŒé‡è½½`operator bool()`çš„åˆ¤ç©ºæ–¹å¼ã€‚

## `auto_ptr`(å·²å¼ƒç”¨)

C++98çš„æ–¹æ¡ˆï¼ŒC++11å·²ç»æŠ›å¼ƒã€‚é‡‡ç”¨**æ’å®ƒæ‰€æœ‰æƒ**æ¨¡å¼ï¼Œå½“å‡ºç°è¯­æ³•ä¸­å…è®¸çš„æ‹·è´æ„é€ å’Œèµ‹å€¼æ—¶ï¼Œèµ„æºæ‰€æœ‰æƒä¼šç”±æºå¯¹è±¡è½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œæ­¤æ—¶å†ä½¿ç”¨æºå¯¹è±¡æ—¶ä¼šç©ºå¼•ç”¨ï¼Œä¸ºäº†è§£å†³é—®é¢˜è®¾è®¡äº†`unique_ptr`ã€‚æ­¤å¤–`auto_ptr`åœ¨ææ„ä¸­ä½¿ç”¨çš„`delete`ä¹Ÿä¸èƒ½ç®¡ç†åŠ¨æ€å¼€è¾Ÿçš„æ•°ç»„ã€‚

## `unique_ptr(boost::scoped_ptr)`

**ç‹¬å èµ„æºæ‰€æœ‰æƒ**ï¼Œå®ç°ç‹¬å å¼æ‹¥æœ‰æˆ–ä¸¥æ ¼æ‹¥æœ‰æ¦‚å¿µï¼Œä¿è¯åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆåªå…è®¸ç”¨å³å€¼è¿›è¡Œèµ‹å€¼ï¼Œåœ¨è¯­ä¹‰ä¸Šç¦æ­¢äº†æ‹·è´æ„é€ å’Œèµ‹å€¼è¿ç®—ï¼šåº“ä¸­å°†å‡½æ•°ç”³æ˜ä¸º`private`ä¸”ä¸å®ç°è¿™ä¸¤ä¸ªå‡½æ•°ï¼‰ï¼Œä¸å…è®¸å…¶ä»–çš„æ™ºèƒ½æŒ‡é’ˆå…±äº«å…¶å†…éƒ¨çš„æŒ‡é’ˆã€‚

`unique_ptr`æä¾›äº†å¯¹**æ•°ç»„ç®¡ç†**çš„æ”¯æŒï¼Œä¸”åŒæ ·**å¯ä»¥æŒ‡å®šåˆ é™¤å™¨**ï¼ˆæŒ‡å®šå½¢å¼å’Œ`shared_ptr`ä¸åŒï¼‰ã€‚

```c++
//ç®¡ç†æ•°ç»„
unique_ptr<int []> ptr(new int[10]);   //ok

//è‡ªå®šä¹‰åˆ é™¤å™¨
shared_ptr<int> ptr(new int(1), [](int *p){delete p;});//okï¼Œä¸éœ€æŒ‡æ˜å‡½æ•°ç­¾å
unique_ptr<int> ptr2(new int(1), [](int *p){delete p;});//error
unique_ptr<int, void(*)(int *)> ptr2(new int(1), [](int *p){delete p;}); //okï¼Œå¿…é¡»æŒ‡æ˜å‡½æ•°ç­¾å
```

## `shared_ptr`

### æ•°æ®ç»“æ„

éµå¾ª**å…±äº«èµ„æºæ‰€æœ‰æƒ**ï¼Œä¸åŒçš„ `shared_ptr` å¯¹è±¡å¯ä»¥ä¸ç›¸åŒçš„æŒ‡é’ˆç›¸å…³è”ï¼Œè¿™å¤šä¸ªå¯¹è±¡ä¼šå…±ç”¨ä¸€ä¸ª**åŸå­å¼•ç”¨è®¡æ•°**è®°å½•å†…å­˜å•å…ƒè¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚åœ¨**`shared_ptr`å†…éƒ¨ä¸»è¦æ˜¯ä¸¤ä¸ªæŒ‡é’ˆ**ï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ‰€ç®¡ç†çš„èµ„æºå¯¹è±¡ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç»´æŠ¤å¼•ç”¨è®¡æ•°çš„æ•°æ®å¯¹è±¡ã€‚

![](img/lang/shared_ptr.png)

#### å¼•ç”¨è®¡æ•°

å¼•ç”¨è®¡æ•°`__shared_count`å†…éƒ¨çš„æ‹¥æœ‰`use_count`å’Œ`weak_count`ä¸¤ä¸ªå¼•ç”¨è®¡æ•°

|     æˆå‘˜     |             ä½œç”¨             |
| :----------: | :--------------------------: |
| `use_count`  | æ ‡è®°**è¢«ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ |
| `weak_count` |  æ ‡è®°**ç®¡ç†å¯¹è±¡**çš„ç”Ÿå‘½å‘¨æœŸ  |

### ç”¨æ³•

**æ„é€ ï¼š**å¯ä»¥é€šè¿‡ä¼ å…¥`operator new`å¾—åˆ°çš„æ™®é€šæŒ‡é’ˆï¼ˆ ä¸èƒ½æ˜¯æ ˆæŒ‡é’ˆï¼Œå› ä¸ºææ„æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯`delete`ï¼‰ã€`auto_ptrã€unique_ptrã€weak_ptr`æ¥æ„é€ ï¼ˆ**æ™ºèƒ½æŒ‡é’ˆä¸æ”¯æŒç›´æ¥ä½¿ç”¨è£¸æŒ‡é’ˆèµ‹å€¼**ï¼‰ã€‚æ¨èä½¿ç”¨`make_shared<>()`æ„é€ `shared_ptr`ï¼Œå…¶ä¼ é€’çš„**å‚æ•°**å¿…é¡»èƒ½å¤Ÿä¸è¯¥ç±»å‹çš„æŸä¸ª**æ„é€ å‡½æ•°ç›¸åŒ¹é…**ã€‚

**ä¿®æ”¹ï¼š**`reset()`åŒ…å«ä¸¤ä¸ªæ“ä½œã€‚å½“æ™ºèƒ½æŒ‡é’ˆä¸­æœ‰å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨`reset()`ä¼šä½¿å¼•ç”¨è®¡æ•°å‡1ã€‚å½“è°ƒç”¨`reset(new  xxx()))`é‡æ–°èµ‹å€¼æ—¶ï¼Œæ™ºèƒ½æŒ‡é’ˆé¦–å…ˆæ˜¯ç”Ÿæˆæ–°å¯¹è±¡ï¼Œç„¶åå°†åŸå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1ï¼ˆå¦‚æœåŸå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåˆ™ææ„æ—§å¯¹è±¡ï¼‰ï¼Œæœ€åå°†æ–°å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™æ™ºèƒ½æŒ‡é’ˆä¿ç®¡ã€‚

**åˆ é™¤ï¼š**è°ƒç”¨`release()`æ—¶å½“å‰æŒ‡é’ˆä¼šè®¡æ•°å‡ä¸€ï¼Œè®¡æ•°ç­‰äº0æ—¶é‡Šæ”¾èµ„æºï¼Œæ”¯æŒ**è‡ªå®šä¹‰åˆ é™¤å™¨**ã€‚

#### æ³¨æ„äº‹é¡¹

1. ä¸è¦ç”¨ä¸€ä¸ªåŸå§‹æŒ‡é’ˆåˆå§‹åŒ–å¤šä¸ª`shared_ptr`ï¼ŒåŸå› åœ¨äºä¼šé€ æˆäºŒæ¬¡é”€æ¯
2. **ä¸è¦åœ¨å‡½æ•°å®å‚ä¸­åˆ›å»º`shared_ptr`**ã€‚å› ä¸ºC++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹æ˜¯ä¸åŒçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆåˆ›å»ºå¥½ï¼Œç„¶åå†ä¼ å…¥ã€‚
3. ç¦æ­¢é€šè¿‡å°†`this`ä»¥`shared_ptr`è¿”å›ï¼Œå› ä¸º`this`æŒ‡é’ˆæœ¬è´¨æ˜¯ä¸€ä¸ªè£¸æŒ‡é’ˆï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´é‡å¤ææ„ã€‚è¿”å›æœ¬ç±»æŒ‡é’ˆåº”å½“ç»§æ‰¿`std::enable_shared_from_this<>`åä½¿ç”¨`shared_from_this()`ã€‚
4. é¿å…å¾ªç¯å¼•ç”¨ï¼Œåº”å½“ä½¿ç”¨`weak_ptr`ã€‚
5. **é¿å…ä½¿ç”¨`get`è¿”å›çš„åŸç”ŸæŒ‡é’ˆ**ï¼Œå› ä¸ºå½“æœ€åä¸€ä¸ªå¯¹åº”çš„æ™ºèƒ½æŒ‡é’ˆé”€æ¯åï¼Œ`get`çš„æŒ‡é’ˆå°±å˜ä¸ºæ— æ•ˆäº†ã€‚

### [åˆ é™¤å™¨](https://blog.51cto.com/u_11142019/1846847)

æ™ºèƒ½æŒ‡é’ˆæ˜¯ç”¨æ¥ç®¡ç†èµ„æºï¼ˆåŠ¨æ€å†…å­˜ã€æ–‡ä»¶ç­‰ï¼‰çš„ï¼Œå› æ­¤**å¯ä»¥ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†æ–‡ä»¶ç­‰å…¶ä»–èµ„æº**ï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨æ™ºèƒ½æŒ‡é’ˆé»˜è®¤çš„åˆ é™¤å™¨ï¼Œå› ä¸ºè¦ç®¡ç†æ–‡ä»¶çš„è¯æœ€åæ˜¯`fclose`è€Œä¸æ˜¯`delete`ï¼Œæ‰€ä»¥å°±å¿…é¡»è‡ªå·±å®šåˆ¶ä¸€ä¸ªåˆ é™¤å™¨ã€‚

```c++
//è‡ªå®šä¹‰å†…å­˜ç®¡ç†æ—¶çš„åˆ é™¤å™¨
void DeletePtr(int *p){
   delete p;
}
std::shared_ptr<int> p(new int, DeletePtr);

///åˆ é™¤å™¨å¯ä»¥æ˜¯lambdaè¡¨è¾¾å¼,ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥è¿™æ ·å†™
std::shared_ptr<int> p(new int, [](int *p) { delete p; });

/// ä¸ºæ™ºèƒ½æŒ‡é’ˆå®šåˆ¶åˆ é™¤å™¨ï¼Œå¦‚ä¸‹ä¸ºæ•°ç»„å®šåˆ¶äº†åˆ é™¤å™¨
std::shared_ptr<int> p(new int[10], [](int *p) { delete[]p; });

function(std::shared_ptr<int>(new int, g()/*gæ˜¯è‡ªå®šä¹‰çš„åˆ é™¤å™¨*/);///error
//å› ä¸ºc++çš„å‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸åŒçš„è°ƒç”¨çº¦å®šä¸‹å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ˜¯ä»å³åˆ°å·¦ï¼Œä¹Ÿæœ‰å¯èƒ½ä»å·¦åˆ°å³ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯å…ˆnew intï¼Œç„¶åè°ƒç”¨g()ï¼Œå¦‚æœg()è°ƒç”¨å‘ç”Ÿå¼‚å¸¸ï¼Œè€Œæ­¤æ—¶shared_ptr<int>è¿˜æ²¡æœ‰åˆ›å»ºæˆåŠŸï¼Œåˆ™intå†…å­˜æ³„éœ²äº†æ‰€ä»¥æ­£ç¡®çš„æ–¹å¼æ˜¯åº”è¯¥å…ˆåˆ›å»ºå¥½æ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œåœ¨ç”¨å˜é‡ä½œå‚æ•°

//å®šç½®ç®¡ç†æ–‡ä»¶èµ„æºçš„æ™ºèƒ½æŒ‡é’ˆ
shared_ptr<FILE> sp(fopen("test.txt","w"), [](void *ptr){fclose((FILE *)ptr);});
```

### [å¾ªç¯å¼•ç”¨](https://www.codenong.com/cs105903979/)

| å¼•ç”¨ç±»å‹ |                   è¯´æ˜                   |
| :------: | :--------------------------------------: |
|  å¼ºå¼•ç”¨  | å½“è¢«å¼•ç”¨çš„å¯¹è±¡ä»æ´»ç€çš„è¯ï¼Œè¿™ä¸ªå¼•ç”¨ä¹Ÿå­˜åœ¨ |
|  å¼±å¼•ç”¨  |     å½“å¼•ç”¨çš„å¯¹è±¡æ´»ç€çš„æ—¶å€™ä¸ä¸€å®šå­˜åœ¨     |

```c++
struct B;
struct A{shared_ptr<B> apb};
struct B{shared_ptr<A> bpa};
{
	shared_ptr<A> pa = make_shared<A>();//pa->use_count = 1;
	shared_ptr<B> pb = make_shared<B>();//pb->use_count = 1;
	pa->apb = pb; //pb->use_count = apb->use_count = 2;
	pb->bpa = pa; //pa->use_count = bpa->use_count = 2;
}//ç¦»å¼€ä½œç”¨åŸŸåï¼Œpa,pbä¼šè‡ªåŠ¨å°†è®¡æ•°å‡1ï¼Œåªæœ‰å„è‡ªçš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶æ‰ä¼šé‡Šæ”¾èµ„æºï¼Œè€Œæ­¤æ—¶å„è‡ªå¼•ç”¨è®¡æ•°ä¸º1ä¸ä¸º0
```

![](img/lang/loop_count.webp)

#### `weak_ptr`

`weak_ptr`æŒ‡å‘ä¸€ä¸ª`shared_ptr`ç®¡ç†çš„å¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡è¿›è¡Œå†…å­˜ç®¡ç†çš„æ˜¯å¼ºå¼•ç”¨çš„`shared_ptr`ï¼Œ**`wake_ptr`ä½œä¸º`shared_ptr`çš„è§‚å¯Ÿè€…**ï¼Œå…¶æ„é€ å’Œææ„ä¸ä¼šæ”¹å˜å¼·å¼•ç”¨çš„è®¡æ•°ï¼Œå’Œ`shared_ptr`é…åˆç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨ã€‚

ä½†ç”±äº`wake_ptr`æ²¡æœ‰é‡è½½`operator *`å’Œ`operator ->`ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨å…¶è®¿é—®æŒ‡å‘å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨`lock()`æ–¹æ³•ä»`wake_ptr`å¾—åˆ°`shared_ptr`åæ‰å¯ä»¥è®¿é—®èµ„æºã€‚åŒæ—¶ç”±äº`weak_ptr`ä¸æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼Œäºæ˜¯**å­˜åœ¨`weak_ptr`æŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾è€Œ`weak_ptr`ä»å­˜åœ¨çš„æƒ…å†µ**ï¼Œæ­¤æ—¶`lock()`ä¼šè¿”å›ä¸€ä¸ªç©ºçš„`shared_ptr<>`å¯¹è±¡ï¼Œæ­¤å¤–`weak_ptr`è¿˜æä¾›äº†**`expired()`**æ¥åˆ¤æ–­æ‰€æŒ‡å¯¹è±¡æ˜¯å¦å·²ç»è¢«é”€æ¯ã€‚

```c++
struct B;
struct A{weak_ptr<B> apb};//ä»»æ„ä¸€ä¸ªæˆå‘˜æ”¹ä¸ºweak_ptr
struct B{shared_ptr<A> bpa};
{
	shared_ptr<A> pa = make_shared<A>();//pa->use_count = 1;
	shared_ptr<B> pb = make_shared<B>();//pb->use_count = 1;
	pa->apb = pb; //pb->use_count = apb->use_count = 1; apb->weak_count = 1;
	pb->bpa = pa; //pa->use_count = bpa->use_count = 2;
}//ç¦»å¼€ä½œç”¨åŸŸåï¼Œpa,pbä¼šè‡ªåŠ¨å°†è®¡æ•°å‡1ï¼Œ
//pb.use_count-=1å˜ä¸ºpb.use_count=0,åŒæ—¶pb->bpa->use_count-=1ï¼Œæ­¤æ—¶pb->bpa->use_count=bpa->use_count=pa->use_count=1
//pa->use_count-=1åpa->use_count=0,è‡ªåŠ¨é‡Šæ”¾èµ„æº
```

![](img/lang/break_loop.webp)

### çº¿ç¨‹å®‰å…¨

`shared_ptr` **å¼•ç”¨è®¡æ•°æœ¬èº«æ˜¯å®‰å…¨ä¸”æ— é”çš„ï¼Œä½†å¯¹è±¡çš„è¯»å†™åˆ™ä¸æ˜¯**ï¼Œå› ä¸º `shared_ptr` æœ‰ä¸¤ä¸ªæ•°æ®æˆå‘˜ï¼Œå¯¹æ‰€ç®¡ç†çš„å¯¹è±¡çš„è¯»å†™æ“ä½œæ²¡æœ‰åŸå­åŒ–ï¼Œå› æ­¤å¤šçº¿ç¨‹å†™ï¼ˆææ„ä¹Ÿæ˜¯å†™ï¼‰æ‰€ç®¡ç†çš„å¯¹è±¡æ—¶ä¸å®‰å…¨ã€‚`shared_ptr` çš„çº¿ç¨‹å®‰å…¨çº§åˆ«å’Œå†…å»ºç±»å‹ã€æ ‡å‡†åº“å®¹å™¨ã€`string` ä¸€æ ·ã€‚

## å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ


5. `scoped_arry`ï¼šåŠŸèƒ½å’Œ`scoped_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº†`operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„
6. `shared_arry`ï¼šåŠŸèƒ½å’Œ`shared_ptr`ç›¸åŒï¼Œä½†æ˜¯é‡è½½äº†`operator[]`å‡½æ•°ï¼Œå¯ä»¥ç®¡ç†æ•°ç»„

# è¡¨è¾¾å¼

C++è¡¨è¾¾å¼ç”±è¿ç®—ç¬¦å’Œæ“ä½œæ•°çš„ç»„æˆçš„åºåˆ—ï¼Œæ¯ä¸ªè¡¨è¾¾å¼å¯ä»¥å®ç°è®¡ç®—æ•°å€¼ã€æŒ‡æ˜æ•°æ®å¯¹è±¡æˆ–å‡½æ•°ã€äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆè¿è¡Œæ—¶å¯¹æ•°æ®å¯¹è±¡æˆ–æ–‡ä»¶çš„ä¿®æ”¹ï¼‰ç­‰ä¸€ä¸ªæˆ–å¤šä¸ªä½œç”¨ã€‚æ¯ä¸ªè¡¨è¾¾å¼æ±‚å€¼å°†å¾—åˆ°ä¸€ä¸ªç»“æœ`result`ï¼Œè¿™ä¸ªç»“æœæœ‰**ç±»å‹ï¼ˆtypeï¼‰å’Œå€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰**ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„å±æ€§ã€‚

## å€¼ç±»åˆ«ï¼ˆvalue categoryï¼‰

å·¦å€¼ï¼ˆ`lvalue`ï¼‰å’Œå³å€¼ï¼ˆ`rvalue`ï¼‰è¿™ä¸¤ä¸ªæœ¯è¯­æºäºC++çš„ç¥–å…ˆè¯­è¨€[CPL](https://en.wikipedia.org/wiki/CPL_(programming_language))ã€‚åœ¨åæ¥çš„å‘å±•ä¸­ï¼Œ**`lvalue`ä»£è¡¨äº†`locator value`å¯¹åº”äº†å…·æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œå³å€¼ä»…ä»…æ˜¯ä¸´æ—¶ä½¿ç”¨çš„å€¼**ã€‚C++ä¸­çš„å€¼ç±»åˆ«ä¸»è¦ä»å…·åå’Œå¯ç§»åŠ¨æ€§ä¸¤æ–¹é¢åˆ’åˆ†ï¼Œç”±ä¸¤ä¸ªæ–¹é¢æ„æˆä¸‰ç§åŸå§‹å€¼ç±»åˆ«ï¼ˆæœ‰ä¸€ç§ç»„åˆä¸å­˜åœ¨ï¼‰ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½å±äºä¸‰ç§å€¼ç±»åˆ«ï¼ˆ`prvalueï¼Œxvalueï¼Œlvalue`ï¼‰ä¸­çš„ä¸€ç§ï¼Œå€¼ç±»åˆ«ä¼šå½±å“è¡¨è¾¾å¼çš„å«ä¹‰ã€å½±å“å‡½æ•°çš„é‡è½½ï¼ˆå³å€¼å¼•ç”¨å’Œ`const`å·¦å€¼å¼•ç”¨æ—¶ï¼‰ã€‚

**å…·åï¼ˆidentityï¼‰**ï¼šå¯ä»¥ç¡®å®šè¡¨è¾¾å¼æ˜¯å¦ä¸å¦ä¸€è¡¨è¾¾å¼æŒ‡ä»£åŒä¸€å®ä½“ã€‚

**å¯ç§»åŠ¨æ€§**ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æˆ–å®ç°äº†ç§»åŠ¨è¯­ä¹‰çš„å…¶ä»–å‡½æ•°é‡è½½èƒ½å¤Ÿç»‘å®šåˆ°è¿™ä¸ªè¡¨è¾¾å¼ã€‚

### ä¸¤ç§æ··åˆç±»åˆ«

**`glvalue`ï¼ˆæ³›å·¦å€¼ï¼‰**ï¼šå¯ä»¥è‡ªåŠ¨æ”¾å¼ƒèº«ä»½è½¬æ¢æˆ`xvalue`ï¼›**æ”¯æŒå¤šæ€**ï¼ˆåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ä¸ä¸€æ ·ï¼Œå¦‚æŒ‡å‘å­ç±»çš„çˆ¶ç±»æŒ‡é’ˆï¼‰ï¼›æ”¯æŒè¡¨è¾¾å¼å…è®¸ä¸‹çš„**ä¸å®Œæ•´ç±»å‹**ï¼ˆå¦‚ç”±å‰ç½®å£°æ˜ä½†æœªå®šä¹‰çš„ç±»ç±»å‹ï¼‰ã€‚

**`rvalue`ï¼ˆå³å€¼ï¼‰**ï¼šä¸æ”¯æŒå¯¹å…¶å–å€å’Œä»»ä½•æ–¹å¼çš„èµ‹å€¼ï¼›å¯ä»¥ç”¨æ¥åˆå§‹åŒ–å³å€¼å¼•ç”¨å’Œ**`const`å·¦å€¼å¼•ç”¨**ï¼›å¯ä»¥å½±å“å‡½æ•°é‡è½½ï¼ˆä½œä¸ºå®å‚æ—¶**ä¼˜å…ˆåŒ¹é…å³å€¼å¼•ç”¨çš„å½¢å‚**è€Œé`const`å·¦å€¼å¼•ç”¨å½¢å‚ï¼‰ã€‚

![äº”ç§è¡¨è¾¾å¼å€¼ç±»åˆ«](./img/lang/value_cat.png)

|                        | æ‹¥æœ‰èº«ä»½ï¼ˆ`glvalue`ï¼‰ | ä¸æ‹¥æœ‰èº«ä»½ |
| :--------------------: | :-------------------: | :--------: |
| **å¯ç§»åŠ¨ï¼ˆ`rvalue`ï¼‰** |       `xvalue`        | `prvalue`  |
|      **ä¸å¯ç§»åŠ¨**      |       `lvalue`        |   ä¸å­˜åœ¨   |

### ä¸‰ç§å…·ä½“ç±»åˆ«

#### `lvalue`ï¼ˆå·¦å€¼ï¼‰

ç‰¹å¾ï¼šå…·æœ‰`glvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›**æ”¯æŒå–å€**å’Œä»»ä½•å½¢å¼çš„èµ‹å€¼ï¼›å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰å·¦å€¼å¼•ç”¨ã€‚

ä¾‹ï¼šå‡½æ•°åã€å˜é‡åã€**å­—ç¬¦ä¸²å­—é¢å€¼**ã€è¿”å›å·¦å€¼å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ã€å‰ç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç”±èµ‹å€¼è¿ç®—ç¬¦æˆ–å¤åˆèµ‹å€¼è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€è§£å¼•ç”¨è¡¨è¾¾å¼ç­‰ã€‚ä»–ä»¬çš„**æ±‚å€¼ç»“æœç›¸å½“äºå­—é¢å€¼æˆ–æ˜¯ä¸€ä¸ªä¸å…·åçš„ä¸´æ—¶å¯¹è±¡**ã€‚

**å‡½æ•°å‚æ•°æ°¸è¿œæ˜¯ä¸€ä¸ªå·¦å€¼**ï¼Œå³ä½¿å®ƒ(åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­)çš„ç±»å‹æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨æ—¶å‚æ•°æ˜¯éœ€è¦è¢«å‹æ ˆçš„ï¼Œè¿™æ„å‘³ç€å‚æ•°ä¸€å®šæœ‰å…¶åœ°å€ã€‚

#### `prvalue`ï¼ˆçº¯å³å€¼ï¼‰

ç‰¹å¾ï¼šå…·æœ‰`rvalue`æ‰€æœ‰çš„ç‰¹å¾ï¼›ä¸æ”¯æŒå¤šæ€ã€ä¸å®Œå…¨ç±»å‹ï¼›ä¸ä¼šæ˜¯æŠ½è±¡ç±»å‹æˆ–æ•°ç»„ã€‚

ä¾‹ï¼šé™¤å­—ç¬¦ä¸²å­—é¢å€¼ä»¥å¤–çš„å­—é¢å€¼ã€è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨ã€åç½®è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦è¿æ¥çš„è¡¨è¾¾å¼ã€ç®—æœ¯è¡¨è¾¾å¼ã€é€»è¾‘è¡¨è¾¾å¼ã€æ¯”è¾ƒè¡¨è¾¾å¼ã€å–åœ°å€è¡¨è¾¾å¼ç­‰ã€‚

#### `xvalue`ï¼ˆC++11å°†äº¡å€¼ï¼‰

å°†äº¡å€¼æ˜¯éšç€å³å€¼å¼•ç”¨çš„å¼•å…¥è€Œæ–°å¼•å…¥çš„ï¼Œä¸å³å€¼å¼•ç”¨æ¯æ¯ç›¸å…³

ç‰¹å¾ï¼šå®ƒå…·æœ‰æ‰€æœ‰`rvalue`å’Œ`glvalue`æ‰€æœ‰çš„ç‰¹å¾ã€‚

ä¾‹ï¼šè¿”å›å³å€¼å¼•ç”¨çš„å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼ã€è½¬æ¢ä¸ºå³å€¼å¼•ç”¨çš„è½¬æ¢å‡½æ•°çš„è°ƒç”¨è¡¨è¾¾å¼

## å€¼ç±»å‹ï¼ˆTypeï¼‰

C++ä¸­çš„å€¼ç±»å‹ï¼ˆè¿™é‡Œçš„å€¼ç±»å‹ä¸åŒäºé€šå¸¸è¯´çš„æ•°æ®ç±»å‹ï¼šå³å¤åˆæ•°æ®ç±»å‹çš„å€¼ç±»å‹ä»ç„¶å¯ä»¥æ˜¯ç®€å•ç±»å‹ï¼‰ä¸»è¦åˆ†ä¸ºç®€å•æ•°æ®ç±»å‹å’Œå¤åˆæ•°æ®ç±»å‹ï¼ˆå¸¸è§çš„å¦‚æŒ‡é’ˆã€å¼•ç”¨ï¼‰ã€‚ä¸€èˆ¬çš„å˜é‡å£°æ˜å½¢å¼ä¸ºï¼š**`Base_Type (compound)...declarator`**ï¼Œå½“æ²¡æœ‰å¤åˆç±»å‹å£°æ˜æ—¶å£°æ˜çš„å˜é‡çš„ç±»å‹å°±æ˜¯æ™®é€šç±»å‹ï¼Œå¦åˆ™è¯¥å˜é‡å°±æ˜¯å¤åˆæ•°æ®ç±»å‹ã€‚

### æŒ‡é’ˆ

åœ¨C++ä¸­**æŒ‡é’ˆä½œä¸ºä¸€ä¸ªä¸é€æ˜çš„å®ä½“å­˜åœ¨**ï¼Œä½¿ç”¨æŒ‡é’ˆå¿…é¡»è¿›è¿‡è§£å¼•ç”¨ã€‚

### å¼•ç”¨

ã€Š`C++`çš„è®¾è®¡ä¸æ¼”åŒ–ã€‹ä¸­è¯´**åŠ å…¥â€œå¼•ç”¨â€è¿™ä¸ªè¯­è¨€ç‰¹æ€§çš„å¥‘æœºæ˜¯ä¸ºäº†æ–¹ä¾¿è¿ç®—ç¬¦é‡è½½**ï¼ˆä¸ºäº†è®©è¿ç®—ç¬¦é‡è½½çš„è¯­æ³•èƒ½å¤Ÿæ›´åŠ æ¥è¿‘å†…å»ºçš„è¿ç®—ç¬¦ï¼Œéœ€è¦å¯¹å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ï¼Œè¿™å°±è¦æ±‚å‡½æ•°è¿”å›ä¸€ä¸ªå·¦å€¼ï¼Œå½“ä½¿ç”¨æŒ‡é’ˆè¿”å›æ—¶åˆä¸å¤Ÿç®€æ´ï¼Œå› æ­¤å¼•å…¥äº†å¼•ç”¨è¿™ä¸€ç‰¹æ€§ï¼‰ã€‚

å¼•ç”¨åˆæœ‰å·¦å€¼å¼•ç”¨ã€å³å€¼å¼•ç”¨ä¹‹åˆ†ã€‚å€ŸåŠ©åº“å‡½æ•°`is_lvalue_reference(),is_rvalue_reference(),is_reference()`åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚

#### å·¦å€¼å¼•ç”¨

å³å¸¸è§çš„ä¸€ç±»å¼•ç”¨æ–¹å¼ã€‚å®é™…ä¸Šæ˜¯**å¼€è¾Ÿäº†å†…å­˜**ç”¨äºä¿å­˜è¢«å¼•ç”¨å˜é‡çš„åœ°å€ï¼Œåªè¦ä¸€æ—¦ä½¿ç”¨è¯¥å¼•ç”¨ï¼Œç¼–è¯‘å™¨å†…éƒ¨å°±ä¼š**è‡ªåŠ¨è¿›è¡Œè§£å¼•ç”¨åˆ°å®é™…å¯¹è±¡**ã€‚[æ¥æº](https://juejin.cn/post/6860648369695260680)

#### å³å€¼å¼•ç”¨

å³å€¼å¼•ç”¨æ˜¯æŒ‡å‘å³å€¼çš„å¼•ç”¨ï¼Œå½“å³å€¼è¢«ç»‘å®šåˆ°å³å€¼å¼•ç”¨åï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå°†æ†ç»‘åˆ°å³å€¼å¼•ç”¨ä¸Šï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹å³å€¼å¼•ç”¨æ‰€å¼•ç”¨çš„å€¼ã€‚æˆä¸ºå³å€¼å¼•ç”¨å¯¹è±¡æ„å‘³ç€è¯¥å¯¹è±¡æ‰€æŒæœ‰çš„èµ„æºçš„æ‰€æœ‰æƒå¯ä»¥å®‰å…¨çš„è¢«è½¬ç§»ç»™å…¶ä»–å¯¹è±¡ï¼Œä»è€Œé¿å…äº†æ‹·è´ã€ææ„ç­‰æ“ä½œï¼Œæ¶ˆé™¤äº†æ ‡å‡†åº“ä¸­çš„å¤§é‡ä¸å¿…è¦çš„å¼€é”€ï¼ˆå®¹å™¨ç­‰ï¼‰ï¼ŒåŒæ—¶ä¸ºå…¶ä»–æ ‡å‡†åº“æä¾›äº†å®ç°çš„å¯èƒ½ã€‚

##### æ— åå³å€¼å¼•ç”¨

<<<<<<< HEAD
æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼Œå¦‚`static_cast<T&&>(t)`ï¼‰
**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
=======
æŒ‡**ç”±å³å€¼å¼•ç”¨ç›¸å…³æ“ä½œæ‰€äº§ç”Ÿçš„å¼•ç”¨ç±»å‹**ï¼ˆä¸»è¦é€šè¿‡å¦‚`static_cast<T&&>(t)`è¿”å›å³å€¼å¼•ç”¨çš„ç±»å‹è½¬æ¢æ“ä½œäº§ç”Ÿï¼‰ã€‚**æ— åå³å€¼å¼•ç”¨æ˜¯å³å€¼**ï¼Œæ ‡å‡†è§„å®šæ— åå³å€¼å¼•ç”¨å’Œä¼ ç»Ÿçš„å³å€¼ä¸€æ ·å…·æœ‰æ½œåœ¨çš„å¯ç§»åŠ¨æ€§ï¼Œå³å®ƒæ‰€å æœ‰çš„èµ„æºå¯ä»¥è¢«ç§»åŠ¨ï¼ˆçªƒå–ï¼‰ã€‚
>>>>>>> d6cc772463d7c322554dbca975fea31744a38242

##### [å…·åå³å€¼å¼•ç”¨](https://juejin.cn/post/6860648369695260680)

 å¦‚æœæŸä¸ªå˜é‡æˆ–å‚æ•°è¢«å£°æ˜ä¸ºT&&ç±»å‹ï¼Œå¹¶ä¸”**Tæ— éœ€æ¨å¯¼**å³å¯ç¡®å®šï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡æˆ–å‚æ•°å°±æ˜¯ä¸€ä¸ªå…·åå³å€¼å¼•ç”¨ã€‚**å…·åå³å€¼å¼•ç”¨æ˜¯å·¦å€¼**ï¼Œç¼–è¯‘å™¨ä¸ºå…¶å¼€è¾Ÿäº†ä¸€å—**å†…å­˜ç©ºé—´**å­˜å‚¨ä¿¡æ¯ï¼ˆå¤§å°ä¸ºåœ°å€å€¼å¤§å°(`x64: 8`å­—èŠ‚)+å³å€¼æ•°æ®æ‰€å å¤§å°ï¼‰ ï¼Œå¯¹å³å€¼å¼•ç”¨çš„ä¿®æ”¹ç»“æœä¿å­˜åœ¨è¯¥ç©ºé—´ã€‚

```assembly
#int &&a = 1çš„æ±‡ç¼–	 https://cppinsights.io/
# åœ¨æ ˆä¸Šå¼€è¾Ÿäº†12å­—èŠ‚ï¼Œå4å­—èŠ‚å­˜æ”¾(int)1ï¼Œå‰8å­—èŠ‚å­˜æ”¾å†…å®¹çš„åœ°å€
mov     DWORD PTR [rbp-12], 1
lea     rax, [rbp-12]
mov     QWORD PTR [rbp-8], rax
```

##### è½¬å‘å‹/ä¸‡èƒ½/é€šç”¨å¼•ç”¨

**å½¢å¦‚`T&&`ä¸”åŒ…å«ç±»å‹æ¨å¯¼çš„å¼•ç”¨å½¢å¼**å¯ä»¥è¢«ç§°ä¸ºé€šç”¨å¼•ç”¨ï¼ˆå¦‚`auto&&`ä»¥åŠæŸäº›æ¨¡æ¿ç±»/å‡½æ•°çš„å‚æ•°ï¼‰ï¼Œå¦åˆ™å°±æ˜¯å³å€¼å¼•ç”¨ã€‚ä¸‡èƒ½å¼•ç”¨å³å¯ä»¥ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨åˆå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼Œå…¶**å®é™…å¼•ç”¨æ–¹å¼å–å†³äºå…¶è¢«åˆå§‹åŒ–æ—¶æ‰€ä½¿ç”¨çš„å¯¹è±¡çš„å¼•ç”¨ç±»å‹**ã€‚

1. ç”±äºä¸‡èƒ½å¼•ç”¨æ—¢èƒ½å¤Ÿç»‘å®šå³å€¼å¼•ç”¨ä¹Ÿå¯ä»¥ç»‘å®šå·¦å€¼å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è¢«è®¾è®¡ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥é¿å…ä¸ºä¸åŒçš„å‚æ•°ç±»å‹åˆ†åˆ«å®šä¹‰å®ç°ä¸åŒçš„é‡è½½å‡½æ•°ã€‚
2. å½“åº”ç”¨1æ—¶åˆ°å‡½æ•°é‡è½½æ—¶åˆä¼šé€ æˆé—®é¢˜ï¼Œç”±äºé€šç”¨å¼•ç”¨çš„ç±»å‹æ¨å¯¼å¯ä»¥åŒ¹é…åˆ°å¤§é‡çš„ç±»å‹ï¼ˆé‡è½½æ—¶ç²¾ç¡®åŒ¹é…ä¼˜å…ˆäºç±»å‹æå‡è½¬æ¢ï¼‰ï¼Œç”±äºè¿™ç§è´ªå©ªæ€§è´¨ï¼Œä¸‡èƒ½å¼•ç”¨å’Œé‡è½½ç»“åˆä¼šé€ æˆé—®é¢˜ã€‚

##### å¼•ç”¨æŠ˜å /å¼•ç”¨åå¡Œ

ç”±äºC++ç¦æ­¢å¼•ç”¨çš„å¼•ç”¨ï¼Œåœ¨å¼•å…¥äº†å³å€¼å¼•ç”¨åï¼Œå¯èƒ½å­˜åœ¨å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨ä¹‹é—´çš„æŠ˜å ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨éœ€è¦å¯¹å››ç§æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯`L2L,L2R,R2L,R2R`ï¼‰æŠ˜å /åç¼©æˆä¸€ç§å•ä¸€çš„å¼•ç”¨ã€‚C++ç¡®å®šäº†å…¶è§„åˆ™ä¸º**å·¦å€¼å¼•ç”¨ä¼šä¼ æŸ“**ï¼šåªæœ‰å³å€¼å¼•ç”¨å åŠ åˆ°å³å€¼å¼•ç”¨ä¸Šä»æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å·¦å€¼å¼•ç”¨ã€‚

| å½¢å‚çš„å£°æ˜ç±»å‹ | è°ƒç”¨æ—¶çš„å‚æ•°ç±»å‹ | æ¨å¯¼å‡ºçš„å½¢å‚ç±»å‹ | æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ |
| :------------: | :--------------: | :--------------: | :------------------: |
|      `T&`      |       `t&`       |       `t&`       |         `t`          |
|     `T&&`      |       `t&`       |       `t&`       |         `t&`         |
|      `T&`      |      `t&&`       |       `t&`       |         `t`          |
|     `T&&`      |      `t&&`       |      `t&&`       |         `t`          |

### å·¦å³å€¼é‡è½½ç­–ç•¥

#### ä¸€èˆ¬å‡½æ•°ç­–ç•¥

åˆ©ç”¨å‡½æ•°é‡è½½å’Œå·¦å³å€¼å¼•ç”¨å‚æ•°ä¸åŒçš„ç»‘å®šç‰¹æ€§å®ç°åœ¨å‡½æ•°ä¸­åŒºåˆ†å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œæ ¹æ®å‚æ•°å·¦å³å€¼å±æ€§çš„ä¸åŒåšå‡ºä¸åŒçš„å¤„ç†ã€‚

```c++
struct X {};
void f(const X& param1){/*å¤„ç†å·¦å€¼å‚æ•°param1*/}
void f(X&& param2){/*å¤„ç†å³å€¼å‚æ•°param2*/}

X a;
f(a);            //è°ƒç”¨å·¦å€¼ç‰ˆæœ¬
f(X());          //è°ƒç”¨å³å€¼ç‰ˆæœ¬
f(std::move(a)); //è°ƒç”¨å³å€¼ç‰ˆæœ¬
```

| é‡è½½ç‰ˆæœ¬ |  å‡½æ•°å‚æ•°  |                              æ³¨                              |
| :------: | :--------: | :----------------------------------------------------------: |
|   å·¦å€¼   | `const T&` |        åœ¨æ²¡æœ‰å³å€¼ç‰ˆæœ¬çš„é‡è½½æ—¶å¯ä»¥é€€è€Œæ±‚å…¶æ¬¡ä½¿ç”¨æ­¤ç‰ˆæœ¬        |
|   å³å€¼   |   `T&&`    | æ ‡å‡†è§„å®š**åœ¨ç»‘å®šå³å€¼æ—¶å³å€¼å¼•ç”¨å‚æ•°çš„ä¼˜å…ˆçº§é«˜äº`const`å·¦å€¼å¼•ç”¨å‚æ•°** |

#### ç§»åŠ¨è¯­ä¹‰ä¸å®Œç¾è½¬å‘

<<<<<<< HEAD
**å³å€¼å¼•ç”¨æ˜¯`move`å’Œ`forwaed`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ`forwaed`éƒ½æ˜¯`static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
=======
**å³å€¼å¼•ç”¨æ˜¯`move`å’Œ`forward`çš„åŸºç¡€**ï¼Œå…¶è¯­ä¹‰å®¹æ˜“é€ æˆå…¶ä¸€å®šæ‰§è¡Œäº†æŸç§åŠ¨ä½œçš„é”™è§‰ï¼Œå…¶å®**`move`å’Œ`forward`éƒ½æ˜¯`static_cast<>()`çš„ç±»å‹è½¬æ¢çš„ä¸€ä¸ªå°è£…**ï¼š`move`æ˜¯ä¸€ä¸ªæ— æ¡ä»¶çš„å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼çš„å‡½æ•°æ¨¡æ¿ï¼Œ`forward`æ˜¯ä¸€ä¸ªåœ¨ä¸åŒæ¡ä»¶æ—¶è°ƒç”¨ä¸åŒæ¨¡æ¿å°†å‚æ•°è½¬å‘çš„æ¨¡æ¿ã€‚
>>>>>>> d6cc772463d7c322554dbca975fea31744a38242

##### ç§»åŠ¨è¯­ä¹‰`move`

ç§»åŠ¨è¯­ä¹‰æŒ‡çš„æ˜¯é€šè¿‡ç§»åŠ¨ï¼ˆçªƒå–ï¼‰å…¶ä»–å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºæ¥å®ŒæˆæŸä¸ªå¯¹è±¡**æ¥ç®¡å¦ä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰çš„å¤–éƒ¨èµ„æºçš„æ‰€æœ‰æƒ**çš„è¿‡ç¨‹ã€‚å…¶å®ç°**ä¾èµ–äºæ— åå³å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨**ï¼ˆ`move<>`äº§ç”Ÿæ— åå³å€¼å¼•ç”¨ï¼Œå…·åå³å€¼å¼•ç”¨æ¥æ”¶æ— åå³å€¼å¼•ç”¨ï¼‰ã€‚

###### `move`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰

**â‘ **ï¼šé‡Šæ”¾`this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚ç§»åŠ¨èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœ`this`å¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº

**â‘¡**ï¼šç§»åŠ¨`that` ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘thatå¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº

**â‘¢**ï¼šæ ‡è®°`that`ï¼šå°†`that`å¯¹è±¡åŸæœ¬æŒ‡å‘è¯¥èµ„æºçš„æŒ‡é’ˆæˆ–å¥æŸ„è®¾ä¸ºç©ºå€¼

###### `copy`è¯­ä¹‰ï¼ˆ`that->this`ï¼‰

**â‘ **ï¼šé‡Šæ”¾`this`ï¼ˆ`this`éç©ºæ—¶ï¼Œå¦‚æ‹·è´èµ‹å€¼è¿ç®—ï¼‰ï¼šå¦‚æœthiså¯¹è±¡è‡ªèº«ä¹Ÿæ‹¥æœ‰èµ„æºï¼Œé‡Šæ”¾è¯¥èµ„æº

**â‘¡**ï¼šæ‹·è´`that`ï¼šæ‹·è´ï¼ˆå¤åˆ¶ï¼‰`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æº

**â‘¢**ï¼šè®¾ç½®`this`ï¼šå°†thiså¯¹è±¡çš„æŒ‡é’ˆæˆ–å¥æŸ„æŒ‡å‘æ–°ç”Ÿçš„èµ„æº

**â‘£**ï¼šé‡Šæ”¾`that`ï¼ˆ`that`ä¸ºå³å€¼æ—¶ï¼‰ï¼šå¦‚æœ`that`å¯¹è±¡ä¸ºä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œé‚£ä¹ˆæ‹·è´å®Œæˆä¹‹å`that`å¯¹è±¡æ‰€æ‹¥æœ‰çš„èµ„æºå°†ä¼šå› `that`å¯¹è±¡è¢«é”€æ¯è€Œå³åˆ»å¾—ä»¥é‡Šæ”¾

**ä¼ é€’`move`åŒ…è£…è¿‡çš„å‚æ•°ä¸ä¸€å®šå‘ç”Ÿäº†ç§»åŠ¨**ï¼Œåªæœ‰è¢«`move`æ“ä½œçš„å€¼ç±»å‹ï¼ˆå®ç°äº†ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼å‡½æ•°çš„ç±»ï¼‰æœ¬èº«æ”¯æŒ`move`æ“ä½œæ—¶æ‰å‘ç”Ÿ`move`ï¼Œå¦åˆ™å‘ç”Ÿçš„ä»»ç„¶æ˜¯`copy`ï¼ˆå¦‚åŸºæœ¬ç±»å‹ï¼‰ã€‚

```C++
template<typename _Tp> constexpr typename std::remove_reference<_Tp>::type&& move(_Tp&& __t) noexcept{
    return static_cast<typename std::remove_reference<_Tp>::type&&>(__t);
}///Convert a value to an rvalue.
```

##### [å®Œç¾è½¬å‘`forward`](https://blog.csdn.net/zwvista/article/details/12306283)

###### å«ä¹‰

å®Œç¾è½¬å‘æ˜¯æŒ‡å‡½æ•°æ¨¡æ¿åœ¨å‘å…¶ä»–å‡½æ•°è½¬å‘ï¼ˆä¼ é€’ï¼‰è‡ªèº«å‚æ•°ï¼ˆå½¢å‚ï¼‰æ—¶**ä¿ç•™è¯¥å‚æ•°ï¼ˆå®å‚ï¼‰çš„å·¦å³å€¼å±æ€§**çš„ç‰¹æ€§ï¼Œè¿™æ ·åš**æ˜¯ä¸ºäº†ä¿ç•™åœ¨å…¶ä»–å‡½æ•°é’ˆå¯¹è½¬å‘è€Œæ¥çš„å‚æ•°çš„å·¦å³å€¼å±æ€§è¿›è¡Œä¸åŒå¤„ç†çš„å¯èƒ½æ€§**ï¼ˆæ¯”å¦‚å‚æ•°ä¸ºå·¦å€¼æ—¶å®æ–½æ‹·è´è¯­ä¹‰ï¼›å‚æ•°ä¸ºå³å€¼æ—¶å®æ–½ç§»åŠ¨è¯­ä¹‰ï¼‰ã€‚

###### å®ç°

**é—®é¢˜**ï¼šè¦æƒ³åœ¨ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ä¸­è½¬å‘å‚æ•°çš„å·¦å³å€¼å±æ€§ï¼Œå‚æ•°å°±å¿…é¡»å…·æœ‰åŒæ—¶æ¥æ”¶å·¦å³å€¼å±æ€§çš„èƒ½åŠ›ï¼Œå³æ¨¡æ¿å‚æ•°å¿…é¡»è¢«å£°æ˜ä¸º**è½¬å‘å‹å¼•ç”¨`T&&`**ï¼ŒæŒ‰ç…§è½¬å‘å‹å¼•ç”¨çš„ç‰¹ç‚¹ï¼Œè¯¥å½¢å‚å°†æ ¹æ®å®å‚çš„å·¦å³å€¼å±æ€§è€Œåˆ†åˆ«èœ•å˜æˆå·¦å³å€¼å¼•ç”¨ï¼Œè€Œè¯¥**å½¢å‚åœ¨æ¨¡æ¿å‡½æ•°å†…éƒ¨æ°¸è¿œæ˜¯å·¦å€¼**ï¼ˆå·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½æ˜¯å·¦å€¼ï¼‰ï¼Œå¦‚æœåœ¨æ¨¡æ¿ç±»åŸæ ·è½¬å‘è¯¥å‚æ•°ï¼Œé‚£ä¹ˆ**è½¬å‘çš„å°†æ°¸è¿œæ˜¯å·¦å€¼**ã€‚å› æ­¤å•çº¯ä¾é è½¬å‘å‹å¼•ç”¨ä¹Ÿå°±æ— æ³•å®ç°å®Œç¾è½¬å‘çš„ä»»åŠ¡ã€‚

è¦æƒ³å®ç°æ­¤åŠŸèƒ½ï¼Œéœ€è¦å€ŸåŠ©åº“å‡½æ•°`std::forward<T>(t)`å¹¶**å°†æ¨¡æ¿å‚æ•°è®¾ç½®ä¸ºè½¬å‘å‹å¼•ç”¨**ï¼Œé€šè¿‡ä½¿ç”¨`forard<T>`å°è£…çš„`static_cast<T>`å¯ä»¥å®ç°å°†å‚æ•°`t`è½¬å‘ä¸º`T&&`ç±»å‹ï¼ˆå®é™…ä½¿ç”¨æ—¶æ­¤å¤„æœ‰å¼•ç”¨æŠ˜å ã€è¯¦æƒ…è§ä»£ç ï¼‰ã€‚

|    `t`çš„å®å‚ç±»å‹    | `T&&`è¢«æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ | `t`åœ¨æ¨¡æ¿å‚æ•°ä¸­çš„ç±»å‹ | `std::forward<T>(t)`çš„ç±»å‹ |
| :-----------------: | :-------------------------: | :-------------------: | :------------------------: |
| å·¦å€¼ï¼ˆç±»å‹ä¸º`U&`ï¼‰  |      `U&`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |     å…·åå·¦å€¼å¼•ç”¨      |        æ— åå·¦å€¼å¼•ç”¨        |
| å³å€¼ï¼ˆç±»å‹ä¸º`U&&`ï¼‰ |       `U`ï¼ˆå¼•ç”¨æŠ˜å ï¼‰       |     å…·åå³å€¼å¼•ç”¨      |        æ— åå³å€¼å¼•ç”¨        |
|  å³å€¼ï¼ˆç±»å‹ä¸º`U`ï¼‰  |            `U&&`            |     å…·åå³å€¼å¼•ç”¨      |        æ— åå³å€¼å¼•ç”¨        |

```c++
struct X {};
void inner(const X&) {cout << "inner(const X&)" << endl;}
void inner(X&&) {cout << "inner(X&&)" << endl;}
template<typename T> void outer(T&& t) {inner(std::forward<T>(t));}///å®Œç¾è½¬å‘å‚æ•°t

X a;
outer(a);//inner(const X&)
outer(X());//inner(X&&)
```

![å®Œç¾è½¬å‘](./img/lang/forward.png)

```c++
template<typename _Tp> constexpr _Tp&& forward(typename std::remove_reference<_Tp>::type& __t) noexcept{
    return static_cast<_Tp&&>(__t);///ç”±äºå¼•ç”¨æŠ˜å ï¼Œæ­¤å¤„è¢«è½¬åŒ–ä¸ºå·¦å€¼å¼•ç”¨
}///Forward an lvalue.

template<typename _Tp> constexpr _Tp&& forward(typename std::remove_reference<_Tp>::type&& __t) noexcept{
    static_assert(!std::is_lvalue_reference<_Tp>::value, "template argument substituting _Tp is an lvalue reference type");
    return static_cast<_Tp&&>(__t);///ç”±äºå¼•ç”¨æŠ˜å ï¼Œæ­¤å¤„è¢«è½¬åŒ–ä¸ºå³å€¼å¼•ç”¨
}///Forward an rvalue.
```

#### [å¼•ç”¨çš„ç»‘å®šä¼˜å…ˆçº§](https://juejin.cn/post/6860648369695260680)

| å®å‚`argument` \ å½¢å‚`parameter` | `T&` | `const T&` | `T&&` | `const T&&`ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰ |
| :------------------------------: | :--: | :--------: | :---: | :---------------------: |
|           **`lvalue`**           |  1   |     2      |   -   |            -            |
|        **`const lvalue`**        |  -   |     1      |   -   |            -            |
|           **`rvalue`**           |  -   |     3      |   1   |            2            |
|        **`const rvalue`**        |  -   |     2      |   -   |            1            |

æ•°å€¼è¶Šå°ä»£è¡¨è¶Šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä»£è¡¨ä¸åŒ¹é…ï¼ˆ`const`å·¦å€¼å¼•ç”¨å¯ä»¥ç»“åˆä»»ä½•ç±»å‹çš„å®å‚ï¼‰ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ ä¼ å€¼`(by value) `é‡è½½ï¼ˆæ¥å—å€¼ç±»å‹å‚æ•° `T`ï¼‰ï¼Œä¼šå’Œä¸Šè¿°ä¼ å¼•ç”¨`(by reference) `é‡è½½äº§ç”Ÿæ­§ä¹‰ï¼Œç¼–è¯‘å¤±è´¥ã€‚

# è¿”å›å€¼ä¼˜åŒ–

## ç¼–è¯‘å™¨ä¼˜åŒ–

ä¸€ä¸ªå‡½æ•°è‹¥ç›´æ¥è¿”å›ç±»å¯¹è±¡ï¼Œä¸€èˆ¬ä¼šç”Ÿæˆä¸´æ—¶ç±»å¯¹è±¡å˜é‡ï¼Œéœ€å¤šæ¬¡è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰é€ æˆæ•ˆç‡ä½ä¸‹ï¼Œç¼–è¯‘å™¨å¯¹æ­¤ä¼˜åŒ–ï¼Œçœç•¥å…¶ä¸­çš„æ‹·è´æ„é€ ç¯èŠ‚ï¼Œè¾¾åˆ°æå‡æ•ˆç‡çš„ç›®çš„ï¼ˆå°¤å…¶æ˜¯å¯¹éœ€è¦åˆ†é…å¤§é‡å†…å­˜çš„ç±»å¯¹è±¡å…¶å€¼å¤åˆ¶è¿‡ç¨‹ã€‚è¿™ä¸€ç±»ä¼˜åŒ–é€šå¸¸ç§°ä¸º**[å¤åˆ¶çœç•¥/æ¶ˆé™¤ï¼ˆCopy elisionï¼‰](https://en.cppreference.com/w/cpp/language/copy_elision)**ï¼Œ`GCC`é»˜è®¤å¯ç”¨äº†è¯¥ä¼˜åŒ–ï¼Œé€šè¿‡`-fno-elide-constructors`å¯ä»¥å…³é—­ã€‚`RVO`ä¸`NRVO`éƒ½æ˜¯å¤åˆ¶æ¶ˆé™¤çš„å®ç°ã€‚

### `RVO`è‡ªåŠ¨ä¼˜åŒ–

ç¼–è¯‘å™¨å¼€å¯**`RVO`ï¼ˆè¿”å›å€¼ä¼˜åŒ–ï¼‰**éœ€è¦æ»¡è¶³ä»¥ä¸‹**ä¸‰ç‚¹**ï¼šè¿”å›çš„æ˜¯**å€¼ç±»å‹**ï¼ˆä¸æ”¯æŒä»»ä½•å¼•ç”¨ç±»å‹ï¼‰ã€è¿”å›çš„æ˜¯**åŒ¿åå±€éƒ¨å¯¹è±¡**ã€è¿”å›çš„å€¼ç±»å‹ä¸å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ç›¸åŒã€‚`RVO`**ä¸æ”¯æŒ**å‡½æ•°å¯èƒ½è¿”å›å…·æœ‰ä¸åŒå˜é‡åçš„å¯¹è±¡ä»¥åŠå‡½æ•°æœ‰å¤šä¸ªè¿”å›å‡ºå£çš„æƒ…å†µã€‚

å…¶å…·ä½“å®ç°æ˜¯ç¼–è¯‘å™¨è®©**è¢«è°ƒå‡½æ•°å°†è¿”å›å€¼æ„å»ºåœ¨è°ƒç”¨è€…çš„æ ˆä¸Š**ï¼šè°ƒç”¨å‡½æ•°åœ¨å…¶æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åå°†è¿™å—å†…å­˜çš„åœ°å€ä¼ é€’ç»™è¢«è°ƒå‡½æ•°ï¼Œè¢«è°ƒå‡½æ•°ç›´æ¥åœ¨è¿™å—å†…å­˜ä¸Šæ„é€ è¿”å›å€¼ï¼Œ è¿™æ ·å°±æ¶ˆé™¤ä»å‡½æ•°å†…éƒ¨`return`å‡ºæ¥æ—¶ä¸´æ—¶å¯¹è±¡çš„å¤åˆ¶é—®é¢˜ã€‚

### `NRVO`è‡ªåŠ¨ä¼˜åŒ–

`NRVO`ï¼ˆ`Named Return Value Optimization`ï¼šå…·åè¿”å›å€¼ä¼˜åŒ–ï¼‰ä¸`RVO`çš„åŒºåˆ«åœ¨äºå‡½æ•°è¿”å›çš„ä¸´æ—¶å€¼æ˜¯å¦æ˜¯å…·åçš„ï¼Œå½“æ“ä½œæ•°æ˜¯æ‹¥æœ‰è‡ªåŠ¨å­˜å‚¨æœŸçš„**å…·åé`volatile`å¯¹è±¡**ã€ä¸”å…·æœ‰å’Œå£°æ˜çš„å‡½æ•°è¿”å›ç±»å‹ç›¸åŒçš„ç±»å‹æ—¶ï¼Œè¿™ç§å¤åˆ¶æ¶ˆé™¤çš„å˜ä½“ç§°ä¸º`NRVO`ã€‚

## æ‰‹åŠ¨ä¼˜åŒ–

1. ä½¿ç”¨`const`å¼•ç”¨`const Foo& foo = f()`

2. ä½¿ç”¨å³å€¼å¼•ç”¨`Foo&& foo = f()`ï¼Œæ­¤æ—¶è°ƒç”¨äº†ç§»åŠ¨æ„é€ å‡½æ•°

# String

C++ä¸­`string`åªæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„æ¨¡æ¿ç±»ï¼ˆ`typedef basic_string<char>`)ï¼Œç±»ä¼¼çš„è¿˜æœ‰`wstringã€u8stringã€u16strinã€u32string`ã€‚å®ƒå°†å­—ç¬¦å­˜å‚¨ä¸º**å­—èŠ‚åºåˆ—è€Œéå­—ç¬¦åºåˆ—**å¹¶æä¾›**è®¿é—®å•å­—èŠ‚å­—ç¬¦çš„åŠŸèƒ½**ã€‚

## ä¸‰ç§å®ç°æ–¹å¼

`string`ä¸­ä¸€èˆ¬å«æœ‰è‡³å°‘ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µï¼š`char *data`ï¼ˆæŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²çš„é¦–åœ°å€ï¼Œ`SSO`ä¸­å¯èƒ½æ²¡æœ‰ï¼‰ï¼Œ`size_t size`ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ã€‚ï¼‰ï¼Œ`size_t capacity`ï¼ˆå­—ç¬¦ä¸²å®¹é‡ï¼‰ã€‚

<<<<<<< HEAD
=======
```c++
sizeof(string);//32, stlä¸­çš„stringæœ‰çŸ­å­—ç¬¦ä¸²ä¼˜åŒ–ï¼Œéµå¾ªå’Œvectorä¸€æ ·çš„æ‰©å®¹æœºåˆ¶ï¼Œåˆå§‹å®¹é‡ä¸º15
```

>>>>>>> d6cc772463d7c322554dbca975fea31744a38242
### Eager Copy

åœ¨æ¯æ¬¡æ‹·è´æ—¶å°†åŸ string å¯¹åº”çš„å†…å­˜ä»¥åŠæ‰€æŒæœ‰çš„åŠ¨æ€èµ„æºå®Œæ•´åœ°å¤åˆ¶ä¸€ä»½ï¼Œæ¯ä¸ªå¯¹è±¡äº’ç›¸ç‹¬ç«‹çš„æ‹¥æœ‰èµ„æºã€‚

### COW

**å†™æ—¶å¤åˆ¶**ï¼ˆCopy-On-Writeï¼‰ï¼šæ ¸å¿ƒåœ¨äº**æƒ°æ€§å¤„ç†å¤šä¸ªå®ä½“çš„èµ„æºè¯·æ±‚**ï¼Œå³åœ¨å¤šä¸ªå®ä½“ä¹‹é—´å…±äº«æŸäº›èµ„æºï¼Œç›´åˆ°æœ‰å®ä½“éœ€è¦å¯¹èµ„æºè¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰çœŸæ­£ä¸ºè¯¥å®ä½“åˆ†é…ç§æœ‰çš„èµ„æºã€‚è¯¥æ–¹æ³•æ—¢å¯ä»¥å‡å°‘ä¸å¿…è¦çš„èµ„æºåˆ†é…ï¼ˆæ–°å®ä½“ä¸ä¿®æ”¹èµ„æºæ—¶ï¼‰ï¼Œåˆå°†åˆ†é…å’Œå¤åˆ¶å¤§é‡èµ„æºå¸¦æ¥çš„ç¬é—´å»¶è¿Ÿè¿›è¡Œäº†**å»¶å**ã€‚

æ­¤æ–¹æ¡ˆä¸‹åªæœ‰åœ¨æŸä¸ª string è¦å¯¹å…±äº«å¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œæ‹·è´ï¼Œå› æ­¤å­˜åœ¨å…±äº«æœºåˆ¶ï¼ˆéœ€è¦ä¸€ä¸ª`std::atomic<size_t> refcount`è¡¨ç¤ºèµ„æºè¢«å¤šå°‘å¯¹è±¡å…±äº«ï¼Œæ­¤æ—¶æ¶‰åŠåˆ°**çº¿ç¨‹å®‰å…¨**çš„é—®é¢˜ï¼‰ã€‚è¯¥æ–¹æ¡ˆä¸‹`lazy-copy`è¡Œä¸ºåªå‘ç”Ÿåœ¨**ä¸¤ä¸ªstringå¯¹è±¡ä¹‹é—´**çš„æ‹·è´æ„é€ ï¼Œèµ‹å€¼å’Œassign()æ“ä½œä¸Šã€‚

![COW](img/lang/string-cow.jpg)

### SSO

Small String Optimizationï¼š**åŸºäºå­—ç¬¦ä¸²å¤§å¤šæ•°æ¯”è¾ƒçŸ­çš„ç‰¹ç‚¹**ï¼Œåˆ©ç”¨ string å¯¹è±¡æœ¬èº«çš„æ ˆç©ºé—´æ¥å­˜å‚¨çŸ­å­—ç¬¦ä¸²ï¼Œå½“å­—ç¬¦ä¸²é•¿åº¦å¤§äºæŸä¸ªä¸´ç•Œå€¼æ—¶ä½¿ç”¨eager copyæ–¹å¼ã€‚

```cpp
class string {
  char *start;
  size_t size;
  static const int kLocalSize = 15; // ä¸´ç•Œå€¼ï¼Œâ‰¤è¯¥å€¼æ—¶æ•°æ®å­˜å‚¨åœ¨unionä¸­ã€‚
  union{
    char buffer[kLocalSize+1];      // æ»¡è¶³æ¡ä»¶æ—¶ï¼Œç”¨æ¥å­˜æ”¾çŸ­å­—ç¬¦ä¸²
    size_t capacity;
  }data;
};
```

![çŸ­å­—ç¬¦ä¸²](img/lang/string-sso-small.jpg)

![é•¿å­—ç¬¦ä¸²](img/lang/string-sso-large.jpg)

## æŸ¥æ‰¾ find

æ‰€æœ‰æŸ¥æ‰¾æ–¹æ³•è¿”å›çš„å€¼çš„ç±»å‹éƒ½æ˜¯è¯¥æ¨¡æ¿ç±»å†…éƒ¨å®šä¹‰çš„`size_type`ç±»å‹ï¼ˆä¸€èˆ¬ä¸ºintç±»å‹ï¼‰ï¼Œè¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å¯¹è±¡åœ¨stringä¸­çš„ä½ç½®ï¼ˆæœªæ‰¾åˆ°è¿”å›å€¼ä¸º-1çš„`string::npos`ï¼‰ï¼›æ‰€æœ‰6ä¸ªæŸ¥æ‰¾å‡½æ•°ä¸­æ¯ä¸ªå‡½æ•°éƒ½æä¾›äº†å››ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€å…±24ä¸ªæŸ¥æ‰¾å‡½æ•°ã€‚
```cpp
size_type find_first_of(const basic_string& s, size_type pos = 0)
size_type find_first_of(const charT* s, size_type pos, size_type n)
size_type find_first_of(const charT* s, size_type pos = 0)
size_type find_first_of(charT c, size_type pos = 0)
```
æ ‡å‡†åº“ä¸­çš„æŸ¥æ‰¾ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼ˆè¯¦è§[çŸ¥ä¹](https://www.zhihu.com/question/392846851)ï¼‰ï¼Œåœ¨ä¸åŒå¹³å°ä¸‹å®ç°ä¸ä¸€æ ·ã€‚è¦æƒ³å®ç°é«˜æ•ˆçš„æœç´¢æ¨èä½¿ç”¨æ³›å‹ç®—æ³•**`std::search()`**ï¼Œè¯¥ç®—æ³•æä¾›äº†[default_searcher](https://zh.cppreference.com/w/cpp/utility/functional/default_searcher)ã€[boyer_moore_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_searcher)ã€[boyer_moore_horspool_searcher](https://zh.cppreference.com/w/cpp/utility/functional/boyer_moore_horspool_searcher)ä¸‰ç§æœç´¢ç®—æ³•ã€‚

### ä¸€èˆ¬æŸ¥æ‰¾

å³`string::find()ã€string::rfind()`ï¼Œæ”¯æŒæ­£ã€åå‘åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ã€‚

### é›†åˆæŸ¥æ‰¾

æ”¯æŒåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼š

|         å‡½æ•°          |                       ä½œç”¨                       |
| :-------------------: | :----------------------------------------------: |
|   `find_first_of()`   |   æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®   |
| `find_first_not_of()` |  æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„ç¬¬ä¸€ä¸ªä½ç½®  |
|   `find_last_of()`    |  æŸ¥æ‰¾å¹¶è¿”å›åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½®  |
| `find_last_not_of()`  | æŸ¥æ‰¾å¹¶è¿”å›ä¸åŒ…å«å­ä¸²ä¸­**ä»»ä½•å­—ç¬¦**çš„æœ€åä¸€ä¸ªä½ç½® |

## NOTE

1. `const char* string::data()`å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²æŒ‡é’ˆä¸ä¼šä»¥'\0'ç»“æŸï¼Œå…¶å¤§å°ä¸ºsize()çš„è¿”å›å€¼ã€‚`const char* string::c_str()`è¿”å›ä¸€ä¸ªä»¥â€œ\0â€ç»“å°¾çš„å­—ç¬¦ä¸²æŒ‡é’ˆã€‚

2. ç”±äº`data()å’Œc_str()`å‡½æ•°è¿”å›çš„æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆç”±stringæ‹¥æœ‰ï¼ŒæŒ‡é’ˆåœ¨`string`æ›´æ”¹å**å¯èƒ½ä¼šå¤±æ•ˆ**ã€‚

3. å¯ä»¥ä½¿ç”¨facebookå¼€æºçš„[`FBString`](https://github.com/facebook/folly/blob/master/folly/docs/FBString.md)(æŸ¥æ‰¾ä½¿ç”¨äº†æ›´é«˜æ•ˆçš„BMç®—æ³•)æ›¿ä»£`string`ã€‚

4. å¤šæ•°stringçš„å®ç°é‡‡ç”¨çš„æ˜¯SSOæ–¹å¼ï¼ŒCOWä¸­â€å…±äº«â€œçš„å®ç°å½±å“äº†**å¤šçº¿ç¨‹ç¯å¢ƒä¸‹**stringâ€æ‹·è´â€œçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯COWå®ç°çš„æ­£ç¡®æ€§ï¼Œstringè®¤å®š`operator[]ã€at()`å…·æœ‰ä¿®æ”¹çš„è¯­ä¹‰ï¼ˆä½†å®é™…å¯èƒ½å¹¶æ²¡æœ‰ï¼‰ã€‚

# éšæœºæ•°

## ä¼ªéšæœºæ•°

è®¡ç®—æœºæ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„ç³»ç»Ÿï¼Œå› æ­¤ä¸å¯èƒ½é€šè¿‡ç®—æ³•æ¥äº§ç”ŸçœŸæ­£çš„éšæœºæ•°ã€‚è®¡ç®—æœºä¸­æ‰€è°“çš„éšæœºæ•°é€šå¸¸éƒ½æ˜¯é€šè¿‡éšæœºç®—æ³•è®¡ç®—å‡ºæ¥çš„å¯ä»¥è¢«è¿‘ä¼¼çœ‹ä½œéšæœºæ•°çš„ä¼ªéšæœºæ•°ã€‚å¸¸è§çš„éšæœºæ•°ç®—æ³•æœ‰çº¿æ€§åŒä½™æ³•ï¼ˆéšæœºæ€§å·®ä½†ç”Ÿæˆæ•ˆç‡é«˜ï¼‰ã€æ¢…æ£®æ—‹è½¬æ³•ï¼ˆéšæœºæ€§é«˜ä½†ç”Ÿæˆæ•ˆç‡ä½ï¼‰ã€‚

## çœŸéšæœºæ•°

#### Linux å†…æ ¸ç†µæ± 

è™½ç„¶è®¡ç®—æœºæœ¬èº«å¯é¢„æµ‹ï¼Œä½†è®¡ç®—æœºçš„è¿è¡Œç¯å¢ƒä¸­å……æ»¡äº†å„ç§ä¸å¯é¢„çŸ¥çš„å™ªå£°ï¼Œä¾‹å¦‚æ¥è‡ªè®¾å¤‡é©±åŠ¨çš„å™ªå£°ã€éšæœºçš„é¼ æ ‡ç‚¹å‡»é—´éš”ã€ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ç­‰ç­‰ã€‚Linux ç³»ç»Ÿç»´æŠ¤äº†ä¸€ä¸ªä¸“é—¨ç”¨äºæ”¶é›†ä¸Šè¿°å™ªå£°çš„**ç†µæ± **ï¼ˆentropy poolï¼‰ï¼Œ**åˆ©ç”¨ç†µæ± å¯ä»¥äº§ç”Ÿäº§ç”ŸçœŸéšæœºæ•°**ã€‚Linuxå‘å¤–éƒ¨æš´éœ²äº†**`/dev/randomã€/dev/urandom`**ä¸¤ä¸ªå­—ç¬¦æ–‡ä»¶æ¥å£ç”¨äºè·å–ç†µæ± çš„ä¿¡æ¯ï¼Œå…¶ä¸­**å‰è€…åœ¨ç†µæ± è€—å°½æ—¶ä¼šé˜»å¡**å¯¹å…¶çš„æ‰€æœ‰æ“ä½œç›´åˆ°æ”¶é›†è¶³å¤Ÿå¤šçš„ç¯å¢ƒå™ªå£°ã€‚åè€…å‡†ç¡®è¯´å®ƒæ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œå®ƒçš„éšæœºæ•°ç§å­æ¥è‡ªäºç†µæ± ï¼Œä¸å­˜åœ¨é˜»å¡çš„é—®é¢˜ï¼ˆå³ä½¿ç†µæ± ä¸ºç©º`/dev/urandom`ä»ç„¶èƒ½äº§ç”Ÿéšæœºæ•°ï¼‰ã€‚

## Cé£æ ¼éšæœºæ•°

```c++
#include <cstdlib>
#include <ctime>

std::srand(std::time(nullptr)); /// ä»¥å½“å‰æ—¶é—´ä¸ºéšæœºç”Ÿæˆå™¨çš„ç§å­
int random_variable = std::rand();///rand()è¿”å›ä¸€ä¸ªéšæœºæ•°ã€‚
```

**NOTE**ï¼š`srand((unsigned)time(null))`è®¾ç½®çš„ç§å­åœ¨ç¨‹åºè¿è¡Œè¿‡å¿«æˆ–è€…ä½¿ç”¨äº†å¤šçº¿ç¨‹æ—¶å¦‚æœé‡‡ç”¨å¾ªç¯è·å–éšæœºæ•°æ¯æ¬¡è¿”å›çš„éšæœºæ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒC++11æä¾›äº†çœŸéšæœºæ•°åšç§å­çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚

## C++11 random

`random`ä¸­çš„éšæœºæ•°å‘ç”Ÿå™¨ä¸»è¦ç”±**åˆ†å¸ƒå¯¹è±¡å’Œéšæœºæ•°å¼•æ“**å¯¹è±¡ç»„æˆã€‚å…¶ä¸­éšæœºæ•°å¼•æ“ç”¨äºæ ¹æ®éšæœºæ•°ç§å­æ¥äº§ç”Ÿéšæœºæ•°ï¼Œåˆ†å¸ƒå¯¹è±¡å¯¹äº§ç”Ÿçš„éšæœºæ•°æ ¹æ®éœ€æ±‚è¿›è¡Œåˆ†å¸ƒã€‚

### éšæœºæ•°å¼•æ“

éšæœºæ•°å¼•æ“ä»¥ç§å­æ•°æ®ä¸ºç†µæºç”Ÿæˆä¼ªéšæœºæ•°ï¼ŒC++æä¾›äº†ä¸‰ç§ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•/å¼•æ“ï¼ˆçº¿æ€§åŒä½™ã€æ¢…æ£®æ—‹è½¬ã€æ»åFibonacciï¼‰ï¼Œä¸‰ä¸ªå¼•æ“é€‚é…å™¨å’Œ9ä¸ªé¢„å®šä¹‰çš„å®ä¾‹åŒ–çš„ç”Ÿæˆå™¨ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„`default_random_engine`ç±»ï¼ˆå®ç°ç”±ç¼–è¯‘å™¨å‚å®¶å†³å®šï¼‰ï¼Œå…¶äº§ç”Ÿçš„éšæœºæ•°èŒƒå›´æ˜¯åœ¨`[default_random_engine::min()ï¼Œ default_random_engine::max()]`ä¹‹é—´ã€‚

![C++éšæœºæ•°å¼•æ“](/home/linbird/Londa/img/lang/random-engine.jpg)

**`random_device`ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§éšæœºæ•°å¼•æ“**ï¼Œå™¨å™ªå£°æ¥æºå¯ç”±æ„é€ å‡½æ•°æŒ‡å®šï¼ˆåœ¨Linuxä¸‹è¯»å–çš„æ˜¯`/dev/urandom`è®¾å¤‡ï¼ŒWindowsä¸‹çš„å®ç°æ˜¯ç”¨`rand_s`ï¼‰ã€‚ç”±äºæ¯æ¬¡å»è°ƒç”¨`random_device`è¯»å–æ–‡ä»¶çš„ä»£ä»·è¾ƒå¤§ï¼Œè€Œä¸”åœ¨ç”Ÿæˆå¤§é‡éšæœºæ•°æ—¶ä¼šé€ æˆæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤`random_device`ä¸€èˆ¬éƒ½ä½œä¸ºéšæœºæ•°ç§å­è€Œééšæœºæ•°å¼•æ“ä½¿ç”¨ã€‚

### éšæœºåˆ†å¸ƒæ¨¡æ¿ç±»

C++é€šè¿‡åˆ†å¸ƒå™¨å¯ä»¥ä½¿éšæœºæ•°çš„å‡ºç°ç¬¦åˆä¸€å®šçš„åˆ†å¸ƒï¼Œå¦‚å‡åŒ€åˆ†å¸ƒç±»ï¼Œæ³¢åŠªåŠ›åˆ†å¸ƒç±»ã€æ­£æ€åˆ†å¸ƒç±»ã€ä¸¤æ®µåˆ†å¸ƒç±»ã€‚è¿™äº›æ¦‚ç‡åˆ†å¸ƒå‡½æ•°éƒ½æ˜¯æœ‰å‚æ•°çš„ï¼Œåœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­æŠŠå‚æ•°ï¼ˆéšæœºæ•°å¼•æ“ï¼‰ä¼ è¿›å»å³å¯ã€‚

```c++
std::random_device sd;//ç”Ÿæˆrandom_deviceå¯¹è±¡sdåšç§å­(çœŸéšæœºæ•°)
std::minstd_rand linearRan(sd());//ä½¿ç”¨ç§å­åˆå§‹åŒ–linear_congruential_engineå¯¹è±¡
std::uniform_int_distribution<int>dis1(0,1);//ç”Ÿæˆ01åºåˆ—
for(int i=0; i<100; i++)///ç”Ÿæˆ100ä¸ªç¬¦åˆå‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°
	std::cout << dis1(linearRan) << std::endl;///éšæœºåˆ†å¸ƒå‡½æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ªéšæœºæ•°å¼•æ“ä½œä¸ºå‚æ•°
```

### ä¸€èˆ¬æ­¥éª¤

1. å®šä¹‰random_deviceå¯¹è±¡æˆ–å…¶ä»–è·å–åˆå§‹åŒ–ç§å­çš„æ–¹å¼ã€‚
2. é€‰æ‹©éšæœºå¼•æ“ï¼ˆé»˜è®¤ã€çº¿æ€§ã€æ¢…æ£®ã€æ–æ³¢é‚£å¥‘ï¼‰çš„å®ç°ç±»ï¼Œå°†ç§å­ä¼ å…¥å¼•æ“ã€‚
3. åˆ›å»ºåˆ†å¸ƒå¯¹è±¡ï¼Œå¹¶ç”¨å¼•æ“åˆå§‹åŒ–åˆ†å¸ƒå¯¹è±¡è¾“å‡ºéšæœºæ•°ã€‚

# STLå®¹å™¨

ç”±äºé»˜è®¤åˆ†é…å™¨çš„åŸå› ï¼Œå®¹å™¨éƒ½**ä¸æ”¯æŒä¿å­˜å…·æœ‰CVé™å®šç¬¦çš„ç±»å‹çš„å…ƒç´ **ã€‚

## é¡ºåºå®¹å™¨(çº¿æ€§ç»“æ„)

* `arrayã€vectorã€listã€forward_listã€deque`

### vector

1. `vector`çš„ç†è®ºå­˜å‚¨ä¸Šé™å¯ä»¥è°ƒç”¨`vector<>::max_size`å¾—åˆ°ã€‚

+ `vector<bool>`æœ¬èº«æ˜¯å®éªŒäº§ç‰©å¹¶ä¸æ˜¯ä¸€ä¸ªSTLå®¹å™¨ï¼Œåº•å±‚å­˜å‚¨çš„å¹¶ä¸æ˜¯`bool`ç±»å‹å€¼ï¼Œæ¯ä¸ª`bool`å€¼éƒ½åªä½¿ç”¨ä¸€ä¸ªæ¯”ç‰¹ä½æ¥å­˜å‚¨ï¼Œåœ¨`for`å¾ªç¯ä¸­ä½¿ç”¨`auto`å¯¹`vector<bool>`éå†æ—¶ï¼Œ`auto`ä¸ä¼šè¢«æ¨å¯¼ä¸º`bool`ã€‚ã€‚`vector<bool>`çš„`operator[]`è¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¸æ»¡è¶³å®¹å™¨è¦æ±‚çš„`opertor[]`è¿”å›æŒ‡å‘å…ƒç´ çš„åœ°å€çš„è¦æ±‚ã€‚

### deque

1. `deque`æ˜¯**åŠ¨æ€çš„ä»¥åˆ†æ®µè¿ç»­ç©ºé—´ç»„åˆè€Œæˆ**ï¼Œéšæ—¶å¯ä»¥å¢åŠ ä¸€æ®µæ–°çš„ç©ºé—´å¹¶é“¾æ¥èµ·æ¥ï¼Œ`deque`æœ€å¤§çš„å·¥ä½œå°±æ˜¯ç»´æŠ¤è¿™äº›åˆ†æ®µè¿ç»­çš„å†…å­˜ç©ºé—´çš„æ•´ä½“æ€§çš„å‡è±¡ï¼Œå¹¶æä¾›éšæœºå­˜å–çš„æ¥å£ï¼Œé¿å¼€äº†é‡æ–°é…ç½®ç©ºé—´ï¼Œå¤åˆ¶ï¼Œé‡Šæ”¾çš„è½®å›ã€‚
2. `deque`ç”±ä¸»æ§å’Œå­˜å‚¨åŒºæ„æˆï¼Œé€šè¿‡ä¸»æ§ç»´æŒæ•´ä½“è¿ç»­çš„å‡è±¡ã€‚æ‰€è°“çš„ä¸»æ§æ˜¯ä¸€å°å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ (æ­¤å¤„æˆä¸ºä¸€ä¸ªç»“ç‚¹)éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¦ä¸€æ®µç§°ä½œç¼“å†²åŒºçš„è¿ç»­æ€§å†…å­˜ç©ºé—´çš„æŒ‡é’ˆï¼Œç¼“å†²åŒºæ‰æ˜¯`deque`çš„å­˜å‚¨ç©ºé—´çš„ä¸»ä½“ã€‚
3. `deque`çš„å®ç°å†³å®šäº†å…¶è¿­ä»£å™¨å¤æ‚åº¦å’Œ`vector`ä¸æ˜¯ä¸€ä¸ªé‡çº§ï¼Œå¹¶ä¸é€‚åˆç›´æ¥ä½¿ç”¨ç®—æ³•ä¸­éœ€è¦éšæœºè¿­ä»£å™¨æ”¯æŒçš„ç®—æ³•ã€‚

## æœ‰åºå…³è”å¼å®¹å™¨(çº¢é»‘æ ‘)

* `setã€multisetã€mapã€multimap`

+ çº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æœç´¢æ ‘

1. è¿­ä»£å™¨ï¼šç”±äºçº¢é»‘æ ‘æœ¬èº«æœ‰åºï¼Œå› æ­¤å…¶è¿­ä»£å™¨å¯ä»¥è§†ä½œå¯¹æ ‘çš„ä¸€ç§éå†æ–¹æ³•ã€‚
2. ç”±äºçº¢é»‘æ ‘ä»»ä½•ä¸€ä¸ªç»“ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å…ƒç´ åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œæ‰€ä»¥å¯¹äºå…³è”å®¹å™¨æ’å…¥åˆ é™¤éƒ½ä¸ä¼šå¯¼è‡´ä»»ä½•è¿­ä»£å™¨å¤±æ•ˆï¼Œé™¤äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„è¿­ä»£å™¨ã€‚
3. `set`ä¸`map`çš„åŒºåˆ«åœ¨äºæ‰€ä½¿ç”¨çš„çº¢é»‘æ ‘çš„èŠ‚ç‚¹çš„å…·ä½“ç±»å‹æœ‰æ‰€ä¸åŒï¼Œ`map`ä½¿ç”¨äº†`pair`ç»“æ„ã€‚
4. çº¢é»‘æ ‘æä¾›çš„`insert_unique`å’Œ`insert`æä¾›äº†`multi`ç³»åˆ—çš„æ”¯æŒã€‚

### ä¼˜ç‚¹

çº¢é»‘æ ‘é€šè¿‡å¯¹ä»»ä½•ä¸€æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ä¸Šå„ä¸ªèŠ‚ç‚¹ç€è‰²çš„æ–¹å¼çš„é™åˆ¶ï¼Œç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶å®ƒè·¯å¾„é•¿å‡ºä¸¤å€ï¼Œå› æ­¤çº¢é»‘æ ‘æ˜¯ä¸€ç§**å¼±å¹³è¡¡äºŒå‰æ ‘**ï¼Œç›¸å¯¹äºè¦æ±‚ä¸¥æ ¼çš„AVLæ ‘æ¥è¯´ï¼Œå®ƒçš„**æ—‹è½¬æ¬¡æ•°å°‘**ï¼Œæ‰€ä»¥**å¯¹äºæœç´¢ï¼Œæ’å…¥ï¼Œåˆ é™¤æ“ä½œè¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ä½¿ç”¨çº¢é»‘æ ‘**ã€‚

#### RB VS AVL

AVLæ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤ä¼šå¼•èµ·é¢‘ç¹çš„è°ƒæ•´å¯¼è‡´æ•ˆç‡ä¸‹é™ï¼›çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œç®—æ˜¯ä¸€ç§æŠ˜ä¸­ï¼Œæ’å…¥æœ€å¤šä¸¤æ¬¡æ—‹è½¬ï¼Œåˆ é™¤æœ€å¤šä¸‰æ¬¡æ—‹è½¬ã€‚æ‰€ä»¥çº¢é»‘æ ‘åœ¨æŸ¥æ‰¾ï¼Œæ’å…¥åˆ é™¤çš„æ€§èƒ½éƒ½æ˜¯O(logn)ä¸”**æ€§èƒ½ç¨³å®š**ã€‚

## æ— åºå…³è”å¼å®¹å™¨(å“ˆå¸Œè¡¨)

* `unordered_setã€unordered_multisetã€unordered_mapã€unordered_multimap`

+ ä¸Šè¿°å››ä¸ªå®¹å™¨çš„åº•å±‚å®ç°éƒ½ä¾é STLä¸­çš„`hash_table`ä¸`hase_table_node`ç»“æ„ï¼Œå…¶ä¸­`hash_table`æä¾›çš„`insert_unique`å’Œ`insert_equal`ä¸º`multi`ç³»åˆ—ä¾é `hash`çš„å®¹å™¨æä¾›äº†æ”¯æŒã€‚

1. æ ‡å‡†åº“ä¸­å“ˆå¸Œå†²çªçš„é»˜è®¤è§£å†³æ–¹æ³•ä¸ºé“¾æ¥æ³•ã€‚
2. hashå‡½æ•°:[å¸¸è§å“ˆå¸Œå‡½æ•°](https://blog.csdn.net/AlburtHoffman/article/details/19641123)ï¼Œ[å„ç§å­—ç¬¦ä¸²Hashå‡½æ•°æ¯”è¾ƒ](https://byvoid.com/zhs/blog/string-hash-compare/)
    - `SGI STL`çš„å®ç°ä¸­å®šä¹‰äº†`hash<>()`æ¨¡æ¿çš„ä»¿å‡½æ•°ï¼Œå¯¹`intã€longã€char\*`ç­‰åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œäº†ç‰¹åŒ–ï¼Œå…¶ä¸­æ•´æ•°`hash`ä¸ºæ’ç­‰æ˜ å°„ï¼Œå¯¹äº`char*`ç±»å‹æ‰€æŒ‡çš„å­—ç¬¦ä¸²çš„äº”è¿›åˆ¶ï¼ˆæ¯ä¸ªs[i]æ˜¯s[i]çš„`ansic`å€¼ï¼‰æ•´æ•°è¡¨ç¤ºåšå…¶`hash`ç»“æœ[è¯¦æƒ…](https://blog.csdn.net/jmh1996/article/details/103763028)
    - `VS STL`çš„å®ç°ä¸­ç¡¬ç¼–ç äº†å‡ ä¸ªé­”æ•°ï¼Œå…·ä½“è§£é‡Šå¯å‚çœ‹[é“¾æ¥](https://blog.csdn.net/jmh1996/article/details/103763028)
3. å“ˆå¸Œè¡¨ä¸­æ¯ä¸ªå…ƒç´ ç§°ä¸ºä¸€ä¸ªæ¡¶ï¼ˆ`bucket`ï¼‰ï¼Œæ¯ä¸ªè¢«æ’å…¥çš„å…ƒç´ åˆ©ç”¨å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å¯¹åº”çš„æ¡¶ã€‚ä¸ºæ±‚å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œæ¡¶æ•°é‡é€šå¸¸æ˜¯è´¨æ•°ï¼ˆä½¿ç”¨è´¨æ•°ä½œä¸ºæ¡¶æ•°ï¼Œä¿è¯äº†å³ä½¿æ˜¯å¾ˆç®€å•çš„å“ˆå¸Œå‡½æ•°æ•´ä¸ª`hashteble`çš„æ•ˆç‡ä¹Ÿä¸ä¼šå¤ªä½ï¼‰ï¼Œåº“é€šè¿‡æ‰“è¡¨åŠ é€Ÿè´¨æ•°çš„é€‰æ‹©ã€‚
4. æ‰€æ”¯æŒçš„éƒ½æ˜¯å‰å‘è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨åªæ”¯æŒoperator++æ“ä½œã€‚

### æ‰©å®¹

ä¸ºäº†èƒ½è®©æ¡¶æ•°é‡åŠ¨æ€å¢é•¿ï¼Œç”¨`vector`ä½œä¸ºæ¡¶çš„å®¹å™¨ã€‚æ‰©å®¹çš„å®ç°æ–¹æ³•å¯ä»¥å‚ç…§`redis`çš„`rehash`ï¼Œ`stl`ä¸­çš„`rehash`æš‚æœªäº†è§£ã€‚

## å®¹å™¨é€‚é…å™¨

* `stackã€queueã€priority_queue`

1. å®¹å™¨é€‚é…å™¨æœ¬è´¨ä¸Šè¿˜æ˜¯å®¹å™¨ï¼Œåªæ˜¯ä¸ºäº†ç‰¹å®šçš„ä½¿ç”¨åŠŸèƒ½å°†åŸºç¡€å®¹å™¨ä¸­çš„å‡½æ•°å®ç°è¿›è¡Œäº†ç»„åˆã€ä¼˜åŒ–æˆ–è€…é‡å†™ã€‚
2. å®¹å™¨é€‚é…å™¨çš„åº•å±‚å®¹å™¨å¹¶ä¸æ˜¯å›ºå®šçš„ï¼ŒSTLå¯¹**`stack`å’Œ`queue`é»˜è®¤ä½¿ç”¨`deque`å®ç°ï¼Œ`priority_queue`é»˜è®¤ä½¿ç”¨`vector`å®ç°**;

## å…¶å®ƒ

1. `assign`ä¸`operator=`ï¼šå…¶åŸºæœ¬ä½œç”¨éƒ½æ˜¯ä¸ºå®¹å™¨èµ‹å€¼ï¼Œ`assign`çš„ä½¿ç”¨æ›´å¹¿ä¸€äº›ã€‚
2. `at`ä¸`operator[]`ï¼š`at`æä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œè¶Šç•Œä¼šæŠ›å‡º`out_of_range`å¼‚å¸¸ã€‚
3. `arrayã€vectorã€string`**`deque`**æä¾›äº†éšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒçš„å®¹å™¨
4. `map`ç³»åˆ—çš„å®¹å™¨æ”¯æŒæŒ‰ç…§`key`å€¼åˆ é™¤å…ƒç´ 
5. ç®—æ³•çš„åŒºé—´é‡‡ç”¨å‰å¼€åé—­çš„åŸå› ï¼šå¯ä»¥ç»Ÿä¸€ç©ºé›†çš„è¡¨ç¤º
6. `list`å’Œ`forward_list`å®¹å™¨éƒ½æ ¹æ®è‡ªèº«å®ç°æä¾›äº†`sort`æˆå‘˜å‡½æ•°æ¥åŠ é€Ÿæ’åºã€‚
7. `string`çš„`size`å’Œ`length`æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œ`length`æ˜¯ä¸ºäº†ä¿æŒCé£æ ¼è€Œä¿ç•™çš„è€å¼å‡½æ•°ã€‚
8. `erase`æ–¹æ³•è¿”å›äº†æŒ‡å‘è¢«åˆ é™¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚
9. `vector`å’Œ`deque`æ”¯æŒ`shrink_to_fit()`è‡ªåŠ¨ç´§ç¼©å†…å­˜

## å †

STLä¸­å¹¶æ²¡æœ‰ç›´æ¥çš„æ•°æ®ç»“æ„å®ç°äº†å †ï¼Œä½†å´åœ¨`vector`çš„ç»“æ„ä¸Šå®ç°äº†å †çš„ä¸€ç³»åˆ—æ“ä½œã€‚

1. åŸºäºvectorå»ºå †ï¼š`make_heap`
2. å†å¯¹vectoræ„æˆçš„å †å˜åŠ¨ä¹‹åçš„è°ƒæ•´ï¼š`push`ä¹‹åçš„`push_heap`ï¼Œ`pop`ä¹‹åçš„`pop_heap`;
3. å¯¹vectoræ˜¯å¦æ„æˆå †çš„åˆ¤åˆ«æ“ä½œï¼š`is_heap`ä»¥åŠæ‰¾åˆ°ç ´åå †çš„`is_heap_until`

## è¿­ä»£å™¨æ”¯æŒåŠå¤±æ•ˆæƒ…å†µ

+ [cppreference](https://zh.cppreference.com/w/cpp/container)åº•éƒ¨æä¾›äº†è¯¦ç»†çš„å„ç§å®¹å™¨çš„è¿­ä»£å™¨å’Œå¼•ç”¨åœ¨æ’å…¥å’Œæ“ä½œåçš„å¤±æ•ˆæƒ…å†µè¯´æ˜,ä»¥åŠå„å®¹å™¨æ”¯æŒçš„æ¥å£åˆ†å¸ƒ.

### è¿­ä»£å™¨æ”¯æŒæƒ…å†µ

|            ä¸æ”¯æŒ            |                             å‰å‘                             |                åŒå‘                |            éšæœº             |
| :--------------------------: | :----------------------------------------------------------: | :--------------------------------: | :-------------------------: |
| `stack,queue,priority_queue` | `forward_list,unordered_map,unordered_set,unordered_multimap,unordered_multiset` | `list,map,set,multi_map,multi_set` | `vector,string,array,deque` |

### è¿­ä»£å™¨åŠå¼•ç”¨å¤±æ•ˆæƒ…å†µ

1. åº•å±‚ä¸ºæ•°ç»„çš„å®¹å™¨(`vector,string`)åœ¨æ’å…¥åˆ é™¤ç‚¹ä¹‹åçš„å¤±æ•ˆï¼ˆå› ä¸ºæ“ä½œå¼•èµ·äº†å­˜å‚¨è½¬ç§»ï¼‰ï¼Œè¯¥ç‚¹åŠä¹‹å‰çš„ä¿æŒæœ‰æ•ˆã€‚
2. åº•å±‚ä¸ºé“¾è¡¨çš„å®¹å™¨ (`list,forward_list`)æ’å…¥åå‡ä¿æŒæœ‰æ•ˆï¼Œåˆ é™¤åä»…åˆ é™¤ç‚¹å¤±æ•ˆã€‚
3. åº•å±‚ä¸ºçº¢é»‘æ ‘ (`map,set,multimap,multiset`)æ’å…¥åå‡æœ‰æ•ˆï¼Œåˆ é™¤åé™¤äº†åˆ é™¤ç‚¹ä¹‹å¤–çš„å‡æœ‰æ•ˆã€‚
4. åº•å±‚ä¸ºå“ˆå¸Œè¡¨ ( `unordered_map,unordered_set,unordered_multimap,unordered_multiset`)åœ¨åˆ é™¤åé™¤åˆ é™¤ç‚¹ä¹‹å¤–å‡æœ‰æ•ˆï¼Œæ’å…¥åå¼•ç”¨å‡åˆæ³•ï¼Œå¦‚æœ**æ’å…¥å¯¼è‡´äº†é‡å“ˆå¸Œåˆ™è¿­ä»£å™¨å¤±æ•ˆ**ï¼ˆå°‘è§ï¼‰ã€‚
5. [`deque`](https://blog.csdn.net/ww32zz/article/details/48224941)åœ¨æ’å…¥é¦–å°¾å¤±æ•ˆï¼Œåˆ é™¤åˆ™ä»…æ“ä½œç‚¹å¤±æ•ˆ==éœ€è¦è¡¥å……==

# STLç®—æ³•

## æŸ¥æ‰¾ç®—æ³•(13ä¸ª)ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼

1. `adjacent_find`ï¼š   åœ¨iteratorå¯¹æ ‡è¯†å…ƒç´ èŒƒå›´å†…ï¼ŒæŸ¥æ‰¾ä¸€å¯¹ç›¸é‚»é‡å¤å…ƒç´ ï¼Œæ‰¾åˆ°åˆ™è¿”å›æŒ‡å‘è¿™å¯¹å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ `ForwardIterator`ã€‚å¦åˆ™è¿”å›lastã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„äºŒå…ƒæ“ä½œç¬¦ä»£æ›¿ç›¸ç­‰çš„åˆ¤æ–­ã€‚
2. `binary_search`ï¼š åœ¨æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾valueï¼Œæ‰¾åˆ°è¿”å›trueã€‚é‡è½½çš„ç‰ˆæœ¬å®ç”¨æŒ‡å®šçš„æ¯”è¾ƒå‡½æ•°å¯¹è±¡æˆ–å‡½æ•°æŒ‡é’ˆæ¥åˆ¤æ–­ç›¸ç­‰ã€‚
3. `count`ï¼šåˆ©ç”¨ç­‰äºæ“ä½œç¬¦ï¼ŒæŠŠæ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼æ¯”è¾ƒï¼Œè¿”å›ç›¸ç­‰å…ƒç´ ä¸ªæ•°ã€‚
4. `count_if`ï¼šåˆ©ç”¨è¾“å…¥çš„æ“ä½œç¬¦ï¼Œå¯¹æ ‡å¿—èŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œè¿”å›ç»“æœä¸ºtrueçš„ä¸ªæ•°ã€‚
5. `equal_range`ï¼š åŠŸèƒ½ç±»ä¼¼`equal`ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºlower_boundï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºupper_boundã€‚
6. `find`ï¼šåˆ©ç”¨åº•å±‚å…ƒç´ çš„ç­‰äºæ“ä½œç¬¦ï¼Œå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸è¾“å…¥å€¼è¿›è¡Œæ¯”è¾ƒã€‚å½“åŒ¹é…æ—¶ï¼Œç»“æŸæœç´¢ï¼Œè¿”å›è¯¥å…ƒç´ çš„ä¸€ä¸ª`InputIterator`ã€‚
7. `find_end`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"çš„æœ€åä¸€æ¬¡å‡ºç°ã€‚æ‰¾åˆ°åˆ™è¿”å›æœ€åä¸€å¯¹çš„ç¬¬ä¸€ ä¸ª`ForwardIterator`ï¼Œå¦åˆ™è¿”å›è¾“å…¥çš„"å¦å¤–ä¸€å¯¹"çš„ç¬¬ä¸€ä¸ª`ForwardIterator`ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿ç­‰äºæ“ä½œã€‚
8. `find_first_of`ï¼š åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾"ç”±è¾“å…¥çš„å¦å¤–ä¸€å¯¹iteratoræ ‡å¿—çš„ç¬¬äºŒä¸ªåºåˆ—"ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ çš„ç¬¬ä¸€æ¬¡å‡ºç°ã€‚é‡è½½ç‰ˆæœ¬ä¸­ä½¿ç”¨äº†ç”¨æˆ·è‡ªå®šä¹‰æ“ä½œç¬¦ã€‚
9. `find_if`ï¼šä½¿ç”¨è¾“å…¥çš„å‡½æ•°ä»£æ›¿ç­‰äºæ“ä½œç¬¦æ‰§è¡Œfindã€‚
10. `lower_bound`ï¼š   è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…çš„å¯ä»¥æ’å…¥æŒ‡å®šå€¼è€Œä¸ç ´åå®¹å™¨é¡ºåºçš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
11. `upper_bound`ï¼š  è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‘åœ¨æœ‰åºåºåˆ—èŒƒå›´å†…æ’å…¥valueè€Œä¸ç ´åå®¹å™¨é¡ºåºçš„æœ€åä¸€ä¸ªä½ç½®ï¼Œè¯¥ä½ç½®æ ‡å¿—ä¸€ä¸ªå¤§äºvalueçš„å€¼ã€‚é‡è½½å‡½æ•°ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
12. `search`ï¼š  ç»™å‡ºä¸¤ä¸ªèŒƒå›´ï¼Œè¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŸ¥æ‰¾æˆåŠŸæŒ‡å‘ç¬¬ä¸€ä¸ªèŒƒå›´å†…ç¬¬ä¸€æ¬¡å‡ºç°å­åºåˆ—(ç¬¬äºŒä¸ªèŒƒå›´)çš„ä½ç½®ï¼ŒæŸ¥æ‰¾å¤±è´¥æŒ‡å‘last1ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
13. `search_n`ï¼š  åœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾valå‡ºç°næ¬¡çš„å­åºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## æ’åºå’Œé€šç”¨ç®—æ³•(14ä¸ª)ï¼šæä¾›å…ƒç´ æ’åºç­–ç•¥

1. `inplace_merge`ï¼š  åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—ï¼Œç»“æœåºåˆ—è¦†ç›–ä¸¤ç«¯èŒƒå›´ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„æ“ä½œè¿›è¡Œæ’åºã€‚
2. `merge`ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—ï¼Œå­˜æ”¾åˆ°å¦ä¸€ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒã€‚
3. `nth_element`ï¼š  å°†èŒƒå›´å†…çš„åºåˆ—é‡æ–°æ’åºï¼Œä½¿æ‰€æœ‰å°äºç¬¬nä¸ªå…ƒç´ çš„å…ƒç´ éƒ½å‡ºç°åœ¨å®ƒå‰é¢ï¼Œè€Œå¤§äºå®ƒçš„éƒ½å‡ºç°åœ¨åé¢ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
4. `partial_sort`ï¼šå¯¹åºåˆ—åšéƒ¨åˆ†æ’åºï¼Œè¢«æ’åºå…ƒç´ ä¸ªæ•°æ­£å¥½å¯ä»¥è¢«æ”¾åˆ°èŒƒå›´å†…ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
5. `partial_sort_copy`ï¼š ä¸`partial_sort`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»è¿‡æ’åºçš„åºåˆ—å¤åˆ¶åˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚
6. `partition`ï¼š å¯¹æŒ‡å®šèŒƒå›´å†…å…ƒç´ åˆ’åˆ†ï¼Œä½¿ç”¨è¾“å…¥çš„å‡½æ•°æŠŠç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ æ”¾åœ¨å‰åŠéƒ¨åˆ†ï¼Œ**è¿”å›ååŠéƒ¨åˆ†ç¬¬ä¸€ä¸ªå€¼çš„è¿­ä»£å™¨**ã€‚
7. `random_shuffle`ï¼šå¯¹æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åºã€‚é‡è½½ç‰ˆæœ¬è¾“å…¥ä¸€ä¸ªéšæœºæ•°äº§ç”Ÿæ“ä½œã€‚
8. `reverse`ï¼š  å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ é‡æ–°ååºæ’åºã€‚
9. `reverse_copy`ï¼šä¸`reverse`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
10. `rotate`ï¼š å°†æŒ‡å®šèŒƒå›´å†…å…ƒç´ ç§»åˆ°å®¹å™¨æœ«å°¾ï¼Œç”±middleæŒ‡å‘çš„å…ƒç´ æˆä¸ºå®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
11. `rotate_copy`ï¼š   ä¸`rotate`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
12. `sort`ï¼š ä»¥å‡åºé‡æ–°æ’åˆ—æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
13. `stable_sort`ï¼šä¸`sort`ç±»ä¼¼ï¼Œä¸è¿‡ä¿ç•™ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„é¡ºåºå…³ç³»ã€‚
14. `stable_partition`ï¼šä¸`partition`ç±»ä¼¼ï¼Œä¸è¿‡ä¸ä¿è¯ä¿ç•™å®¹å™¨ä¸­çš„ç›¸å¯¹é¡ºåºã€‚

### `std::sort()`

éœ€è¦æ³¨æ„çš„æ˜¯**STLä¸­çš„`sort()`ç®—æ³•ä¸ºå†…çœå¼æ’åºï¼Œæ˜¯ä¸€ç§æ··åˆå¼çš„æ’åºç®—æ³•**ã€‚ç»¼åˆä½¿ç”¨äº†å¿«é€Ÿæ’åºç®—æ³•ã€å †æ’åºç®—æ³•ã€æ’å…¥æ’åºç®—æ³•ï¼š

- åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶é‡‡ç”¨æ­£å¸¸çš„å¿«é€Ÿæ’åºï¼Œæ­¤æ—¶æ•ˆç‡ä¸ºO(logN)ã€‚
- ä¸€æ—¦åˆ†æ®µåçš„æ•°æ®é‡å°äºæŸä¸ª**é˜ˆå€¼ï¼ˆ16ï¼‰**ï¼Œå°±æ”¹ç”¨æ’å…¥æ’åºï¼Œå› ä¸ºæ­¤æ—¶è¿™ä¸ªåˆ†æ®µæ˜¯åŸºæœ¬æœ‰åºçš„ï¼Œè¿™æ—¶æ•ˆç‡å¯è¾¾O(N)ã€‚
- åœ¨é€’å½’è¿‡ç¨‹ä¸­è‡ªåŠ¨ä¾¦æµ‹**é€’å½’å±‚æ¬¡ï¼ˆ$2*log(N)$ï¼‰**æ˜¯å¦è¿‡æ·±ï¼Œè¿‡æ·±é‡‡ç”¨å †æ’åºå¤„ç†ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ï¼Œä½¿å…¶æ•ˆç‡ç»´æŒåœ¨å †æ’åºçš„O(N logN)ï¼Œä½†è¿™åˆæ¯”ä¸€å¼€å§‹ä½¿ç”¨å †æ’åºå¥½ã€‚

STLä¸­çš„[`sort(`)æ’åºå®ç°](https://feihu.me/blog/2014/sgi-std-sort/)è¿˜é‡‡ç”¨äº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼šé€šè¿‡å¾ªç¯å‡å°‘ä¸€åŠçš„é€’å½’å‡½æ•°è°ƒç”¨ï¼Œä¸‰ç‚¹ä¸­å€¼æ³•ç¡®å®š`privot`ï¼Œé«˜æ•ˆçš„åˆ’åˆ†ç®—æ³•ã€‚

åœ¨å…¶ä»–å¿«é€Ÿæ’åºå®ç°é‡Œï¼Œå½“åŒ…å«è®¸å¤šé‡å¤çš„å…ƒç´ æ—¶é€šå¸¸ä½¿ç”¨[**ä¸‰è·¯åˆ’åˆ†ç®—æ³•**](https://blog.csdn.net/jlqCloud/article/details/46939703)æ¥ä¼˜åŒ–å¿«é€Ÿæ’åºçš„è¡¨ç°ï¼Œä¸‰è·¯åˆ’åˆ†ç®—æ³•å°†æ•°ç»„åˆ’åˆ†ä¸ºå°äºã€ç­‰äºã€å¤§äº`provit`çš„ä¸‰éƒ¨åˆ†ã€‚

## åˆ é™¤å’Œæ›¿æ¢ç®—æ³•(15ä¸ª)

1. `copy`ï¼šå¤åˆ¶åºåˆ—
2. `copy_backward`ï¼š ä¸`copy`ç›¸åŒï¼Œä¸è¿‡å…ƒç´ æ˜¯ä»¥ç›¸åé¡ºåºè¢«æ‹·è´ã€‚
3. `iter_swap`ï¼š   äº¤æ¢ä¸¤ä¸ª`ForwardIterator`çš„å€¼ã€‚
4. `remove`ï¼šåˆ é™¤æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºæŒ‡å®šå…ƒç´ çš„å…ƒç´ ã€‚æ³¨æ„ï¼Œè¯¥å‡½æ•°ä¸æ˜¯çœŸæ­£åˆ é™¤å‡½æ•°ã€‚å†…ç½®å‡½æ•°ä¸é€‚åˆä½¿ç”¨`remove`å’Œ`remove_if`å‡½æ•°ã€‚
5. `remove_copy`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ å¤åˆ¶åˆ°ä¸€ä¸ªåˆ¶å®šå®¹å™¨ï¼Œè¿”å›`OutputIterator`æŒ‡å‘è¢«æ‹·è´çš„æœ«å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚
6. `remove_if`ï¼š   åˆ é™¤æŒ‡å®šèŒƒå›´å†…è¾“å…¥æ“ä½œç»“æœä¸ºtrueçš„æ‰€æœ‰å…ƒç´ ã€‚
7. `remove_copy_if`ï¼š å°†æ‰€æœ‰ä¸åŒ¹é…å…ƒç´ æ‹·è´åˆ°ä¸€ä¸ªæŒ‡å®šå®¹å™¨ã€‚
8. `replace`ï¼šå°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰ç­‰äºvoldçš„å…ƒç´ éƒ½ç”¨vnewä»£æ›¿ã€‚
9. `replace_copy`ï¼š ä¸`replace`ç±»ä¼¼ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
10. `replace_if`ï¼š   å°†æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰æ“ä½œç»“æœä¸ºtrueçš„å…ƒç´ ç”¨æ–°å€¼ä»£æ›¿ã€‚
11. `replace_copy_if`ï¼š ä¸`replace_if`ï¼Œä¸è¿‡å°†ç»“æœå†™å…¥å¦ä¸€ä¸ªå®¹å™¨ã€‚
12. `swap`ï¼š   äº¤æ¢å­˜å‚¨åœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„å€¼ã€‚
13. `swap_range`ï¼šå°†æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ä¸å¦ä¸€ä¸ªåºåˆ—å…ƒç´ å€¼è¿›è¡Œäº¤æ¢ã€‚
14. `unique`ï¼šæ¸…é™¤åºåˆ—ä¸­é‡å¤å…ƒç´ ï¼Œå’Œ`remove`ç±»ä¼¼ï¼Œå®ƒä¹Ÿä¸èƒ½çœŸæ­£åˆ é™¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
15. `unique_copy`ï¼š  ä¸`unique`ç±»ä¼¼ï¼Œä¸è¿‡æŠŠç»“æœè¾“å‡ºåˆ°å¦ä¸€ä¸ªå®¹å™¨ã€‚

## æ’åˆ—ç»„åˆç®—æ³•(2ä¸ª)ï¼šæä¾›è®¡ç®—ç»™å®šé›†åˆæŒ‰ä¸€å®šé¡ºåºçš„æ‰€æœ‰å¯èƒ½æ’åˆ—ç»„åˆ

1. `next_permutation`ï¼š å–å‡ºå½“å‰èŒƒå›´å†…çš„æ’åˆ—ï¼Œå¹¶é‡æ–°æ’åºä¸ºä¸‹ä¸€ä¸ªæ’åˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
2. `prev_permutation`ï¼š å–å‡ºæŒ‡å®šèŒƒå›´å†…çš„åºåˆ—å¹¶å°†å®ƒé‡æ–°æ’åºä¸ºä¸Šä¸€ä¸ªåºåˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸Šä¸€ä¸ªåºåˆ—åˆ™è¿”å›falseã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## ç®—æœ¯ç®—æ³•(4ä¸ª)

1. `accumulate`ï¼šiteratorå¯¹æ ‡è¯†çš„åºåˆ—æ®µå…ƒç´ ä¹‹å’Œï¼ŒåŠ åˆ°ä¸€ä¸ªç”±valæŒ‡å®šçš„åˆå§‹å€¼ä¸Šã€‚é‡è½½ç‰ˆæœ¬ä¸å†åšåŠ æ³•ï¼Œè€Œæ˜¯ä¼ è¿›æ¥çš„äºŒå…ƒæ“ä½œç¬¦è¢«åº”ç”¨åˆ°å…ƒç´ ä¸Šã€‚
2. `partial_sum`ï¼šåˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å€¼ä»£è¡¨æŒ‡å®šèŒƒå›´å†…è¯¥ä½ç½®å‰æ‰€æœ‰å…ƒç´ ä¹‹å’Œã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ“ä½œä»£æ›¿åŠ æ³•ã€‚
3. `inner_product`ï¼š   å¯¹ä¸¤ä¸ªåºåˆ—åšå†…ç§¯(å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼Œå†æ±‚å’Œ)å¹¶å°†å†…ç§¯åŠ åˆ°ä¸€ä¸ªè¾“å…¥çš„åˆå§‹å€¼ä¸Šã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„æ“ä½œã€‚
4. `adjacent_difference`ï¼š åˆ›å»ºä¸€ä¸ªæ–°åºåˆ—ï¼Œæ–°åºåˆ—ä¸­æ¯ä¸ªæ–°å€¼ä»£è¡¨å½“å‰å…ƒç´ ä¸ä¸Šä¸€ä¸ªå…ƒç´ çš„å·®ã€‚é‡è½½ç‰ˆæœ¬ç”¨æŒ‡å®šäºŒå…ƒæ“ä½œè®¡ç®—ç›¸é‚»å…ƒç´ çš„å·®ã€‚

## ç”Ÿæˆå’Œå¼‚å˜ç®—æ³•(6ä¸ª)

1. `fill`ï¼š å°†è¾“å…¥å€¼èµ‹ç»™æ ‡å¿—èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚
2. `fill_n`ï¼šå°†è¾“å…¥å€¼èµ‹ç»™firståˆ°first+nèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ã€‚
3. `for_each`ï¼š  ç”¨æŒ‡å®šå‡½æ•°ä¾æ¬¡å¯¹æŒ‡å®šèŒƒå›´å†…æ‰€æœ‰å…ƒç´ è¿›è¡Œè¿­ä»£è®¿é—®ï¼Œè¿”å›æ‰€æŒ‡å®šçš„å‡½æ•°ç±»å‹ã€‚è¯¥å‡½æ•°ä¸å¾—ä¿®æ”¹åºåˆ—ä¸­çš„å…ƒç´ ã€‚
4. `generate`ï¼š  è¿ç»­è°ƒç”¨è¾“å…¥çš„å‡½æ•°æ¥å¡«å……æŒ‡å®šçš„èŒƒå›´ã€‚
5. `generate_n`ï¼š ä¸generateå‡½æ•°ç±»ä¼¼ï¼Œå¡«å……ä»æŒ‡å®šiteratorå¼€å§‹çš„nä¸ªå…ƒç´ ã€‚
6. `transform`ï¼šå°†è¾“å…¥çš„æ“ä½œä½œç”¨ä¸æŒ‡å®šèŒƒå›´å†…çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ–°çš„åºåˆ—ã€‚é‡è½½ç‰ˆæœ¬å°†æ“ä½œä½œç”¨åœ¨ä¸€å¯¹å…ƒç´ ä¸Šï¼Œå¦å¤–ä¸€ä¸ªå…ƒç´ æ¥è‡ªè¾“å…¥çš„å¦å¤–ä¸€ä¸ªåºåˆ—ã€‚ç»“æœè¾“å‡ºåˆ°æŒ‡å®šå®¹å™¨ã€‚

## å…³ç³»ç®—æ³•(8ä¸ª)

1. `equal`ï¼š  å¦‚æœä¸¤ä¸ªåºåˆ—åœ¨æ ‡å¿—èŒƒå›´å†…å…ƒç´ éƒ½ç›¸ç­‰ï¼Œè¿”å›trueã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è¾“å…¥çš„æ“ä½œç¬¦ä»£æ›¿é»˜è®¤çš„ç­‰äºæ“ä½œç¬¦ã€‚
2. `includes`ï¼š åˆ¤æ–­ç¬¬ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½è¢«ç¬¬äºŒä¸ªèŒƒå›´åŒ…å«ï¼Œä½¿ç”¨åº•å±‚å…ƒç´ çš„<æ“ä½œç¬¦ï¼ŒæˆåŠŸè¿”å›trueã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„å‡½æ•°ã€‚>
3. `lexicographical_compare`ï¼š æ¯”è¾ƒä¸¤ä¸ªåºåˆ—ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
4. `max`ï¼š è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå¤§ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
5. `max_element`ï¼š  è¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
6. `min`ï¼š  è¿”å›ä¸¤ä¸ªå…ƒç´ ä¸­è¾ƒå°ä¸€ä¸ªã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
7. `min_element`ï¼šè¿”å›ä¸€ä¸ª`ForwardIterator`ï¼ŒæŒ‡å‡ºåºåˆ—ä¸­æœ€å°çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
8. `mismatch`ï¼šå¹¶è¡Œæ¯”è¾ƒä¸¤ä¸ªåºåˆ—ï¼ŒæŒ‡å‡ºç¬¬ä¸€ä¸ªä¸åŒ¹é…çš„ä½ç½®ï¼Œè¿”å›ä¸€å¯¹iteratorï¼Œæ ‡å¿—ç¬¬ä¸€ä¸ªä¸åŒ¹é…å…ƒç´ ä½ç½®ã€‚å¦‚æœéƒ½åŒ¹é…ï¼Œè¿”å›æ¯ä¸ªå®¹å™¨çš„lastã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚

## é›†åˆç®—æ³•(4ä¸ª)

1. `set_union`ï¼šæ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼ŒåŒ…å«ä¸¤ä¸ªåºåˆ—ä¸­æ‰€æœ‰çš„ä¸é‡å¤å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
2. `set_intersection`ï¼š æ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œå…¶ä¸­å…ƒç´ åœ¨ä¸¤ä¸ªåºåˆ—ä¸­éƒ½å­˜åœ¨ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
3. `set_difference`ï¼šæ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œè¯¥åºåˆ—ä»…ä¿ç•™ç¬¬ä¸€ä¸ªåºåˆ—ä¸­å­˜åœ¨çš„è€Œç¬¬äºŒä¸ªä¸­ä¸å­˜åœ¨çš„å…ƒç´ ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨  è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
4. `set_symmetric_difference`ï¼š æ„é€ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œè¯¥åºåˆ—å–ä¸¤ä¸ªåºåˆ—çš„å¯¹ç§°å·®é›†(å¹¶é›†-äº¤é›†)ã€‚

## å †ç®—æ³•(4ä¸ª)

1. `make_heap`ï¼š æŠŠæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ç”Ÿæˆä¸€ä¸ªå †ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚
2. `pop_heap`ï¼š   å¹¶ä¸çœŸæ­£æŠŠæœ€å¤§å…ƒç´ ä»å †ä¸­å¼¹å‡ºï¼Œè€Œæ˜¯é‡æ–°æ’åºå †ã€‚å®ƒæŠŠfirstå’Œlast-1äº¤æ¢ï¼Œç„¶åé‡æ–°ç”Ÿæˆä¸€ä¸ªå †ã€‚å¯ä½¿ç”¨å®¹å™¨çš„backæ¥è®¿é—®è¢«"å¼¹å‡º"çš„å…ƒç´ æˆ–è€…ä½¿ç”¨pop_backè¿›è¡ŒçœŸæ­£çš„åˆ é™¤ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒæ“ä½œã€‚
3. `push_heap`ï¼š å‡è®¾firståˆ°last-1æ˜¯ä¸€ä¸ªæœ‰æ•ˆå †ï¼Œè¦è¢«åŠ å…¥åˆ°å †çš„å…ƒç´ å­˜æ”¾åœ¨ä½ç½®last-1ï¼Œé‡æ–°ç”Ÿæˆå †ã€‚åœ¨æŒ‡å‘è¯¥å‡½æ•°å‰ï¼Œå¿…é¡»å…ˆæŠŠå…ƒç´ æ’å…¥å®¹å™¨åã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨æŒ‡å®šçš„æ¯”è¾ƒæ“ä½œã€‚
4. `sort_heap`ï¼š  å¯¹æŒ‡å®šèŒƒå›´å†…çš„åºåˆ—é‡æ–°æ’åºï¼Œå®ƒå‡è®¾è¯¥åºåˆ—æ˜¯ä¸ªæœ‰åºå †ã€‚é‡è½½ç‰ˆæœ¬ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒæ“ä½œã€‚

# STLä»¿å‡½æ•°ä¸ä»¿å‡½æ•°é€‚é…å™¨

## ä»¿å‡½æ•°

1. ç®—æœ¯ç±»ä»¿å‡½æ•°(6ä¸ª)ï¼š`plusã€minusã€multiplierã€dividesã€modulusã€negate`(å–ç›¸åæ•°)
2. å…³ç³»è¿ç®—ä»¿å‡½æ•°(6ä¸ª)ï¼š`lessã€less_equalã€equal_toã€not_equal_toã€greater_equalã€greater_equal_to`
3. é€»è¾‘è¿ç®—ä»¿å‡½æ•°(3ä¸ª)ï¼š`logical_andã€logical_orã€logical_no`

## å‡½æ•°é€‚é…å™¨

+ èƒ½å¤Ÿå°†ä»¿å‡½æ•°å’Œå¦ä¸€ä¸ªä»¿å‡½æ•°ï¼ˆæˆ–æŸä¸ªå€¼ï¼Œæˆ–æŸä¸€ä¸ªå‡½æ•°ï¼‰ç»“åˆèµ·æ¥çš„ä»¿å‡½æ•°ã€‚å£°æ˜äº<functional>ä¸­ã€‚
+ `C++11/C++17/C++2x`å¼ƒç”¨äº†å¤§é‡çš„å‡½æ•°é€‚é…å™¨

# STLç©ºé—´é…ç½®å™¨

STL**ç©ºé—´é…ç½®å™¨**å¯ä»¥é…ç½®åŒ…å«å†…å­˜ã€å…±äº«å†…å­˜ã€ç£ç›˜å­˜å‚¨åœ¨å†…çš„å„ç§ç©ºé—´ã€‚

## é»˜è®¤é…ç½®å™¨

1. å‡ºç°èƒŒæ™¯ï¼šå¤§é‡ä¸”é¢‘ç¹çš„å°å—å†…å­˜éé…å¸¦æ¥äº†å¤§é‡ç¢ç‰‡ï¼Œä»¥åŠç”³è¯·é‡Šæ”¾æ—¶çš„ç³»ç»Ÿè°ƒç”¨é€ æˆçš„æ€§èƒ½æŸå¤±ã€‚
2. å†…å­˜æ± ï¼šç¼“è§£å°å—å†…å­˜åˆ†é…å¸¦æ¥çš„é—®é¢˜ï¼ŒåŸºæœ¬çš„æ€æƒ³æ˜¯ä¸€æ¬¡å‘`heap`ç”³è¯·ä¸€å—å¾ˆå¤§çš„å†…å­˜ï¼ˆå†…å­˜æ± ï¼‰ï¼Œå¦‚æœç”³è¯·å°å—å†…å­˜çš„è¯å°±ç›´æ¥åˆ°å†…å­˜æ± ä¸­å»å–ã€‚
3. ä½œç”¨ï¼šå®Œæˆå†…å­˜é…ç½®ä¸é‡Šæ”¾ï¼Œå¯¹è±¡æ„é€ å’Œææ„çš„å·¥ä½œã€‚è´£ä»»ä¸»ä½“ä¸º`allocator`ï¼Œå…¶å››å¤§åŠ©æ‰‹ä¸º`allocate`ï¼Œ`deallocate`ï¼Œ`construct`å’Œ`destroy`ã€‚
4. STLå®ç°äº†`std::allocator`ï¼ˆæ•ˆç‡ä½ï¼Œç®€å•åŒ…è£…äº†`new`å’Œ`delete`ï¼Œåªä¸ºå…¼å®¹è€ä»£ç ï¼‰å’Œ`std::alloc`ï¼ˆå®é™…ä½¿ç”¨çš„ç‰ˆæœ¬ï¼‰

### [ç±»å‹è¦æ±‚](https://zh.cppreference.com/w/cpp/named_req/Allocator)

å¾…åˆ†é…çš„åŸºæœ¬ç±»å‹**ä¸åŒ…å«CVé™å®šç¬¦**ã€‚

### ç»„æˆç»“æ„

1. æ¦‚è¿°ï¼šä¸€çº§ç©ºé—´é…ç½®å™¨ï¼ˆå¤§äº128Bçš„å¤§å—å†…å­˜åˆ†é…ï¼Œå°è£…äº†`malloc`ä¸`free`ï¼‰å’ŒäºŒçº§ç©ºé—´é…ç½®å™¨ï¼ˆä¸å¤§äº128Bçš„å°å—åœ¨å†…å­˜æ± åˆ†é…ï¼‰ã€‚

![STLä¸¤çº§ç©ºé—´é…ç½®å™¨](/home/linbird/Londa/img/lang/2layer-allocater.png)

#### ä¸€çº§ç©ºé—´é…ç½®å™¨

1. é¦–å…ˆå°è¯•ä½¿ç”¨`malloc`åˆ†é…å†…å­˜
2. å¦‚æœç©ºé—´ä¸æ»¡è¶³è°ƒç”¨å†…å­˜ä¸è¶³å¤„ç†å‡½æ•°
3. å†…å­˜å¤„ç†å‡½æ•°å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œåˆ™æŠ›å‡º`bad_alloc`å¼‚å¸¸ã€‚å¦åˆ™å¾ªç¯è°ƒç”¨å¤„ç†å‡½æ•°ç›´åˆ°æˆåŠŸã€‚

+ **æ³¨æ„**ï¼š"å†…å­˜ä¸è¶³å¤„ç†æœºåˆ¶"æ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ï¼Œè®¾ç½®"å†…å­˜ä¸è¶³å¤„ç†ä»‹è´¨"ä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„è´£ä»»ã€‚

#### äºŒçº§ç©ºé—´é…ç½®å™¨

1. æ”¯æŒç»“æ„ï¼š**å †å†…å­˜æ± ä¸`free_list`**ã€‚
   1. `free_list`ï¼š16ä¸ªé“¾è¡¨é¦–æŒ‡é’ˆæ„æˆ`free_list`æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨åˆ†åˆ«ç»„ç»‡å·²ä»å†…å­˜æ± åˆ†é…çš„$NÃ—8B$â€‹çš„ç©ºé—²å†…å­˜å—ï¼ˆä¸ºäº†ä¾¿äºç®¡ç†ï¼Œåœ¨**å†…å­˜æ± ä¸Šçš„åˆ†é…ä»¥`8B`ä¸ºåŸºæœ¬å•ä½**ï¼‰ã€‚
   2. å †å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜ï¼‰ï¼šä»¥`start_free`å¼€å§‹ã€`end_free`ç»“æŸçš„ä¸€æ®µè¿ç»­çš„æœªè¢«ä½¿ç”¨çš„å†…å­˜

![](/home/linbird/Londa/img/lang/second_layer.png)

##### [åˆ†é…ç­–ç•¥](https://blog.csdn.net/GyafdxIs/article/details/48010869)

1. é¦–å…ˆå°è¯•åœ¨`free_list`ä¸Šå¯»æ‰¾æœ€å°å¯æ»¡è¶³å†…å­˜å—ï¼ˆå…¶å¤§å°ä¸ºnï¼‰è¿”å›ï¼Œå¦‚æœä¸æ»¡è¶³è°ƒç”¨`refill`ä»å†…å­˜æ± ç”³è¯·
2. `refill`å°è¯•ä»å†…å­˜æ± åˆ†é…**è‡³å°‘1ä¸ªã€è‡³å¤š20ä¸ª**ï¼ˆSTLé»˜è®¤ï¼‰å¤§å°ä¸ºnçš„å†…å­˜å—ï¼Œå¦‚æœå¾—åˆ°æ»¡è¶³ï¼Œé¦–å…ˆè¿”å›ä¸€ä¸ªç»™ä¸Šå±‚è°ƒç”¨ï¼Œå…¶ä½™çš„æŒ‚åˆ°å¤§å°ä¸ºnçš„`free_list`çš„å…ƒç´ çš„é“¾è¡¨åé¢ã€‚
3. å¦‚æœç¬¬äºŒæ­¥å¾—ä¸åˆ°æ»¡è¶³ï¼ˆå†…å­˜æ± å¯ç”¨å°äºnï¼‰ï¼Œå…ˆå°†å†…å­˜æ± ä¸­çš„å‰©ä½™å¯ç”¨å—æŒ‚åˆ°ç›¸åº”çš„`free_list`çš„ç›¸åº”èŠ‚ç‚¹é“¾è¡¨åé¢ï¼Œ**å†å‘å †ç©ºé—´**ç”³è¯·å†…å­˜ã€‚
4. å¦‚æœç¬¬ä¸‰æ­¥æˆåŠŸï¼Œå†æ¬¡æ‰§è¡Œç¬¬äºŒæ­¥ã€‚å¦åˆ™åœ¨`free_list`å¯»æ‰¾**å¤§äºn**çš„å†…å­˜ï¼Œæœ‰åˆ™å°†è¿™ä¸€å—å†…å­˜å½’è¿˜åˆ°å†…å­˜æ± ï¼ˆè‡ªç”±å†…å­˜åŒºï¼‰ï¼Œä¹‹åè¿›è¡Œç¬¬äºŒæ­¥ï¼Œå¦åˆ™è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨ã€‚

### ç¼ºç‚¹

1. äºŒçº§ç©ºé—´é…ç½®å™¨é€ æˆçš„**å†…ç¢ç‰‡**é—®é¢˜(å°¤å…¶æ—¶é¢‘ç¹ç”³è¯·charè¿™ç§å°å†…å­˜æ—¶)ã€‚
2. äºŒçº§ç©ºé—´é…ç½®å™¨å°†ç©ºé—²çš„å†…å­˜ä¸€ç›´è‡ªå·±æŒæœ‰**æ²¡æœ‰å›æ”¶ç»™ç³»ç»Ÿ**ï¼Œå¯èƒ½é€ æˆå †å­˜å‚¨ä¸å¤Ÿæˆ–è€…äºŒçº§é…ç½®å™¨æ— æ³•æ»¡è¶³ç¨å¤§ä¸€ç‚¹çš„å†…å­˜éœ€æ±‚ç­‰é—®é¢˜ã€‚

## è‡ªå®šä¹‰é…ç½®å™¨

å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨åªéœ€è¦å®ç°`STL allocator`çš„è§„èŒƒå³å¯ã€‚é€šå¸¸åªéœ€è¦ç»§æ‰¿`std::allocator`æ¨¡æ¿ç±»å³å¯ï¼Œåœ¨å­ç±»é‡Œå®ç°è‡ªå·±çš„æ–¹æ³•å°±å¯ä»¥å®ç°è‡ªå®šä¹‰çš„ç©ºé—´é…ç½®å™¨ã€‚

```c++
template<class T> struct Allocator : public allocator<T> {
    typedef ptrdiff_t       difference_type;
	typedef size_t   size_type;
    typedef typename allocator<T>::pointer              pointer;
    typedef typename allocator<T>::value_type           value_type;
    typedef typename allocator<T>::const_pointer        const_pointer;
    typedef typename allocator<T>::reference            reference;
    typedef typename allocator<T>::const_reference      const_reference;

/// 0ï¼šæ­¤ç»“æ„å®šä¹‰äº†otheræˆå‘˜ï¼Œè¯¥æˆå‘˜å®šä¹‰ä¸ºä¸“é—¨ç”¨äºä¸åŒå‚æ•°ç±»å‹çš„åˆ†é…å™¨çš„å®ä¾‹ï¼ˆotheræˆå‘˜å®šä¹‰äº†å¯ä»¥åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡çš„åˆ†é…å™¨ç±»ï¼‰,ä¾‹å¦‚map<>æ¨¡æ¿ç±»çš„å†…éƒ¨éœ€è¦åˆ›å»ºçº¢é»‘æ ‘çš„æ¯ä¸ªnodeçš„å­˜å‚¨ç»“æ„
    template<class U> struct rebind{ typedef Allocator<U> other;};
///	template<class U> struct rebind{using other=MyAllocator<U>;};

///1ï¼šç©ºé—´åˆ†é…å‡½æ•°ï¼šé…ç½®å¯ä»¥å­˜å‚¨nä¸ªå¯¹è±¡çš„ç©ºé—´ï¼ˆæ³¨æ„ï¼šoperator newå¹¶ä¸ä¼šæ‰§è¡Œä»»ä½•ç±»å‹Tçš„åˆå§‹åŒ–ï¼‰
    pointer allocate(size_type n) {
		return static_cast<pointer>(operator new(sizeof(T)*numObjs));
    }
    ///ç¬¬äºŒå‚æ•°æ¥å—ä¸€ä¸ªå·²åˆ†é…å †å†…å­˜çš„æŒ‡é’ˆï¼Œåªæ˜¯å‚è€ƒå€¼ï¼ˆå¯ä»¥å¢å¼ºåœ°å€çš„åŒºåŸŸæ€§ï¼‰
	pointer allocate(size_type numObjs, const void* hit){ return allocate(numObjs);}

///2ï¼šç©ºé—´é‡Šæ”¾å‡½æ•°
    template<typename U> void deallocate(U* p, size_type n) { return ::operator delete(p);}

///å¯é€‰3ï¼šæ„é€ å‡½æ•°ï¼ˆè¢«C++20åºŸå¼ƒï¼‰
    template<typename U, class...Args> void construct(U* p, Args &&...) {
        ::new(p) T(std::forward<Args>(args)...);
    }
///å¯é€‰4ï¼šææ„å‡½æ•°ï¼ˆè¢«C++20åºŸå¼ƒï¼‰
    template<typename U> void _destroy(U* p) { p->~T();}

///åœ°å€åŠå…¶ä»–ç›¸å…³å‡½æ•°ï¼ˆéå¿…è¦ï¼‰
    pointer address(reference x) { return (pointer)&x;}
    const_pointer address(const_reference x) { return (const_pointer)&x;}
    size_type max_size() const { return size_type(UINT_MAX/sizeof(T));}
};

std::vector<int, Allocator<int> > v;
for(int i = 0; i < 100; ++i){
	v.push_back(i);
	if((i&(i-1)) == 0) cout << v.size() << '/' << v.capacity() << ' ' << v.back() << endl;
}
```

# STLè¿­ä»£å™¨

è¿­ä»£å™¨æ˜¯ä¸€ç§æŠ½è±¡çš„è®¾è®¡æ¦‚å¿µï¼Œå®ƒæä¾›ä¸€ç§æ–¹æ³•ä½¿å¤–ç•Œèƒ½å¤Ÿä¾åºè®¿é—®æŸä¸ªèšåˆç‰©æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€æš´éœ²è¯¥èšåˆç‰©çš„å†…éƒ¨è¡¨è¿°æ–¹å¼ã€‚å› æ­¤è¿­ä»£å™¨çš„å†…éƒ¨å¿…é¡»ä¿å­˜ä¸€ä¸ªä¸å®¹å™¨ç›¸å…³è”çš„æŒ‡é’ˆï¼Œç„¶åé‡è½½å„ç§è¿ç®—æ“ä½œæ¥æ–¹ä¾¿éå†ã€‚

**ä¼˜åŒ–æ€æƒ³**ï¼šåˆ©ç”¨C++é‡è½½æœºåˆ¶å’Œå‚æ•°æ¨å¯¼æœºåˆ¶ï¼ˆ`traits`ï¼šç±»å‹èƒå–ï¼‰**å°†è¿è¡ŒæœŸå†³è®®é—®é¢˜æå‰åˆ°ç¼–è¯‘æœŸå†³è®®**ï¼ˆ**æ¯ä¸ªè¿­ä»£å™¨éƒ½å¿…é¡»å®šä¹‰å‹åˆ«`iterator_category`**ï¼‰ï¼Œå®ç°äº†**é¿å…åœ¨è¿è¡Œæ—¶åˆ¤æ–­è¿­ä»£å™¨çš„ç±»å‹**ã€‚[æ¥æº](https://ivanzz1001.github.io/records/post/cplusplus/2018/03/14/cpluscplus_stl_iterator)

## ç±»åˆ«

### åŸºæœ¬è¿­ä»£å™¨ç±»å‹

![è¿­ä»£å™¨ç±»å‹](/home/linbird/Londa/img/lang/cpp_iterator_top.jpg)

|     è¾“å…¥å‹     |     è¾“å‡ºå‹     |                  å‰å‘å‹                   |         åŒå‘å‹          |             éšæœºè·å–å‹              |
| :------------: | :------------: | :---------------------------------------: | :---------------------: | :---------------------------------: |
| å•æ­¥å‘å‰ã€åªè¯» | å•æ­¥å‘å‰ã€åªå†™ |            å•æ­¥å‘å‰ã€åŒºé—´è¯»å†™             |   åŒå‘å•æ­¥ã€åŒºé—´è¯»å†™    |           éšæœºè·³è½¬ã€è¯»å†™            |
|   `istream`    |   `ostream`    | `forward_list,unordered_<multi>[map|set]` | `list,<multi>[map|set]` | `vector,array,string,deque,pointer` |

### è¿­ä»£å™¨é€‚é…å™¨

#### æ’å…¥é€‚é…å™¨

1. æ’å…¥é€‚é…å™¨`inserter`ï¼šè¦æ±‚å®¹å™¨æœ‰`insert`æˆå‘˜å‡½æ•°ï¼Œå¦‚`vector`ï¼Œ`list`ï¼Œ`map`ï¼Œ`set`ï¼Œ`deque`(æœ‰ç‚¹ç ´å`deque`æ•°æ®ç»“æ„)ï¼Œ `inserter()`å¯ä»¥å¿«é€Ÿåˆ›å»ºè¯¥ç±»å‹è¿­ä»£å™¨ï¼Œå‚æ•°ä¸­çš„ä½ç½®å‚æ•°ä»…åšæŒ‡ç¤ºä½œç”¨ã€‚
2. å‰å‘æ’å…¥é€‚é…å™¨`front_insert_iterator`ï¼šè¦æ±‚ç±»æœ‰`push_front`å‡½æ•°æ”¯æŒï¼Œå¦‚`list`å’Œ`deque`ã€‚å¯ä»¥å€ŸåŠ©`front_inserter()`å¿«é€Ÿåˆ›å»ºã€‚
3. åå‘æ’å…¥è¿­ä»£å™¨`back_insert_iterator`ï¼šè¦æ±‚æˆå‘˜å‡½æ•°`push_back`æ”¯æŒï¼Œå¦‚`vector`ã€listã€`deque`ã€‚å¯ä»¥å€ŸåŠ©`back_inserter()`åˆ›å»ºã€‚

#### é€†å‘è¿­ä»£å™¨é€‚é…å™¨

1. `reverse_iterator`ï¼š

#### ç§»åŠ¨è¿­ä»£å™¨

1. `move_inserter`ï¼šC++11å¼•å…¥ã€‚å¯ä»¥å®ç°ä»¥ç§»åŠ¨è€Œéå¤åˆ¶çš„æ–¹å¼ï¼Œå°†æŸä¸ªåŒºåŸŸç©ºé—´ä¸­çš„å…ƒç´ ç§»åŠ¨è‡³å¦ä¸€ä¸ªæŒ‡å®šçš„ç©ºé—´ã€‚

+ è°ƒç”¨`make_move_iterator`å‡½æ•°å¯ä»¥ç”±åŸºç¡€è¿­ä»£å™¨å¿«é€Ÿåˆ›å»º`move_iterator`è¿­ä»£å™¨.

+ æ­¤åŸºç¡€è¿­ä»£å™¨çš„ç±»å‹è™½ç„¶æ²¡æœ‰æ˜ç¡®è¦æ±‚ï¼Œä½†è¯¥æ¨¡æ¿ç±»ä¸­æŸäº›æˆå‘˜æ–¹æ³•çš„åº•å±‚å®ç°ï¼Œéœ€è¦æ­¤åŸºç¡€è¿­ä»£å™¨ä¸ºåŒå‘è¿­ä»£å™¨æˆ–è€…éšæœºè®¿é—®è¿­ä»£å™¨ã€‚

+ é€šè¿‡ç§»åŠ¨è¿­ä»£å™¨å°†å®¹å™¨ä¸­æŸåŒºåŸŸçš„å…ƒç´ ç§»åŠ¨åˆ°äº†å…¶ä»–å®¹å™¨ä¸­ï¼Œè¯¥åŒºåŸŸå†…ä»å¯èƒ½æ®‹ç•™æœ‰ä¹‹å‰å­˜å‚¨çš„å…ƒç´ ï¼Œä½†è¿™äº›å…ƒç´ æ˜¯ä¸èƒ½å†è¢«ä½¿ç”¨çš„ï¼Œå¦åˆ™ææœ‰å¯èƒ½ä½¿ç¨‹åºäº§ç”Ÿå„ç§å…¶ä»–é”™è¯¯ã€‚

  |                         è¿­ä»£å™¨é€‚é…å™¨                         |                           åˆ›å»ºå‡½æ•°                           |    è¦æ±‚    |
  | :----------------------------------------------------------: | :----------------------------------------------------------: | :--------: |
  | [`reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/reverse_iterator) | [`make_reverse_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_reverse_iterator) |            |
  | [`move_iterator`](https://zh.cppreference.com/w/cpp/iterator/move_iterator) | [`make_move_iterator`](https://zh.cppreference.com/w/cpp/iterator/make_move_iterator) |            |
  | [`back_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/back_insert_iterator) | [`back_inserter`](https://zh.cppreference.com/w/cpp/iterator/back_inserter) | `push_back` |
  | [`front_insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/front_insert_iterator) | [`front_inserter`](https://zh.cppreference.com/w/cpp/iterator/front_inserter) | `push_front` |
  | [`insert_iterator`](https://zh.cppreference.com/w/cpp/iterator/insert_iterator) | [`inserter`](https://zh.cppreference.com/w/cpp/iterator/inserter) |   `insert`   |

## è¿­ä»£å™¨æ¨¡æ¿

```c++
///äº”ç§åŸºæœ¬è¿­ä»£å™¨ç±»å‹çš„å®šä¹‰ï¼šåªæ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è¯†ï¼Œä¸éœ€è¦å…·ä½“çš„å…ƒç´ 
struct input_iterator_tag{};
struct output_iterator_tag{};
struct forward_iterator_tag:public input_iterator_tag{};
struct bidirectional_iterator_tag:public forward_iterator_tag{};
struct random_access_iterator_tag:public bidirectional_iterator_tag{};

template <class _Tp, class _Distance> struct input_iterator {///è¾“å…¥è¿­ä»£å™¨
  typedef input_iterator_tag iterator_category;
  typedef _Tp                value_type;
  typedef _Distance          difference_type;
  typedef _Tp*               pointer;
  typedef _Tp&               reference;
};

struct output_iterator {///è¾“å‡ºè¿­ä»£å™¨
  typedef output_iterator_tag iterator_category;
  typedef void                value_type;
  typedef void                difference_type;
  typedef void                pointer;
  typedef void                reference;
};

template <class _Tp, class _Distance> struct forward_iterator {///å‰å‘è¿­ä»£å™¨
  typedef forward_iterator_tag iterator_category;
  typedef _Tp                  value_type;
  typedef _Distance            difference_type;
  typedef _Tp*                 pointer;
  typedef _Tp&                 reference;
};


template <class _Tp, class _Distance> struct bidirectional_iterator {///åŒå‘è¿­ä»£å™¨
  typedef bidirectional_iterator_tag iterator_category;
  typedef _Tp                        value_type;
  typedef _Distance                  difference_type;
  typedef _Tp*                       pointer;
  typedef _Tp&                       reference;
};

template <class _Tp, class _Distance> struct random_access_iterator {///éšæœºè®¿é—®è¿­ä»£å™¨
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                        value_type;
  typedef _Distance                  difference_type;
  typedef _Tp*                       pointer;
  typedef _Tp&                       reference;
};
```

### è¿­ä»£å™¨ç±»å‹èƒå–

é€šè¿‡STLå®šä¹‰çš„**`iterator_traits`æ¨¡æ¿å¯ä»¥èƒå–ä¸åŒç§ç±»çš„è¿­ä»£å™¨ç‰¹æ€§**ï¼Œ`iterator_traits`è¿˜å¯¹æŒ‡é’ˆå’Œå¸¸é‡æŒ‡é’ˆæœ‰ç‰¹åŒ–ç‰ˆæœ¬ï¼Œå› æ­¤ä¹Ÿå¯ä»¥èƒå–åŸç”ŸæŒ‡é’ˆçš„ç‰¹æ€§ã€‚

```c++
template<class Category,class T,class Distance = ptrdiff_t,class Pointer=T*,class Reference=T&>
class iterator{
    typedef Category iterator_category;///è¿­ä»£å™¨ç±»åˆ«
    typedef T        value_type;///å…ƒç´ ç±»å‹
    typedef Distance difference_type;///è¿­ä»£å™¨ä¹‹å·®çš„ç±»å‹
    typedef Pointer  pointer;///å…ƒç´ çš„æŒ‡é’ˆç±»å‹
    typedef Reference reference;///å…ƒç´ çš„å¼•ç”¨ç±»å‹
};///STLä¸­çš„è¿­ä»£å™¨æ¨¡æ¿

template <class _Tp> struct iterator_traits<_Tp*> {///ç‰¹åŒ–ç‰ˆæœ¬ï¼šèƒå–æŒ‡é’ˆç±»è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                         value_type;
  typedef ptrdiff_t                   difference_type;
  typedef _Tp*                        pointer;
  typedef _Tp&                        reference;
};

template <class _Tp> struct iterator_traits<const _Tp*> {///ç‰¹åŒ–ç‰ˆæœ¬ï¼šèƒå–å¸¸æŒ‡é’ˆç±»è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef random_access_iterator_tag iterator_category;
  typedef _Tp                         value_type;
  typedef ptrdiff_t                   difference_type;
  typedef const _Tp*                  pointer;
  typedef const _Tp&                  reference;
};

template <class _Iterator> struct iterator_traits {///èƒå–ä¸€èˆ¬è¿­ä»£å™¨çš„ç‰¹æ€§
  typedef typename _Iterator::iterator_category iterator_category;
  typedef typename _Iterator::value_type        value_type;
  typedef typename _Iterator::difference_type   difference_type;
  typedef typename _Iterator::pointer           pointer;
  typedef typename _Iterator::reference         reference;
};
```

## è¿­ä»£å™¨çš„ç§»åŠ¨

1. `advance`ï¼šå‚æ•°æœ¬èº«è¢«æ”¹å˜ï¼Œè¿­ä»£å™¨è‡³å°‘ä¸ºå•å‘è¿­ä»£å™¨ï¼Œå½“æ­¥æ•°å‚æ•°å°äº0åˆ™å¿…é¡»æ˜¯åŒå‘è¿­ä»£å™¨ã€‚
2. `prev`ï¼šä¸æ”¹å˜å‚æ•°ã€‚è·å–ä¸€ä¸ªè·ç¦»æŒ‡å®šè¿­ä»£å™¨ n ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚è¦æ±‚ä¸ºåŒå‘æˆ–è€…éšæœºè¿­ä»£å™¨ã€‚**è‡ªèº«ä¸ä¼šæ£€éªŒæ–°è¿­ä»£å™¨çš„æŒ‡å‘æ˜¯å¦åˆç†**
3. `next`ï¼šä¸æ”¹å˜å‚æ•°ã€‚è¿­ä»£å™¨ç±»å‹è¦æ±‚åŒ1ï¼Œå•å‘è¿­ä»£å™¨åªèƒ½ç”¨æ­£å‚æ•°ã€‚**ä¹Ÿä¸ä¼šæ£€æŸ¥æ–°è¿­ä»£å™¨æŒ‡å‘çš„æœ‰æ•ˆæ€§**ã€‚

## è¿­ä»£å™¨å¤±æ•ˆ

å¯¹å®¹å™¨çš„**æ“ä½œæ”¹å˜äº†å…ƒç´ çš„å­˜æ”¾ä½ç½®**ï¼Œä½¿ä¹‹å‰å­˜å‚¨äº†å­˜å‚¨ä½ç½®çš„è¿­ä»£å™¨æ— æ³•è®¿é—®åˆ°æ­£ç¡®æ•°æ®çš„ç°è±¡ã€‚[å‚è€ƒ](https://blog.csdn.net/richenyunqi/article/details/86563479)

|                          åº•å±‚ï¼šç»“æ„                          |  æ’å…¥  |     åˆ é™¤     |
| :----------------------------------------------------------: | :----: | :----------: |
|          æ•°ç»„è¿ç»­å†…å­˜ï¼š`vector,deque,string,array`           | åå¤±æ•ˆ |    åå¤±æ•ˆ    |
|             é“¾è¡¨ä¸è¿ç»­å†…å­˜ï¼š`list,forward_list`              | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
|        çº¢é»‘æ ‘ä¸è¿ç»­å†…å­˜ï¼š`map,multimap,set,multiset`         | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
| å“ˆå¸Œï¼š`unordered_map,unordered_multimap,unordered_set,unordered_multiset` | å…¨æœ‰æ•ˆ | ä»…æœ¬èŠ‚ç‚¹å¤±æ•ˆ |
|              å †æ ˆï¼š`stack,priority_queue,queue`              | ä¸æ”¯æŒ |    ä¸æ”¯æŒ    |

## æŒ‡é’ˆã€å¼•ç”¨å’Œè¿­ä»£å™¨

### æŒ‡é’ˆ

**æŒ‡é’ˆä½œä¸ºä¸€ä¸ªå®ä½“å­˜åœ¨**ï¼Œå æœ‰å…·ä½“çš„å­˜å‚¨å•å…ƒï¼Œè¯¥å­˜å‚¨å•å…ƒä¸­å­˜å‚¨çš„æ˜¯è¢«æŒ‡å‘å¯¹è±¡çš„åœ°å€ã€‚ä½¿ç”¨æŒ‡é’ˆæ“ä½œè®¿é—®åŸå§‹å¯¹è±¡æ—¶å¿…é¡»æ‰‹åŠ¨å¯¹æŒ‡é’ˆè§£å¼•ç”¨ã€‚

#### constä¸æŒ‡é’ˆ

ä»å³å‘å·¦è¯»ç”³æ˜ï¼Œé‡åˆ°*ç¿»è¯‘ä¸º`pointer to`

```c
char * const p; // p is a const pointer to char;
char const * p; // p is a pointer to constr char;
const char * p; // p is a pointer to constr char;
```

#### æŒ‡é’ˆä¸æ•°ç»„

```c
int (*p)[n];//æ•°ç»„æŒ‡é’ˆï¼ˆä¹Ÿç§°è¡ŒæŒ‡é’ˆï¼‰,()ä¼˜å…ˆçº§é«˜ï¼Œé¦–å…ˆè¯´æ˜pæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªæ•´å‹çš„ä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦æ˜¯n
int *p[n];//æŒ‡é’ˆæ•°ç»„ï¼Œ[]ä¼˜å…ˆçº§é«˜ï¼Œå…ˆä¸pç»“åˆæˆä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå†ç”±int*è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ•´å‹æŒ‡é’ˆæ•°ç»„ï¼Œå®ƒæœ‰nä¸ªæŒ‡é’ˆç±»å‹çš„æ•°ç»„å…ƒç´ ã€‚
int a[5];//æ•°ç»„åaä»£è¡¨æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ï¼Œå’Œ&a[0]åœ¨æ•°å€¼ä¸Šæ˜¯ç­‰ä»·çš„ï¼Œå¯¹ä»–ä»¬è¿›è¡Œç®—æœ¯è¿ç®—çš„æ­¥é•¿éƒ½æ˜¯æ•°ç»„é¦–å…ƒç´ ç±»å‹çš„å¤§å°
int b[2][3];//bä»£è¡¨æ•´ä¸ªæ•°ç»„çš„é¦–åœ°å€ï¼Œb[0]è¡¨ç¤ºçš„æ˜¯ç¬¬ä¸€è¡Œçš„é¦–åœ°å€ï¼Œä¸¤è€…åœ¨æ•°å€¼ä¸Šå…·æœ‰ç­‰ä»·å…³ç³»
auto c = &a;//å¯¹æ•°ç»„åè¿›è¡Œå–åœ°å€æ“ä½œå¾—åˆ°çš„æ˜¯æ•´ä¸ªæ•°ç»„çš„åœ°å€ï¼Œå¯¹å…¶è¿›è¡Œç®—æœ¯æ“ä½œçš„æ­¥é•¿æ˜¯æ•´ä¸ªæ•°ç»„çš„å¤§å°
```

1. æ•°ç»„åçš„å†…æ¶µåœ¨äºå…¶æŒ‡ä»£å®ä½“æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯æ•°ç»„ï¼›
2. æ•°ç»„åçš„å¤–å»¶åœ¨äºå…¶å¯ä»¥è½¬æ¢ä¸ºæŒ‡å‘å…¶æŒ‡ä»£å®ä½“çš„æŒ‡é’ˆï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªåªè¯»æŒ‡é’ˆå˜é‡`T* const`ï¼ˆç”±äºç¼–è¯‘å™¨ä¼šé˜»æ­¢æ‰€æœ‰å¯¹åªè¯»å˜é‡çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ•°ç»„åä¸èƒ½è¿›è¡Œè‡ªå¢è‡ªå‡çš„æ“ä½œï¼‰ï¼Œå¯¹å…¶è¿›è¡Œ`sizeof`æ“ä½œæ—¶å¾—åˆ°çš„æ˜¯æ•°ç»„æ•´ä½“çš„ç©ºé—´çš„å¤§å°.
3. å½“æ•°ç»„åä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’æ—¶ï¼Œä½œä¸ºå¸¸é‡æŒ‡é’ˆçš„æ•°ç»„åçš„å€¼è¢«èµ‹å€¼åˆ°ä¸€ä¸ªæŒ‡é’ˆå˜é‡
4. æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆåˆ™æ˜¯å¦å¤–ä¸€ç§å˜é‡ç±»å‹ï¼ˆåœ¨WIN32å¹³å°ä¸‹ï¼Œé•¿åº¦ä¸º4ï¼‰ï¼Œä»…ä»…æ„å‘³ç€æ•°ç»„çš„å­˜æ”¾åœ°å€ï¼

æ•°ç»„åå’Œ&æ•°ç»„åè™½ç„¶åœ¨æ•°å€¼ä¸Šç›¸åŒï¼Œä½†æ˜¯åœ¨ç±»å‹ä¸Šä¸åŒâ€”â€”æ•°ç»„åæ˜¯æŒ‡å‘é¦–ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œ&æ•°ç»„åæ˜¯æŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆã€‚åœ¨æŒ‡é’ˆåŠ å‡æ•´æ•°çš„æ—¶å€™ï¼Œå‰è€…ä»¥ä¸€ä¸ªå…ƒç´ ä¸ºé¢—ç²’åº¦ï¼Œåè€…ä»¥æ•´ä¸ªæ•°ç»„ä¸ºé¢—ç²’åº¦ã€‚

#### ç±»æˆå‘˜æŒ‡é’ˆ

è¦ä½¿ç”¨ï¼ˆ&ç±»å::æˆå‘˜åï¼‰è·å–æŒ‡å‘æˆå‘˜çš„æŒ‡é’ˆè¿™ä¸ªæˆå‘˜å¿…é¡»æ˜¯å¯¹å¤–å¯è§çš„ï¼š

|      æŒ‡å‘      |                    ç”³æ˜æ–¹å¼                    |                   èµ‹å€¼                   |                             è°ƒç”¨                             |
| :------------: | :--------------------------------------------: | :--------------------------------------: | :----------------------------------------------------------: |
|  ç±»çš„æ™®é€šæˆå‘˜  | `typedef è¿”å›å€¼ (ç±»å::*æŒ‡é’ˆç±»å‹å)(å‚æ•°åˆ—è¡¨)` | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å‡½æ•°å` | `(ç±»å¯¹è±¡.*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)`æˆ–è€…`(ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå)(å‚æ•°åˆ—è¡¨)` |
| ç±»æ™®é€šæ•°æ®æˆå‘˜ |    `typedef æ•°æ®ç±»å‹å (ç±»å::*æŒ‡é’ˆç±»å‹å)`    | `æŒ‡é’ˆç±»å‹å  æŒ‡é’ˆå = &ç±»å::æˆå‘˜å˜é‡å` |            `ç±»å¯¹è±¡.*æŒ‡é’ˆå`æˆ–è€…`ç±»æŒ‡é’ˆ->*æŒ‡é’ˆå`             |

ç±»çš„é™æ€æˆå‘˜å’Œæ™®é€šæˆå‘˜çš„åŒºåˆ«åœ¨äºï¼Œä»–ä»¬æ˜¯ä¸ä¾èµ–äºå…·ä½“å¯¹è±¡çš„ï¼Œæ‰€æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½å…±äº«åŒä¸€ä¸ªé™æ€æˆå‘˜ï¼Œæ‰€ä»¥é™æ€æˆå‘˜ä¹Ÿæ²¡æœ‰thisæŒ‡é’ˆçš„æ¦‚å¿µï¼Œæ‰€ä»¥æŒ‡å‘ç±»çš„é™æ€æˆå‘˜çš„æŒ‡é’ˆå°±æ˜¯æ™®é€šçš„æŒ‡é’ˆã€‚


### å¼•ç”¨

**å¼•ç”¨åªæ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡çš„åˆ«åï¼Œå®ƒæŒ‡å‘å¯¹è±¡æœ¬èº«**ï¼Œåœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–å¼•ç”¨ï¼Œä¸”ä¸€æ—¦å®šä¹‰äº†å¼•ç”¨å°±æ— æ³•å†ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ï¼Œä¹‹åæ¯æ¬¡ä½¿ç”¨è¿™ä¸ªå¼•ç”¨è®¿é—®çš„éƒ½æ˜¯æœ€åˆç»‘å®šçš„å¯¹è±¡ï¼Œ**å·¦å€¼å¼•ç”¨å’Œå…·åå³å€¼å¼•ç”¨éƒ½å æœ‰å­˜å‚¨ç©ºé—´**ã€‚

```c++
class Test{char& b};//64bit:sizeof(b) == 8
```
å¼•ç”¨å¤§å¤šæ•°æ—¶è¡¨ç°ä¸ºä¸€ä¸ªè¢«æ–½åŠ äº†è®¸å¤šé™åˆ¶çš„æŒ‡é’ˆï¼ˆå¯ä»¥çœ‹ä½œ`const`æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡è¿™äº›è¯­æ³•ä¸Šçš„é™åˆ¶è§„é¿äº†ä½¿ç”¨è£¸æŒ‡é’ˆæ—¶çš„ä¸€äº›å±é™©è¡Œä¸ºï¼Œå…¶æ•ˆç‡å’Œè£¸æŒ‡é’ˆç›¸åŒã€‚

### è¿­ä»£å™¨

è¿­ä»£å™¨æ˜¯æ¨¡ä»¿æŒ‡é’ˆçš„è¡Œä¸ºè®¾è®¡çš„ç±»æ¨¡æ¿ï¼Œæ˜¯**å¯¹æŒ‡é’ˆæ¦‚å¿µçš„ä¸€ç§æå‡**ã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥è¢«è§†ä¸ºä¸€ç§è¿­ä»£å™¨ã€‚è¿­ä»£å™¨æ›´åƒæ˜¯ä¸€ç»„æŠ½è±¡çš„æ¥å£ï¼Œæ»¡è¶³äº†è¿™ä¸€ç»„æ¥å£å°±å¯ä»¥ç§°ä¹‹ä¸ºè¿­ä»£å™¨ï¼Œæ»¡è¶³è¿™äº›æ¥å£çš„å…·ä½“å®ç°æ–¹æ³•é«˜åº¦ä¾èµ–äºå®é™…çš„æ•°æ®ç»“æ„ã€‚

# STLæ­£åˆ™è¡¨è¾¾å¼

+ å­—ç¬¦ä¸²å¤„ç†çš„åˆ©å™¨

## æ„æˆ

### æ­£åˆ™è¡¨è¾¾å¼regex

+ æ­£åˆ™è¡¨è¾¾å¼çš„æ ¸å¿ƒï¼Œè¡¨è¾¾å¼æå¤§çš„å½±å“äº†æœ€ç»ˆçš„æ•ˆç‡
+ æ”¯æŒæ–‡æ³•ï¼šSTLçš„regexåº“é»˜è®¤æ”¯æŒECMAScriptæ–‡æ³•ï¼Œæ­¤å¤–ä¹Ÿæä¾›äº†grepã€egrepã€awkç­‰æ–‡æ³•çš„æ”¯æŒã€‚å…¶æ–‡æ³•å¤§åŒå°å¼‚ï¼Œåœ¨è¿™é‡Œä¸åšå…·ä½“å±•å¼€ã€‚

1. [æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹](https://deerchao.cn/tutorials/regex/regex.htm)
2. [C++æ­£åˆ™çŸ¥è¯†](https://github.com/HesseSummer/cspSolution/blob/master/C%2B%2B%E7%9F%A5%E8%AF%86/%E6%AD%A3%E5%88%99.md)
3. [learn-regex](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)
4. [å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼](https://github.com/cdoco/common-regex/blob/master/README.md)

### æœç´¢åŒ¹é…ç®—æ³•

1. `regex_match()`:ä¼šåœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­å°è¯•å®Œå…¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚
2. `regex_search()`:åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­æœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„éƒ¨åˆ†,æŸ¥æ‰¾ç»“æœåŒ…å«äº†åŒ¹é…çš„å­ä¸²å’Œå­ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹å’Œç»“æŸåœ°å€ã€‚
3. `regex_replace()`:æŸ¥æ‰¾ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²å¹¶æ›¿æ¢ã€‚
4. `sregex_iterator()`:è¿­ä»£å™¨é€‚é…å™¨ï¼Œè°ƒç”¨`regex_search`æ¥éå†ä¸€ä¸ªstringä¸­æ‰€æœ‰åŒ¹é…çš„å­ä¸²

### ç»“æœåŒ¹é…é›†

1. smatch/cmatch:ä»¥`string/const char*`æ ¼å¼ä¿å­˜åŒ¹é…é›†åˆ

## å®ä¾‹

1. [C++ä¸æ­£åˆ™è¡¨è¾¾å¼](https://paul.pub/cpp-regex/)

# CPP IOå¤„ç†

+ C++åŒ…å«ä¸¤ä¸ªè¾“å…¥/è¾“å‡ºåº“ï¼šç°ä»£çš„ã€åŸºäºæµçš„I/Oåº“å’ŒCé£æ ¼I/Oå‡½æ•°çš„æ ‡å‡†é›†åˆã€‚
+ åŸºäºæµçš„IOå›´ç»•æŠ½è±¡çš„è¾“å…¥/è¾“å‡ºè®¾å¤‡ã€‚é€šè¿‡è¿™äº›æŠ½è±¡å¯ä»¥ä»¥ç›¸åŒçš„ä»£ç æ¥å¤„ç†é¢å‘æ–‡ä»¶ã€å†…å­˜æµæˆ–å…¶ä»–è‡ªå®šä¹‰çš„é€‚é…å™¨è®¾å¤‡æ‰§è¡ŒIOæ“ä½œã€‚
+ æ¯ä¸ªCæµä¸å¤–éƒ¨ç‰©ç†è®¾å¤‡ï¼ˆæ–‡ä»¶ã€æ ‡å‡†è¾“å…¥æµã€æ‰“å°æœºã€åºåˆ—ç«¯å£ç­‰ï¼‰å…³è”ï¼Œåªèƒ½é€šè¿‡`std::FILE*`ç±»å‹æŒ‡é’ˆè®¿é—®åŠæ“ä½œ

## åŸºæœ¬æµå¯¹è±¡

![æµå¯¹è±¡ç»§æ‰¿å…³ç³»](img/lang/io.svg)

|                              ç±»                              |                        ä½œç”¨                        |
| :----------------------------------------------------------: | :------------------------------------------------: |
| [`ios_base`](https://zh.cppreference.com/w/cpp/io/ios_base)  |     çŠ¶æ€ä¿¡æ¯ã€æ§åˆ¶ä¿¡æ¯ã€å†…éƒ¨å­˜å‚¨ã€å›è°ƒã€å¼‚å¸¸ç­‰     |
| [`basic_ios`](https://zh.cppreference.com/w/cpp/io/basic_ios) | æä¾›äº†`std::basic_streambuf`çš„æ¥å£ï¼Œç®¡ç†ä»»æ„æµç¼“å†² |

`cinã€coutã€cerrã€clog`éƒ½æ˜¯é¢„å…ˆå·²ç»å®šä¹‰çš„å…¨å±€å¯¹è±¡ã€‚æ¯ä¸ªIO å¯¹è±¡éƒ½ç»´æŠ¤ä¸€ç»„æ¡ä»¶çŠ¶æ€ï¼Œç”¨æ¥æŒ‡å‡ºæ­¤å¯¹è±¡ä¸Šæ˜¯å¦å¯ä»¥è¿›è¡Œ IO æ“ä½œã€‚å¦‚æœé‡åˆ°é”™è¯¯ï¼ˆä¾‹å¦‚è¾“å…¥æµé‡åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼‰ï¼Œåˆ™å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºæ˜¯å¤±æ•ˆï¼Œæ‰€æœ‰çš„åç»­è¾“å…¥æ“ä½œéƒ½ä¸èƒ½æ‰§è¡Œï¼Œç›´åˆ°é”™è¯¯çº æ­£ã€‚

| çŠ¶æ€æ ‡è®°ä½å¸¸é‡ |                           å«ä¹‰                           |  `good()`  |  `eof()`   |  `fail()`  |  `bad()`   |
| :------------: | :------------------------------------------------------: | :--------: | :--------: | :--------: | :--------: |
| `ios::goodbit` |                         æ²¡æœ‰é”™è¯¯                         | **`true`** |  `false`   |  `false`   |  `false`   |
| `ios::eofbit`  |                       å·²åˆ°è¾¾æ–‡ä»¶å°¾                       |  `false`   | **`true`** |  `false`   |  `false`   |
| `ios::failbit` | éè‡´å‘½å¯æŒ½å›çš„**é€»è¾‘é”™è¯¯(å¦‚è¯»æ•°å­—é‡åˆ°å­—æ¯)ï¼Œå¯ç»§ç»­ä½¿ç”¨** |  `false`   |  `false`   | **`true`** |  `false`   |
| `ios::badbit`  |   è‡´å‘½æ€§ä¸å¯æŒ½å›çš„**ç‰©ç†é”™è¯¯(å¦‚ç‰©ç†ä¸Š)ï¼Œä¸å¯ç»§ç»­ä½¿ç”¨**   |  `false`   |  `false`   | **`true`** | **`true`** |

æµå¯¹è±¡è¿˜æä¾›äº†**é€»è¾‘åˆ¤æ–­çš„è¿ç®—ç¬¦é‡è½½**`ios::operator!() ã€ios::operator bool()`ï¼Œå½“æµå¯¹è±¡å•ç‹¬å‡ºç°åœ¨æ¡ä»¶è¯­å¥ä¸­æ—¶ï¼Œå°±é—´æ¥è°ƒç”¨å¸ƒå°”è¿ç®—ï¼Œå¸ƒå°”è¿ç®—ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç”¨æ³•å°±æ˜¯æ£€æµ‹æ–‡ä»¶ç»“æŸã€‚

### æ–‡ä»¶æµ

`fstream`å¤´æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æµå¯¹è±¡ï¼ˆ`ifstreamã€ofstreamã€fstreamã€filebuf`ï¼‰ã€‚ä½†è¦æ³¨æ„çš„æ˜¯`ofstreamã€fstreamã€ifstream`ä¹‹é—´æ²¡æœ‰ç»§æ‰¿çš„å…³ç³»ï¼Œä½¿ç”¨`fstream`ä¹Ÿå¹¶ä¸æ˜¯ä½¿ç”¨äº†`ifstream`ä¸`ofstream`çš„äº¤é›†ã€‚

|   æµå¯¹è±¡   | é»˜è®¤IOæ–¹å¼ |        æ–‡ä»¶ä¸å­˜åœ¨çš„åŠ¨ä½œ        |
| :--------: | :--------: | :----------------------------: |
| `ifstream` |    åªè¯»    |             ä¸åˆ›å»º             |
| `ofstream` |    åªå†™    |              åˆ›å»º              |
| `fstream`  |    è¯»å†™    | åªå†™æ–¹å¼æ‰“å¼€æ‰åˆ›å»ºï¼Œå¦åˆ™ä¸åˆ›å»º |

|     æ“ä½œæ ‡å¿—     |                  æ“ä½œæ–¹å¼                  |
| :--------------: | :----------------------------------------: |
|  `ios::in/out`   |       ä¸ºè¾“å…¥(è¯»)/è¾“å‡º(å†™)è€Œæ‰“å¼€æ–‡ä»¶        |
|  `ios::binary`   |       ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€       |
|    `ios::ate`    |              åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾              |
|    `ios::app`    |           æ‰€æœ‰è¾“å‡ºé™„åŠ åœ¨æ–‡ä»¶æœ«å°¾           |
|   `ios::trunc`   |        å¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™å…ˆåˆ é™¤è¯¥æ–‡ä»¶        |
| `ios::nocreate`  |    ä¸å»ºç«‹æ–‡ä»¶ï¼Œæ‰€ä»¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ‰“å¼€å¤±è´¥    |
| `ios::noreplace` | ä¸è¦†ç›–æ–‡ä»¶ï¼Œæ‰€ä»¥æ‰“å¼€æ–‡ä»¶æ—¶å¦‚æœæ–‡ä»¶å­˜åœ¨å¤±è´¥ |

|    0     |    1     |    2     |    3     |
| :------: | :------: | :------: | :------: |
| æ™®é€šæ–‡ä»¶ | åªè¯»æ–‡ä»¶ | éšè—æ–‡ä»¶ | ç³»ç»Ÿæ–‡ä»¶ |

|        æ“ä½œç¬¦         |           æ ¼å¼           |    åœºæ™¯    |
| :-------------------: | :----------------------: | :--------: |
|     `dec/hex/oct`     | æ ¼å¼åŒ–ä¸ºåã€åå…­ã€å…«è¿›åˆ¶ | è¾“å…¥å’Œè¾“å‡º |
| `setpxecision(int p)` |   è®¾ç½®æµ®ç‚¹æ•°çš„ç²¾åº¦ä½æ•°   |    è¾“å‡º    |

#### æµæŒ‡é’ˆ

+ æ‰€æœ‰è¾“å…¥/è¾“å‡ºæµå¯¹è±¡éƒ½æœ‰è‡³å°‘ä¸€ä¸ªæµæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆåœ¨è¾“å…¥æµå¯¹è±¡ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªå°†è¢«è¯»å–çš„å…ƒç´ ï¼Œåœ¨è¾“å‡ºæµå¯¹è±¡ä¸­æŒ‡å‘å†™å…¥ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚

+ è·å–æµæŒ‡é’ˆï¼š`tellg(void)`æˆ–` tellp(void)`è¿”å›`pos_type` ç±»å‹çš„å€¼`(int)`ä»£è¡¨å½“å‰`get` æµæŒ‡é’ˆçš„ä½ç½®æˆ– `put` æµæŒ‡é’ˆçš„ä½ç½®ã€‚

+ æ”¹å˜æµæŒ‡é’ˆï¼š`seekg()` æˆ–`seekp()`å¯ä»¥ä»¥ç»å¯¹(ä»æ–‡ä»¶å¼€å§‹è®¡ç®—)æˆ–è€…ç›¸å¯¹çš„æ–¹å¼æ”¹å˜æµæŒ‡é’ˆget å’Œputçš„ä½ç½®ã€‚


|  ios::beg  |    ios::cur    | ios::end |
| :--------: | :------------: | :------: |
| æµå¼€å§‹ä½ç½® | æµæŒ‡é’ˆå½“å‰ä½ç½® |  æµæœ«å°¾  |

+ **NOTE:**å¯¹æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æµæŒ‡é’ˆçš„è®¡ç®—æ–¹æ³•æ˜¯ä¸åŒçš„ã€‚ç”±äºæ–‡æœ¬æ¨¡å¼çš„æ–‡ä»¶ä¸­æŸäº›ç‰¹æ®Šå­—ç¬¦å¯èƒ½è¢«ä¿®æ”¹ï¼Œå»ºè®®å¯¹ä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶æ€»æ˜¯ä½¿ç”¨`seekg`å’Œseekp`çš„`ç»å¯¹ä½ç½®ç‰ˆæœ¬ï¼Œè€Œä¸”ä¸è¦å¯¹`tellg` æˆ– `tellp` çš„è¿”å›å€¼è¿›è¡Œä¿®æ”¹ã€‚å¯¹äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥ä»»æ„ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»»ä½•æ„å¤–çš„è¡Œä¸ºäº§ç”Ÿã€‚

#### è¡Œç»“æŸæ ‡å¿—

+ æ¢åˆ°ä¸‹ä¸€è¡Œå¼€å§‹è¿™æ ·ä¸€ä¸ªæ§åˆ¶å‘½ä»¤åœ¨windowså’Œlinuxç³»ç»Ÿä¸‹çš„æ§åˆ¶æ–¹æ³•ä¸åŒã€‚åœ¨windowsä¸‹ä¸º\r\nï¼Œåœ¨linuxä¸º\nã€‚(\rä¸ºå›è½¦ï¼Œ\nä¸ºæ¢è¡Œ)

## ç¼“å†²

+ é‡è¦æœºåˆ¶ï¼šæ¯ä¸ªæ ‡å‡†C++è¾“å…¥è¾“å‡ºæµå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘streambufçš„æŒ‡é’ˆï¼Œbasic_ioså…è®¸å¤šä¸ªæµå¯¹è±¡ç»‘å®šåŒä¸€ä¸ªç¼“å†²åŒºå¯¹è±¡streambufï¼ˆæµå’Œ I/O è®¾å¤‡ä¹‹é—´åŠ å…¥çš„æŠ½è±¡ä¸­é—´å±‚ï¼Œä¸€æ—¦æµå¯¹è±¡ç»‘å®šçš„ç¼“å†²åŒºå¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œæœ€ç»ˆçš„ I/O æ•ˆæœä¹Ÿä¼šéšä¹‹å‘ç”Ÿå˜åŒ–ï¼‰ã€‚

### ç¼“å†²åŒº

+ å¦‚æœæœªæ˜¾ç¤ºç»‘å®šç¼“å†²åŒº(é€šè¿‡setvbuf()å’Œ setbuf())ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä¸ºæ ‡å‡†è¾“å…¥è¾“å‡ºè®¾ç½®ä¸€ä¸ªç¼“å†²åŒº(å¤§å°ç”±å®BUFSIZå®šä¹‰,ä¸ç³»ç»Ÿç›¸å…³,win=512B,linux=1024B)ã€‚
+ setbuf()éƒ½å°†ç¼“å†²åŒºè®¾ç½®çš„å¤§å°ä¸ºBUFSIZï¼›setvbufè®¾ç½®ç¼“å†²åŒºå¤§å°ä»¥åŠç¼“å†²åŒºçš„æ¨¡å¼ï¼ˆè¡Œç¼“å†²ã€å…¨ç¼“å†²ã€æ— ç¼“å†²ï¼‰ã€‚
+ **NOTE**ï¼šä¸Šè¿°ä¸¤ä¸ªå‡½æ•°è®¾ç½®çš„æ˜¯**Cçš„è¾“å…¥è¾“å‡ºç¼“å†²åŒº**ï¼Œå› ä¸ºc++å’Œcçš„ç¼“å†²åŒºé»˜è®¤æ˜¯åŒæ­¥çš„ï¼Œæ‰€æœ‰è¯¥å‡½æ•°ä¼šå¯¹c++æœ‰å½±å“ã€‚
+ ç¼“å†²åˆ·æ–°/åŒæ­¥
  1. æ—¶æœºï¼šç¼“å†²æ»¡ã€**è¡Œç¼“å†²åŒº**é‡å›è½¦ã€å…¶ä»–ç›´æ¥æˆ–é—´æ¥è°ƒç”¨flushçš„å‡½æ•°ã€è°ƒç”¨æ— å‚ç‰ˆæœ¬å‡½æ•°sync()ã€è¿›ç¨‹ç»“æŸ(æµå…³é—­ã€æ–‡ä»¶å…³é—­)
  2. åŠ¨ä½œï¼šè¾“å‡ºç¼“å†²åŒºçš„åˆ·æ–°åŠ¨ä½œä¸€èˆ¬å¯¼è‡´ç¼“å†²åŒºå†…çš„å†…å®¹è¢«æ‰§è¡ŒIOåˆ°å…¶å…³è”çš„æ–‡ä»¶æè¿°ç¬¦ä¸­ï¼Œç„¶åæ¸…ç©ºç¼“å†²åŒºã€‚è€Œå¯¹äºè¾“å…¥ç¼“å†²åŒºï¼Œä¸å¯èƒ½å¼ºåˆ¶å®ç°å°†è¾“å…¥ç¼“å†²åŒºå¼ºåˆ¶æ³¨å…¥åˆ°å…³è”çš„å®ä½“ä¸­ï¼Œå› ä¸ºè¾“å…¥æ˜¯ä¸å¯é¢„æµ‹æŒæ§çš„ï¼Œæ‰€ä»¥å¯¹è¾“å…¥ç¼“å†²åŒºçš„åˆ·æ–°è¡¨ç°ä¸ºæ¸…ç©ºç¼“å†²åŒºé‡Œçš„å½“å‰å†…å®¹ï¼Œç­‰å¾…è¾“å…¥è¿›å…¥è¾“å…¥ç¼“å†²åŒºã€‚
| ç¼“å†²ç±»å‹ |                      ç‰¹ç‚¹                       |    å…¸å‹ä»£è¡¨    |
| :------: | :---------------------------------------------: | :------------: |
|  è¡Œç¼“å†²  | å½“ç¼“å†²åŒºå†…å®¹é‡åˆ°**æ¢è¡Œ**æ—¶ï¼Œå³è¿›è¡Œå®é™…çš„I/Oæ“ä½œ |  è¯»å†™ç£ç›˜æ–‡ä»¶  |
|  å…¨ç¼“å†²  |      å¡«æ»¡æ ‡å‡†I/Oç¼“å†²åŒºæ‰è¿›è¡Œå®é™…çš„I/Oæ“ä½œ       | æ ‡å‡†è¾“å…¥å’Œè¾“å‡º |
|  æ— ç¼“å†²  |                   ç›´æ¥I/Oæ“ä½œ                   |    æ ‡å‡†é”™è¯¯    |

| ç¼“å†²æ“ä½œå‡½æ•° |                      ä½œç”¨                      |
| :----------: | :--------------------------------------------: |
|     endl     |         æ·»åŠ æ¢è¡Œlineã€è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº         |
|     ends     |     æ·»åŠ ç©ºæ ¼spaceã€è¾“å‡ºã€‚**ä¸åˆ·æ–°ç¼“å†²åŒº**      |
|    flush     |                è¾“å‡ºã€åˆ·æ–°ç¼“å†²åŒº                |
|   **sync**   | åˆ·æ–°**è¾“å…¥**ç¼“å†²åŒº(æ¸…é™¤è¾“å…¥ç¼“å†²åŒº)æˆ–è¾“å‡ºç¼“å†²åŒº |
|   unitbuf    |      å¯ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåéƒ½è‡ªåŠ¨åˆ·æ–°      |
|  ununitbuf   |      ç¦ç”¨**è¾“å‡ºæµ**åœ¨ä»»ä½•æ“ä½œåçš„è‡ªåŠ¨åˆ·æ–°      |

### åº”ç”¨

#### IOåŠ é€Ÿ

+ é€šè¿‡è°ƒç”¨æˆå‘˜å‡½æ•°rdbuf()è·å–æŒ‡é’ˆ,ç›´æ¥è®¿é—®åº•å±‚streambufå¯¹è±¡ï¼Œè¿›è¡Œæ•°æ®çš„ç›´æ¥è¯»å†™ï¼Œè·³è¿‡ä¸Šå±‚çš„æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºæ“ä½œï¼Œæé«˜äº†è¯»å†™æ•ˆç‡ã€‚å¯¹äºæ–‡ä»¶æµã€å­—ç¬¦ä¸²æµç±»ï¼Œéƒ½å¯ä»¥ä½¿ç”¨

#### æµåŒæ­¥

+ iostreamå’Œcstdioé»˜è®¤å…±ç”¨ä¸€å¥—æ ‡å‡†è¾“å…¥ã€è¾“å‡ºç¼“å†²åŒºï¼Œå› æ­¤å¯ä»¥åœ¨ç¨‹åºä¸­æ··ç”¨é…å¯¹çš„æµå¯¹ï¼Œå…¶æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚
+ æµåŒæ­¥å¯¼è‡´æ‰€ä»¥cinã€coutæ¯”scanfã€printfé€Ÿåº¦è¦æ…¢(ç»´æŠ¤å…¼å®¹æ€§çš„å¼€é”€)ï¼Œå¯ä»¥ç”¨std::ios_base::sync_with_stdio(false)æ¥å–æ¶ˆè¿™ç§åŒæ­¥ï¼Œå–æ¶ˆåé…å¯¹çš„æµå¯¹çš„è¾“å‡ºé¡ºåºå¯èƒ½å’Œæ··ç”¨çš„é€»è¾‘é¡ºåºä¸åŒã€‚

#### æµå…³è”

+ C++ æ ‡å‡†åº“ä¸ºIOæµæä¾›äº†ä¸€ä¸ªæˆå‘˜å‡½æ•°tieå¯ä»¥æŠŠ ä¸€ä¸ªistream å¯¹è±¡å…³è”åˆ°ä¸€ä¸ªostreamï¼Œä¹Ÿå¯ä»¥æŠŠ ä¸€ä¸ªostream å…³è”åˆ°å¦ä¸€ä¸ª ostreamã€‚

1. æ ‡å‡†åº“é»˜è®¤æŠŠcinå’Œcoutå…³è”åœ¨ä¸€èµ·ï¼Œcin ä¼šåˆ·æ–°coutçš„ç¼“å†²åŒºï¼Œå¯ä»¥ç”¨å‡½æ•°cin.tie(nullptr)æ¥è§£é™¤å…³è”ã€‚
2. å®ç°æµåº•å±‚çš„streambufåœ¨ä¸åŒæµä¹‹é—´çš„å…³è”ç»‘å®š

 ```cpp
std::ifstream fin{"oj.test.txt"};
auto cin_buf = std::cin.rdbuf(fin.rdbuf()); //è¿”å›å…³è”å‰çš„ç¼“å†²åŒºï¼Œç»‘å®šfinçš„ç¼“å†²åˆ°cin
std::cin.tie(nullptr);     					//è§£é™¤cinå’Œcoutçš„ç¼“å†²åŒºç»‘å®š
std::string temp;
std::getline(std::cin, temp);
 ```

### å½±å“

#### \nä¸ç¼“å†²åˆ·æ–°

+ æ— ç¼“å†²çš„è¾“å‡ºæµ(å¦‚cerr)ï¼šendlä¸\nå®Œå…¨ä¸€è‡´ã€‚
+ å¸¦ç¼“å†²çš„è¾“å‡ºæµ(clogç­‰)ï¼š
  + endlé™¤äº†è¾“å‡ºæ¢è¡Œä¹‹å¤–ï¼Œè¿˜åˆ·æ–°è¾“å‡ºæµæˆ–é”™è¯¯æµç¼“å†²åŒºã€‚
  + \nå¯¼è‡´çš„è¡Œä¸ºåœ¨æ ‡å‡†è¾“å‡ºå’Œéæ ‡å‡†è¾“å‡ºè¡¨ç°å¹¶ä¸ä¸€è‡´(åœ¨manjaro linux5.10 gcc10.2ä¸‹éªŒè¯)
    1. éæ ‡å‡†è¾“å‡ºï¼Œ\nåªä¼šè¾“å‡ºå¸¦æ¢è¡Œçš„å†…å®¹ï¼Œå¹¶ä¸ä¼šå»åˆ·æ–°æµã€‚
    2. **å¤šæ•°å®ç°ä¸­**æ ‡å‡†è¾“å‡ºæ˜¯è¡Œç¼“å†²çš„ï¼Œé™¤éæ‰§è¡Œ`std::ios::sync_with_stdio(false)`å¦åˆ™'\n'ä¼šå¯¼è‡´ç¼“å†²åˆ·æ–°ã€‚[æ¥æº](https://zh.cppreference.com/w/cpp/io/manip/endl)

#### è¯¡å¼‚çš„std::cin

+ æ ¹æœ¬åŸå› :cinèƒŒåæ˜¯ä¸€ä¸ªè¡Œç¼“å†²ï¼Œä»é‡Œé¢å–èµ°æ•°æ®ä¹‹åå¹¶æ²¡æœ‰å–èµ°å…¨éƒ¨æ•°æ®(ç•™ä¸‹äº†æ ‡å¿—ã€æ¢è¡Œç¬¦ç­‰)è€Œä¸”ä¹Ÿæ²¡æœ‰åˆ·æ–°ç¼“å†²ï¼Œé€ æˆç¼“å†²ä¸å¹²å‡€è€Œå½±å“ä¸‹ä¸€æ¬¡è¯»å–ç¼“å†²ã€‚
+ æ ‡å‡†è¾“å…¥æµçš„â€œæ–‡ä»¶æœ«å°¾â€ï¼šwinä¸‹ctrl+zè¡¨ç¤ºè¾“å…¥ç»“æŸï¼Œlinuxä¸‹ctrl+dè¡¨ç¤ºè¾“å…¥ç»“æŸ

|       æ–¹æ³•       |                ä½œç”¨                 |
| :--------------: | :---------------------------------: |
|   cin.clear()    |     æ¸…ç©ºæµä¸­çš„æ ‡å¿—(EOFã€é”™è¯¯ç­‰)     |
| cin.ingore(a,ch) | å¿½ç•¥æµä¸­çš„å­—ç¬¦ç¬¬ä¸€ä¸ªchæˆ–aä¸ªä»»æ„å­—ç¬¦ |
|    cin.sync()    |         æ¸…é™¤ç¼“å­˜åŒºçš„æ•°æ®æµ          |

## æµç›¸å…³è¿­ä»£å™¨

+ å­˜åœ¨æµè¿­ä»£å™¨å’Œæ”¯æŒæµè¿­ä»£å™¨çš„æµç¼“å†²è¿­ä»£å™¨ã€‚
+ é€šè¿‡æµç¼“å†²è¿­ä»£å™¨ç”¨æˆ·å¯ä»¥è·¨è¿‡iostreamï¼Œç›´æ¥è·Ÿæµç¼“å†²åŒºæ‰“äº¤é“ã€‚
+ æµç¼“å†²åŒºè¿­ä»£å™¨ä»…ä¼šå°†å…ƒç´ **ä»¥å­—ç¬¦çš„å½¢å¼ï¼ˆ`charã€wchar_tã€char16_tã€char32_t`ï¼‰**è¯»æˆ–è€…å†™åˆ°æµç¼“å†²åŒºä¸­ï¼Œç”±äºä¸ä¼šæ¶‰åŠæ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œè¯»å†™æ•°æ®çš„é€Ÿåº¦æ¯”æµè¿­ä»£å™¨è¦å¿«ã€‚

### è¾“å…¥æµè¿­ä»£å™¨istream_iterator

+ `istream_iterator<T,CharT=char>(istream)`åœ¨**æ–‡æœ¬æ¨¡å¼(charã€wcharç­‰ï¼Œä¸æ”¯æŒäºŒè¿›åˆ¶)**ä¸‹ä»istreamæµä¸­æå–æ•°æ®ã€‚
+ è¦æ±‚Tç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å®ç°äº†å°†è¾“å‡ºæµå†™å…¥Tä¸­çš„operator >>()æ–¹æ³•ã€‚
+ **NOTE**:
    1. é»˜è®¤è·³è¿‡ç©ºç™½å­—ç¬¦(é™¤éæ˜ç¡®ç¦æ­¢)
    2. å½“å¤šä¸ªè¾“å…¥æµè¿­ä»£å™¨æŒ‡å‘åŒä¸€ä¸ªè¾“å…¥æµæ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªè¿­ä»£å™¨ä½ç½®çš„æ”¹å˜ä¹Ÿä¼šä½¿å¦ä¸€ä¸ªè¿­ä»£å™¨çš„ä½ç½®æ”¹å˜(ä»–ä»¬ç›¸å½“äºå…±äº«äº†ä¸€ä¸ªåº•å±‚ç»“æ„)

### è¾“å‡ºæµè¿­ä»£å™¨ostream_iterator

+ `ostream_iterator<T, CharT=char>(ostream <,const CharT* delim>)`:ä»¥`CharT`çš„å½¢å¼`(charã€wchar)`å°†è‹¥å¹²ä¸ªTå†™å…¥åˆ°è¾“å‡ºæµ`ostream`ï¼Œæ¯å†™ä¸€ä¸ªTå¯¹è±¡è¿½åŠ ä¸€ä¸ª`delim`ã€‚
+ è¦æ±‚Tç±»å‹æ˜¯å®ç°äº†å°†Tå¯¹è±¡å†™å…¥æµä¸­çš„`operator <<()`æ–¹æ³•æ•°æ®ç»“æ„æˆ–è€…æ™®é€šæ•°æ®ç±»å‹ã€‚
+ å…¶`operator *()ã€++()ã€++(int)`æ–¹æ³•å§‹ç»ˆè¿”å›å½“å‰æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸åŒ…å«å…¶ä»–ä»»ä½•æ“ä½œã€‚è¿™äº›å‡½æ•°çš„å­˜åœ¨åªæ˜¯ä¸ºäº†æ»¡è¶³è¿­ä»£å™¨çš„è§„èŒƒã€‚
+ **NOTE:**
    1. è¾“å‡ºæµè¿­ä»£å™¨çš„è¾“å‡ºæ›´æ–°æœ¬è´¨ä¸Šæœ€ç»ˆéƒ½æ˜¯é€šè¿‡operator =()å‡½æ•°å®ç°ã€‚

### è¾“å‡ºæµç¼“å†²è¿­ä»£å™¨ostreambuf_iterator

### è¾“å…¥æµç¼“å†²è¿­ä»£å™¨istreambuf_iterator

# ç±»å‹æ¨å¯¼

## `auto`

+ èƒŒæ™¯ï¼š`auto`ä½œä¸ºå˜é‡å­˜å‚¨å…³é”®å­—é•¿æœŸä»¥æ¥å¹¶æ²¡æœ‰å‘æŒ¥å¤§çš„ä½œç”¨ï¼ŒC++11å†³å®šç”¨`auto`ä¾æ®åˆå§‹å€¼å®ç°ç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼
+ **NOTEï¼š**
  1. `auto`ä»…ä»…æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨ç¼–è¯‘æœŸé—´ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼ŒC++ä¸­çš„å˜é‡ä¾ç„¶æœ‰æ˜ç¡®çš„ç±»å‹ã€‚
  2. `auto`è¡¨è¾¾å¼æ¨å¯¼å‡ºçš„ç±»å‹å’Œ`auto`è¢«æ›¿æ¢æ—¶çš„ç±»å‹ä¸åŒï¼Œè¢«æ›¿æ¢æˆçš„å­—ç¬¦åªæ˜¯æœ€ç»ˆç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚

### ç”¨æ³•

+ ç”±äº`auto`ç”¨æ¥åšç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥`auto`ç±»å‹çš„å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ã€‚

1. å½“ä¸€ä¸ª`auto`ä¿®é¥°å¤šä¸ªå˜é‡æ—¶ï¼Œå˜é‡æ¨å¯¼å‡ºçš„ç±»å‹ä¸èƒ½æœ‰å†²çªã€‚
2. `auto`ä¸*å’Œ&æ··ç”¨ï¼šæ­¤æ—¶`auto`è¢«æ¨å¯¼ä¸ºä¸å¸¦æŒ‡é’ˆæˆ–å¼•ç”¨çš„ç±»å‹ï¼Œä½†æ˜¯`auto`å£°æ˜çš„å˜é‡çš„ç±»å‹ä¸º`auto+cv`é™å®šç¬¦ã€‚
3. å½“`auto`çš„=å³è¾¹çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹æ—¶ï¼Œ`auto` ä¼šæŠŠå¼•ç”¨æŠ›å¼ƒï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚
4. `auto`ä¸`const`çš„ç»“åˆï¼šå½“å·¦è¾¹çš„ç±»å‹å£°æ˜å«æœ‰å¼•ç”¨æˆ–è€…æŒ‡é’ˆç¬¦å·æ—¶ï¼Œæ¨å¯¼å‡ºçš„æœ€ç»ˆç±»å‹å«æœ‰`const`å±æ€§ï¼Œå¦åˆ™`const`è¢«å»é™¤ã€‚
5. å°å¿ƒç”¨äºåªæ”¯æŒç§»åŠ¨è¯­ä¹‰çš„ç±»å‹ï¼ˆå› ä¸ºæŸäº›æ¨å¯¼å‡ºçš„ç±»å‹å¯èƒ½è§¦å‘å¤åˆ¶æ“ä½œï¼‰

```c++
int a = 1, *pa = &a;
auto c = a, *d = pa, &e = a;//åˆæ³•ï¼šé€‚ç”¨äºç¬¬äºŒæ¡
auto f = e;//is_reference<decltype(f)>::value = falseï¼šç¬¦åˆç¬¬ä¸‰æ¡
///////////////////éœ€è¦å®Œå–„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
```

### é™åˆ¶

1. ä¸èƒ½åšå‡½æ•°å‚æ•°ï¼ˆC++11ä¸å…è®¸ï¼›C++14å·²ç»å…è®¸ï¼Œä½†æ˜¯åœ¨è®¾ç½®é»˜è®¤å‚æ•°å¯èƒ½æ— æ³•åŒ¹é…ï¼‰
2. ä¸èƒ½ä½œç”¨äºç±»çš„éé™æ€æˆå‘˜å˜é‡ï¼ˆç±»çš„é™æ€æˆå‘˜å˜é‡ä¼¼ä¹ä¹Ÿä¸è¡Œï¼Œæ²¡å®éªŒæˆåŠŸï¼‰ã€‚
3. **ä¸èƒ½ç”¨äºå®šä¹‰æ•°ç»„**ï¼Œå³ä¸èƒ½æ˜¯auto var[]çš„å½¢å¼ã€‚
4. ä¸èƒ½ä½œç”¨äºæ¨¡æ¿å‚æ•°ï¼Œä½†åœ¨æ³›å‹ç¼–ç¨‹ä¸­å¯ä»¥å¾—åˆ°å¤§é‡åº”ç”¨ã€‚

## `decltype`

+ èƒŒæ™¯ï¼šC++11æ–°å¢ï¼Œæ ¹æ®è¡¨è¾¾å¼ï¼ˆå¿…é¡»æœ‰ç±»å‹ï¼‰å‚æ•°å®Œæˆç¼–è¯‘æœŸçš„ç±»å‹æ¨å¯¼ã€‚

### `decltype(exp)`æ¨å¯¼è§„åˆ™

1. å¦‚æœ`exp`æ˜¯ä¸€ä¸ªä¸è¢«æ‹¬å·`( )`åŒ…å›´çš„è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç±»æˆå‘˜è®¿é—®è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª**å•ç‹¬çš„**å˜é‡ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±å’Œ`exp`ä¸€è‡´ã€‚
2. å¦‚æœ`exp`æ˜¯å‡½æ•°è°ƒç”¨ï¼ˆå½¢å¼è¦æ»¡è¶³å‡½æ•°è°ƒç”¨ï¼Œä½†æ˜¯ä¸ä¼šè¢«æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±å’Œå‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¸€è‡´ã€‚
3. å¦‚æœ`exp`æ˜¯ä¸€ä¸ªå·¦å€¼è¡¨è¾¾å¼ï¼ˆæ³¨æ„ä¸1ä¸­çš„å•ç‹¬çš„å˜é‡åŒºåˆ†ï¼‰ï¼Œæˆ–è€…è¢«æ‹¬å·( )åŒ…å›´ï¼Œé‚£ä¹ˆ`decltype(exp)`çš„ç±»å‹å°±æ˜¯expçš„å¼•ç”¨ã€‚

## autoä¸decltypeçš„ä¸åŒ

### å¯¹cvé™å®šç¬¦çš„å¤„ç†

+ `decltype`ï¼šä¿ç•™`cv`é™å®šç¬¦
+ `auto`ï¼šå¦‚æœè¡¨è¾¾å¼çš„ç±»å‹æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œä¿ç•™cvé™å®šç¬¦ï¼Œå¦åˆ™ä¸¢å¼ƒé™å®šç¬¦ã€‚

### å¯¹å¼•ç”¨çš„å¤„ç†

1. `decltype` ä¼šä¿ç•™å¼•ç”¨ç±»å‹.
2. `auto`ä¼šæŠ›å¼ƒå¼•ç”¨ç±»å‹ï¼Œç›´æ¥æ¨å¯¼å‡ºå®ƒçš„åŸå§‹ç±»å‹ã€‚

### æ€»ç»“

+ autoä¹¦å†™ç®€å•ã€æ¨å¯¼å¤æ‚(æœ‰æ—¶ä¼šæ”¹å˜åŸå§‹ç±»å‹)ã€‚`decltype`ä¹¦å†™å¤æ‚ã€æ¨å¯¼ç®€å•

## traits(ç±»å‹èƒå–)

+ æå‡ºèƒŒæ™¯ï¼š

 1. `template`å‚æ•°æ¨å¯¼ï¼šæ— æ³•ç”¨äºå‡½æ•°è¿”å›ç±»å‹
 2. å†…åµŒå£°æ˜å‹åˆ«ï¼šæ— æ³•å¤„ç†åŸç”ŸæŒ‡é’ˆ

+ æ€æƒ³ï¼šåŠ å…¥ä¸­é—´å±‚ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£å¯ä»¥è·å–å¯¹è±¡/æ•°æ®çš„ç±»å‹ï¼Œå…¶ä»–çš„å®¹å™¨å®ç°è¿™ä¸€æ¥å£

### è¿­ä»£å™¨ç›¸å…³çš„ç±»å‹èƒå–

1. `value_type`ï¼š ä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„ç±»å‹ã€‚
2. `difference_type`ï¼šä»£è¡¨ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»
3. `reference_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€æŒ‡å¯¹è±¡çš„å¼•ç”¨ç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯`operator*()`çš„è¿”å›ç±»å‹
4. `pointer_type`ï¼šä»£è¡¨è¿­ä»£å™¨æ‰€è‡´å¯¹è±¡çš„æŒ‡é’ˆç±»å‹ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯`operator->()`çš„è¿”å›ç±»å‹
5. `iterator_category`ï¼šä»£è¡¨1ä¸­æå‡ºçš„äº”ç§è¿­ä»£å™¨çš„ç±»å‹æ ‡è¯†

### åœ¨è¿­ä»£å™¨ä¸­çš„åº”ç”¨å’Œå®ç°

1. åŸç”ŸæŒ‡é’ˆï¼šåˆ©ç”¨æ¨¡æ¿ç±»çš„åç‰¹åŒ–ï¼Œä¸ºåŸç”Ÿçš„æŒ‡é’ˆå’Œ`const`æŒ‡é’ˆæä¾›`iterator_traits`ã€‚
2. ä¸€èˆ¬è¿­ä»£å™¨ï¼šåœ¨æ•°æ®ç»“æ„ä¸­çš„å®ç°é‡Œï¼Œç»Ÿä¸€æä¾›ä¸€ä¸ªæ¥å£æ¥æ ‡æ˜è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä¾›å¤–éƒ¨è®¿é—®ã€‚

## [æ¨¡æ¿å‡½æ•°å‚æ•°æ¨å¯¼è§„åˆ™](# æ¨¡æ¿å‚æ•°ç±»å‹æ¨å¯¼)

## [`std::common_type`](# `std::common_type`)

# å¯è°ƒç”¨å¯¹è±¡

C++ä¸­çš„å¯è°ƒç”¨å¯¹è±¡å¯ä»¥æ˜¯ä»¥ä¸‹ç±»å‹ï¼šå‡½æ•°æŒ‡é’ˆã€å…·æœ‰`operator()`æˆå‘˜å‡½æ•°çš„ç±»çš„å¯¹è±¡ï¼ˆä»¿å‡½æ•°ã€`lambda`è¡¨è¾¾å¼ï¼‰ã€å¯è¢«è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆçš„ç±»å¯¹è±¡ã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€‚

## lambdaè¡¨è¾¾å¼/é—­åŒ…

### é—­åŒ…

é—­åŒ…ï¼ˆClosureï¼‰ï¼Œåˆç§°è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰æˆ–å‡½æ•°é—­åŒ…ï¼ˆfunction closuresï¼‰ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚ç®€å•æ¥è¯´ï¼š**é—­åŒ…å¯ä»¥è®°å¿†ä½åˆ›å»ºå®ƒæ—¶å€™çš„é‚£äº›å˜é‡**ã€‚

```c++
void getMinMax(vector<int>& number, function<void ()>& printer) {
	int min = *min_element(number.begin(), number.end());
	int max = *max_element(number.begin(), number.end());
	printer = [=] () { cout << "min:" << min << "max:" << max << endl;};
}

function<void()> printer;
getMinMax(numbers, printer);
///......
printer();///è°ƒç”¨é—­åŒ…
```

### å¤§è‡´åŸç†

  åœ¨C++ä¸­ï¼Œlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°å¯¹è±¡çš„è¯­æ³•ç³–ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ª`lambda`è¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé‡è½½äº†`operatr ()`çš„åŒ¿åç±»/é—­åŒ…ç±»å‹ï¼ˆclosure typeï¼‰ã€‚åœ¨è¿è¡Œæ—¶ï¼Œlambdaè¡¨è¾¾å¼å°±ä¼šè¿”å›ä¸€ä¸ªåŒ¿åçš„é—­åŒ…å®ä¾‹ã€‚

### å½¢å¼è¯´æ˜

`[capture] <(parameters) mutable noexcpt/throw() attribute -> return_type> { body }`ï¼Œå°–æ‹¬å·å†…å¯é€‰ï¼Œä½†`param`å’Œ`mutable`ä»¥åŠå¼‚å¸¸ç®¡ç†ä¸­çš„ä»»æ„å¤šä¸ªå¿…é¡»åŒæ—¶å‡ºç°ã€‚

#### æ•è·å˜é‡åˆ—è¡¨`capture`

1. [<[ ï¼Œ=ï¼Œ&][var]>]ï¼š<>å†…å‰åŠéƒ¨åˆ†çš„ä¸‰ä¸ªç¬¦å·å¯ä»¥ä¸`var`éšæ„ç»“åˆ/ä¸ç»“åˆç”¨æ¥è¡¨ç¤ºæ•è·å˜é‡çš„æ–¹å¼ã€‚ä¸ºç©ºåˆ™ä¸æ•è·ä»»ä½•å˜é‡ï¼Œ=è¡¨ç¤ºå€¼æ•è·ï¼Œ&ä¸ºå¼•ç”¨æ•è·ï¼Œä¸varç»“åˆè¡¨ç¤ºå¯¹è¯¥å˜é‡ä½¿ç”¨ç»“åˆçš„æ•è·æ–¹å¼ï¼Œä¸ç»“åˆè¡¨ç¤ºæ•è·åœ¨è¡¨è¾¾å¼å†…éƒ¨è¢«ç”¨åˆ°çš„å…¨éƒ¨å˜é‡ï¼Œå•ç‹¬varè¡¨ç¤ºå€¼æ•è·ã€‚é€šç”¨çš„æ•è·åœ¨æ•è·åˆ—è¡¨å‰éƒ¨ï¼Œç‰¹æ®Šæ•è·åœ¨åï¼Œä»¥é€—å·åˆ†å‰²ã€‚
2. å˜é‡æ¥æºï¼šä½¿ç”¨é‚£äº›**åˆ°å®šä¹‰`Lambda`ä¸ºæ­¢æ—¶**`Lambda`æ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡(åŒ…æ‹¬`Lambda`æ‰€åœ¨ç±»çš„`this`)ã€‚éå±€éƒ¨å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å…¨å±€å˜é‡ç­‰å¯ä»¥ä¸ç»æ•è·ï¼Œç›´æ¥ä½¿ç”¨ï¼›
3. æ•è·æ—¶æœºï¼š`lambda`è¢«å£°æ˜æ—¶è€Œéè¿è¡Œæ—¶ï¼Œå¯¹äºå¼•ç”¨åˆ™æ˜¯è¿è¡Œæ—¶åœ¨è®¿é—®å¤–éƒ¨ã€‚
4. æ•è·thisï¼šåªæœ‰åŒ…å«ä¸”æœ€é è¿‘lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä¸æ˜¯é™æ€æˆå‘˜å‡½æ•°æ—¶æ‰èƒ½è¢«æ•è·thisã€‚åœ¨C++17ä¹‹å‰åªèƒ½é€šè¿‡å¼•[this]ä»¥å¼•ç”¨æ•è·å½“å‰å¯¹è±¡ï¼ˆå…¶å®æ˜¯å¤åˆ¶æŒ‡é’ˆï¼‰ï¼Œc++17ä»¥åå¯ä»¥é€šè¿‡[*this]è¿›è¡Œå€¼æ•è·ã€‚æ•è·ä¹‹ålambda è¡¨è¾¾å¼æ‹¥æœ‰å’Œå½“å‰ç±»æˆå‘˜å‡½æ•°åŒæ ·çš„è®¿é—®æƒé™ã€æ§åˆ¶æƒé™å’Œè®¿é—®æ–¹å¼ã€‚

##### å…¶ä»–è¯´æ˜

1. noteï¼šå¦‚æœä¸€ä¸ªé—­åŒ…å«æœ‰å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œåœ¨è¶…å‡ºåˆ›å»ºå®ƒçš„ä½œç”¨åŸŸä¹‹å¤–çš„åœ°æ–¹è¢«ä½¿ç”¨çš„è¯ï¼Œè¿™ç§è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„!
2. æ•æ‰åˆ—è¡¨ä¸å…è®¸å˜é‡é‡å¤ä¼ é€’

#### `parameters`

1. ä¸æ”¯æŒé»˜è®¤å‚æ•°ã€ä¸æ”¯æŒå¯å˜å‚æ•°ã€ä¸æ”¯æŒåŒ¿åå‚æ•°ã€‚

#### `multable`

1. èƒŒæ™¯ï¼šå¯¹äºå€¼æ•æ‰æ–¹å¼ï¼Œç±»ä¼šç›¸åº”æ·»åŠ å¯¹åº”ç±»å‹çš„éé™æ€æ•°æ®æˆå‘˜ï¼Œåœ¨è¿è¡Œæ—¶ä¼šç”¨å¤åˆ¶çš„å€¼åˆå§‹åŒ–è¿™äº›æˆå‘˜å˜é‡ï¼Œä»å¯¹äºå¼•ç”¨æ•è·çš„å˜é‡ï¼Œæ ‡å‡†ä¸­æ²¡æœ‰è§„å®šå…¶åœ¨ç±»ä¸­çš„è¡¨ç¤ºæ–¹æ³•ï¼ˆclangçš„å®ç°å¤§æ¦‚æ˜¯åœ¨é—­åŒ…ä¸­æ”¾äº†ä¸ªæŒ‡é’ˆï¼‰ã€‚
2. é‡è½½çš„`operator()`é»˜è®¤çš„å‡½æ•°ç­¾åæ˜¯`const operator()`é™ï¼Œå› æ­¤æ— æ³•ä¿®æ”¹å€¼ä¼ é€’åæ„å»ºçš„æˆå‘˜ã€‚è€Œå¯¹äºå¼•ç”¨çš„ä¼ é€’æ–¹å¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜å¼•ç”¨æœ¬èº«ï¼Œè€Œåªä¼šæ”¹å˜å¼•ç”¨çš„å€¼ï¼Œå› æ­¤å°±å¯ä»¥æ”¹å˜ã€‚
3. ä½œç”¨ï¼šmutableå…³é”®å­—å¯ä»¥ä½¿é‡è½½çš„operator()å‡½æ•°ä¸¢å¼ƒå‡½æ•°å£°æ˜æœ«å°¾çš„consté™å®šç¬¦ï¼Œä»è€Œä¿®æ”¹ä¼ é€’è¿›æ¥çš„æ‹·è´ã€‚

#### `noexcept/throw()`

`noexcept`è¡¨ç¤ºä¸æŠ›å‡ºé—äº§ï¼Œthrowè¡¨ç¤ºåªæŠ›å‡ºæŒ‡å®šç±»å‹çš„å¼‚å¸¸ã€‚

#### `attribute`

  å¯¹äºattributeçš„æè¿°å¯ä»¥å‚è§[è¿™é‡Œ](http://en.cppreference.com/w/cpp/language/attributes)

#### `return_type`

å½“è¿”å›å€¼ä¸º `void`ï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„`return`ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚

### å…¶å®ƒ

1. lambdaç¦ç”¨äº†èµ‹å€¼æ“ä½œç¬¦ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°(å¯ä»¥ç”¨å·²æœ‰çš„lambdaè¡¨è¾¾å¼åˆå§‹åŒ–æ–°çš„lambdaè¡¨è¾¾å¼)ã€‚
2. lambdaå¯ä»¥èµ‹å€¼ç»™å…·æœ‰ç›¸åŒå½¢å¼çš„å‡½æ•°æŒ‡é’ˆ
3. å¦‚æœlambdaçš„ç”Ÿå­˜æœŸé•¿äºæ•è·çš„å¯¹è±¡ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ‚¬ç©ºå¼•ç”¨çš„é—®é¢˜ã€‚
4. åˆ©ç”¨lambdaçš„ç«‹å³è°ƒç”¨å®ç°çš„[magic](httpsï¼š//lesleylai.info/zh/c++-lambda/)ï¼Œæ¨èè¿™ä½[åšä¸»](httpsï¼š//lesleylai.info/zh)
5. æ²¡æœ‰æ•è·å˜é‡çš„lambdaè¡¨è¾¾å¼å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆï¼Œè€Œæ•è·å˜é‡çš„lambdaè¡¨è¾¾å¼åˆ™ä¸èƒ½è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆã€‚

#### [CPP14 lambdaè¡¨è¾¾å¼å¢å¼º](#lambdaè¡¨è¾¾å¼)

## ä»¿å‡½æ•°

## `std::function`ä¸`std::bind`

C++ä¸­**å¯è°ƒç”¨å¯¹è±¡**çš„è™½ç„¶éƒ½æœ‰ä¸€ä¸ªæ¯”è¾ƒç»Ÿä¸€çš„æ“ä½œå½¢å¼ï¼Œä½†æ˜¯å®šä¹‰æ–¹æ³•äº”èŠ±å…«é—¨ï¼Œè¿™æ ·å°±å¯¼è‡´ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼ä¿å­˜å¯è°ƒç”¨å¯¹è±¡æˆ–è€…ä¼ é€’å¯è°ƒç”¨å¯¹è±¡æ—¶ï¼Œä¼šååˆ†ç¹çã€‚C++11ä¸­æä¾›äº†`std::function`å’Œ`std::bind`ç»Ÿä¸€äº†å¯è°ƒç”¨å¯¹è±¡çš„å„ç§æ“ä½œã€‚

### `std::function`

æ¨¡æ¿`std::function<å‡½æ•°ç±»å‹>`æ˜¯ä¸€ä¸ª**å¯è°ƒç”¨å¯¹è±¡åŒ…è£…å™¨**ï¼Œå¯ä»¥å®¹çº³**é™¤äº†ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆ**ä¹‹å¤–çš„æ‰€æœ‰å¯è°ƒç”¨å¯¹è±¡ï¼Œç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å‡½æ•°ã€å‡½æ•°å¯¹è±¡ã€å‡½æ•°æŒ‡é’ˆï¼Œå¹¶å…è®¸ä¿å­˜å’Œå»¶è¿Ÿå®ƒä»¬çš„æ‰§è¡Œï¼ˆé€‚åˆå›è°ƒå‡½æ•°ï¼‰ã€‚

```c++
int add(int a, int b){return a+b;}
auto mod = [](int a, int b){ return a % b;}
struct divide{
    int operator()(int denominator, int divisor){
        return denominator/divisor;
    }
};

vector<std::function<int(int ,int)>> funcs{add, mod, divide()};
```

### `std::bind`

`std::bind`å‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ª**é€šç”¨çš„å‡½æ•°é€‚é…å™¨**ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å’Œä¸€äº›å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ï¼ˆå‚æ•°ä¸ªæ•°å’Œé¡ºåºï¼ˆé€šè¿‡å ä½ç¬¦å®ç°ï¼‰éƒ½å¯æ”¹å˜ï¼‰å¯è°ƒç”¨å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡çš„`operator()`å®ç°å®é™…çš„å‡½æ•°è°ƒç”¨ï¼‰æ¥é€‚åº”åŸå¯¹è±¡çš„å‚æ•°åˆ—è¡¨ã€‚å³å¯ä»¥æ”¹å˜å‡½æ•°çš„å‡½æ•°ç­¾åè€Œä¸å½±å“å…¶ä½œç”¨ã€‚

```c++
auto newCallable = std::bind(callable, arg_list);
///newCallableæ˜¯ä¸€ä¸ªæœªæŒ‡å®šç±»å‹Tçš„å‡½æ•°å¯¹è±¡ï¼Œè¿™ä¸ªç±»å‹Tæ»¡è¶³ä»¥ä¸‹æ¡ä»¶:
std::is_bind_expression<T>::value == true;
```

#### å‚æ•°ç»‘å®š

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`bind`çš„**å‚æ•°é‡‡ç”¨å€¼æ‹·è´**çš„æ–¹å¼è¿›å…¥å¯è°ƒç”¨å¯¹è±¡ï¼Œè‹¥å¸Œæœ›ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼ˆæ•°æ®ä¸å…è®¸æ‹·è´ç­‰æƒ…å†µï¼‰ï¼Œåˆ™éœ€å€ŸåŠ©`std::ref()ã€std::cfref()`ä¼ é€’å‚æ•°ã€‚å¯¹äºå½“å‰ä¸èƒ½ç¡®å®šä¸‹æ¥çš„å‚æ•°ï¼Œæ ‡å‡†åº“æ”¯æŒå ä½ç¬¦å®ç°å‚æ•°çš„è°ƒç”¨æ—¶ä¼ é€’ï¼ˆå ä½ç¬¦`_1ã€_2ã€...`ç­‰ä½äºå¤´æ–‡ä»¶`functional`çš„`std::placeholders`å‘½åç©ºé—´ä¸‹ï¼‰ã€‚

```c++
double my_divide (double x, double y) {return x/y;}
auto fn_half = std::bind (my_divide,_1,2); ///æ™®é€šå‡½æ•°åšå®å‚æ—¶ï¼Œä¼šéšå¼è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ

struct Foo {void print_sum(int n1, int n2){}};
auto f = std::bind(&Foo::print_sum, &foo, 95, std::placeholders::_1);
///bindç»‘å®šç±»æˆå‘˜å‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå¯¹è±¡çš„æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆï¼ˆç¼–è¯‘å™¨ä¸ä¼šå°†å¯¹è±¡çš„æˆå‘˜å‡½æ•°éšå¼è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¯¹è±¡çš„åœ°å€ã€‚
```

```c++
///è°ƒç”¨ç±»æˆå‘˜å‡½æ•°
struct Foo {void f() { }};
void apply(Foo* foo1, void (Foo::*fun)()) {
    (foo1->*fun)();///funä¸ºç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆï¼Œæ‰€ä»¥è°ƒç”¨æ˜¯è¦é€šè¿‡è§£å¼•ç”¨çš„æ–¹å¼è·å–æˆå‘˜å‡½æ•°*fun
}
Foo foo1{1};
apply(&foo1, &Foo::f);
```

# æ¨¡æ¿

æ¨èä½¿ç”¨https://cppinsights.io/ï¼Œä»–ä¼šå°†æ¨¡æ¿çš„å®ä¾‹åŒ–ç»“æœç¿»è¯‘å‡ºæ¥ä¾›éªŒè¯æœ¬èŠ‚ã€‚

## [æ¨¡æ¿å‡½æ•°](https://www.cnblogs.com/zhangyachen/p/13919732.html)

### æ¨¡æ¿å‚æ•°

#### é»˜è®¤æ¨¡æ¿å‚æ•°

æ¨¡æ¿å‡½æ•°æ”¯æŒ**é»˜è®¤å‚æ•°å†™åœ¨æ¨¡æ¿å‚æ•°çš„ä»»æ„ä½ç½®**ï¼ˆä¸åŒäºæ™®é€šå‡½æ•°çš„é»˜è®¤å‚æ•°å¿…é¡»å†™åœ¨æœ€åé¢ï¼‰ï¼Œå½“è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å®šçš„æ¨¡æ¿å‚æ•°ä¸è¶³ä»¥ä½œç”¨åˆ°é»˜è®¤æ¨¡æ¿å‚æ•°æ—¶ï¼Œå…ˆç”±æ¨¡æ¿å‚æ•°æ¨å¯¼å°è¯•ç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ï¼Œå½“ä»¥ä¸Šä¸¤æ­¥éƒ½ä¸èƒ½ç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹æ—¶é»˜è®¤æ¨¡æ¿å‚æ•°æ‰èµ·ä½œç”¨ã€‚é»˜è®¤æ¨¡æ¿å‚æ•°ä¸€èˆ¬å¯ä»¥ç”¨äºæ¨¡æ¿å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚

```c++
template <typename RT , typename T1 = int, typename T2> RT _max(T1 a, T2 b) {
    cout << typeid(RT).name() << '=' << typeid(T1).name() << '-' << typeid(T2).name() << "\t";
	return b < a ? a : b;
}

cout << _max<double,int,char>(7.2, 4) << endl;///d=i-c   7
cout << _max<double,double>(7.2, 4) << endl;///d=d-i   7.2
cout << _max<double>(7.2, 4.2) << endl;///d=d-d   7.2

template <typename T1, typename T2> typename std::common_type<T1, T2>::type max(T1 a, T2 b) {
  return b < a ? a : b;
}///ä½¿ç”¨common_type
```

#### [å¯å˜æ¨¡æ¿å‚æ•°](# å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°)

#### æŒ‡æ˜æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°

##### è°ƒç”¨å‚æ•°

æ¨¡æ¿å‡½æ•°çš„ç±»å‹å‚æ•°Tå¯ä»¥é€šè¿‡åœ¨è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å®šï¼Œ**ä¹Ÿå¯ä»¥ä¸æŒ‡å®š**å‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹è€Œç”±æ¨¡æ¿å‡½æ•°çš„å‚æ•°æ¨å¯¼è§„åˆ™ç¡®å®šã€‚

##### è¿”å›å‚æ•°

æ¨¡æ¿å‡½æ•°çš„è¿”å›å€¼ç±»å‹**å¿…é¡»æ˜ç¡®æŒ‡å®šã€ä¸èƒ½åˆ©ç”¨æ¨¡æ¿çš„è‡ªåŠ¨æ¨å¯¼æœºåˆ¶è·å¾—**ï¼ˆå’Œè°ƒç”¨å‚æ•°ç›¸åŒæ—¶å¯ä»¥ä¸ç”¨æŒ‡å®šï¼‰ã€‚

```c++
template<typename T>  T retV(T p) {}///æ­¤æ—¶è¿”å›å‚æ•°å¯ä»¥ä¸ç”¨æ˜ç¡®ç»™å®š

template<typename T1, typename T2, typename RT> RT max(T1 a, T2 b){};///è¦æ±‚æ˜¾å¼æŒ‡æ˜

///åˆ©ç”¨ç±»å‹æ¨å¯¼
template <typename T1, typename T2> auto max(T1 a, T2 b) -> decltype(b < a ? a : b) {}///C++11
template<typename T1, typename T2> auto max (T1 a, T2 b) {}///C++14

///c++11æ–°ç‰¹æ€§std::common_type
template <typename T1, typename T2> typename std::common_type<T1, T2>::type max(T1 a, T2 b) {}///C++11
template <typename T1, typename T2> std::common_type_t<T1, T2> max(T1 a, T2 b) {}///C++14
```

###### å¼ºåˆ¶è¿”å›ä¸ºå€¼ç±»å‹

`std::remove_reference<>`å¯ä»¥å°†å¼•ç”¨ç±»å‹å˜ä¸ºå€¼ç±»å‹ã€ä¹Ÿå¯ä»¥åˆ©ç”¨`auto`æ¨å¯¼è§„åˆ™ä¸­ä¸¢å¤±å¼•ç”¨çš„ç‰¹æ€§è¿”å›å€¼ç±»å‹ã€‚

```c++
template<typename T> T retV(T p) { return T{...};} /// retV<int&>(x)å°†æ— æ³•è¿”å›å€¼ç±»å‹

template<typename T> typename std::remove_reference<T>::type retV(T p) { return T{...};}///å»é™¤å¼•ç”¨
template<typename T> auto retV(T p)  { return T{...};}///å»é™¤å¼•ç”¨
```

#### [æ¨å¯¼æ¨¡æ¿å®ä¾‹åŒ–å‚æ•°](https://www.jianshu.com/p/589a747557ce)

åªèƒ½ç”¨äºæ¨å¯¼æ¨¡æ¿å‡½æ•°å½¢å‚ï¼Œä¸èƒ½ç”¨äºæ¨å¯¼è¿”å›å€¼ã€‚

```c++
// æ¨¡æ¿å‚æ•°å€¼paramç±»å‹ ?= (æ¨¡æ¿å‚æ•°Tç±»å‹ == æ¨¡æ¿å½¢å‚xTç±»å‹) ?= æ¨¡æ¿å®å‚/è¡¨è¾¾å¼exprç±»å‹
// æ³¨ï¼šå‚æ•°ç±»å‹ï¼ˆå³xçš„ç±»å‹ï¼‰æ˜¯æ¨¡æ¿å½¢å‚ä¸å…¶ä»–æ ‡è¯†ç¬¦çš„ç»“åˆï¼Œä¸ä¸€å®šæ˜¯Tç±»å‹

template<typename T> // T:æ¨¡æ¿å‚æ•°ç±»å‹ï¼ˆå³Tçš„ç±»å‹ï¼‰
void f(T param); // Tï¼šæ¨¡æ¿å½¢å‚ï¼Œè¿˜å¯ä»¥ä¸cvã€*ã€&ã€&&ç»“åˆ

int expr, *p;
const int* q;
f(expr); // iï¼šæ¨¡æ¿å®å‚ï¼Œint
```

##### æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹ï¼ˆå³`T`ï¼‰

```c++
template<typename T> void f(T param);///æ¨¡æ¿å½¢å‚ä¸ºå€¼ç±»å‹

int expr, *p;
const int* q;

f(expr); // Tå’Œxéƒ½æ˜¯int
f(p); // Tå’Œxéƒ½æ˜¯int*
f(q); // Tå’Œxéƒ½æ˜¯const int*
```

###### æ¨¡æ¿å®å‚éæŒ‡é’ˆï¼ˆ**è¡°å‡**ï¼‰

å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºéæŒ‡é’ˆæ—¶ä¼šé€ æˆæ¨æ–­å‡ºçš„æ¨¡æ¿å‚æ•°**è¡°å‡(decaying)**ï¼ˆæ¨¡æ¿å®å‚ä¸æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°ç±»å‹ä¸åŒï¼šå¦‚æ•°ç»„å’Œå‡½æ•°ç±»å‹é€€åŒ–ä¸ºæ™®é€šæŒ‡é’ˆã€**ä¸¢å¤±`const`å’Œ`volatile`å±æ€§ã€ä¸¢å¤±å¼•ç”¨ç±»å‹**ï¼‰ã€‚ä¸ºäº†ç¼“è§£æ¨¡æ¿å‚æ•°ä¼ é€’çš„è¡°å‡ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

* [**ä½¿ç”¨`std::ref()`å’Œ`std::cref()`**]()å‘åŸæœ¬ä»¥å€¼æ–¹å¼æ¥å—å‚æ•°çš„æ¨¡æ¿å‡½æ•°å®ç°ä¼ é€’å¼•ç”¨çš„æ•ˆæœã€‚

* ä½¿ç”¨`enable_if`åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„ï¼šä¸ç¬¦åˆ`enable_if`è®¾ç½®çš„æ¡ä»¶çš„å®ä¾‹åŒ–è¯·æ±‚ä¸ä¼šè¢«æ‰§è¡Œ:

```c++
template<class T, typename = std::enable_if_t<std::is_array<T>::value> > void destroy(T* t) {
	for(std::size_t i = 0; i < std::extent<T>::value; ++i) {destroy((*t)[i]);}
}
```

###### æ¨¡æ¿å®å‚ä¸ºæŒ‡é’ˆ

å½“è°ƒç”¨æ¨¡æ¿å‡½æ•°çš„å‚æ•°è¡¨è¾¾å¼ä¸ºæŒ‡é’ˆæ—¶æ¨å¯¼å‡ºçš„æ¨¡æ¿å‚æ•°å’Œæ¨¡æ¿å‡½æ•°å€¼ç±»å‹å°†ä¿ç•™è¡¨è¾¾å¼ä¸­çš„cvé™å®šç¬¦å’ŒæŒ‡é’ˆç±»å‹ã€‚

##### æ¨¡æ¿å½¢å‚éå€¼ç±»å‹ï¼ˆå³`T&ã€T&&`æˆ–`T*`ï¼‰

æ¨å¯¼å‡ºçš„**æ¨¡æ¿å‚æ•°å€¼ç±»å‹å°†**ä¸€å®šä¿ç•™è¡¨è¾¾å¼ä¸­çš„`cv`é™å®šç¬¦ã€‚å¯¹äº`T*`ä¿ç•™æŒ‡é’ˆï¼›å¯¹äº`T&`ï¼Œå¦‚æœ**è¡¨è¾¾å¼æœ¬èº«å’Œå½¢å‚ä¸­å«æœ‰ä»»æ„ä¸ªå³å€¼å¼•ç”¨ä¼šæ¶‰åŠåˆ°å¼•ç”¨æŠ˜å **ï¼Œå¦åˆ™ä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ç±»å‹ã€‚

```c++
int i, &r, &&rr, *p;
const int& cr;
const int* const q;

template<typename T> void f(T& x); // æ­¤ä¸ºå¼•ç”¨ï¼Œä½†å¯èƒ½æ¶‰åŠåˆ°å¼•ç”¨æŠ˜å 

f(i); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(r); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(rr); // xæ˜¯int& => T&æ˜¯int& => Tæ˜¯int
f(cr); // xæ˜¯const int& => T&æ˜¯const int& => Tæ˜¯const int
f(p); // xæ˜¯int* & => T&æ˜¯int* & => Tæ˜¯int*
f(q); // xæ˜¯const int* const & => T&æ˜¯const int* const & => Tæ˜¯const int* const
```

```c++
template<typename T> void f(T* x); // æ­¤ä¸ºåœ°å€ä¼ é€’ï¼Œä¸ä¼šå‘ç”Ÿæ¨æ–­è¡°å‡

f2(&i); // xæ˜¯int* => T*æ˜¯int* => Tæ˜¯int
f2(&cr); // xæ˜¯const int* => T*æ˜¯const int* => Tæ˜¯const int
f2(p); // xæ˜¯int* => T*æ˜¯int* => Tæ˜¯int
f2(q); // xæ˜¯const int* => T*æ˜¯const int* => Tæ˜¯const int
```

### æ¨¡æ¿å‚æ•°è®¾è®¡åŸåˆ™

å»ºè®®åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å€¼ä¼ é€’ï¼ˆç®€å•ã€å°å¯¹è±¡æ‹·è´å¼€é”€å°ã€ä¹Ÿå¯ä»¥å®ç°å¼•ç”¨ä¼ é€’çš„æ•ˆæœï¼‰ï¼Œåœ¨éœ€è¦æ”¹å˜å‚æ•°ã€éœ€è¦å®Œç¾è½¬å‘å’Œæ‹·è´å¼€é”€å¤§çš„æƒ…å†µä¸‹ä½¿ç”¨å¼•ç”¨ä¼ é€’ã€‚

[std::make_pair()æ¨¡æ¿å‚æ•°å†å²æ¼”è¿›](https://www.cnblogs.com/zhangyachen/p/14013629.html)

### æ¨¡æ¿å‡½æ•°é‡è½½ä¸ç‰¹åŒ–

å»ºè®®ä¸ä½¿ç”¨æ¨¡æ¿å‡½æ•°çš„ç‰¹åŒ–ã€‚

#### æ¨¡æ¿å‡½æ•°é‡è½½ä¸å…¨ç‰¹åŒ–

|          |                 æ¨¡æ¿                 |                      å‡½æ•°é‡è½½                      |
| :------: | :----------------------------------: | :------------------------------------------------: |
| **å¤ç”¨** | å®šä¹‰åŠŸèƒ½ç›¸ä¼¼çš„åŒåå‡½æ•°ï¼ˆå‡½æ•°åå¤ç”¨ï¼‰ | å®ç°é€»è¾‘ä¸€æ ·åªæ˜¯å‚æ•°ç±»å‹ä¸åŒçš„ä¸€ç±»å‡½æ•°ï¼ˆé€»è¾‘å¤ç”¨ï¼‰ |
| **ç›®çš„** |           æé«˜å‡½æ•°çš„æ˜“ç”¨æ€§           |                 æé«˜å‡½æ•°ç¼–å†™çš„æ•ˆç‡                 |

æ¨¡æ¿å‡½æ•°é€šè¿‡ç‰¹åŒ–æ¨¡æ¿å‚æ•°ï¼ˆ**åªæ”¯æŒå…¨ç‰¹åŒ–**ï¼‰ï¼Œå¯ä»¥å®šä¹‰åŒåçš„æ¨¡æ¿å‡½æ•°ï¼Œåœ¨å®ä¾‹åŒ–æ—¶ç±»å‹åŒæ—¶åŒ¹é…ç‰¹åŒ–åçš„æ¨¡æ¿å’Œä¸€èˆ¬æ¨¡æ¿æ—¶ä¼˜å…ˆä½¿ç”¨ç‰¹åŒ–åçš„æ¨¡æ¿ï¼Œç”±äºç‰¹åŒ–åçš„æ¨¡æ¿çš„å®ç°å¯ä»¥ç‹¬ç«‹ä¸æ™®é€šæ¨¡æ¿ï¼Œå› æ­¤å®ç°äº†**æ¨¡æ¿å‡½æ•°çš„é‡è½½**ã€‚

```c++
template <typename T> const T &max(const T &a, const T &b){}
template <> const char *const &max(const char *const &a, const char *const &b){}/// å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ–
template <typename T> const T &max(const T &a, const T &b, const T &c){}/// å‡½æ•°æ¨¡æ¿é‡è½½

const int &max(const int &a, const int &b){}/// éæ¨¡æ¿å‡½æ•°é‡è½½
const char *const &max(const char *const &a, const char *const &b){}/// éæ¨¡æ¿å‡½æ•°é‡è½½

class Test{} t1, t2;
const char *str1 = "aaa", *str2 = "zzz";

::max(5.5, 6.6);//è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const double&, const double&);
::max('a', 'c');//è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const char&, const char&);
::max(t1, t2); // è‡ªåŠ¨æ¨å¯¼template max(const T& a, const T& b)ï¼šmax(const Test&, const Test&);
::max(str1, str2); //ä¼˜å…ˆé€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼šmax(const char* const&a, const char* const& b)
::max<>(str1, str2); //æŒ‡å®šä½¿ç”¨æ¨¡æ¿ï¼Œè¿›è€Œæ‰¾åˆ°æ¨¡æ¿ç‰¹åŒ–ï¼štemplate <> max(const char* const&a, const char* const& b)
::max(1, 5, 3); // æ¨¡æ¿åŒ¹é…ï¼Œè¿›è€Œè‡ªåŠ¨æ¨å¯¼ï¼štemplate max(const int& a, const int& b, const int& c)
::max('a', 50); // 'a'å³97;é€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼ˆcharå¯ä»¥éšå¼è½¬æ¢æˆintï¼‰:max(const int& a, const int& b)
::max(97, 100);// ä¼˜å…ˆé€‰æ‹©éæ¨¡æ¿å‡½æ•°ï¼šmax(const int& a, const int& b)
::max<>(97, 100);// æŒ‡å®šä½¿ç”¨æ¨¡æ¿ï¼Œè¿›è€Œè‡ªåŠ¨æ¨å¯¼ï¼štemplate max(const int& a, const int& b)
::max<int>(97, 100); // æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‡½æ•°ï¼štemplate max(const int& a, const int& b)
::max<int>('a', 50); // æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‡½æ•°ï¼štemplate max(const int& a, const int& b)
```

#### éæ ‡å‡†æ¨¡æ¿å‡½æ•°åç‰¹åŒ–

**C++æ ‡å‡†å¹¶ä¸æ”¯æŒå‡½æ•°æ¨¡æ¿åç‰¹åŒ–**ï¼Œä¸ºäº†å®ç°æ¨¡æ¿å‡½æ•°åç‰¹åŒ–çš„æ•ˆæœï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š**â‘ å€ŸåŠ©åç‰¹åŒ–æ¨¡æ¿ç±»**ï¼ˆåç‰¹åŒ–æ¨¡æ¿ç±»+ä»¿å‡½æ•°ï¼‰ï¼Œ**â‘¡ä½¿ç”¨æ ‡ç­¾åˆ†å‘**ï¼ˆæ¯”è¾ƒéº»çƒ¦ï¼Œæ ‡å‡†å§”å‘˜ä¼šæ¨èçš„ä¸€ç§æ–¹æ³•ï¼‰ï¼Œ**â‘¢ä½¿ç”¨C++20 Concepts**ã€‚

```c++
// æ ‡ç­¾åˆ†å‘demo
struct NormalVersionTag {};///æ™®é€šæ ‡ç­¾
struct IntPartialVersionTag {};///åç‰¹åŒ–intçš„æ ‡ç­¾

template<class T> struct TagDispatchTrait { using Tag = NormalVersionTag; };///æ™®é€šç±»å‹
template<> struct TagDispatchTrait<int> { using Tag = IntPartialVersionTag; };///ç‰¹åŒ–ç±»å‹ï¼šint

template <typename A, typename B> void internal_f(A a, B b, NormalVersionTag){}///fçš„æ™®é€šæ¨¡æ¿å‡½æ•°
template <typename A, typename B> void internal_f(A a, B b, IntPartialVersionTag){}///fçš„intåç‰¹åŒ–å‡½æ•°

template <typename A, typename B> void f(A a, B b) {///å¯¹ä¸åŒç±»å‹çš„Bè¿›è¡Œåç‰¹åŒ–
    return internal_f(a, b, typename TagDispatchTrait<B>::Tag {});///åˆ†å‘åˆ°ç‰¹åŒ–ã€æ™®é€šå‡½æ•°æ‰§è¡Œ
}

f(1, 1);///f<int, int>()->f<int, int, TagDispatchTrait<int>::IntPartialVersionTag>()
f(1, 1.0);///f<int, float>()->f<int, int, TagDispatchTrait<float>::NormalVersionTag>()
```

## [æ¨¡æ¿ç±»](https://www.cnblogs.com/zhangyachen/p/13946442.html)

### å®šä¹‰

é€šå¸¸ç±»æ¨¡æ¿åªèƒ½å®šä¹‰åœ¨`global/namespace `ä½œç”¨åŸŸï¼Œæˆ–è€…æ˜¯å…¶å®ƒç±»çš„å£°æ˜é‡Œé¢ï¼Œä¸å¯ä»¥å°†ç±»æ¨¡æ¿å£°æ˜æˆ–å®šä¹‰åœ¨å‡½æ•°æˆ–è€…å—ä½œç”¨åŸŸå†…ã€‚åœ¨æ¨¡æ¿ç±»ä½¿ç”¨è¯¥ç±»çš„æ¨¡æ¿å‡½æ•°å’Œæ™®é€šå‡½æ•°ä¸éœ€è¦å¸¦æ¨¡æ¿å‚æ•°ã€‚

### å®ä¾‹åŒ–

æ¨¡æ¿ç±»çš„å®ä¾‹åŒ–å’Œæ¨¡æ¿å‡½æ•°ç›¸åŒï¼Œä¸€ä¸ªæ¨¡æ¿ç±»å’Œå…¶æ¨¡æ¿æˆå‘˜å‡½æ•°åªæœ‰è¢«è°ƒç”¨åˆ°æ‰ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ‰€ä»¥**å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡æ¿ç±»æ—¶ä¸ä¸€å®šå®ä¾‹åŒ–å®ƒæ‰€æœ‰çš„æ¨¡æ¿å‡½æ•°**ã€‚

### ç‰¹åŒ–

æŒ‡å®šæ¨¡æ¿ç±»ä¸­çš„å‡ ä¸ªï¼ˆ**åç‰¹åŒ–**ï¼‰æˆ–å…¨éƒ¨ï¼ˆ**å…¨ç‰¹åŒ–**ï¼‰æ¨¡æ¿å‚æ•°ã€‚åœ¨å½¢å¼ä¸Šçš„**æ”¹å˜æœ‰ä¸‰å¤„**ï¼š`template<>`é‡Œã€æ¨¡æ¿ç±»åååŠ äº†å†…å®¹ã€æ¨¡æ¿ç±»é‡Œé¢çš„æ”¹åˆ°å®é™…ç±»å‹ã€‚

```c++
#define INFO(arg) cout << arg << "ClassName<" << typeid(a).name() << ", " << typeid(b).name() << ", " << typeid(c).name() << ">" << endl

template<typename A, typename B, typename C=float> class ClassName {A a; B b; C c;
public: void operator()(){if(typeid(C) != typeid(float)) INFO("æ³›åŒ–ç‰ˆæœ¬: "); else INFO("æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬");};};///å¸¦é»˜è®¤æ¨¡æ¿å‚æ•°çš„æ³›åŒ–æ¨¡æ¿ç±»

template<> class ClassName<int, char, string> {int a; char b; string c;
public: void operator()(){INFO("å…¨ç‰¹åŒ–ç‰ˆæœ¬: ");};};///å…¨ç‰¹åŒ–ã€ç‰¹åŒ–ä¸ºç»å¯¹ç±»å‹

template<typename A, typename B, typename C> class ClassName<A*, B, C>{A* a; B b; C c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///é’ˆå¯¹æŒ‡é’ˆè¿›è¡Œåç‰¹åŒ–ï¼Œç‰¹åŒ–ä¸ºæŒ‡é’ˆç±»å‹

template<typename A, typename C> class ClassName<A*, A, C>{A* a; A b; C c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

template<typename A, typename B> class ClassName<A, B, int>{A a; B b; int c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

template<typename A> class ClassName<A, char, int>{A a; char b; int c;
public: void operator()(){INFO("åç‰¹åŒ–ç‰ˆæœ¬: ");};};///å¯¹éƒ¨åˆ†ç±»å‹è¿›è¡Œåç‰¹åŒ–

ClassName<int, double>()();///æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬ClassName<i, d, f>
ClassName<int, double, char>()();///æ³›åŒ–ç‰ˆæœ¬: ClassName<i, d, c>
ClassName<int, double, float>()();///æ³›åŒ–é»˜è®¤å‚æ•°ç‰ˆæœ¬ClassName<i, d, f>
ClassName<int*, double, char>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<Pi, d, c>
ClassName<int*, int, double>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<Pi, i, d>
ClassName<double, float, int>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<d, f, i>
ClassName<double, char, int>()();///åç‰¹åŒ–ç‰ˆæœ¬: ClassName<d, c, i>
ClassName<int, char, string>()();///å…¨ç‰¹åŒ–ç‰ˆæœ¬: ClassName<i, c, NSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE
```

### æ¨¡æ¿ç±»ä¸å‹å…ƒ

å…³äºç±»æ¨¡æ¿å‹å…ƒè§„åˆ™æœ‰å¾ˆå¤šï¼ˆFriend Classes of Class Templatesã€Friend  Functions of Class Templatesã€Friend Templatesï¼‰ï¼Œè¯¦ç»†å‚è€ƒã€ŠC++  Templates Second Editionã€‹12.5å°èŠ‚ã€‚

```c++
/// ä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„æ¨¡æ¿å‚æ•°,Tå’ŒUæ„æˆä¸€å¯¹å¤šå…³ç³»
/// æ­¤æ—¶å¯¹äºfoo<char>æ¥è¯´bar<ä»»ä½•ç±»å‹>ã€function<ä»»ä½•ç±»å‹>éƒ½æ˜¯å…¶å‹å…ƒ
template<typename T> class foo {
	template<typename U> friend class bar;///å‹å…ƒç±»æ—
	template <typename V> friend V function(V arg);///å‹å…ƒå‡½æ•°æ—
};
```

```c++
/// ä½¿ç”¨åŒä¸€ä¸ªæ¨¡æ¿å‚æ•°T
/// æ­¤æ—¶å¯¹äºfoo<char>æ¥è¯´bar<cahr>ã€function<char>æ‰æ˜¯å…¶å‹å…ƒï¼Œå…¶ä»–çš„éƒ½ä¸æ˜¯
template<typename T> class foo;///å‰ç½®å£°æ˜
template<typename T> class bar;///å‰ç½®å£°æ˜
template<typename T> void func(Stack<T>);///å‰ç½®å£°æ˜

template<typename T>class foo {
	friend class bar<T>;///å•ä¸ªå‹å…ƒç±»
	friend void func<T>(foo<T>);///å•ä¸ªå‹å…ƒå‡½æ•°
};
```

## éç±»å‹æ¨¡æ¿å‚æ•°

å³æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°é‡Œçš„**å®šä¹‰å¼æ—¶æ¨¡æ¿å‚æ•°ä¸æ˜¯ä¸€ä¸ªå¾…å®šçš„ç±»å‹è€Œæ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»å‹**ï¼Œå®ä¾‹åŒ–è¿™ç§æ¨¡æ¿æ—¶çš„**å®ä¾‹åŒ–å‚æ•°ä¸å†æ˜¯ç±»å‹å€¼è€Œæ˜¯ç¡®åˆ‡çš„å€¼**ã€‚æ¨¡æ¿å‚æ•°æ‰€æœ‰æ±‚çš„å…·ä½“çš„ç±»å‹å–å€¼æ˜¯æœ‰é™çš„ã€‚æ³¨æ„ä¸é»˜è®¤æ¨¡æ¿å‚æ•°åŒºåˆ†ã€‚

**æ¨¡æ¨¡å‚æ•°ç±»å‹é™åˆ¶**ï¼šå¿…é¡»æ˜¯æ•´å‹å¸¸é‡/æšä¸¾ã€æŒ‡å‘å¯¹è±¡/å‡½æ•°/æˆå‘˜å˜é‡çš„æŒ‡é’ˆã€å¯¹è±¡/å‡½æ•°çš„å·¦å€¼å¼•ç”¨ã€std::nullptr_tä¸­çš„ä¸€ç§ï¼›å½“ä¼ é€’æŒ‡é’ˆæˆ–è€…å¼•ç”¨æ—¶ï¼ŒæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€ä¸´æ—¶å˜é‡ã€æ•°æ®æˆå‘˜ä»¥åŠå…¶å®ƒå­å¯¹è±¡ã€‚

```c++
///æ¨¡æ¿ç±»éç±»å‹æ¨¡æ¿å‚æ•°
using array3 = array<int, 3>;///åº“ä¸­çš„éç±»å‹æ¨¡æ¿å‚æ•°ç±»
template <typename T, int size> class MyTempalte{};///ç”³æ˜å’Œå®ç°éç±»å‹æ¨¡æ¿å‚æ•°ç±»
MyTempalte<int, 3> mytemplate;///å®ä¾‹åŒ–å’Œä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æ¨¡æ¿ç±»
```

```c++
///æ¨¡æ¿å‡½æ•°éç±»å‹æ¨¡æ¿å‚æ•°
template<int Val, typename T> T addValue (T x) {}///ç”³æ˜å’Œå®ç°éç±»å‹æ¨¡æ¿å‚æ•°å‡½æ•°
addValue<5, int>(3);///å®ä¾‹åŒ–å’Œä½¿ç”¨éç±»å‹æ¨¡æ¿å‚æ•°æ¨¡æ¿å‡½æ•°
```

## [æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™](https://www.cnblogs.com/zhangyachen/p/14013605.html)

## å¹²é¢„æ¨¡æ¿ç¼–è¯‘

### æ¨¡æ¿ç±»[`enable_if<>/ enable_if_t<>`](https://zh.cppreference.com/w/cpp/types/enable_if)

åŸºäº`C++11 SFINAE`ç‰¹æ€§ï¼Œæ¨¡æ¿ç±»`enable_if<exprssion, T>`åªæœ‰åœ¨æ¨¡æ¿å‚æ•°`expression`ä¸ºçœŸæ—¶æ‰ä¼šç»è¿‡å‚æ•°æ¨å¯¼æœºåˆ¶è¿›å…¥åç‰¹åŒ–çš„æ¨¡æ¿ç±»`enable_if<true, T>`ä¸­ï¼ˆè¯¥ç±»ä¸­æ‹¥æœ‰å…¬å¼€æˆå‘˜`typedef T type`ï¼‰ï¼Œä½¿ç”¨`typename enable_if<true,T>::type`å¯ä»¥è·å¾—**ç±»å‹**`T`ï¼Œ`enable_if_t<expression, T>`å¯ä»¥ç›´æ¥è¿”å›`type`ï¼Œä»¥ä¸‹æ˜¯`enable_if`çš„ç®€å•å®ç°ã€‚

```c++
template< bool B, class T = void > using enable_if_t = typename enable_if<B, T>::type;

template<bool Cond, class T = void> struct enable_if {};
///æ¨¡æ¿ç±»ç”³æ˜ï¼šè¿›å…¥æ­¤æ¨¡æ¿å®ä¾‹åŒ–åå¼•ç”¨typeä¼šå‡ºé”™ï¼Œåœ¨SFINAEä¸‹å°±ä¸ä¼šå®ä¾‹åŒ–å’Œç¼–è¯‘è¯¥æ¨¡æ¿ç±»
template<class T> struct enable_if<true, T> { typedef T type; };
```

### [æ§åˆ¶æ¨¡æ¿ç¼–è¯‘](# æ¨¡æ¿ç±»`enable_if`)

ä¸€èˆ¬å°†æ¨¡æ¿ç±»`enable_if<>`ä¸`is_integral<T>ã€is_trivial<T>ã€is_void<>ã€is_pointer<>ã€...`ç­‰ç”¨äº[**ç±»å‹èƒå–**](http://www.cplusplus.com/reference/type_traits/)çš„æ¨¡æ¿ç±»ä¸­çš„`::value`æˆå‘˜ç»“åˆä½¿ç”¨ï¼Œä»¥æ­¤ç”¨æ¥æ ¹æ®æ¨¡æ¿å‚æ•°æ§åˆ¶æ¨¡æ¿å®ä¾‹åŒ–å’Œç¼–è¯‘çš„è¿‡ç¨‹ã€‚

[ç”¨æ³•ä¸€ï¼šç±»å‹åç‰¹åŒ–](# ç±»å‹åç‰¹åŒ–)ã€[ç”¨æ³•äºŒï¼šæ§åˆ¶å‡½æ•°è¿”å›ç±»å‹](# æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹)ã€[ç”¨æ³•ä¸‰ï¼šæ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹](# æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹)

## ç¼–è¯‘ä¸é“¾æ¥é—®é¢˜

### ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶

ç”±äºåœ¨c/c++ä¸­ï¼Œé¦–å…ˆæ ¹æ®å•ä¸ªæ–‡ä»¶ç¼–è¯‘æˆå„è‡ªçš„ç›®æ ‡æ–‡ä»¶objï¼Œå½“åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå‘ç°ä¸€ä¸ªç¬¦å·åªæœ‰å£°æ˜æ²¡æœ‰å®šä¹‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå‡è®¾å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå°†å¯»æ‰¾å®šä¹‰çš„ä»»åŠ¡äº¤ç»™åç»­çš„é“¾æ¥é˜¶æ®µã€‚

### é—®é¢˜ä¸æ–¹æ³•

ç”±äºC++çš„ç¼–è¯‘ä¸é“¾æ¥æœºåˆ¶ï¼Œæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸èƒ½åˆ†åˆ«æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­è¿›è¡Œç¼–è¯‘ã€‚ç”±äºè°ƒç”¨æ¨¡æ¿å‡½æ•°çš„æ–‡ä»¶éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µæ ¹æ®å‡½æ•°çš„å®šä¹‰å®ä¾‹åŒ–æ¨¡æ¿ï¼Œä½†ç”±äºä¸Šé¢ä¸¤ä¸ªcppæ–‡ä»¶éƒ½æ˜¯**å•ç‹¬çš„ç¼–è¯‘å•å…ƒæ–‡ä»¶**ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ç¼–è¯‘æ— æ³•å®ä¾‹åŒ–æ¨¡æ¿å‡½æ•°ï¼Œè€Œåªèƒ½å°†å¯»æ‰¾æ¨¡æ¿å‡½æ•°å®ä¾‹çš„ç¬¦å·çš„ä»»åŠ¡äº¤ç»™é“¾æ¥å™¨ã€‚è€Œç¼–è¯‘æ¨¡æ¿å‡½æ•°æ–‡ä»¶æ—¶æ²¡æœ‰æ¨¡æ¿çš„è°ƒç”¨ä¹Ÿå°±æ— æ³•å®ä¾‹åŒ–äº§ç”Ÿæœ‰ç”¨çš„ç¬¦å·ä¾›é“¾æ¥å™¨ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨é“¾æ¥é˜¶æ®µå°±ä¼šå‡ºé”™ã€‚

æ‰€ä»¥æŠŠæ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨ä¸€èµ·æ„æˆ`hpp`æ–‡ä»¶ï¼ˆå¦‚STLï¼‰ï¼Œæˆ–è€…åœ¨æ¨¡æ¿çš„å®šä¹‰æ–‡ä»¶ä¸­åŠ å…¥æ‰€æœ‰å¯èƒ½çš„æ¨¡æ¿å‡½æ•°è°ƒç”¨ï¼ˆå‚»é›•å†™æ³•ï¼‰ï¼Œæ­¤å¤–ä¹Ÿå¯ä»¥åˆ©ç”¨`export`å…³é”®å­—

#### `export`ï¼ˆC++11å‰ï¼‰

ä¸ºäº†è®¿é—®å…¶ä»–ç¼–è¯‘å•å…ƒï¼ˆå¦‚å¦ä¸€ä»£ç æ–‡ä»¶ï¼‰ä¸­çš„å˜é‡æˆ–å¯¹è±¡ï¼Œå¯¹æ™®é€šç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»ã€ç»“æ„å’Œç±»ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å…³é”®å­—`extern`æ¥ä½¿ç”¨è¿™äº›å˜é‡æˆ–å¯¹è±¡æ—¶ï¼›ä½†æ˜¯å¯¹æ¨¡æ¿ç±»å‹ï¼Œåˆ™å¿…é¡»åœ¨å®šä¹‰è¿™äº›æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ ‡å‡†C++æ–°å¢åŠ çš„å…³é”®å­—`export`ï¼šåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜æ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½ï¼Œåœ¨ä»£ç æ–‡ä»¶ä¸­ä½¿ç”¨å…³é”®å­—`export`æ¥å®šä¹‰å…·ä½“çš„æ¨¡æ¿ç±»å¯¹è±¡å’Œæ¨¡æ¿å‡½æ•°ï¼Œç„¶ååœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ï¼ŒåŒ…å«å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥è¿™äº›å¯¹è±¡å’Œå‡½æ•°äº†ã€‚

```c++
// out.h:ï¼ˆå£°æ˜å¤´æ–‡ä»¶â€”â€”åªåŒ…å«outå‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼‰
template<class T> void out (const T& t);

// out.cpp:ï¼ˆå®šä¹‰ä»£ç æ–‡ä»¶â€”â€”åŒ…å«outå‡½æ•°çš„å£°æ˜[é€šè¿‡include]å’Œå®šä¹‰ç­‰å…¨éƒ¨ä¿¡æ¯ï¼‰
#include â€œout.hâ€
export template<class T> void out (const T& t) {}

//user.cpp:ï¼ˆç”¨æˆ·ä»£ç æ–‡ä»¶â€”â€”åŒ…å«å‡½æ•°çš„å£°æ˜å¤´æ–‡ä»¶åå°±å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°ï¼‰
#include â€œout.hâ€
```

## `typename`ä¸`class`

æœ€åˆå®šä¹‰æ¨¡æ¿æ—¶ä½¿ç”¨çš„æ˜¯`class`ï¼Œåæ¥ä¸ºäº†é¿å…`class`åœ¨å¸¦æ¥æ··æ·†ï¼Œæ‰€ä»¥å¼•å…¥`typename`å…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨åŒ`class`ä¸€æ ·è¡¨æ˜åé¢çš„ç¬¦å·ä¸ºä¸€ä¸ªç±»å‹ï¼Œåœ¨æ¨¡æ¿å®šä¹‰è¯­æ³•ä¸­å…³é”®å­—`class`ä¸`typename`çš„ä½œç”¨å®Œå…¨ä¸€æ ·ã€‚

`typename`å¦å¤–ä¸€ä¸ªä½œç”¨ä¸ºä½¿ç”¨**åµŒå¥—ä¾èµ–ç±»å‹**ï¼Œé€šçŸ¥ç¼–è¯‘å™¨`typename`åé¢çš„å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å‡½æ•°æˆ–è€…æˆå‘˜å˜é‡ã€‚

```c++
struct MyArray{
	typedef int LengthType;
};

template<class T> void MyMethod(T myarr){
	typedef typename T::LengthType LengthType;
	LengthType length = myarr.GetLength();
}
```

# ç±»ç›¸å…³

## æƒé™æ§åˆ¶

### å¤–éƒ¨è®¿é—®æ§åˆ¶

+ Publicï¼ŒProtectedï¼ŒPrivateæ§åˆ¶æœ¬ç±»ã€å­ç±»ã€å¤–éƒ¨è°ƒç”¨å¯¹ç±»ä¸­æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè®¿é—®æ§åˆ¶é€æ¸ä¸¥æ ¼(protectå±è”½å¤–éƒ¨è®¿é—®ï¼Œprivateåªæœ‰æœ¬ç±»å¯è§)ã€‚

### ç‰¹æ®Šæƒé™æ§åˆ¶

+ æ¦‚è¿°ï¼šä¸ºäº†æ»¡è¶³æŸäº›ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯èƒ½å¯¹The Big Threeç­‰ç‰¹æ®Šçš„åŸºç¡€å‡½æ•°çš„æƒé™åŠ ä»¥çº¦æŸ(protectæˆ–è€…private)ï¼Œæ­¤æ—¶ç¨‹åºä¸­å¯¹è¿™äº›å‡½æ•°çš„æ˜¾å¼æˆ–éšå¼è°ƒç”¨å°†ä¼šè¢«ç¼–è¯‘å™¨é˜»æ­¢ã€‚è€Œå¯¹è¿™äº›å‡½æ•°çš„è®¿é—®æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œä¸ºäº†è®¿é—®è¿™äº›å‡½æ•°å®Œæˆå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå¿…é¡»å€Ÿç”¨ç±»çš„å†…éƒ¨æˆå‘˜é—´æ¥è°ƒç”¨è¿™äº›å‡½æ•°å¹¶è¿”å›ä¿¡æ¯ã€‚

+ è®¿é—®æ–¹æ³•

1. å€ŸåŠ©ç±»çš„staticæˆå‘˜(å‡½æ•°æˆ–è€…æ•°æ®æˆå‘˜)å±äºç±»ä½†å´ç‹¬ç«‹äºç±»å­˜åœ¨çš„ç‰¹æ€§ï¼Œåˆ©ç”¨å…¬æœ‰çš„staticæˆå‘˜é—´æ¥è°ƒç”¨
2. å€ŸåŠ©ç±»çš„å‹å…ƒå‡½æ•°æˆ–è€…å‹å…ƒç±»ï¼Œåˆ©ç”¨å‹å…ƒæˆå‘˜(å‹å…ƒå¯ä»¥æ— è§†ä¸€åˆ‡æƒé™æ§åˆ¶)é—´æ¥è°ƒç”¨

#### æ„é€ å‡½æ•°privateåŒ–

##### å½±å“

1. ç¦æ­¢è¯¥ç±»è¢«ç»§æ‰¿ï¼šåˆ©ç”¨å­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»é¦–å…ˆè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™ç§å¤–éƒ¨è°ƒç”¨è¦æ±‚åŸºç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ˜¯**publicæˆ–è€…protect**çš„è®¿é—®æ§åˆ¶æƒé™

2. åœ¨é—´æ¥è°ƒç”¨æ„é€ å‡½æ•°è¿”å›å¯¹è±¡æ—¶ä¸èƒ½ä½¿ç”¨å€¼ä¼ é€’(éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸´æ—¶å¯¹è±¡)ï¼Œæ‰€ä»¥**åªèƒ½ä»¥æŒ‡é’ˆæˆ–è€…å¼•ç”¨**çš„æ–¹å¼è¿”å›å¯¹è±¡å’Œä¼ é€’å‚æ•°ï¼Œæ­¤æ—¶çš„å¯¹è±¡**æ—¢å¯ä»¥åˆ›å»ºåœ¨å †ä¸Šä¹Ÿå¯ä»¥åœ¨æ ˆä¸Š**ã€‚

#### æ„é€ å‡½æ•°protectåŒ–

##### å½±å“

1. å’Œæ„é€ å‡½æ•°privateåŒ–ç›¸æ¯”ï¼Œè¿™ç§é™åˆ¶ä¸‹ç±»å¯ä»¥è¢«ç»§æ‰¿(protecté™å®šçš„æˆå‘˜å¯ä»¥è¢«å­ç±»ç›´æ¥è®¿é—®)ã€‚

#### ææ„å‡½æ•°privateåŒ–

##### å½±å“

1. åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å¯¹è±¡çš„æ„é€ å’Œææ„å‡½æ•°æ˜¯å¦å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨ã€‚

+ å¦‚æœæ„é€ å‡½æ•°ä¸å…è®¸è¢«å¤–éƒ¨è°ƒç”¨ï¼Œç¼–è¯‘å™¨å°†ä¼šæ‹’ç»ä¸ºå…¶è‡ªåŠ¨ç”Ÿæˆå¯¹è±¡(å‚è€ƒä¸Šé¢çš„è§£å†³åŠæ³•)ã€‚
+ å¦‚æœææ„å‡½æ•°ä¸å…è®¸è¢«å¤–éƒ¨è°ƒç”¨ï¼Œå³ä½¿é€šè¿‡å…¶ä»–æ–¹æ³•è°ƒç”¨æ„é€ å‡½æ•°åœ¨æ ˆä¸Šåˆ›å»ºäº†å¯¹è±¡ï¼Œç¼–è¯‘å™¨åœ¨å°è¯•ç›´æ¥æˆ–é—´æ¥è°ƒç”¨ææ„å‡½æ•°å‡½æ•°æ—¶ä»»ç„¶ä¼šå¤±è´¥ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¹Ÿä¼šæ‹’ç»åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡(å› ä¸ºæ— æ³•å®Œæˆè‡ªåŠ¨å›æ”¶)ã€‚

## åˆå§‹åŒ–æ–¹æ³•

+ åˆå§‹åŒ–åˆ—è¡¨å‘ç”Ÿåœ¨å°±åœ°åˆå§‹åŒ–ä¹‹åï¼Œå³æœ€ç»ˆçš„åˆå§‹åŒ–ç»“æœä»¥åˆå§‹åŒ–åˆ—è¡¨ä¸ºå‡†ã€‚

### åˆå§‹åŒ–åˆ—è¡¨

1. å¿…ç”¨æƒ…å†µï¼š`const`æˆå‘˜æˆ–å¼•ç”¨ç±»å‹çš„æˆå‘˜ã€æˆå‘˜ç±»å‹æ˜¯æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ã€‚
2. å¥½å¤„ï¼š**C++åœ¨è¿›å…¥æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¹‹å‰å·²ç»å®Œæˆå¯¹ç±»æ•°æ®æˆå‘˜çš„æ„é€ **ã€‚ä½¿ç”¨**åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥ä¸€æ­¥æ„å»ºå‡ºæˆå‘˜**ï¼Œè€Œ**æ„é€ å‡½æ•°å‡½æ•°ä½“å†…çš„è¿›è¡Œçš„æ˜¯èµ‹å€¼åˆå§‹åŒ–**ï¼Œå®ƒé’ˆå¯¹å·²ç»æ„é€ å¥½çš„ç±»å¯¹è±¡è°ƒç”¨æ‹·è´èµ‹å€¼æ“ä½œç¬¦å®Œæˆèµ‹å€¼ã€‚
3. åˆå§‹åŒ–é¡ºåºï¼š**æŒ‰ç…§å£°æ˜çš„é¡ºåºåˆå§‹åŒ–**çš„ï¼Œè€Œä¸æ˜¯æŒ‰ç…§å‡ºç°åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„é¡ºåºã€‚

### å°±åœ°åˆå§‹åŒ–

å®šä¹‰ç±»æ—¶ç»™å˜é‡èµ‹åˆå§‹å€¼ï¼ŒC++11å‰åªèƒ½å¯¹ç»“æ„ä½“æˆ–ç±»çš„é™æ€å¸¸é‡æˆå‘˜è¿›è¡Œå°±åœ°åˆå§‹åŒ–ã€‚

```cpp
class Info{
 private:
  int _type {0};
  char _a = 'a';
  std::string x = "hello world"; //å¯ä»¥
};
```

### åˆ—è¡¨åˆå§‹åŒ–list_initialization

+ ä½œç”¨ï¼šæä¾›äº†ç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹å¼ï¼Œä½¿è¿‡å»é€‚ç”¨äºPODç±»å‹çš„åˆ—è¡¨åˆå§‹åŒ–å¾—ä»¥åº”ç”¨åˆ°å…¶å®ƒé€šç”¨ç±»å‹çš„åˆå§‹åŒ–ä¸Šã€‚åŒæ—¶ä¹Ÿé€‚ç”¨äºä½¿ç”¨newæ“ä½œç­‰åˆå§‹åŒ–æ–¹å¼ã€‚
+ é€‚ç”¨èŒƒå›´ï¼šèšåˆä½“ç±»å‹å’ŒPODç±»å‹ï¼Œå°¤å…¶æ˜¯è¿åèšåˆä½“è§„å®š1çš„åˆ—è¡¨åˆå§‹åŒ–åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å®é™…ä¸Šèµ‹å€¼çš„æ˜¯ä¸€ä¸ªéšæœºå€¼ï¼Œä¼šé€ æˆéš¾ä»¥å‘ç°çš„Bugã€‚
+ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»å‹çš„æ„é€ å‡½æ•°æ¥ä½¿éèšåˆä½“ç±»å‹çš„ç±»å‹æ”¯æŒåˆ—è¡¨åˆå§‹åŒ–ã€‚
+ é¢å¤–æ”¶ç›Šï¼šè¯¥æœºåˆ¶å¯ä»¥**é˜²æ­¢ç±»å‹æ”¶çª„**ï¼Œé¿å…ä¸€äº›éšå¼çš„ç±»å‹è½¬æ¢ã€‚

#### èšåˆä½“

1. æ— ç”¨æˆ·è‡ªå®šä¹‰æ„é€ å‡½æ•°
2. æ— åŸºç±»ã€è™šå‡½æ•°
3. æ— ç§æœ‰æˆ–è€…å—ä¿æŠ¤çš„éé™æ€æ•°æ®æˆå‘˜
4. æ— {}å’Œ=ç›´æ¥åˆå§‹åŒ–çš„éé™æ€æ•°æ®æˆå‘˜ã€‚

#### std::initializer_list

+ stdæä¾›çš„ä¸€ä¸ªè½»é‡åŒ–çš„ç±»æ¨¡æ¿å®¹å™¨ï¼Œå¯ä»¥æ¥å—ä»»æ„é•¿åº¦çš„åŒç±»å‹çš„æ•°æ®ï¼Œè¯¥å®¹å™¨å®ç°äº†è¿­ä»£å™¨ç­‰å®¹å™¨çš„ä¸€èˆ¬æ¥å£(è¿­ä»£å™¨ã€beginã€endã€size)ã€‚
+ æ³¨æ„äº‹é¡¹

1. æ¥å—çš„å¯å˜å‚æ•°ä¸­çš„å‚æ•°å¿…é¡»æ˜¯åŒç±»å‹æˆ–è€…æ˜¯å¯ä»¥è½¬æ¢ä¸ºæ˜¾å¼æŒ‡å®šè¿‡çš„ç±»å‹ã€‚
2. åªèƒ½è¢«æ•´ä½“çš„åˆå§‹åŒ–å’Œå¤åˆ¶ï¼Œè¿­ä»£å™¨è®¿é—®åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸å¯æ›´æ”¹çš„ã€‚
3. å…¶ä¿å­˜çš„å€¼æ˜¯å¯¹æ•°æ®æ¥æºçš„å¼•ç”¨ï¼Œè¦æ³¨æ„åˆ—è¡¨åˆå§‹åŒ–æ—¶ä½¿ç”¨çš„æ•°æ®æºçš„ç”Ÿå‘½å‘¨æœŸã€‚

### å§”æ‰˜æ„é€ å‡½æ•°

è¯­æ³•è§„åˆ™ï¼šåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­æ˜¾å¼è°ƒç”¨è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°ã€‚

æŠŠæ„é€ çš„ä»»åŠ¡å§”æ´¾ç»™ç›®æ ‡æ„é€ å‡½æ•°æ¥å®Œæˆç±»çš„æ„é€ ï¼Œé¿å…å¤šä¸ªæ„é€ å‡½æ•°æ‰§è¡Œç±»ä¼¼æ“ä½œï¼ˆ**ç¼–è¯‘å™¨åŸåˆ™ä¸Šä¸å…è®¸åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°**æ­¢ï¼‰ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°è´Ÿè´£å¤„ç†è‡ªå·±çš„ä¸åŒæƒ…å†µï¼ŒæŠŠæœ€åŸºæœ¬çš„æ„é€ å·¥ä½œå§”æ‰˜ç»™æŸä¸ªåŸºç¡€æ„é€ å‡½æ•°å®Œæˆï¼Œå®ç°åˆ†å·¥åä½œã€‚

#### NOTE

1. ä¸èƒ½åœ¨å§”æ‰˜æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–å…¶ä»–æ•°æ®æˆå‘˜ï¼Œå³**ä¸èƒ½åŒæ—¶ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å’Œå§”æ‰˜æ„é€ å‡½æ•°**
2. **å§”æ‰˜æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­çš„æ“ä½œåœ¨æœ€åæ‰§è¡Œ**
3. è¯¥æœºåˆ¶ä¸‹å¯èƒ½æ„æˆå§”æ‰˜é“¾æˆ–è€…å§”æ‰˜ç¯ï¼Œç¼–è¯‘å™¨ä¸èƒ½æ£€æŸ¥å§”æ‰˜ç¯çš„å‡ºç°ï¼ˆä¼šå¯¼è‡´é€’å½’æ ˆçˆ†æ ˆï¼‰
4. ç›®æ ‡/è¢«å§”æ‰˜çš„æ„é€ å‡½æ•°å¯ä»¥æ˜¯`private`çš„æ„é€ å‡½æ•°

##### ç¦æ­¢åµŒå¥—è°ƒç”¨æ„é€ å‡½æ•°

C++ä¸æ”¯æŒåœ¨æ„é€ å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå½“åœ¨æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶å¯¹è±¡ï¼Œè¢«è°ƒç”¨çš„æ„é€ å‡½æ•°å®Œæˆäº†åŒ¿åä¸´æ—¶å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œè¿™ä¸€éƒ¨åˆ†å†…å®¹ä¸ä¼šåæ˜ åˆ°å½“å‰å¯¹è±¡çš„å­˜å‚¨ç©ºé—´å†…ï¼Œç›¸å½“äºåšäº†æ— ç”¨åŠŸã€‚**è¦æƒ³å¤ç”¨å…¶ä»–æ„é€ å‡½æ•°å¯ä»¥é‡‡ç”¨å§”æ‰˜æ„é€ å‡½æ•°æˆ–è€…`placement new`æ–¹æ³•**ã€‚

#### å¼‚å¸¸å¤„ç†

å¦‚æœåœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­ä½¿ç”¨`try`çš„è¯ï¼Œé‚£ä¹ˆä»ç›®æ ‡æ„é€ å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œéƒ½å¯ä»¥åœ¨å§”æ´¾æ„é€ å‡½æ•°ä¸­è¢«æ•æ‰åˆ°ã€‚

```cpp
class DCExcept {
public:
  DCExcept(double d)
      try : DCExcept(1, d) {
          cout << "Run the body." << endl;
          // å…¶ä»–åˆå§‹åŒ–æ“ä½œ
      }catch(...) {
          cout << "caught exception." << endl;
          // å¼‚å¸¸å¤„ç†
      }
private:
  DCExcept(int i, double d){
      cout << "going to throw!" << endl;
      throw 0;//æŠ›å‡ºå¼‚å¸¸
  }
  int type;
  double data;
};
int main() {
  DCExcept a(1.2);
}
/*è¾“å‡º:
going to throw!
caught exception.
terminate called after throwing an instance of 'int'
Aborted*/
```

## å‡½æ•°

### The Big Three

+ æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°ã€ææ„å‡½æ•°ä¸€èµ·æ„æˆC++ä¸‰å¤§å‡½æ•°

1. ç”³æ˜æ—¶åˆå§‹åŒ–ã€å‚æ•°çš„å€¼ä¼ é€’ã€ä»¥å€¼è¿”å›æ—¶è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œå½“ç”¨æˆ·æ²¡æœ‰è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ‰§è¡Œæµ…æ‹·è´/ä½æ‹·è´çš„æ‹·è´æ„é€ å‡½æ•°(åˆæˆçš„æ‹·è´æ„é€ å‡½æ•°)ã€‚
2. èµ‹å€¼/èµ‹å€¼æ„é€ å‡½æ•°åº”ç”¨äºä¸¤ä¸ªå·²ç»æ„é€ çš„å¯¹è±¡ï¼Œä¸ºäº†æé«˜èµ‹å€¼æ—¶çš„å¼‚å¸¸å®‰å…¨æ€§ï¼Œèµ‹å€¼æ“ä½œåº”å½“éµå®ˆcopy/move and swapçš„å®ç°åŸåˆ™ã€‚

### ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°(4+2)

#### ç”Ÿæˆå†…å®¹

+ 4(æ„é€ å‡½æ•°ã€[æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼å‡½æ•°/è¿ç®—ç¬¦ã€ææ„å‡½æ•°](#The Big Three)) + 2(c++11æ–°å¢ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å‡½æ•°)ï¼Œä¸€å…±6ä¸ª`public`çš„`inline`å‡½æ•°

#### ç”Ÿæˆè§„åˆ™

+ åªæœ‰åœ¨è¢«éœ€è¦ä¸”ç”¨æˆ·æœªæä¾›è‡ªå®šä¹‰ç‰ˆæœ¬çš„æ—¶å€™æ‰ä¼šç”Ÿæˆï¼Œä¾‹å¦‚C++ä¸ä¼šä¸ºä¸€ä¸ªæœªä½¿ç”¨çš„ç©ºç±»ç”Ÿæˆæ„é€ å‡½æ•°

1. é»˜è®¤æ„é€ å‡½æ•°ï¼šåªåœ¨ç”¨æˆ·æ²¡æœ‰å®šä¹‰å…¶å®ƒä»»ä½•ç±»å‹çš„æ„é€ å‡½æ•°æ—¶æ‰ä¼šç”Ÿæˆï¼Œæ¦‚æ‹¬æ¥è®²æœ‰å››ç§æƒ…å†µ[å‚è€ƒæ¥æº](https://cloud.tencent.com/developer/article/1036240)ï¼š
   1. Bç±»å«A**ç±»æˆå‘˜å¯¹è±¡ï¼Œä¸”è¯¥ç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°**ï¼šå› ä¸ºæ­¤æ—¶ ç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“Aç±»é»˜è®¤æ„é€ å‡½æ•°åšäº†ä»€ä¹ˆï¼Œå‡ºäºæ¶ˆé™¤Aç±»çš„ä¸å½“æ“ä½œçš„åŸå› ï¼Œç¼–è¯‘å™¨å°†ä¸ºBç±»ç”Ÿæˆæ„é€ å‡½æ•°
   2. ç±»çš„**åŸºç±»æä¾›äº†é»˜è®¤çš„æ„é€ å‡½æ•°**ã€‚
   3. ç±»å†…å®šä¹‰äº†**è™šå‡½æ•°**
   4. ç±»ä½¿ç”¨äº†**è™šç»§æ‰¿**

2. æ‹·è´æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ

3. æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ

4. ææ„å‡½æ•°ï¼šç”¨æˆ·æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°

5. ç§»åŠ¨æ„é€ å‡½æ•°ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**(6) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ

6. ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼šåªæœ‰ç”¨æˆ·æ²¡æœ‰å®šä¹‰ **æ‹·è´æ„é€ å‡½æ•°**(2), **æ‹·è´èµ‹å€¼è¿ç®—ç¬¦**(3), **ææ„å‡½æ•°**(4) å’Œ **ç§»åŠ¨æ„é€ å‡½æ•°**(5) æ—¶ï¼Œæ‰ä¼šç”Ÿæˆ

#### å‡½æ•°ç”Ÿæˆç®¡ç†

##### ä½¿ç”¨ç¼ºçœå‡½æ•°=default

åœ¨é»˜è®¤å‡½æ•°å®šä¹‰æˆ–å£°æ˜æ—¶åŠ ä¸Š`=default`ï¼Œæ¥è®©ç¼–è¯‘å™¨ç”Ÿæˆè¯¥å‡½æ•°çš„é»˜è®¤ç‰ˆæœ¬ã€‚

##### ç¦æ­¢å‡½æ•°=delete

+ åœ¨C++98ä¸­ï¼Œå¯ä»¥æŠŠè¯¥å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œä¸å®šä¹‰ï¼Œè¿™æ ·ï¼Œå¦‚æœæœ‰äººè°ƒç”¨å°±ä¼šæŠ¥é”™ã€‚

+ åœ¨c++11ä¸­ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è¢«ç¦æ­¢(åŒ…æ‹¬éæˆå‘˜å‡½æ•°ã€æ¨¡æ¿å‡½æ•°çš„å…·åŒ–å®ç°ã€é»˜è®¤ç”Ÿæˆçš„æˆå‘˜å‡½æ•°)

```cpp
  bool isLucky(int number) = delete;
  bool isLucky(float) = delete;      //é˜»æ­¢int->floatçš„éšå¼è½¬æ¢

  template<typename T> void ProcessPointer(T* ptr);
  template<> void ProcessPointer(void*) = delete; //é˜»æ­¢void*å…·åŒ–
  template<> void ProcessPointer(char*) = delete; //é˜»æ­¢char*å…·åŒ–
```

##### ç¦æ­¢æ„é€ å‡½æ•°ç±»å‹è½¬æ¢explicit

1. èƒŒæ™¯ï¼šåœ¨ç±»çš„æ„é€ å‡½æ•°åªä¼ é€’**ä¸€ä¸ªæœ‰æ•ˆå‚æ•°(å•å‚æˆ–è€…å¤šå‚æ—¶åé¢éƒ½æœ‰é»˜è®¤å‚æ•°)æ—¶**ï¼ŒC++åœ¨ç¼–è¯‘æ—¶ä¼šé»˜è®¤å°†è¯¥æ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºè¯¥ç±»å¯¹è±¡ã€‚
2. `explicit`å¯ä»¥é˜»æ­¢æ„é€ å‡½æ•°çš„è¿™ç§è½¬æ¢ï¼Œé¿å…ä¸€äº›éš¾ä»¥å‘ç°çš„é”™è¯¯ã€‚

### æ„é€ å‡½æ•°

æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ä¼šåˆ†æˆ**ä¸¤ä¸ªé˜¶æ®µ**ï¼šåˆå§‹åŒ–é˜¶æ®µï¼ˆå˜é‡æˆ–è€…ç±»åœ¨å®šä¹‰å’Œåˆ†é…ç©ºé—´åçš„ç¬¬ä¸€æ¬¡èµ‹äºˆåˆå€¼å³ä¸ºåˆå§‹åŒ–ï¼ŒæŒ‰ç…§ç”³æ˜å’Œç»§æ‰¿çš„é¡ºåºåˆå§‹åŒ–ï¼‰å’Œèµ‹å€¼é˜¶æ®µï¼ˆæ„é€ å‡½æ•°ä½“å†…çš„éƒ¨åˆ†ï¼‰ã€‚

ç”±äº**`const` æˆå‘˜**æˆ–**å¼•ç”¨ç±»å‹**çš„æˆå‘˜åªæœ‰ä¸€æ¬¡èµ‹å€¼çš„æœºä¼šï¼Œæ‰€ä»¥ä»–ä»¬å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œåˆå§‹åŒ–ã€‚

### è‡ªå¢/å‡è¿ç®—ç¬¦é‡è½½

åç¼€å½¢å¼çš„è‡ªå¢/å‡é‡è½½æ¥å—ä¸€ä¸ªæ— ç”¨çš„`int` å½¢å‚æ¥ä¸å‰ç¼€å½¢å¼åŒºåˆ†

### [`inline`å‡½æ•°](https://www.cnblogs.com/fnlingnzb-learner/p/6423917.html)

æ™®é€šçš„`inline`å‡½æ•°æ²¡æœ‰å‡½æ•°åœ°å€ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å°†ä»£ç å±•å¼€æ›¿æ¢ã€‚åœ¨ç±»ä¸­å£°æ˜å¹¶å®šä¹‰çš„æ‰€æœ‰å‡½æ•°é»˜è®¤éƒ½æ˜¯å†…è”å‡½æ•°ï¼Œä½†å’Œ`rigister`å…³é”®å­—ä¸€æ ·ï¼Œ`inline`å¯¹äºç¼–è¯‘å™¨æ¥è¯´åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå¹¶ä¸å¼ºåˆ¶è¦æ±‚å°†å…¶åšå†…æ•›å±•å¼€ï¼Œäº‹å®ä¸Šï¼Œ**ç¼–è¯‘å™¨ä¼šæ‹’ç»å°†å¤æ‚çš„å‡½æ•°ä»¥åŠè™šå‡½æ•°è¿›è¡Œå†…è”å±•å¼€**ï¼Œæ‰€ä»¥`inline`å’Œ`virtual`å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šå¿½ç•¥`inline`è€Œä¿ç•™`virtual`ã€‚

#### æ³¨æ„äº‹é¡¹

1. å†…è”å‡½æ•°çš„å‡½æ•°ä½“å†…éƒ¨ä¸æ”¯æŒå¤æ‚çš„æ§åˆ¶é€»è¾‘ï¼Œå¦‚whileã€switchçš„ç»“æ„ä¼šè¢«ç¼–è¯‘å™¨æ‹’ç»inline
2. å†…è”å‡½æ•°ä¸èƒ½æ˜¯é€’å½’çš„å‡½æ•°
3. å»ºè®®inlineå‡½æ•°çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­(ç¼–è¯‘å™¨å¿…é¡»éšå¤„å¯è§å†…è”å‡½æ•°çš„å®šä¹‰)
4. å…³é”®å­—inline å¿…é¡»ä¸å‡½æ•°å®šä¹‰ä½“æ”¾åœ¨ä¸€èµ·æ‰èƒ½ä½¿å‡½æ•°æˆä¸ºå†…è”ï¼Œä»…å°†inline æ”¾åœ¨å‡½æ•°å£°æ˜å‰é¢ä¸èµ·ä»»ä½•ä½œç”¨ã€‚
5. è¦å½“å¿ƒæ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯èƒ½ä¼šéšè—ä¸€äº›è¡Œä¸ºï¼Œå¦‚â€œå·å·åœ°â€æ‰§è¡Œäº†åŸºç±»æˆ–æˆå‘˜å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚æ‰€ä»¥**ä¸è¦éšä¾¿åœ°å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„å®šä¹‰ä½“æ”¾åœ¨ç±»å£°æ˜ä¸­**ã€‚

## `friend`æˆå‘˜

é€šè¿‡`friend`å…³é”®å­—å¯ä»¥åœ¨ç±»çš„ç”³æ˜ä¸­å°†å…¶ä»–ç±»/å‡½æ•°ä½œä¸ºæœ¬ç±»çš„å‹å…ƒï¼Œæˆä¸ºå‹å…ƒçš„å‡½æ•°/ç±»å¯ä»¥**ä¸å—ç±»æƒé™æ§åˆ¶**è®¿é—®ç±»ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚**è¢«å‹å…ƒçš„ç±»ä¼šä½œä¸ºæ˜¾å¼å‚æ•°**ä¼ é€’åˆ°å‹å…ƒå‡½æ•°/ç±»ä¸­ï¼Œå› æ­¤**å‹å…ƒå‡½æ•°ä¸å«æœ‰`this`æŒ‡é’ˆ**ã€‚

`note`ï¼šå‹å…ƒå…³ç³»ä¸å…·æœ‰ç»§æ‰¿æ€§å’Œä¼ é€’æ€§ï¼Œ**å‹å…ƒçš„ç”³æ˜åªèƒ½åœ¨ç±»çš„ç”³æ˜ä¸­å®Œæˆ**ã€‚

## ç»§æ‰¿

### è™šå‡½æ•°

| ä¸å¯virtual  |                             åŸå›                              |
| :----------: | :----------------------------------------------------------: |
| `inline`å‡½æ•° |                     `inline`å‡½æ•°æ²¡æœ‰åœ°å€                     |
| `static`å‡½æ•° |                  `static`å‡½æ•°æ²¡æœ‰`this`æŒ‡é’ˆ                  |
| **æ„é€ å‡½æ•°** | å¯¹è±¡ä¸­çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆå’Œè™šå‡½æ•°è¡¨åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µï¼ˆç¼–è¯‘æœŸï¼‰åˆ†é… |

è™šå‡½æ•°éœ€è¦ä¾èµ–å¯¹è±¡ä¸­æŒ‡å‘ç±»çš„è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼ˆè¿™ä¸ªå·¥ä½œæ˜¯ç¼–è¯‘å™¨åšçš„ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ï¼‰ï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œè€Œæ­¤æ—¶è™šå‡½æ•°è¡¨æŒ‡é’ˆå¹¶æœªåˆå§‹åŒ–å®Œæˆï¼Œè¿™å°±ä¼šå¼•èµ·é”™è¯¯ã€‚ 

### é™åˆ¶ç»§æ‰¿`final`

+ ä½¿ç”¨æ–¹æ³•ï¼šå°†`final`å…³é”®å­—æ·»åŠ åˆ°å®šä¹‰ç±»æ—¶çš„ç±»çš„åç§°çš„åé¢
+ å½±å“ï¼šè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿

### ç»§æ‰¿ä¸‹çš„è®¿é—®æ§åˆ¶

+ å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æ§åˆ¶æƒé™ç”±çˆ¶ç±»æ§åˆ¶ï¼Œä¸‰ç§ç»§æ‰¿æ–¹å¼ä¸å½±å“å­ç±»å¯¹çˆ¶ç±»çš„è®¿é—®æƒé™ã€‚
+ ç»§æ‰¿æ–¹å¼æ˜¯ä¸ºäº†æ§åˆ¶å­ç±»çš„è°ƒç”¨æ–¹å¯¹çˆ¶ç±»çš„è®¿é—®ï¼Œä¸‰ç§ç»§æ‰¿ç›¸å½“äºå°†çˆ¶ç±»çš„publicå’Œprotectæˆå‘˜è®¿é—®æƒé™å˜ä¸ºç»§æ‰¿æ–¹å¼æ‰€æ ‡æ˜çš„æƒé™ã€‚çˆ¶ç±»çš„Privateæˆå‘˜åœ¨å­ç±»ä¸­å§‹ç»ˆä¸å¯è§

| çˆ¶ç±»æˆå‘˜\ç»§æ‰¿æ–¹å¼ |   Public   |  Protect   |  Private   |
| :---------------: | :--------: | :--------: | :--------: |
|      Public       |   Public   |  Protect   |  Private   |
|      Protect      |  Protect   |  Protect   |  Private   |
|      Private      | **ä¸å¯è§** | **ä¸å¯è§** | **ä¸å¯è§** |

### ç»§æ‰¿çš„å†…å®¹

|           çˆ¶ç±»           |       å­ç±»       |                    åŸå› /ä½¿ç”¨æ–¹æ³•                    |
| :----------------------: | :--------------: | :-------------------------------------------------: |
|     æ‰€æœ‰æ™®é€šæ•°æ®æˆå‘˜     |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
|         æ‰€æœ‰æ¥å£         |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
|       é™æ€æ•°æ®æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |   åŸºç±»åŠæ‰€æœ‰å­ç±»å…±ç”¨åŸºç±»çš„åŒä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ç©ºé—´    |
|       é™æ€å‡½æ•°æˆå‘˜       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |    staticå‡½æ•°å®é™…ä¸Šæ˜¯â€œåŠ ä¸Šäº†è®¿é—®æ§åˆ¶çš„å…¨å±€å‡½æ•°â€     |
|       å‹å…ƒå‡½æ•°/ç±»        |      ä¸ç»§æ‰¿      |                   é‡å†™å…¥ç±»çš„å‹å…ƒ                    |
|      æ™®é€šè¿ç®—ç¬¦é‡è½½      |       ç»§æ‰¿       |                å—è®¿é—®æ§åˆ¶çš„ç›´æ¥ä½¿ç”¨                 |
| =é‡è½½ï¼šæ‹·è´/ç§»åŠ¨èµ‹å€¼å‡½æ•° | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |          `using BaseClassName::operator=;`          |
|         æˆå‘˜å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** | `using BaseClassName::function_name;`ï¼Œå¯ä»¥é¿å…éšè— |
|       æ‰€æœ‰æ„é€ å‡½æ•°       | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |        `using BaseClassName::BaseClassName;`        |
|         ææ„å‡½æ•°         | **ä¸ç»§æ‰¿ä½†å¯ç”¨** |                   ææ„æ—¶è‡ªåŠ¨è°ƒç”¨                    |

```cpp
class Base{
    static int global;
public:
    Base& operator=(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    Base& operator+(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    Base& common_function(int a){cout << "Base::" << __FUNCTION__ << endl; return *this;}
    static void static_function(){cout << "Global::" << __FUNCTION__ << "> <global=" << global << endl;}
};

class Derive : public Base{
    public:
        using Base::operator=;
        using Base::common_function;
        Derive& common_function(double a){cout << "Derive::" << __FUNCTION__ << endl; return *this;}
};

int Base::global = 12;

int main(){
    Derive derive;
    derive.common_function(0.1).common_function(0);
    derive.operator+(1);
    derive.operator=(2);
    Derive::static_function();
    Base::static_function();
    return 0;
}
/*è¾“å‡º
Derive::common_function
Base::common_function
Base::operator+
Base::operator=
Globalstatic_function> <global=12
Globalstatic_function> <global=12
*/
```

##### ç»§æ‰¿é™¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½

+ C++çš„ç±»ä¼šé»˜è®¤ç”Ÿæˆè‡ªå·±çš„æ‹·è´èµ‹å€¼å‡½æ•°(`operator =()`)ï¼Œæ­¤æ—¶çˆ¶ç±»çš„æ‹·è´èµ‹å€¼è¿ç®—ç¬¦å°±è¢«è¦†ç›–éšè—äº†ï¼Œæ­¤æ—¶çˆ¶ç±»çš„æ‹·è´èµ‹å€¼å‡½æ•°ä¹Ÿå°±ä¸è¢«ç»§æ‰¿ã€‚

##### [ç»§æ‰¿æ„é€ å‡½æ•°](https://www.cnblogs.com/5iedu/p/11291124.html)

1. ä¸€æ—¦ä½¿ç”¨usingæ¥å£°æ˜ç»§æ‰¿åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±**ä¸å†ä¸ºæ´¾ç”Ÿç±»ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°**ã€‚
2. ç»§æ‰¿æ„é€ å‡½æ•°åªä¼šåˆå§‹åŒ–åŸºç±»ä¸­çš„æˆå‘˜å˜é‡ï¼Œå¯¹äºæ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å˜é‡åˆ™éœ€ç”±æ´¾ç”Ÿç±»è‡ªè¡Œåˆå§‹åŒ–ï¼ˆå¦‚â€œå°±åœ°åˆå§‹åŒ–â€ã€åˆå§‹åŒ–åˆ—è¡¨ç­‰ï¼‰
3. å¯¹äºç»§æ‰¿æ„é€ å‡½æ•°æ¥è¯´ï¼Œåƒæ•°çš„é»˜è®¤å€¼æ˜¯ä¸ä¼šè¢«ç»§æ‰¿çš„????ã€‚å¹¶ä¸”åŸºç±»æ„é€ å‡½æ•°çš„é»˜è®¤å€¼ä¼šå¯¼è‡´åŸºç±»äº§ç”Ÿå¤šä¸ªæ„é€ å‡½æ•°ç‰ˆæœ¬å·ï¼ˆå³ä»é»˜è®¤åƒæ•°å¼€å§‹å‰é¢å‡é»˜è®¤å‚æ•°ï¼Œç›´åˆ°åŒ…æ‹¬æ— é»˜è®¤å‚æ•°çš„æ„é€ å‡½æ•°ï¼‰ï¼Œè¿™äº›å‡½æ•°ç‰ˆæœ¬å·éƒ½ä¼šè¢«æ´¾ç”Ÿç±»ç»§æ‰¿ã€‚
4. å½“æ´¾ç”Ÿç±»æ‹¥æœ‰å¤šä¸ªåŸºç±»æ—¶ï¼Œå¤šä¸ªåŸºç±»ä¸­çš„åŒå‚çš„æ„é€ å‡½æ•°ä¼šå¯¼è‡´æ´¾ç”Ÿç±»ä¸­çš„ç»§æ‰¿æ„é€ å‡½æ•°çš„å‡½æ•°åå†²çªã€‚å¯¹æ­¤å¯ä»¥å†æ´¾ç”Ÿç±»ä¸­æ˜¾å¼ç”³æ˜è‡ªå·±æ„é€ å‡½æ•°ï¼Œå…¶å‚æ•°å’ŒåŸºç±»é—´å†²çªçš„æ„é€ å‡½æ•°çš„å‚æ•°ç›¸åŒã€‚
5. å¦‚æœåŸºç±»çš„æ„é€ å‡½æ•°è¢«å£°æ˜ä¸º**ç§æœ‰æ„é€ å‡½æ•°**æˆ–è€…æ´¾ç”Ÿç±»æ˜¯ä»åŸºç±»**è™šç»§æ‰¿**çš„ï¼Œé‚£ä¹ˆå°±ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­å£°æ˜ç»§æ‰¿æ„é€ å‡½æ•°ã€‚
6. C++11ä¸­ç»§æ‰¿æ„é€ å‡½æ•°ä¸æ´¾ç”Ÿç±»çš„å„ç§ç±»é»˜è®¤å‡½æ•°ä¸€æ ·ï¼Œæ˜¯éšå¼å£°æ˜çš„ã€‚å³å¦‚æœä¸€ä¸ªç»§æ‰¿æ„é€ å‡½æ•°ä¸è¢«ç›¸å…³ä»£ç ä½¿ç”¨ï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶äº§ç”ŸçœŸæ­£çš„å‡½æ•°ä»£ç ã€‚è¿™æ¯”æ˜¾å¼å£°æ˜å‡½æ•°æ›´åŠ èŠ‚çœç›®æ ‡ä»£ç ç©ºé—´ã€‚

```cpp
#include <iostream>
using namespace std;

class Base1{
public:
//   Base1() { cout << "Base1::" << __FUNCTION__ << " void " << endl; }
    explicit Base1(char first) { cout << "Base1::" << __FUNCTION__ << " char " <<endl; }
    explicit Base1(char* first, double second = 2.0, double third = 3.0, double forth = 4.0){ cout << "Base1::" << __FUNCTION__ << " char*, double=, double=, double= " <<endl; }
    explicit Base1 (string zero = string("")){ cout << "Base1::" << __FUNCTION__ <<" string= "  << endl;}
    Base1(char first, int second){ cout << "Base1::" << __FUNCTION__ << " char, int " <<endl; }
    Base1(char first, double second){ cout << "Base1::" << __FUNCTION__ << " char, double " <<endl; }
    Base1(int zero, char* first, double second = 2.0, double third = 3.0, double forth = 4.0){ cout << "Base1::" << __FUNCTION__ << " int, char*, double=, double=, double= " <<endl; }
};


class Derive: public Base1{
private:
   int d{ 0 }; //å°±ä¼šåˆå§‹åŒ–æ´¾ç”Ÿç±»æˆå‘˜
public:
    using Base1::Base1;  //ç»§æ‰¿æ„é€ å‡½æ•°
};


class Base2{
public:
    Base2(){cout << "Base2::" << __FUNCTION__ <<endl;}
    Base2(char first) { cout << "Base2::" << __FUNCTION__ << " char " <<endl; }
};

class Derive12: public Base1, Base2{
private:
   int d{ 0 }; //å°±ä¼šåˆå§‹åŒ–æ´¾ç”Ÿç±»æˆå‘˜
public:
    using Base1::Base1;  //ç»§æ‰¿æ„é€ å‡½æ•°
    using Base2::Base2;  //ç»§æ‰¿æ„é€ å‡½æ•°
    Derive12(){cout << "Derive12::" << __FUNCTION__  <<endl;}                   //æ¶ˆé™¤äºŒä¹‰æ€§
    Derive12(char x){cout << "Derive12::" << __FUNCTION__ << " char " <<endl;}  //æ¶ˆé™¤äºŒä¹‰æ€§

};

int main(){
    Derive d0,                          //Base1::Base1 string=
           d1(string("hello")),         //Base1::Base1 string=
           d2(-1, nullptr),             //Base1::Base1 int, char*, double=, double=, double=
           d3('0',1),                   //Base1::Base1 char, int
           d4('0', 1.0),                //Base1::Base1 char, double
           d5(0, nullptr, 1.0, 2.0),    //Base1::Base1 int, char*, double=, double=, double=
           d6(nullptr),                 //Base1::Base1 char*, double=, double=, double=
           d7('c');                     //Base1::Base1 char
    Derive12 e0,                        //Base1::Base1 string=
                                        //Base2::Base2
                                        //Derive12::Derive12
             e1('x');                   //Base1::Base1 string=
                                        //Base2::Base2
                                        //Derive12::Derive12 char
    return 0;
}
```

### è™šç»§æ‰¿

* è§£å†³ä»ä¸åŒé€”å¾„ç»§æ‰¿æ¥çš„åŒä¸€åŸºç±»ï¼Œä¼šåœ¨å­ç±»ä¸­å­˜åœ¨å¤šä»½æ‹·è´çš„é—®é¢˜ï¼Œé¿å…æµªè´¹å­˜å‚¨ç©ºé—´å’ŒäºŒä¹‰æ€§é—®é¢˜ï¼Œå¯¹åŸæœ¬å†—ä½™çš„æ•°æ®æˆå‘˜ä¹Ÿåªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚

#### [å®ç°åŸç†](https://blog.csdn.net/qq_44777506/article/details/104320649)

* è™šç»§æ‰¿åº•å±‚å®ç°åŸç†ä¸ç¼–è¯‘å™¨ç›¸å…³ï¼Œä¸€èˆ¬é€šè¿‡è™šåŸºç±»æŒ‡é’ˆå’Œè™šåŸºç±»è¡¨å®ç°ã€‚
* æ¯ä¸ªè™šç»§æ‰¿çš„å­ç±»éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šåŸºç±»è¡¨çš„è™šåŸºç±»è¡¨æŒ‡é’ˆ`vbptr`ï¼Œé€šè¿‡è™šåŸºç±»è¡¨çš„åç§»åœ°å€**ä¸åŒçš„ç»§æ‰¿è·¯å¾„æœ€ç»ˆä¼šè®¿é—®åˆ°åŒä¸€ä¸ªè™šåŸºç±»æˆå‘˜**
* å½“è™šç»§æ‰¿çš„ç±»è¢«å½“åšçˆ¶ç±»ç»§æ‰¿æ—¶ï¼Œè™šåŸºç±»æŒ‡é’ˆä¹Ÿä¼šè¢«ç»§æ‰¿ï¼Œä¸”æœ€ç»ˆçš„å­ç±»ä¸­çš„**è™šåŸºç±»è¡¨æŒ‡é’ˆçš„ä¸ªæ•°å’Œå®ƒæ‰€ç»§æ‰¿çš„è™šç»§æ‰¿çš„ç±»çš„ä¸ªæ•°ç›¸åŒ**ã€‚

##### [è™šåŸºç±»è¡¨](https://www.cnblogs.com/fanzhidongyzby/archive/2013/01/14/2859064.html)

å­˜å‚¨**åœ¨`.rodate`æ®µå†…**ã€ä¸å ç”¨ç±»å¯¹è±¡çš„å­˜å‚¨ç©ºé—´ã€‚æ¯ä¸ªè¡¨é¡¹ç›®**è®°å½•äº†æ¯ä¸ªè™šåŸºç±»çš„æ•°æ®ç›¸å¯¹æ´¾ç”Ÿç±»èµ·å§‹åœ°å€çš„åç§»é‡**ï¼Œé€šè¿‡åç§»åœ°å€å°±å¯ä»¥åœ¨æ´¾ç”Ÿç±»çš„å†…å­˜ç©ºé—´é‡Œæ‰¾åˆ°åŸºç±»æˆå‘˜

```cpp
// 64bit OS
class Myclass{int var;};						//4
class MyclassA :virtual public Myclass{int varA;};		//16=8+4+4
class MyclassB :virtual public Myclass{int varB;};		//16=8+4+4
class MyclassC :public MyclassB, public MyclassA{int varC;};	//40=8+4+(4)+8+4+(4)+8+4
/*
         0 | class MyclassC
         0 |   class MyclassB (primary base)
         0 |     (MyclassB vtable pointer)
         8 |     int varB
        16 |   class MyclassA (base)
        16 |     (MyclassA vtable pointer)
        24 |     int varA
        28 |   int varC
        32 |   class Myclass (virtual base)
        32 |     int var
           | [sizeof=40, dsize=36, align=8, nvsize=32, nvalign=8]
*/

// 64bit OS
class Myclass{int var; virtual void fun();};//16=8+4+(4)
void MyClass fun(){};
class MyclassA :virtual public Myclass{int varA;};//32=8+4+(4)+8+4+(4)
class MyclassB :virtual public Myclass{int varB;};//32=8+4+(4)+8+4+(4)
class MyclassC :public MyclassB, public MyclassA{int varC;};//40=8+4+(4)+8+4+4+8
/*
         0 | class MyclassC
         0 |   class MyclassB (primary base)
         0 |     (MyclassB vtable pointer)
         8 |     int varB
        16 |   class MyclassA (base)
        16 |     (MyclassA vtable pointer)
        24 |     int varA
        28 |   int varC
        32 |   class Myclass (virtual base)
        32 |     (Myclass vtable pointer)
        40 |     int var
           | [sizeof=48, dsize=44, align=8, nvsize=32, nvalign=8]
*/
```

![](img/lang/virtual_inherit.jpg)

==æ­¤å¤„è¿˜éœ€å¯¹å›¾è¡¨è¿›è¡Œè¯´æ˜==

#### NOTE

1. åœ¨ç»§æ‰¿é“¾é¡¶éƒ¨è¢«è™šç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºè™šåŸºç±»
2. è™šæ´¾ç”Ÿåªå½±å“ä»æŒ‡å®šäº†è™šåŸºç±»çš„æ´¾ç”Ÿç±»ä¸­è¿›ä¸€æ­¥æ´¾ç”Ÿå‡ºæ¥çš„ç±»ï¼Œå®ƒ**ä¸å½±å“æ´¾ç”Ÿç±»æœ¬èº«**ã€‚
3. èƒ½ç”¨å•ä¸€ç»§æ‰¿è§£å†³çš„é—®é¢˜å°±ä¸è¦ä½¿ç”¨å¤šç»§æ‰¿
4. åœ¨ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­åŒæ—¶å‡ºç°å¯¹è™šåŸºç±»å’Œéè™šåŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶ï¼Œè™šåŸºç±»çš„æ„é€ å‡½æ•°å…ˆäºéè™šåŸºç±»çš„æ„é€ å‡½æ•°æ‰§è¡Œã€‚

# å‡½æ•°ä¸è¿ç®—ç¬¦

C++è¿ç®—ç¬¦åŒ…å«`sizeofã€newã€delete`ä¸‰ç§ï¼Œä»–ä»¬éƒ½ä»¥å…³é”®å­—çš„å½¢å¼å­˜åœ¨ï¼Œæ˜¯è¯­è¨€è‡ªèº«çš„ç‰¹æ€§ï¼Œå®ƒ**æœ‰å›ºå®šçš„è¯­ä¹‰**ï¼ˆæ‰€ä»¥`newã€delete`**ä¸èƒ½è¿›è¡Œé‡è½½**ï¼‰ï¼Œç¼–è¯‘å™¨è´Ÿè´£è§£é‡Šè¯­ä¹‰ç”Ÿæˆç›¸åº”çš„ä»£ç ï¼Œå…¶å®ç°å’Œè¯­ä¹‰ä¾èµ–äºè¯­è¨€è€Œ**ä¸ä¾èµ–å‡½æ•°åº“**ã€‚

## `sizeof`

`sizeof`å¯ä»¥æ±‚**é™¤`void`å¤–**æ‰€æœ‰ç±»å‹çš„å¤§å°ï¼Œç¡®å®šé™æ€åˆ†é…çš„æ•°ç»„çš„å¤§å°ï¼Œ**å½“è¡¨è¾¾å¼æˆ–è€…å‡½æ•°è°ƒç”¨åšæ“ä½œæ•°æ—¶**ï¼Œ`sizeof`è®¡ç®—è¡¨è¾¾å¼çš„å€¼/å‡½æ•°è¿”å›å€¼çš„ç±»å‹çš„å¤§å°ä½†**ä¸å¯¹è¡¨è¾¾å¼æ±‚å€¼/ä¸æ‰§è¡Œå‡½æ•°ä½“**ã€‚

```c
int  num1 = 1, num2 = 2;
int  n1 = sizeof(num1 + num2);
int  n2 = sizeof(num1 += num2);
printf("%d %d %d %d\n",num1, num2, n1, n2);//1 2 3 4
```

# ç±»å‹æ£€æŸ¥ä¸è½¬æ¢

## ç±»å‹å¯¹æ¯”

### `std::is_same<>`

åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œåˆ¤æ–­ç»“æœä¸º`std::is_same<Type1, Type2>::value`ã€‚è¯¥åˆ¤æ–­çš„æ ‡å‡†ä¸­å°†å¸¦`cv`é™å®šç¬¦æˆ–å¼•ç”¨çš„ç±»å‹å’Œä¸å¸¦è¿™äº›æ ‡è¯†çš„ç±»å‹è§†ä½œä¸åŒçš„ç±»å‹ã€‚

#### [`std::decay`ç±»å‹é€€åŒ–](https://zh.cppreference.com/w/cpp/types/decay)

å°†åŸå§‹ç±»å‹ä¸­çš„`cv`é™å®šç¬¦æˆ–å¼•ç”¨æ ‡è¯†å»æ‰ä½†**ä¸æ”¯æŒå¯¹æŒ‡é’ˆçš„é€€åŒ–**ï¼ˆ`decay`çš„å®ç°ä¸­æ²¡æœ‰`remove_pointer`ï¼‰ï¼Œä¾‹å¦‚æŠŠ`cosnt int&`é€€åŒ–ä¸º`int`ã€‚

## `std::common_type`

`std::common_type<Type1, Type2>::type`å¯ä»¥äº§ç”Ÿå¹¶è·å¾—`Type1`å’Œ`type2`çš„å…±åŒç±»å‹ã€‚

## ç±»å‹è½¬æ¢

### ä¼ ç»Ÿç±»å‹è½¬æ¢

+ å³Cé£æ ¼çš„ç±»å‹è½¬æ¢å¯èƒ½å¸¦æ¥ä¸€äº›éšæ‚£ï¼Œè®©ä¸€äº›é—®é¢˜éš¾ä»¥å¯Ÿè§‰.
+ åœ¨ç±»æ¨¡å‹ä¸­æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°ä¼ ç»Ÿçš„ç±»å‹è½¬æ¢æ–¹å¼ï¼Œä¾‹å¦‚é‡è½½`operator T`å‡½æ•°å®ç°ç±»å‘ç±»`T`çš„è½¬æ¢ã€‚

#### éšå¼ç±»å‹è½¬æ¢

ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼Œä¸€èˆ¬åªä½œç”¨åˆ°åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°†å°å†…å­˜çš„ç±»å‹å‘å¤§å†…å­˜æˆ–ç›¸åŒå†…å­˜å¤§å°çš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯å…¶ç»“æœé€šå¸¸æ˜¯ä¸å¯é¢„æœŸçš„ã€‚

#### æ˜¾å¼/å¼ºåˆ¶ç±»å‹è½¬æ¢

æ˜¾å¼è¦æ±‚ç¼–è¯‘å™¨è¦è½¬æ¢çš„ç›®æ ‡ç±»å‹

### æ ‡å‡†ç±»å‹è½¬æ¢

ä½¿ç”¨æ–°çš„è½¬æ¢å‡½æ•°å¯ä»¥æ¸…æ¥šçš„ç†è§£è½¬æ¢çš„å…·ä½“å«ä¹‰ï¼Œä¸”æ”¯æŒä¸€å®šç¨‹åº¦çš„å®‰å…¨æ£€æŸ¥

#### [`static_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/31/cpp_cast_operator_part4.html)

ç”¨äº**æœ‰ä¸€å®šå…³ç³»**çš„å¯¹è±¡ï¼ˆåŒ…å«åŸºç¡€æ•°æ®ï¼‰çš„æŒ‡é’ˆ/å¼•ç”¨ä¹‹é—´ã€‚æ‰€è°“å…³ç³»**åœ¨æŒ‡é’ˆå’Œå¼•ç”¨ä¸Šé€šå¸¸æŒ‡ç»§æ‰¿å…³ç³»**ï¼ˆä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©ï¼‰ï¼Œ**åœ¨å¯¹è±¡é—´é€šå¸¸æŒ‰ç…§å…ˆæ„é€ å‡½æ•°åç±»å‹è½¬æ¢è¿ç®—ç¬¦(`operator TYPE`)çš„é¡ºåºè½¬æ¢**ã€‚ä¹Ÿå¯ä»¥å®ç°C++ä¸­**å†…ç½®åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´**çš„ç›¸äº’è½¬æ¢ã€‚

#### [`const_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/22/cpp_cast_operator_part2.html)

ç”¨äº**å»é™¤æŒ‡é’ˆ/å¼•ç”¨çš„`const/volatile`é™å®šç¬¦**ï¼Œè½¬æ¢å‰å**æ•°æ®çš„æœ€ç»ˆæŒ‡å‘å¹¶ä¸ä¼šæ”¹å˜**ã€‚ä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥å¯¹åŸå¯¹è±¡ä¿®æ”¹ï¼ˆå–å†³äºæºå¯¹è±¡çš„é™å®šç¬¦ï¼‰ã€‚åŠ `const`ç”±`static_cast<>()`å®Œæˆã€‚`const_cast`åŸºäºC++å¯¹äºæŒ‡é’ˆçš„è½¬æ¢æ˜¯ä»»æ„çš„ï¼Œä»»ä½•æŒ‡é’ˆä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œäº’ç›¸è½¬æ¢ï¼Œå› æ­¤`const_cast`å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ˜¾ç¤ºè½¬æ¢æ¥ä»£æ›¿ã€‚

#### [`reinterpret_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)

`reinterpret_cast`è¿ç®—ç¬¦æ˜¯ç”¨æ¥å¤„ç†æ— å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼›å®ƒä¼šäº§ç”Ÿä¸€ä¸ªä¸åŸå§‹å‚æ•°ï¼ˆ`expressoin`ï¼‰æœ‰å®Œå…¨ç›¸åŒçš„æ¯”ç‰¹ä½çš„æ–°å€¼ã€‚`reinterpret_cast`è™½ç„¶çœ‹ä¼¼å¼ºå¤§ï¼Œä½œç”¨å´æ²¡æœ‰é‚£ä¹ˆå¹¿ï¼Œé”™è¯¯çš„ä½¿ç”¨`reinterpret_cast`å¾ˆå®¹æ˜“å¯¼è‡´ç¨‹åºçš„ä¸å®‰å…¨ï¼Œ**åªæœ‰å°†è½¬æ¢åçš„ç±»å‹å€¼è½¬æ¢å›åˆ°å…¶åŸå§‹ç±»å‹**ï¼Œè¿™æ ·æ‰æ˜¯æ­£ç¡®ä½¿ç”¨`reinterpret_cast`æ–¹å¼ã€‚

[IBMçš„C++æŒ‡å—](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/language_ref/keyword_reinterpret_cast.htm)æ¨èä»¥ä¸‹å‡ ç§è½¬æ¢æ–¹å¼ï¼šæ•´å‹->æŒ‡é’ˆ->å¤§æ•´å‹ï¼ˆå¤§å°ä¸å°äºæŒ‡é’ˆï¼‰ã€ä»»æ„å¯¹è±¡æŒ‡é’ˆã€å¯¹è±¡å¼•ç”¨ã€å‡½æ•°æŒ‡é’ˆã€ç±»æˆå‘˜å‡½æ•°æŒ‡é’ˆã€ç±»æ•°æ®æˆå‘˜æŒ‡é’ˆä¹‹é—´çš„è½¬æ¢

#### [`dynamic_cast<type-id>(expression)`](https://www.cnblogs.com/ider/archive/2011/07/30/cpp_cast_operator_part3.html)

åªæ¥å—åŸºäºç±»å¯¹è±¡çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„ç±»è½¬æ¢ï¼Œä¸”è¦æ±‚æºå’Œç›®æ ‡çš„ç±»å‹å…·**æœ‰ç»§æ‰¿å…³ç³»**ã€‚ä¸”è¯¥è½¬æ¢çš„å®ç°ä¾èµ–è™šå‡½æ•°è¡¨ï¼Œéœ€è¦æœ‰`RTTI`æ”¯æŒã€‚

### å»ºè®®

|   ä¼ ç»Ÿè½¬æ¢   |     `static_cast`      |  `const_cast`  |      `daynamic_cast`      | `reinterpreter_cast` |
| :----------: | :--------------------: | :------------: | :-----------------------: | :------------------: |
| **ä½¿ç”¨å¯¹è±¡** |       æœ‰ä¸€å®šå…³ç³»       |   æŒ‡é’ˆ/å¼•ç”¨    | åŒä¸€ç»§æ‰¿ä½“ç³»ä¸‹çš„æŒ‡é’ˆ/å¼•ç”¨ |       ä»»æ„æŒ‡é’ˆ       |
| **ç±»å‹è¦æ±‚** |       åŸºæœ¬ç±»å‹é—´       |   **å»**`cv`   |         å¤šæ€ç±»é—´          | ä¸åŒç±»å‹çš„æŒ‡é’ˆ/å¼•ç”¨  |
|   **å¤‡æ³¨**   | **ä¸Šè½¬å®‰å…¨ï¼Œä¸‹è½¬å±é™©** |                |       éœ€`RTTI`æ”¯æŒ        |   æ”¯æŒé€†è½¬æ¢æ‰å®‰å…¨   |
|  **è¿”å›å€¼**  |     ç­‰äºæ—§å€¼çš„å³å€¼     | æŒ‡å‘æ—§å€¼çš„å³å€¼ |                           |   æ¯æ¯”ç‰¹ç›¸ç­‰çš„å³å€¼   |

+ `static_cast`å’Œ`reinterpret_cast`è¿ç®—ç¬¦è¦ä¹ˆç›´æ¥è¢«ç¼–è¯‘å™¨æ‹’ç»è¿›è¡Œè½¬æ¢ï¼Œè¦ä¹ˆå°±ä¸€å®šä¼šå¾—åˆ°ç›¸åº”çš„ç›®æ ‡ç±»å‹çš„å€¼ã€‚
+ `dynamic_cast`ä¼šå…ˆè¿›è¡Œåˆ¤åˆ«ï¼Œç¡®å®šæºæŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹æ˜¯å¦çœŸçš„åˆé€‚è¢«ç›®æ ‡æŒ‡é’ˆæ¥å—ã€‚å¦‚æœæ˜¯å¦å®šçš„ï¼Œé‚£ä¹ˆ`dynamic_cas`tåˆ™ä¼šè¿”å›`null`ã€‚è¿™æ˜¯é€šè¿‡æ£€æŸ¥**è¿è¡ŒæœŸç±»å‹ä¿¡æ¯**ï¼ˆRuntime type informationï¼ŒRTTIï¼‰æ¥åˆ¤å®šçš„ï¼Œå®ƒè¿˜å—åˆ°ç¼–è¯‘å™¨çš„å½±å“ï¼Œæœ‰äº›ç¼–è¯‘å™¨éœ€è¦è®¾ç½®å¼€å¯æ‰èƒ½è®©ç¨‹åºæ­£ç¡®è¿è¡Œã€‚
+ `const_cast<>`ä¸é€‚ç”¨äºè¿­ä»£å™¨çš„è½¬æ¢ã€‚å› ä¸ºå…¶åªæ˜¯ç”¨äºå»æ‰ç±»å‹å‰çš„é™å®šç¬¦ï¼Œè€Œ`const_iterator`å’Œ`iterator`æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»ï¼Œå…¶è½¬æ¢å¯ä»¥å€ŸåŠ©`void advance(ï¼Œint distance())`çš„å‡½æ•°ç»„åˆã€‚

# å…³é”®å­—è¡¥å……è¯´æ˜

## cvé™å®šç¬¦

### [`const`](https://blog.csdn.net/qfturauyls/article/details/110408027)

|  å¸¸é‡æ€§è´¨  |        ç‰¹ç‚¹         |             è¡¥å……             |
| :--------: | :-----------------: | :--------------------------: |
| ç‰©ç†å¸¸é‡æ€§ | æ¯ä¸ª`bit`éƒ½ä¸å¯æ”¹å˜ |   æŸäº›ä¿®æ”¹ä¼šè¿èƒŒé€»è¾‘å¸¸é‡æ€§   |
| é€»è¾‘å¸¸é‡æ€§ | å¯¹è±¡çš„è¡¨ç°ä¿æŒä¸å˜  | å…è®¸æ”¹å˜å¯¹è±¡ä¸­å¤–éƒ¨ä¸å¯è§çš„åŸŸ |

C++ä¸­é‡‡ç”¨çš„æ˜¯**ç‰©ç†å¸¸é‡æ€§**ï¼Œå®ƒ**é€šè¿‡ç¼–è¯‘å™¨æ¥ä¿è¯å¯¹è±¡çš„å¸¸é‡æ€§**ï¼Œå¼ºåˆ¶ç¼–è¯‘å™¨é˜»æ­¢é™¤åˆå§‹åŒ–èµ‹å€¼ï¼ˆå¯åœ¨ç¼–è¯‘æœŸä¹Ÿ**å¯åœ¨è¿è¡Œæ—¶åˆå§‹åŒ–**ï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ‹å€¼è¡Œä¸ºã€‚è¢«`const`ä¿®é¥°çš„å˜é‡çš„å¯è§èŒƒå›´ä¸ºé»˜è®¤ä¸º**æ–‡ä»¶ä½œç”¨åŸŸ**ï¼ŒåŠ ä¸Š`extern`å…³é”®å­—å¯ä»¥æ‰©å±•å…¶ä½œç”¨åŸŸã€‚

#### `mutable`

é€šè¿‡`mutable`å…³é”®å­—å¯ä»¥ä½¿`const`ä¿®é¥°çš„å˜é‡æ”¯æŒä¸€å®šçš„é€»è¾‘å¸¸é‡æ€§ã€‚

#### `const`ä¿®é¥°æŒ‡é’ˆä¸å¼•ç”¨

`const`ä¿®é¥°å¼•ç”¨æ—¶ï¼Œå…¶æ„ä¹‰ä¸ä¿®é¥°å˜é‡ç›¸åŒã€‚ä¿®é¥°æŒ‡é’ˆæ—¶å¯ä»¥å°†æ•´ä¸ªç±»å‹ç”³æ˜**æŒ‰å˜é‡åå·¦è¾¹æœ€è¿‘çš„*åˆ†æˆä¸¤éƒ¨åˆ†**ï¼Œ**å³è¾¹è¡¨ç¤ºæŒ‡é’ˆå˜é‡çš„æ€§è´¨ï¼Œå·¦è¾¹è¡¨ç¤ºå®ƒæŒ‡å‘å…ƒç´ çš„æ€§è´¨**ã€‚

#### `const`ä¿®é¥°å‡½æ•°

å½“**ä¿®é¥°ç±»çš„éé™æ€æˆå‘˜å‡½æ•°**ä¿è¯è¯¥å‡½æ•°æ‰€å¯¹åº”çš„å¯¹è±¡æœ¬èº«çš„`const`æ€§ã€‚åœ¨`const`æˆå‘˜å‡½æ•°ä¸­ï¼Œæ‰€æœ‰å¯èƒ½è¿èƒŒ`this`æŒ‡é’ˆï¼ˆæ­¤æ—¶ç­‰åŒäº**`const Type * const this`**ï¼‰ç±»å‹ç‰¹ç‚¹çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆèµ‹å€¼ã€å¯¹é`const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ã€å¯¹æˆå‘˜çš„é`const`æˆå‘˜å‡½æ•°çš„è°ƒç”¨ï¼Œå¯¹é`mutable`æˆå‘˜çš„ä¿®æ”¹ï¼‰ã€‚ä½†**å¯¹å£°æ˜ä¸º`mutable`çš„æˆå‘˜å˜é‡æ‰€åšçš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«é˜»æ­¢**ã€‚

**`const`ä¿®é¥°å‡½æ•°æ—¶è¿˜ä¼šå‚ä¸åˆ°å‡½æ•°çš„é‡è½½ä¸­**ï¼Œå³é€šè¿‡`const`å¯¹è±¡ã€`const`æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨`const`æ–¹æ³•ï¼Œ**å½“æ²¡æœ‰ä¸€èˆ¬æˆå‘˜å‡½æ•°æ—¶ï¼Œé`const`å¯¹è±¡/å¼•ç”¨/æŒ‡é’ˆä¹Ÿä¼šè°ƒç”¨`const`æˆå‘˜æ–¹æ³•ã€‚**

**é‡è½½åŸå› **ï¼ˆä¸ªäººæ¨æµ‹ï¼‰ï¼šç±»æˆå‘˜å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è‡ªåŠ¨åŠ å…¥`this`æŒ‡é’ˆå‚æ•°ï¼Œå¦‚å‰æ–‡æ‰€è¿°ï¼Œconstæˆå‘˜å‡½æ•°ä¼ é€’è¿‡æ¥çš„`this`æŒ‡é’ˆçš„ç±»å‹æ˜¯å¸¦æœ‰`const`é™å®šçš„ï¼Œæ­¤æ—¶ä¸¤ç§å‡½æ•°çš„å‡½æ•°ç­¾åä¹Ÿå°±æ˜¯ä¸åŒçš„ã€‚

#### `const`ä¸`static`

`const`ï¼šç±»ä¸­çš„**å¸¸é‡å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰`static`å±æ€§æ—¶é™¤å¤–**ï¼‰ã€‚

`static`ï¼šç±»ä¸­çš„**é™æ€å˜é‡å¿…é¡»åœ¨ç±»å¤–è¿›è¡Œåˆå§‹åŒ–**ï¼ˆå½“**æœ‰`const`å±æ€§ä¸”ä¸ºåŸºæœ¬æ•´æ•°ç±»å‹æ—¶é™¤å¤–**ï¼Œæ­¤æ—¶ä¸ºå°±åœ°åˆå§‹åŒ–ï¼‰ã€‚å¦‚æœå°±åœ°åˆå§‹åŒ–ååœ¨ä»£ç ä¸­éœ€è¦åšå–å€¼ä¹‹å¤–çš„æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦åœ¨ç±»å¤–ç»™å®ƒæä¾›ä¸€ä¸ªå®šä¹‰ï¼ˆä¸éœ€è¦åˆå§‹å€¼ï¼‰ã€‚

```c++
class Test{
    const static int x = 0;//ok
    const static char y = '0';//ok
    const static float z = 3.14;//error ä¸æ˜¯åŸºæœ¬æ•´æ•°ç±»å‹
    constexpr float a = 3.14;//error,constç±»å‹å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨
    static constexpr float b = 3.14;//ok
    const static string c = string("hello");//error
};

Test test;
const char* py = &test.y;//error:undefined reference to `Test::y',éœ€è¦åœ¨ç±»å¤–æä¾›å®šä¹‰
```

## `CPP14: constexpr `

ä¸ºäº†è§£å†³`const`å…·æœ‰çš„åªè¯»å’Œå¸¸é‡çš„åŒé‡è¯­ä¹‰é€ æˆçš„æ­§ä¹‰é—®é¢˜ï¼ŒC++11å¼•å…¥äº†**`constexpr`ï¼ˆéšå«äº†`const`å±æ€§ï¼‰ä»£è¡¨å¸¸é‡è¡¨è¾¾å¼**ï¼ˆå€¼ä¸ä¼šæ”¹å˜ä¸”åœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å¾—åˆ°ç»“æœçš„è¡¨è¾¾å¼ï¼‰ï¼Œè€Œç”¨**`const`ä»£è¡¨åªè¯»å˜é‡**ã€‚

### å¸¸é‡ä¸åªè¯»

**å¸¸é‡ä¸€å®šåªè¯»**ï¼šå¸¸é‡æ˜¯è¢«ç¼–è¯‘å™¨æ”¾åœ¨å†…å­˜ä¸­çš„åªè¯»åŒºåŸŸï¼Œå¯¹è¿™ä¸€ç‰‡å†…å­˜åªèƒ½è¯»å–è€Œä¸èƒ½å¤Ÿå»ä¿®æ”¹å®ƒã€‚ä»–ä»¬é€šå¸¸é€šè¿‡å­—é¢é‡ã€å®ã€æšä¸¾å€¼è¿›è¡Œå®šä¹‰ã€‚

**åªè¯»å˜é‡**ï¼šåªè¯»å˜é‡é¦–å…ˆ**æ˜¯ä¸€ä¸ªå˜é‡**ã€åªè¯»åªæ˜¯é™„åŠ åœ¨è¿™ä¸ªå˜é‡ä¸Šçš„ä¸€ä¸ªç‰¹æ€§ï¼Œç¼–è¯‘å™¨åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªåœ°æ–¹æ¥å­˜æ”¾å˜é‡çš„å€¼ï¼Œç”±ç¼–è¯‘å™¨é€šè¿‡`const`ç­‰é™å®šæ­¤å€¼ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œä½†æˆ‘ä»¬ä»»ç„¶æœ‰å¯èƒ½ç»•è¿‡ç¼–è¯‘å™¨ä¿®æ”¹å…¶å€¼ã€‚

### `constexpr`ä¿®é¥°å‡½æ•°/è¡¨è¾¾å¼

   + `constexpr`ä¿®é¥°çš„å‡½æ•°å¦‚æœç¼–è¯‘æœŸå¯ä»¥ç¡®å®šï¼ˆå‚æ•°éƒ½æ˜¯`constexpr`ï¼‰å°±ç¡®å®šï¼Œå¦åˆ™çš„è¯å‡½æ•°æˆä¸ºæ™®é€šå‡½æ•°
   + `constexpr`å¯ä»¥ä¿®é¥°å‡½æ•°æ¨¡æ¿ï¼Œå¦‚æœå…¶å®ä¾‹åŒ–ç‰ˆæœ¬ä¸æ»¡è¶³`constexpr`çš„è¦æ±‚åˆ™å‡½æ•°è‡ªåŠ¨é€€åŒ–ä¸ºæ™®é€šå‡½æ•°ã€‚

      1. è¢«ä¿®é¥°çš„å‡½æ•°å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰è¢«å®šä¹‰ã€‚
      2. CPP11è¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ï¼Œè€Œä¸”å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€æ¡æœ‰æ•ˆè¯­å¥ï¼ˆå¯ä»¥æœ‰`static_assertï¼Œusingï¼Œtypedef`ç­‰ä¸ä¼šäº§ç”Ÿå®é™…ä»£ç çš„è¯­å¥ï¼‰ï¼Œè¯¥è¯­å¥ä¸º`return`è¯­å¥ã€‚
      3. CPP14åªè¦æ±‚è¢«ä¿®é¥°çš„å‡½æ•°è¿”å›å€¼å’Œå‚æ•°å¿…é¡»è¦ä¿è¯æ˜¯å­—é¢å€¼ã€‚
      4. è¢«ä¿®é¥°çš„å‡½æ•°åªèƒ½è°ƒç”¨å…¶ä»–`constexpr`ä¿®é¥°çš„å‡½æ•°ã€åªèƒ½å¼•ç”¨å…¨å±€ä¸å˜å¸¸é‡ã€‚

### `constexpr`ä¿®é¥°å˜é‡

`constexpr`ä¿®é¥°çš„å˜é‡ç±»å‹åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æŒ‡é’ˆã€å¼•ç”¨å’Œè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆéœ€**æ»¡è¶³è¦æ±‚**ï¼‰ï¼Œä¸èƒ½æ˜¯å…¶å®ƒæ ‡å‡†åº“ç±»å‹ã€‚ä¸”éšå«è¦æ±‚äº†è¯¥å˜é‡ä¸º`const`ç±»å‹ï¼Œå…¶**å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š**ã€‚

   1. è¦æ±‚ï¼šè‡ªå®šä¹‰**å¸¸é‡æ„é€ å‡½æ•°+ç©ºæ„é€ å‡½æ•°+åˆå§‹åŒ–åˆ—è¡¨ç”±å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼**

      ```cpp
      class Point{
          public:
              constexpr Point( double x = 0, double y = 0 ): x_( x ), y_( y ){  }
          private:
              double x_, y_;
      };
      constexpr string str = "hello"; // error: constexpr variable cannot have non-literal type
      constexpr Point pt( 10, 20 ); // Evaluate at compiling time
      ```

### `constexpr`ä¿®é¥°æŒ‡é’ˆ

å¯¹äºæŒ‡é’ˆè€Œè¨€ï¼Œ`constexpr`**ä»…å¯¹æŒ‡é’ˆæœ¬èº«æœ‰æ•ˆ**ï¼Œ**ä¸æŒ‡é’ˆæ‰€æŒ‡å¯¹è±¡æ— å…³**ï¼Œè¢«å…¶ä¿®é¥°çš„æŒ‡é’ˆ**æ—¢å¯ä»¥æŒ‡å‘å¸¸é‡ä¹Ÿå¯ä»¥æŒ‡å‘å˜é‡**ã€‚

## `volatile`

+ å«ä¹‰ï¼šè¢«`volatile`ä¿®é¥°çš„å˜é‡è¡¨æ˜å®ƒ**å¯èƒ½è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹**ï¼ˆæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ï¼‰ã€‚
+ è¡¨ç°ï¼ˆ**ä¸ä¼˜åŒ–ã€ä¸ç¼“å­˜**ï¼‰ï¼šç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç ä¸å†è¿›è¡Œä¼˜åŒ–ï¼›åœ¨è¿è¡Œæ—¶ç³»ç»Ÿæ€»æ˜¯é‡æ–°ä»å®ƒæ‰€åœ¨çš„å†…å­˜è¯»å–æ•°æ®ï¼Œå³ä½¿å®ƒå‰é¢çš„æŒ‡ä»¤åˆšåˆšä»è¯¥å¤„è¯»å–è¿‡æ•°æ®ï¼Œè€Œä¸”è¯»å–çš„æ•°æ®ç«‹åˆ»è¢«ä¿å­˜ã€‚

### ä½¿ç”¨åœºæ™¯

1. ä¸­æ–­æœåŠ¡ç¨‹åºä¸­ä¿®æ”¹çš„ä¾›å…¶å®ƒç¨‹åºæ£€æµ‹çš„å˜é‡éœ€è¦åŠ  `volatile`
2. å¹¶è¡Œè®¾å¤‡çš„ç¡¬ä»¶å¯„å­˜å™¨
3. å¤šä»»åŠ¡ç¯å¢ƒä¸‹å„ä»»åŠ¡é—´å…±äº«çš„æ ‡å¿—åº”è¯¥åŠ  `volatile`ï¼›
4. å­˜å‚¨å™¨æ˜ å°„çš„ç¡¬ä»¶å¯„å­˜å™¨é€šå¸¸ä¹Ÿè¦åŠ  `volatile` è¯´æ˜ï¼Œå› ä¸ºæ¯æ¬¡å¯¹å®ƒçš„è¯»å†™éƒ½å¯èƒ½ç”±ä¸åŒæ„ä¹‰ï¼›

# é‡è½½ã€è¦†ç›–å’Œæ”¹å†™(éšè—)

## é‡è½½**overload**

æ¶‰åŠçš„å¤šæ–¹åœ¨**åŒä¸€ä¸ªä½œç”¨åŸŸ**ä¸­(åŒä¸€ç±»ä¸­æˆ–è€…éƒ½åœ¨å…¨å±€ä½œç”¨åŸŸ...)ï¼Œä¸”å¤šæ–¹çš„å‡½æ•°åä¸€å®šç›¸åŒï¼Œå‡½æ•°å‚æ•°åˆ—è¡¨ä¸€å®šä¸åŒï¼Œé‡è½½å’Œè¢«é‡è½½å‡½æ•°å¯ä»¥è¢«virtualä¿®é¥°ä¹Ÿå¯ä»¥ä¸è¢«ä¿®é¥°ã€‚

### [é‡è½½å†³è®®](https://zh.cppreference.com/w/cpp/language/overload_resolution)

ä¸ºäº†ç¼–è¯‘å‡½æ•°è°ƒç”¨ï¼Œç¼–è¯‘å™¨å¿…é¡»ç»å†åå­—æŸ¥æ‰¾ã€é‡è½½å†³è®®ã€å¯è®¿é—®æ€§æ£€æŸ¥ã€ç¼–è¯‘å‡½æ•°ç­‰è¿‡ç¨‹ã€‚è¯¦ç»†å†…å®¹ï¼šã€ŠC++ Primer Plusï¼ˆç¬¬äº”ç‰ˆï¼‰ã€‹8.5.4å°èŠ‚ã€‚

#### [åå­—æŸ¥æ‰¾](https://zh.cppreference.com/w/cpp/language/lookup)

å°†è¦è°ƒç”¨çš„å‡½æ•°ä¸å…·æœ‰ç›¸åŒå‡½æ•°åçš„å¤šä¸ªå‡½æ•°ç”³æ˜å»ºç«‹è”ç³»ã€‚å¯¹äºæ™®é€šå‡½æ•°çš„åå­—æŸ¥æ‰¾å¯èƒ½æ¶‰åŠ[å®å‚ä¾èµ–æŸ¥æ‰¾](https://zh.cppreference.com/w/cpp/language/adl)ï¼Œè€Œå¯¹äºå‡½æ•°æ¨¡æ¿å¯èƒ½åéš[æ¨¡æ¿å®å‚æ¨å¯¼](https://zh.cppreference.com/w/cpp/language/template_argument_deduction)ã€‚è‹¥è¿™äº›æ­¥éª¤äº§ç”Ÿå¤šäºä¸€ä¸ªå€™é€‰å‡½æ•°ï¼Œåˆ™è¿›è¡Œé‡è½½å†³è®®é€‰æ‹©å°†è¦å®é™…è°ƒç”¨çš„å‡½æ•°ã€‚

#### é‡è½½å†³è®®

##### [å‚æ•°ç±»å‹åŒ¹é…](https://doowzs.com/blog/2020-05-06-cpp-interview-questions/)

å‡†ç¡®åŒ¹é… > ç±»å‹æå‡è½¬æ¢ > éšå¼è½¬æ¢ >  ç”¨æˆ·å®šä¹‰çš„ç±»ç±»è½¬æ¢

- å‡†ç¡®åŒ¹é…ï¼šä¸è¦æ±‚è½¬æ¢ï¼›å€¼ â†” å¼•ç”¨ï¼›å·¦å€¼â†’å³å€¼ï¼›`[] â†’*`ï¼›`type(argument-list â†’(type *)(argument-list)`ã€é™å®šæ€§åŠ å¼ºçš„è½¬æ¢ï¼ˆ`type â†’const/volatile typeã€type*â†’ const/volatile type*`ï¼‰ã€‚

- æå‡è½¬æ¢ï¼ˆæ•´å‹æå‡ã€æµ®ç‚¹æå‡ï¼‰ï¼š`char/shortâ†’ intâ†’ floatâ†’ double`ã€‚

- éšå¼è½¬æ¢ï¼šæ•´å‹è½¬æ¢ã€æµ®ç‚¹è½¬æ¢ã€æµ®ç‚¹æ•´å‹è½¬æ¢ã€æŒ‡é’ˆè½¬æ¢ã€æˆå‘˜æŒ‡é’ˆè½¬æ¢ã€å¸ƒå°”è½¬æ¢ã€‚

- ç”¨æˆ·å®šä¹‰çš„ç±»ç±»å‹è½¬æ¢ï¼šç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œç±»å‹è½¬æ¢å‡½æ•°ç­‰ã€‚

  ![å‚æ•°ç±»å‹åŒ¹é…è§„åˆ™](/home/linbird/Londa/img/lang/pair-order.jpg)

##### å‡½æ•°åŒ¹é…é¡ºåº

æ™®é€šå‡½æ•° > æ™®é€šæ¨¡æ¿å‡½æ•°ï¼ˆæœªç‰¹åŒ–çš„æ¨¡æ¿ï¼‰ > å…¨ç‰¹åŒ–å‡½æ•°ã€‚å½“æ™®é€šæ¨¡æ¿å‡½æ•°ä¸å…¨ç‰¹åŒ–æ¨¡æ¿éƒ½èƒ½åŒ¹é…å‡½æ•°å‚æ•°æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©åœ¨åŒ¹é…ç±»å‹çš„è¿‡ç¨‹ä¸­éœ€è¦è½¬æ¢/å¢åŠ å…³é”®å­—æ¬¡æœ€å°‘çš„å‡½æ•°ã€‚

```c++
struct A {};
struct B: public A {};
struct C {};

void foo(A const&) {}///#1
void foo(B const&) {}///#2

foo( A() );///åŒ¹é…#2å¤±è´¥ï¼ŒåŒ¹é…#1æˆåŠŸã€‚é€šè¿‡ç¼–è¯‘
foo( B() );///åŒ¹é…#2æˆåŠŸï¼ŒåŒ¹é…#1æˆåŠŸã€‚æœ‰ä¸¤ä¸ªå€™é€‰ï¼Œ#2å®Œå…¨åŒ¹é…ï¼Œæœ€ç»ˆä½¿ç”¨#2é€šè¿‡ç¼–è¯‘
foo( C() );///åŒ¹é…#2å¤±è´¥ï¼ŒåŒ¹é…#1å¤±è´¥ã€‚ä¸èƒ½é€šè¿‡ç¼–è¯‘
```

#### å¯è®¿é—®æ€§æ£€æŸ¥

[æˆå‘˜è®¿é—®](https://zh.cppreference.com/w/cpp/language/access)çš„è§„åˆ™åªä¼šåœ¨åå­—æŸ¥æ‰¾å’Œé‡è½½è§£æä¹‹åæ‰ä¼šè¿›è¡Œï¼Œä¹‹å‰çš„åå­—æŸ¥æ‰¾å’Œé‡è½½å†³è®®å¹¶ä¸ä¼šè€ƒè™‘æˆå‘˜çš„å¯è®¿é—®æ€§ã€‚è®¿é—®æ£€æŸ¥åå¦‚æœä»æœ‰å¤šä¸ªå€™é€‰å‡½æ•°ï¼Œåˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ä¾›å€™é€‰åˆ™å®ä¾‹åŒ–è¯¥å‡½æ•°ã€‚

## è¦†ç›–**override**

æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªç±»ä¸­**ï¼Œå¤šæ–¹çš„å‡½æ•°åã€å‚æ•°åˆ—è¡¨ä»¥åŠè¿”å›å€¼ç±»å‹å®Œå…¨ç›¸åŒï¼ŒåŸºç±»çš„å‡½æ•°å¿…é¡»ç”±virtualä¿®é¥°ï¼Œå­ç±»é‡å†™çš„æ–¹æ³•å¯ä»¥åŠ `override`å…³é”®å­—ã€‚**è¿”å›å€¼ç±»å‹å¯ä»¥ä¸åŒ**ï¼Œæ­¤æ—¶ä¸åŒæ˜¯æŒ‡å‡½æ•°è¿”å›æœ¬ç±»ç±»å‹çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œè¿™ç§æƒ…å†µç§°ä¸º**åå˜**ã€‚

## æ”¹å†™**overwrite**/éšè—

æ¶‰åŠçš„å¤šæ–¹åœ¨**å¤šä¸ªä½œç”¨åŸŸ**ï¼Œå¤šæ–¹çš„å‡½æ•°åä¸€å®šç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸ä¸€å®šç›¸åŒï¼Œä¹Ÿæ— è®ºåŸºç±»å‡½æ•°æ˜¯å¦è¢«virtualä¿®é¥°ã€‚è¢«éšè—çš„å‡½æ•°æ— æ³•é€šè¿‡å­ç±»è°ƒç”¨åˆ°ï¼Œå³ä½¿å®å‚æ•°åˆ—è¡¨å®Œå…¨åŒ¹é…è¢«éšè—å‡½æ•°çš„å½¢å¼å‚æ•°åˆ—è¡¨ã€‚

## æ€»ç»“

|                   | é‡è½½overload |               è¦†ç›–override                |      æ”¹å†™overwrite/éšè—      |
| :---------------: | :----------: | :---------------------------------------: | :--------------------------: |
|    **å…³é”®å­—**     |      æ—       |                 override                  |              æ—               |
|    **ä½œç”¨åŸŸ**     |  åŒä¸€ä½œç”¨åŸŸ  |                ç»§æ‰¿ç±»ä¹‹é—´                 |          å¤šä¸ªä½œç”¨åŸŸ          |
| **virtualå…³é”®å­—** |   å¯æœ‰å¯æ—    |                çˆ¶ç±»å¿…é¡»æœ‰                 | å¯æœ‰å¯æ— (å’Œè¦†ç›–å†²çªåˆ™ä¸ºè¦†ç›–) |
|    **æ–¹æ³•å**     |   å®Œå…¨ç›¸åŒ   |                 å®Œå…¨ç›¸åŒ                  |           å®Œå…¨ç›¸åŒ           |
|   **æ–¹æ³•å‚æ•°**    |     ä¸åŒ     |                 å®Œå…¨ç›¸åŒ                  |          å¯åŒå¯ä¸åŒ          |
|  **è¿”å›å€¼ç±»å‹**   |  å¯åŒå¯ä¸åŒ  | ä¸€èˆ¬ç›¸åŒï¼ˆä¸åŒï¼šåå˜,è¿”å›thisæŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰ |          å¯åŒå¯ä¸åŒ          |
|     **ä½œç”¨**      |   é™æ€å¤šæ€   |                 åŠ¨æ€å¤šæ€                  |     å±è”½å…¶ä»–ä½œç”¨åŸŸçš„å½±å“     |

# å¼‚å¸¸å¤„ç†

* C++å¤„ç†å¼‚å¸¸çš„æœºåˆ¶æ˜¯ç”±æ£€æŸ¥(try)ã€æŠ›å‡º(throw)å’Œæ•æ‰(catch)3ä¸ªéƒ¨åˆ†ç»„æˆ
* å½“å¼‚å¸¸è¢«æ­£ç¡®æ•æ‰åï¼Œæ‰€æœ‰ä»tryåˆ°throwè¯­å¥ä¹‹é—´æ„é€ èµ·æ¥çš„å¯¹è±¡çš„ææ„å‡½æ•°å°†è¢«è‡ªåŠ¨è°ƒç”¨ã€‚å¦åˆ™å½“ç³»ç»Ÿè°ƒç”¨terminate()ç»ˆæ­¢æ•´ä¸ªç¨‹åºï¼Œè¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä¿è¯æ‰€æœ‰å±€éƒ¨å¯¹è±¡ä¼šè¢«æ­£ç¡®åœ°é”€æ¯ã€‚
## catchå—
* Catchå—å¯ä»¥ä»»ä½•é¡ºåºæ’åˆ—ï¼Œå¼‚å¸¸å¤„ç†çš„é¡ºåºæ˜¯é¦–å…ˆè¿›å…¥ä¸å¼‚å¸¸ç±»å‹åŒ¹é…ä¸”ç¦»æŠ›å‡ºå¼‚å¸¸ä½ç½®æœ€è¿‘çš„é‚£ä¸€ä¸ªã€‚
* catchå—ä»…é€šè¿‡ç±»å‹è€Œä¸æ˜¯é€šè¿‡å€¼æ¥åŒ¹é…çš„ï¼Œæ‰€ä»¥catchå—çš„å‚æ•°å¯ä»¥æ²¡æœ‰å‚æ•°åç§°ï¼Œåªéœ€è¦å‚æ•°ç±»å‹ã€‚
* å¦‚æœç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸æ²¡æœ‰å¯¹åº”ç±»å‹çš„catchå—æ•æ‰å¤„ç†ï¼Œé»˜è®¤å°†ä¼šæŠŠè¿™ç§å¼‚å¸¸äº¤ç»™unexpected()å‡½æ•°å¤„ç†ã€‚
* catchå—ä¸èƒ½è®¿é—®tryå—ä¸­å®šä¹‰çš„å˜é‡
### catchå—æ”¯æŒçš„ç±»å‹è½¬æ¢

1. éå¸¸é‡è½¬æ¢åˆ°å¸¸é‡çš„ç±»å‹è½¬æ¢
2. æ´¾ç”Ÿç±»åˆ°åŸºç±»çš„è½¬æ¢
3. æ•°ç»„è¢«è½¬æ¢æˆä¸ºæŒ‡å‘æ•°ç»„ï¼ˆå…ƒç´ ï¼‰ç±»å‹çš„æŒ‡é’ˆï¼Œå‡½æ•°è¢«è½¬æ¢æˆæŒ‡å‘è¯¥å‡½æ•°ç±»å‹çš„æŒ‡é’ˆï¼ˆé™çº§é—®é¢˜ï¼‰
4. æ ‡å‡†ç®—æœ¯ç±»å‹çš„è½¬æ¢å’Œç±»ç±»å‹è½¬æ¢(ä½¿ç”¨ç±»çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦å’Œè½¬æ¢æ„é€ å‡½æ•°)ã€‚
## throw
* throwå…ˆé€šè¿‡Copyæ„é€ å‡½æ•°æ„é€ ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå†æŠŠè¯¥æ–°å¯¹è±¡ä¼ é€’ç»™ catch.
* å¼‚å¸¸æŠ›å‡ºçš„æ–°å¯¹è±¡å¹¶éåˆ›å»ºåœ¨å‡½æ•°æ ˆä¸Šï¼Œè€Œæ˜¯åˆ›å»ºåœ¨ä¸“ç”¨çš„å¼‚å¸¸æ ˆä¸Šï¼Œå› æ­¤å®ƒæ‰å¯ä»¥è·¨æ¥å¤šä¸ªå‡½æ•°è€Œä¼ é€’åˆ°ä¸Šå±‚
## å‡½æ•°çš„å¼‚å¸¸å£°æ˜åˆ—è¡¨
* C++ å…è®¸åœ¨å‡½æ•°å£°æ˜å’Œå®šä¹‰æ—¶ï¼Œåœ¨å‡½æ•°çš„()åæ–¹åŠ ä¸Šthrowå…³é”®å­—å’Œå®ƒæ‰€èƒ½æ‹‹å‡ºçš„å¼‚å¸¸ç±»å‹åˆ—è¡¨ã€‚å¦‚æœä¸å†™åˆ™è¡¨ç¤ºå¯ä»¥æŠ›å‡ºä»»æ„ç±»å‹çš„å¼‚å¸¸ï¼Œåˆ—è¡¨ä¸ºç©ºä»£è¡¨ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
## å¼‚å¸¸ç§ç±»
### æ ‡å‡†å¼‚å¸¸
*  æ ‡å‡†å¼‚å¸¸éƒ½æ˜¯ä»ç±»`exception`ä¸­æ´¾ç”Ÿçš„ç±»ï¼Œéƒ½å«æœ‰æ–¹æ³•`what()`ç”¨ä»¥ä»¥å­—ç¬¦ä¸²å½¢å¼æ˜¾å¼å¼‚å¸¸ä¿¡æ¯ã€‚
![](./img/lang/exception.jpg)

### è‡ªå®šä¹‰å¼‚å¸¸
* éœ€è¦ä»æ ‡å‡†å¼‚å¸¸ä¸­ç»§æ‰¿

# çº¿ç¨‹ä¸åŸå­æ“ä½œ

[çº¿ç¨‹å’ŒåŸå­æ“ä½œ](./C++å¹¶å‘.md)

# C++å…¶å®ƒéƒ¨åˆ†æ–°ç‰¹æ€§

## C++ 11

### `tuple`å®¹å™¨(CPP11)

+ ä½œç”¨ï¼šæä¾›ä¸€ä¸ªå¯ä»¥å­˜å‚¨å¤šç§å¤šä¸ªç±»å‹çš„å€¼çš„ä¸€ä¸­æ³›å‹å®¹å™¨ç±»ã€‚
+ å¯¹`tuple<>`ç±»å‹çš„è®¿é—®æœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ˜¯`std::get<index>(obj)`æ–¹æ³•ï¼Œä¸€ç§æ˜¯`std::tie(varname...) = var`æ–¹æ³•ã€‚å‰è€…éœ€è¦æä¾›æ‰€éœ€æˆå‘˜åœ¨tupleä¸­çš„ä¸‹æ ‡indexï¼Œåè€…æ‹¬å·å†…çš„varnameéƒ½å¿…é¡»æå‰ç”³æ˜ã€‚

### `decltype`åç½®è¿”å›ç±»å‹

+ `auto function_name(Args...) -> decltype`(è¿”å›ç±»å‹è®¡ç®—è¡¨è¾¾å¼);


### æ–°åˆå§‹åŒ–æœºåˆ¶

#### [å°±åœ°åˆå§‹åŒ–](#å°±åœ°åˆå§‹åŒ–)

#### [åˆ—è¡¨åˆå§‹åŒ–](#åˆ—è¡¨åˆå§‹åŒ–list_initialization)

#### [å§”æ‰˜æ„é€ å‡½æ•°](#å§”æ‰˜æ„é€ å‡½æ•°)

### å¤–éƒ¨æ¨¡æ¿(CPP11)

+ èƒŒæ™¯ï¼šæ¨¡æ¿å‡½æ•°åœ¨ä¸åŒçš„ç¼–è¯‘å•å…ƒå¯èƒ½è¢«åŒä¸€ä¸ªç±»å‹å®ä¾‹åŒ–å¤šæ¬¡é€ æˆä»£ç è†¨èƒ€(é“¾æ¥æ—¶æ˜¯éšæœºé€‰å–ä¸€ä¸ªå®ä¾‹åŒ–åçš„æ¨¡æ¿)ã€‚
+ å½¢å¼:`extern template [class] function_name/class_name<å®ä¾‹åŒ–çš„ç±»å‹>[(Args...)]`;
+ æ˜¾å¼å‘Šè¯‰ç¼–è¯‘å™¨ä½•æ—¶è¿›è¡Œæ¨¡æ¿çš„å®ä¾‹åŒ–ï¼Œä¸Šå¼çš„æ„æ€æ˜¯å‘ŠçŸ¥ç¼–è¯‘å™¨æ­¤æ—¶ä¸è¦å®ä¾‹åŒ–ï¼Œå®ä¾‹åŒ–å·²ç»åœ¨å…¶å®ƒåœ°æ–¹å®ç°ã€‚

### ç¼–è¯‘æ—¶çš„å¤šé‡å°–æ‹¬å·

### ç±»å‹åˆ«å

**`typedef Old/CertainType NewType`**ä¹Ÿå¯ä»¥å®šä¹‰ç±»å‹åˆ«åï¼Œä½†æ˜¯å…¶è¡¨è¾¾æ–¹å¼ä¸å¤Ÿç›´è§‚ï¼Œä¹Ÿç¼ºä¹å¯¹æ¨¡æ¿çš„ä¸€äº›æ”¯æŒï¼Œäºæ˜¯C++11å¼•å…¥äº†`using`ï¼Œä½¿ç”¨**`using NewType = Old/CertainType`**å¯ä»¥å®Œæˆå’Œ`typedef`ä¸€æ ·å®šä¹‰ç±»å‹åˆ«åçš„å·¥ä½œï¼Œ`using`åŒæ—¶æ”¯æŒäº†`typedef`ä¸æ”¯æŒçš„åŠŸèƒ½ï¼ˆå¯¹æ¨¡æ¿åˆ«åçš„æ”¯æŒï¼‰ã€‚

å’Œå½“åœ¨ç±»ä¸­æˆ–åˆ«çš„ä½œç”¨åŸŸä¸­å®šä¹‰äº†ç±»å‹åˆ«åè€Œåˆæƒ³è·å–å…¶ä¸­çš„ç±»å‹æ—¶ï¼Œå¿…é¡»åœ¨è¿™ä¸ªç±»å‹å‰åŠ ä¸Š**`typename`**ä»¥é¿å…ç¼–è¯‘å™¨å°†ç±»ä¸­çš„ç±»å‹å½“ä½œæ™®é€šå˜é‡ã€‚

```c++
template <typename T> class MyStack{
	public:	typedef int iterator0;
};

class HeStack{
	public:
		typedef int iterator0;
		using iterator1 = int;
};

typedef void (*FP)(int, const std::string&);/// ä¸ºæ™®é€šå‡½æ•°å®šä¹‰åˆ«åFP
typedef std::string (Foo::*fooMemFnPtr) (const std::string&);/// ä¸ºç±»æˆå‘˜å‡½æ•°å®šä¹‰åˆ«åfooMemFnPtr
typedef stack<int> IntStack;//ä¸ºåº“ä¸­çš„å®ä¾‹åŒ–æ¨¡æ¿å®šä¹‰åˆ«åIntStack
using FP = void (*)(int, const std::string&);/// ä¸ºæ™®é€šå‡½æ•°å®šä¹‰åˆ«å
using fooMemFnPtr = std::string (Foo::*) (const std::string&);/// ä¸ºç±»æˆå‘˜å‡½æ•°å®šä¹‰åˆ«å
using IntStack = stack<int>;//ä¸ºåº“ä¸­çš„å®ä¾‹åŒ–æ¨¡æ¿å®šä¹‰åˆ«å

template <typename T> using AliasAtack = MyStack<T>;///ä¸ºæ¨¡æ¿ç±»å®šä¹‰åˆ«å
//template <typename T> typedef MyStack<T> AliasAtack;//typedefä¸æ”¯æŒæ¨¡æ¿ï¼Œç¼–è¯‘é”™è¯¯ã€‚

typedef typename HeStack::iterator0 Aliasitr1;
template <typename T> using alais_iter0 = typename MyStack<T>::iterator0;
template <typename T> using alais_iter1 = typename MyStack<T>::iterator1;
//template <typename T> typedef typename MyStack<T>::iterator0 Aliasitr0;//typedefä¸æ”¯æŒæ¨¡æ¿ï¼Œç¼–è¯‘é”™è¯¯ã€‚
```

### `nullptr`

ä¸ºäº†**é˜²æ­¢é‡æŒ‡é’ˆ**ã€ç¨‹åºéœ€è¦å°†ä¸€äº›æŒ‡é’ˆè®¾ç½®ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨Cå¯ä»¥ä½¿ç”¨`NULLã€0ã€(type *)0`æ¥ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå…¶ä¸­çš„`NULL`æ˜¯æ ‡å‡†åº“ä¸­çš„å®å®šä¹‰ï¼ŒC/C++æ ‡å‡†è§„å®šå…¶å€¼ï¼ˆç”±å®ç°å®šä¹‰ï¼‰ä»£è¡¨ä¸€ä¸ªç©ºæŒ‡é’ˆå¸¸é‡ã€‚

```c++
#if defined(__cplusplus)
	# define NULL 0    // C++ä¸­ä½¿ç”¨0ä½œä¸ºNULLçš„å€¼
#else
	# define NULL ((void *)0)    // Cä¸­ä½¿ç”¨((void *)0)ä½œä¸ºNULLçš„å€¼
#endif
```

åœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œå‡ºäºå…¼å®¹æ€§çš„è€ƒè™‘ï¼Œå­—é¢å¸¸é‡0çš„äºŒä¹‰æ€§å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ã€‚ä½†æ–°æ ‡å‡†æä¾›äº†ç¼–è¯‘æœŸå¸¸é‡`nullptr`ä»£è¡¨æŒ‡é’ˆç©ºå€¼ç±»å‹çš„å¸¸é‡ã€‚

```c++
typedef decltype(nullptr) nullptr_t;
```

|    å€¼     |             æœ¬è´¨              |               è¿ç®—               |
| :-------: | :---------------------------: | :------------------------------: |
|  `NULL`   |      æ ‡å‡†åº“å®šä¹‰çš„**å®**       |        æ”¯æŒç®—æœ¯ã€å…³ç³»è¿ç®—        |
| `nullptr` | `nullptr_t`ç±»å‹çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ | ä¸æ”¯æŒç®—æœ¯ã€ä»…æ”¯æŒä¸æŒ‡é’ˆå…³ç³»è¿ç®— |

`nullptr_t`ç±»å‹æ•°æ®å¯ä»¥éšå¼è½¬æ¢æˆä»»æ„ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œä¸èƒ½ä»¥ä»»ä½•æ‰‹æ®µï¼ˆåŒ…å«`reinterpret_acst<>()`ï¼‰è½¬æ¢ä¸ºä»»æ„å…¶ä»–éæŒ‡é’ˆç±»å‹ã€‚

æ‰€æœ‰`nullptr_t`ç±»å‹çš„æ•°æ®æ˜¯ç­‰ä»·çš„ã€ä¸èƒ½å‚ä¸ç®—æœ¯è¿ç®—ã€åªèƒ½å’ŒæŒ‡é’ˆç±»å‹è¿›è¡Œå…³ç³»è¿ç®—ã€‚

### å¯å˜å‚æ•°

å‚æ•°ä¸ªæ•°ä¸ºä»»æ„å¤šä¸ªï¼ˆC++ä¸­å¯ä»¥ä¸º0ä¸ªï¼‰ã€‚

#### å¯å˜å‡½æ•°å‚æ•°

| [å…¥æ ˆè§„åˆ™](https://blog.csdn.net/yexiangCSDN/article/details/83900366) |   æ¸…ç†æ–¹   |              å‚æ•°é¡ºåº               |        å‡½æ•°ç­¾åè§„åˆ™        |
| :----------------------------------------------------------: | :--------: | :---------------------------------: | :------------------------: |
|                           `cdecl`                            | å‡½æ•°è°ƒç”¨æ–¹ |              ä»å³å‘å·¦               |       ä¸‹åˆ’çº¿+å‡½æ•°å        |
|                          `stdcall`                           | è¢«è°ƒç”¨å‡½æ•° |              ä»å³å‘å·¦               | ä¸‹åˆ’çº¿+å‡½æ•°å+@+å‚æ•°å­—èŠ‚æ•° |
|                          `fastcall`                          | è¢«è°ƒç”¨å‡½æ•° | å‰ä¸¤ä¸ª`DWORD`è¿›å¯„å­˜å™¨ï¼Œå…¶ä½™è‡ªå³å‘å·¦ |    @+å‡½æ•°å+@å‚æ•°å­—èŠ‚æ•°    |
|                           `pacall`                           | è¢«è°ƒç”¨å‡½æ•° |              ä»å·¦å‘å³               |            å¤æ‚            |

å¯å˜å‚æ•°çš„å®ç°**ä¾èµ–äºå‡½æ•°è°ƒç”¨æ ˆçš„ç»“æ„**ï¼ŒCä¸­çš„å¯å˜å‚æ•°ç”±**å¼ºåˆ¶å‚æ•°**ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰å’Œ**å¯é€‰å‚æ•°**ï¼ˆç±»å‹å¯å˜åŒ–ã€æ•°é‡ç”±å¼ºåˆ¶å‚æ•°æˆ–å¯é€‰å‚æ•°åˆ—è¡¨ä¸­çš„ç‰¹æ®Šå€¼å†³å®šï¼‰ä¸¤éƒ¨åˆ†æ„æˆã€‚å¸¸è§„çš„å‡½æ•°è°ƒç”¨å‚æ•°å…¥æ ˆè§„åˆ™æ˜¯ä»å³åˆ°å·¦å…¥æ ˆçš„ï¼Œè¿™æ ·æœ€å·¦è¾¹çš„å¼ºåˆ¶å‚æ•°ä¼šåœ¨æœ€åå…¥æ ˆï¼Œå…¶åœ°å€å°±æ˜¯æ ˆä¸­æœ‰æ•ˆå‚æ•°çš„è¾¹ç•Œã€‚ç”±äº**å†…å­˜å¯¹é½**ï¼Œæ ˆä¸­å‚æ•°çš„æœ‰æ•ˆæ•°æ®å¹¶ä¸æ˜¯ç›¸é‚»çš„ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å˜å‚çš„ç±»å‹å°†å…¶æ”¾åˆ°æ»¡è¶³ç±»å‹å¯¹é½çš„åœ°å€ä¸Šï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨åœ¨32ä½OSä¸‹å°†**æ ˆå•å…ƒ**é™å®šä¸º`sizeof(int)`ï¼Œ**æ¯ä¸ªå‚æ•°æ‰€å å¤§å°ä»¥æ ˆå•å…ƒä¸ºåŸºç¡€å•ä½**ã€‚

åŸºäºä»¥ä¸Šå­˜å‚¨ç»“æ„ç‰¹å¾ï¼Œå¯å˜å‚æ•°å‡½æ•°å¿…é¡»**ä»å¼ºåˆ¶å‚æ•°æ¥é€ä¸ªå¯»å€åç»­çš„æ‰€æœ‰å¯å˜å‚æ•°çš„ç±»å‹åŠå…¶å€¼**ã€‚ä¸ºæ­¤Cæ ‡å‡†åº“`stdarg.h`æä¾›äº†ä¸€ç³»åˆ—å®ç”¨æ¥è§£æå¯å˜å‚æ•°ã€‚

```c
typedef char* va_list;//å‚æ•°æŒ‡é’ˆç±»å‹ï¼šç”¨è¯¥ç±»å‹çš„å˜é‡ä»£è¡¨æ ˆè¾¹ç•Œï¼ˆå½“å‰å‚æ•°ï¼‰çš„åœ°å€

void va_start(va_list argptr, lastparam);//å¿…é¡»å…ˆè°ƒç”¨è¯¥å®ï¼Œæ‰å¯ä»¥å¼€å§‹ä½¿ç”¨å¯é€‰å‚æ•°ï¼šè¯¥å®ä½¿ç”¨æœ€åä¸€ä¸ªæœ‰åç§°å‚æ•°çš„ä½ç½®æ¥åˆå§‹åŒ–argptrå‚æ•°æŒ‡é’ˆ

type va_arg(va_list argptr, type);//å°†argptræ‰€æŒ‡å‘çš„åœ°å€çš„æ•°æ®è§£é‡Šä¸ºtypeå¹¶è¿”å›ï¼Œå‚æ•°æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ­£ç¡®ä½ç½®

void va_end(va_list argptr);//å½“ä¸å†éœ€è¦ä½¿ç”¨å‚æ•°æŒ‡é’ˆæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤å®

void va_copy(va_list dest, va_list src);//ä½¿ç”¨å½“å‰çš„srcå€¼æ¥åˆå§‹åŒ–å‚æ•°æŒ‡é’ˆdest
```

#### [å¯å˜æ¨¡æ¿å‚æ•°](https://www.cnblogs.com/qicosmos/p/4325949.html)

##### å¯å˜å‚æ•°æ¨¡æ¿ç±»

```c++
template< class... Types > class tuple;///åº“ä¸­çš„tupleç±»
```

å…¶å‚æ•°çš„å±•å¼€å¯ä»¥å€ŸåŠ©åç‰¹åŒ–æˆ–è€…ç»§æ‰¿æ¥å®Œæˆã€‚

###### åç‰¹åŒ–å±•å¼€

å…¶å±•å¼€åŸç†ä¸é€’å½’å±•å¼€ç±»ä¼¼ï¼Œåˆ©ç”¨äº†æ¨¡æ¿çš„å‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæ¯æ¬¡å±•å¼€éƒ½ä¼šè¿›å…¥ä¸€ä¸ªåç‰¹åŒ–çš„ç±»ä¸­ã€‚ä»¥ä¸‹çš„`struct Sum`å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå¯å˜æ¨¡æ¿ç±»çš„å‚æ•°å¤§å°ä¹‹å’Œã€‚

```c++
template<typename First, typename ...Rest> struct Sum{///æ­¤å†™æ³•è¦æ±‚è‡³å°‘ä¸€ä¸ªç±»æ¨¡æ¿å‚æ•°
    int value = Sum<First>::value + Sum<Rest...>::value;///é€’å½’è¿›å…¥åç‰¹åŒ–å±•å¼€å‚æ•°
}

template<typename End, typename End_1> struct Sum<End, End_1>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…åªæœ‰ä¸¤ä¸ªå‚æ•°æ—¶ç»“æŸé€’å½’
    int value = sizeof(End) + sizeof(End_1);
}

template<typename End> struct Sum<End>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ç»“æŸé€’å½’
    int value = sizeof(End);
}

template<> struct Sum<>{///å‚æ•°å±•å¼€å¹¶åœ¨å‚æ•°åŒ…ä¸ºç©ºæ—¶ç»“æŸé€’å½’
    int value = 0;
}
//Sum<int,double,short>::value;//å€¼ä¸º14
```

###### ç»§æ‰¿å±•å¼€

å±•å¼€åŸç†ä¸ºé€’å½’çš„å±•å¼€ç»§æ‰¿çŸ¥é“ç»§æ‰¿åˆ°æœ€ç»ˆçš„ç±»ã€‚

```c++
///æ•´å‹åºåˆ—çš„å®šä¹‰
template<int...> struct IndexSeq{};

//å¼€å§‹åˆ©ç”¨ç»§æ‰¿å±•å¼€å‚æ•°åŒ…
template<int N, int ...Indexes> struct MakeIndexes : MakeIndexes<N - 1, N - 1, Indexes...> {};

// æ¨¡æ¿ç‰¹åŒ–ï¼Œç»ˆæ­¢å±•å¼€å‚æ•°åŒ…çš„æ¡ä»¶
template<int ...Indexes> struct MakeIndexes<0, Indexes...>{
    typedef IndexSeq<Indexes...> type;
};

using T = MakeIndexes<3>::type;/// T = IndexSeq<0, 1, 2>
/*å±•å¼€è¿‡ç¨‹
MakeIndexes<3> : MakeIndexes<2, 2>{}
MakeIndexes<2, 2> : MakeIndexes<1, 1, 2>{}
MakeIndexes<1, 1, 2> : MakeIndexes<0, 0, 1, 2>{
    typedef IndexSeq<0, 1, 2> type;
}
*/
```

##### å¯å˜å‚æ•°æ¨¡æ¿å‡½æ•°

```c++
template <class ...T>///å¯ä»¥å°†å‚æ•°åŒ…å±•å¼€æˆä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹çš„å‚æ•°
void f(T... args){///å£°æ˜ä¸€ä¸ªå‚æ•°åŒ…T... argsï¼Œè¿™ä¸ªå‚æ•°åŒ…ä¸­å¯ä»¥åŒ…å«0åˆ°ä»»æ„ä¸ªæ¨¡æ¿å‚æ•°ï¼›
    cout << sizeof...(args) << endl; ///sizeof...()æ‰“å°å˜å‚çš„ä¸ªæ•°
}
```

`arg`å‚æ•°åŒ…ä¸­çš„å‚æ•°åªèƒ½ä½¿ç”¨å‚æ•°åŒ…å±•å¼€çš„æ–¹å¼æ‰èƒ½è·å–ï¼Œæ— æ³•ç›´æ¥è·å–åˆ°æ‰€æœ‰çš„å‚æ•°ã€‚

###### é€’å½’å‡½æ•°å±•å¼€å‚æ•°åŒ…

éœ€è¦æä¾›ä¸€ä¸ªå‚æ•°åŒ…å±•å¼€çš„å‡½æ•°å’Œä¸€ä¸ªé€’å½’ç»ˆæ­¢å‡½æ•°ï¼Œå‚æ•°åŒ…å±•å¼€å‡½æ•°åˆ©ç”¨æ¨¡æ¿å‚æ•°çš„iåŒ¹é…æœºåˆ¶æ¯æ¬¡å±•å¼€ä¸€ä¸ªå‚æ•°ï¼Œå°†å…¶ä½™çš„å‚æ•°é€šè¿‡é€’å½’è°ƒç”¨è¯¥å‡½æ•°åœ¨ä¸‹ä¸€å±‚å±•å¼€ï¼Œç”±äºå‚æ•°åŒ¹é…çš„è§„åˆ™ï¼Œæœ€åä¸€æ¬¡é€’å½’è°ƒç”¨å°†è¿›å…¥ç©ºå‚æ•°çš„åŒåå‡½æ•°ï¼Œä»è€Œç»“æŸé€’å½’ï¼Œå±•å¼€æ‰€æœ‰çš„å‡½æ•°å‚æ•°ã€‚

```c++
void get_param(){return ;}//ä¸çŸ¥é“æœ€åä¸€ä¸ªå‚æ•°çš„ç±»å‹æ—¶ä½¿ç”¨çš„é€’å½’å‡ºå£
void get_param(const char *param){return ;}//çŸ¥é“æœ€åä¸€ä¸ªå‚æ•°çš„ç±»å‹æ—¶ä½¿ç”¨çš„é€’å½’å‡ºå£

template <typename First, typename ...Rest>
void get_param(First first, Rest... rest){
	cout << "å‚æ•°ï¼š" << typeid(first).name() << first << endl;///è·å–å‚æ•°åŒ…ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°
	get_param(rest...);///å±•å¼€å‚æ•°åŒ…ä¸­çš„å…¶ä»–å‚æ•°
}
get_param(1, 2.0, '3', "4");
/*
å‚æ•°ï¼ši1 // int
å‚æ•°ï¼šd2 // double
å‚æ•°ï¼šc3 // char
å‚æ•°ï¼šPKc4 // pointer(P) const(K) char
*/

template <typename First, typename ...Rest> void get_param(First first, Rest... rest){
	if constexpr(sizeof...(rest) > 0){
		get_param(rest);
	}
}///åˆ©ç”¨C++17çš„æ–°ç‰¹æ€§å¯ä»¥é¿å…å®šä¹‰é€’å½’å‡ºå£å‡½æ•°
```

###### é€—å·è¡¨è¾¾å¼å±•å¼€å‚æ•°åŒ…

åªéœ€è¦ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¯æ¬¡åªè´Ÿè´£å¤„ç†å¤„ç†ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦å±•å¼€å‚æ•°æ—¶å€ŸåŠ©é€—å·è¡¨è¾¾å¼å¤šæ¬¡è°ƒç”¨æ™®é€šå‡½æ•°ã€‚

```c++
template <class T> void printarg(T t){///ç”¨ä½œå±•å¼€å‚æ•°çš„æ™®é€šæ¨¡æ¿å‡½æ•°
   cout << t << endl;
}
template <class ...Args> void expand(Args... args){
   int arr[] = {(printarg(args), 0)...};///é€—å·è¡¨è¾¾å¼ï¼Œæ­¤å¤„å°†åˆ›å»ºä¸€ä¸ªæ‰€æœ‰å€¼éƒ½æ˜¯çš„intæ•°ç»„
}
expand(1,2,3,4);

/// ä½¿ç”¨lambdaè¡¨è¾¾å¼å°‘åˆ›å»ºä¸€ä¸ªå…·åå‡½æ•°
template<typename Fun, typename ...Args> void get_param(const Fun &fun, Args&& ...arg){
	initializer_list<int>{(fun(forward<Args>(arg)), 0)...};
}

get_param([](int i){cout<<i<<endl;}, 1, 2, 3);///C++11
get_param([](auto i){cout<<i<<endl;}, 1, 2.0, â€testâ€);///C++14
```

**åŸç†**ï¼š`{(printarg(args), 0)...}`çš„å®ç°åŸºç¡€ä¸ºé€—å·è¡¨è¾¾å¼+åˆå§‹åŒ–åˆ—è¡¨

```c++
{(printarg(args), 0)...} = {((printarg(arg1),0), (printarg(arg2),0), (printarg(arg3),0),  etc... )}
/*
æ¯ä¸ªé€—å·è¡¨è¾¾å¼ä»å·¦å‘å³æ‰§è¡Œï¼Œprintarg()å®Œæˆäº†ä¸€ä¸ªå‚æ•°çš„å±•å¼€ï¼Œè¡¨è¾¾å¼è¿”å›ç»“æœä½œä¸ºåˆå§‹åŒ–åˆ—è¡¨çš„å‚æ•°
æœ€ç»ˆä¼šåˆ›å»ºä¸€ä¸ªå…ƒç´ å€¼éƒ½ä¸º0çš„æ•°ç»„int arr[sizeof...(Args)]ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯ä¸ºäº†å±•å¼€å‚æ•°è€Œé€ æˆçš„å‰¯äº§ç‰©
*/
```

##### ä½¿ç”¨åœºæ™¯

###### æ¶ˆé™¤ä»£ç å†—ä½™

```c++
struct A{A(int){}};
struct B{B(int,double){}};

/// ä¸ä½¿ç”¨å¯å˜æ¨¡æ¿å‚æ•°çš„å‡½æ•°æ”¯æŒå·¥å‚æ¨¡å¼
template<typename T, typename T0>T* Instance(T0 arg0){return new T(arg0);}///ä¸€ä¸ªæ¨¡æ¿å‚æ•°ï¼Œ
template<typename T, typename T0, typename T1>T* Instance(T0 arg0, T1 arg1){///ä¸¤ä¸ªæ¨¡æ¿å‚æ•°
    return new T(arg0, arg1);
}

/// ä¸ä½¿ç”¨å¯å˜æ¨¡æ¿å‚æ•°çš„å‡½æ•°æ”¯æŒå·¥å‚æ¨¡å¼
template<typenameâ€¦  Args> T* Instance(Args&&â€¦ args){///æ”¯æŒä»»æ„å¤šä¸ªæ¨¡æ¿å‚æ•°
    return new T(std::forward<Args>(args)...);
}

A* pa = Instance<A>(1);
B* pb = Instance<B>(1,2);
```

###### å®ç°C++ç‰ˆæœ¬æ³›åŒ–çš„å§”æ‰˜ï¼ˆ`delegate`ï¼‰

```c++
template <class T, class R, typename ...Args> class  MyDelegate{
public:
    MyDelegate(T* t, R  (T::*f)(Args...) ):m_t(t),m_f(f) {}

    R operator()(Args&&... args) {
            return (m_t->*m_f)(std::forward<Args>(args) ...);///å°†å®é™…æ•°æ®äº¤åˆ°ä¼ å…¥çš„å‡½æ•°ä½“ä¸­æ‰§è¡Œ
    }
private:
    T* m_t;///æä¾›å®é™…å¤„ç†æ–¹æ³•çš„ç±»å¯¹è±¡
    R  (T::*m_f)(Args...);///å¯¹è±¡Tçš„æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ
};

template <class T, class R, typename ...Args> MyDelegate<T, R, Args...> CreateDelegate(T* t, R (T::*f)(Args...)){
    return MyDelegate<T, R, Args...>(t, f);
}

struct A{
    void Fun(int i){cout << i << endl;}
    void Fun1(int i, double j){cout << i+j << endl;}
};

A a;
auto d = CreateDelegate(&a, &A::Fun); //åˆ›å»ºå§”æ‰˜
d(1); //è°ƒç”¨å§”æ‰˜ï¼Œå°†è¾“å‡º1
auto d1 = CreateDelegate(&a, &A::Fun1); //åˆ›å»ºå§”æ‰˜
d1(1, 2.5); //è°ƒç”¨å§”æ‰˜ï¼Œå°†è¾“å‡º3.5
//å€ŸåŠ©https://cppinsights.ioå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªautoç”³æ˜åˆ†åˆ«ä¼šè¢«å±•å¼€ï¼Œæ¨¡æ¿ç±»ä¹Ÿä¼šè¢«å®ä¾‹åŒ–ï¼š
MyDelegate<A, void, int> d = CreateDelegate(&a, &A::Fun);
MyDelegate<A, void, int, double> d1 = CreateDelegate(&a, &A::Fun1);
/*
åœ¨ä»¥ä¸Šçš„æ¨¡æ¿å‚æ•°é‡Œé¢ï¼ŒTä»£è¡¨äº†ä¸€ä¸ªç±»ç±»å‹ï¼ŒRä»£è¡¨äº†ä¸€ä¸ªè¿”å›å€¼ç±»å‹ï¼Œ...Argsåˆ™ä»£è¡¨äº†è¦ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°åŒ…ã€‚
CreateDelegate()å‡½æ•°ç”³æ˜çš„ç¬¬äºŒä¸ªå‚æ•°R (T::*f)(Args...)å°±ä»£è¡¨äº†ä¸€ä¸ªè¿”å›å€¼ä¸ºRç±»å‹ï¼Œå‚æ•°ä¸ºå¯å˜å‚æ•°çš„å±äºTç±»å‹å‡½æ•°æˆå‘˜çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°æŒ‡é’ˆfã€‚
*/
```

#### å¯å˜æ™®é€šå‚æ•°(å˜é•¿å‚æ•°)

##### `initializer_list`å®ç°

åœ¨å‚æ•°çš„ç±»å‹éƒ½ç›¸åŒä½†æ˜¯å‚æ•°ä¸ªæ•°ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä¼ é€’`initializer_list`ç±»å‹çš„å‚æ•°ï¼Œè¯¥ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ã€‚
```c++
size_t func(initializer_list<string> li){
	for(auto beg=li.begin(); beg!=li.end(); ++beg);
	return li.size();
}

func({"This", "is", "C++", "!"});
```

##### [`...`å®ç°](https://www.jianshu.com/p/fc6476265327)

å°†`...`æ”¾åœ¨å½¢å‚åˆ—è¡¨çš„æœ€åä¸€é¡¹ç”¨æ¥è¡¨ç¤ºå˜é•¿å‚æ•°éƒ¨åˆ†ã€‚è¯¥æ–¹æ³•åº”è¯¥**åªç”¨äºCå’ŒC++çš„çš„åŸºæœ¬ç±»å‹**ï¼ˆç”±äºå¤åˆæ•°æ®ç±»å‹åœ¨ä¼ é€’å‚æ•°æ—¶å¯èƒ½æ— æ³•æ­£ç¡®ä¼ é€’ï¼‰ã€‚è¯¥æ–¹æ³•éœ€è¦ç”¨åˆ°åº“æä¾›çš„å‡ ä¸ªå®ç”¨æ¥è·å–æ¯ä¸€ä¸ªå‚æ•°
```c++
#include<cstdarg>  // Cä¸­æ˜¯<stdarg.h>

void add_nums(int count, ...){
	int result = 0;
	va_list args;/// åº“ä¸­ï¼štypedef char* va_list;å³ç”¨valistç±»å‹çš„argså˜é‡æ¥æŒæœ‰æ‰€æœ‰å¯å˜å‚æ•°
	va_start(args, count);///å°†argæŒ‡å‘é•¿åº¦ä¸ºcountçš„å¯å˜å‚æ•°åˆ—è¡¨argsä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°
	for(int i=0; i<count; ++i)
		result += va_arg(args, int);///va_arg()å‡½æ•°ä»argä¸­ä¾æ¬¡è·å–ç±»å‹ä¸ºintçš„å˜é‡å¹¶è¿”å›
	va_end(args);///é‡Šæ”¾va_listç±»å‹çš„argså˜é‡
}

add_nums(4, 25, 25, 50, 50);
```

#### å¯å˜å‚æ•°åŸºç±»
å¯ä»¥çµæ´»çš„æ§åˆ¶éœ€è¦è¢«ç»§æ‰¿çš„çˆ¶ç±»çš„ä¸ªæ•°å’Œç±»åˆ«
```c++
class Gemfield{
    public:
        void test1(){
            std::cout<<"This is base class Gemfield."<<std::endl;
        }
};

class CivilNet{
    public:
        void test2(){
            std::cout<<"This is base class CivilNet."<<std::endl;
        }
};

template<typename... Bases> class SYSZUX : public Bases...{};

SYSZUX<Gemfield, CivilNet>().test1().test2();
/*
This is base class Gemfield.
This is base class CivilNet.
*/
```

### [`SFINAE`æ›¿æ¢å¤±è´¥å¹¶éé”™è¯¯](https://zhuanlan.zhihu.com/p/21314708)

ä¸ºäº†å®ç°å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨éœ€è¦æ¯ä¸€ä¸ªé‡è½½è°ƒç”¨é€‰æ‹©æœ€åˆé€‚çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå½“è¿™äº›**é‡è½½å‡½æ•°åŒ…å«æ¨¡æ¿å‡½æ•°**æ—¶ï¼Œå°±æ¶‰åŠåˆ°æ›¿æ¢çš„é—®é¢˜ã€‚å³ç¼–è¯‘å™¨é¦–å…ˆç¡®å®šæ¨¡æ¿å‚æ•°ç±»å‹ã€ç„¶åå°†å‡½æ•°å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼çš„æ¨¡æ¿å‚æ•°æ›¿æ¢æ‰ï¼ˆsubstituteï¼‰ï¼Œåœ¨è¿™ä¸ªæ›¿æ¢çš„è¿‡ç¨‹ä¸­ä¼šæ¨å¯¼å‡ºå¤šç§å¯èƒ½çš„æ›¿æ¢æ–¹æ³•ï¼Œå¦‚æœå…¶ä¸­æŸä¸€ä¸ªæˆ–è€…æŸå‡ ä¸ªæ¨¡æ¿å‡½æ•°æ¨å¯¼å‡ºæ¥æ›¿æ¢ç»“æœæ— æ„ä¹‰ï¼ˆæ— æ³•ç¼–è¯‘ï¼‰ï¼Œé‚£ä¹ˆ**åªè¦æœ‰ä¸€ä¸ªå¯ä»¥æ­£ç¡®æ¨å¯¼å‡ºæ¥**ï¼Œé‚£ä¹ˆé‚£äº›æ— æ„ä¹‰çš„æ¨å¯¼æ›¿æ¢**ä¸ä¼šè§¦å‘ç¼–è¯‘å™¨çš„é”™è¯¯**ï¼Œè¿™æ ·ä¸€å¥—è§„åˆ™å³`SFINAE`è§„åˆ™ã€‚

```c++
struct Test { typedef int foo;};

template <typename T> void f(typename T::foo) {} // Definition #1
template <typename T> void f(T) {}               // Definition #2

f<Test>(10); // Call #1ï¼š
f<int>(10);  // Call #2ï¼š#1,#2éƒ½å¯ä»¥è¢«åˆæ­¥åŒ¹é…ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨#1çš„è¯åˆ™ç¼ºå°‘fooå±æ€§
```

**æ›¿æ¢**å‘ç”Ÿåœ¨**å®ä¾‹åŒ–**ä¹‹å‰ï¼Œå³ä½¿æœ€ç»ˆä¸éœ€è¦è¢«å®ä¾‹åŒ–çš„æ¨¡æ¿ä¹Ÿè¦è¿›è¡Œæ›¿æ¢ï¼ˆåªä¼šæ›¿æ¢ç›´æ¥å‡ºç°åœ¨å‡½æ•°å£°æ˜ä¸­çš„ç›¸å…³å†…å®¹ï¼ˆä¸åŒ…å«å‡½æ•°ä½“ï¼‰ï¼‰ï¼Œå°†æ‰€æœ‰çš„å¯èƒ½é€‰æ‹©æ›¿æ¢å®Œä¹‹åï¼Œæ‰ä¼šæ ¹æ®**é‡è½½å†³è®®**ç¡®å®šå€™é€‰å‡½æ•°ï¼Œå½“æœ‰å¤šä¸ªå€™é€‰å‡½æ•°åˆ™ä¼šå¼•å‘äºŒä¹‰æ€§é”™è¯¯ï¼Œæ²¡æœ‰å€™é€‰å¼•å‘æ— å®ç°é”™è¯¯ï¼Œåªæœ‰æœ‰å”¯ä¸€å€™é€‰å‡½æ•°æ—¶ä¸”è¯¥å€™é€‰å‡½æ•°ä¸ºæ¨¡æ¿å‡½æ•°æ—¶ç¼–è¯‘å™¨æ‰ä¼šå®ä¾‹åŒ–æ­¤å‡½æ•°ã€‚

### æ¨¡æ¿ç±»`enable_if`

[SFINAEï¼šsubstitution failure is not an error](https://www.wikiwand.com/zh-cn/%E6%9B%BF%E6%8D%A2%E5%A4%B1%E8%B4%A5%E5%B9%B6%E9%9D%9E%E9%94%99%E8%AF%AF) è§„åˆ™æ˜¯æ¨¡æ¿ç±»`enable_if<>`æœ€æ ¸å¿ƒçš„åŸç†ï¼Œåˆ©ç”¨è¯¥æ¨¡æ¿ç±»å¯ä»¥æ›´å¥½çš„æ§åˆ¶æ¨¡æ¿çš„ç¼–è¯‘å’Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚

#### ç±»å‹åç‰¹åŒ–

åœ¨**ç¼–è¯‘æ—¶æ ¡éªŒæ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§**ï¼Œæ ¹æ®æ¨¡æ¿å‚æ•°çš„æŸäº›ç‰¹æ€§è¿›è¡Œä¸åŒç±»å‹çš„å®ç°çš„é€‰æ‹©ï¼Œå³å®ç°äº†è‡ªå®šä¹‰å®½æ¾åº¦ï¼ˆå–å†³äº`enable_if<>`çš„æ ¡éªŒå¼ºåº¦ï¼‰çš„ç±»å‹åç‰¹åŒ–ã€‚

```c++
template <typename T, typename Enable=void> struct check;

template <typename T> struct check<T, typename std::enable_if<T::value>::type> {};
/// checkåªå¸Œæœ›é€‰æ‹©T::value==trueçš„ç±»å‹Tï¼Œå¦åˆ™å°±æŠ¥ç¼–è¯‘æ—¶é”™è¯¯ã€‚
```

#### æ§åˆ¶å‡½æ•°è¿”å›ç±»å‹

å˜ç›¸å®ç°æ¨¡æ¿å‡½æ•°çš„åç‰¹åŒ–ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡æ¿å‚æ•°è¿”å›ä¸åŒç±»å‹çš„å€¼ã€‚å¦‚åº“ä¸­çš„`std::get<>(std::tuple<>)`æ ¹æ®ä¸åŒä¸‹æ ‡è¿”å›ä¸åŒç±»å‹çš„å…ƒç´ ï¼š

```c++
template <std::size_t k, class T, class... Ts>
typename std::enable_if<k==0, typename element_type_holder<0, T, Ts...>::type&>::type
get(tuple<T, Ts...> &t) {
  return t.tail;
}

template <std::size_t k, class T, class... Ts>
typename std::enable_if<k!=0, typename element_type_holder<k, T, Ts...>::type&>::type
get(tuple<T, Ts...> &t) {
  tuple<Ts...> &base = t;
  return get<k-1>(base);
}
```

#### æ ¡éªŒå‡½æ•°æ¨¡æ¿å‚æ•°ç±»å‹

é™å®šç‰¹å®šçš„ç±»å‹æ‰å¯ä»¥å¯ä»¥è°ƒç”¨æŸä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼ˆæ§åˆ¶æ˜¯å¦å®ä¾‹åŒ–è¿™ä¸ªå‡½æ•°æ¨¡æ¿å³å¯ï¼‰ã€‚

```c++
template <typename T> typename std::enable_if<std::is_integral<T>::value, bool>::type is_odd(T t) {}
///åªæœ‰is_odd(int_value)æˆ–is_odd<int>(value)çš„ä½¿ç”¨æ–¹æ³•æ‰ä¼šå®ä¾‹åŒ–å’Œç¼–è¯‘å‡ºç›¸åº”çš„æ¨¡æ¿å‡½æ•°
```

### å¼ºåˆ¶å¼•ç”¨

åœ¨C++çš„å‡½æ•°å¼æ¥å£å¦‚`bind(...)ã€thread()`ä¸­ï¼Œå…¶å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æ‹·è´åçš„å€¼ä¼ é€’ï¼Œå³ä½¿`bind(fun, ...)`ä¸­çš„å‡½æ•°`fun(Type &)`è¦æ±‚ä»¥å¼•ç”¨æ–¹å¼ä¼ é€’å‚æ•°ï¼Œ`bind`è¿˜æ˜¯ä¼šåœ¨åˆ›å»ºæ—¶å°±å°†éœ€è¦çš„å‚æ•°ä»¥æ‹·è´çš„å½¢å¼ä¼ é€’ç»™`fun()`ï¼Œä¸ºäº†å®ç°å¯¹å‚æ•°çš„å¼•ç”¨ä¼ é€’ï¼Œ`C++11`å®šä¹‰äº†æ¨¡æ¿å‡½æ•°`ref<>(param)ã€cref<>(param)`ç”Ÿæˆ [std::reference_wrapper](https://zh.cppreference.com/w/cpp/utility/functional/reference_wrapper) ç±»å‹çš„å¯¹è±¡å®ç°å¯¹`param`å‚æ•°çš„å¼•ç”¨ä¼ é€’ã€‚

**`std::reference_wrapper` ç”¨äºæŒ‰å¼•ç”¨ä¼ é€’å¯¹è±¡ç»™ [std::bind](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Futility%2Ffunctional%2Fbind) æˆ– [std::thread](https://links.jianshu.com/go?to=https%3A%2F%2Fzh.cppreference.com%2Fw%2Fcpp%2Fthread%2Fthread) çš„æ„é€ å‡½æ•°**

```c++
void f(int& n1, int& n2, const int& n3){
    std::cout << "In function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
    ++n1, ++n2;
}

int n1 = 1, n2 = 2, n3 = 3;
std::function<void()> bound_f = std::bind(f, n1, std::ref(n2), std::cref(n3));
///åˆ›å»ºæ—¶n1å·²ç»æŒ‰ç…§æ‹·è´ä¼ é€’åˆ°fï¼Œè€Œn2å’Œn3åªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰ä¼šä»¥å¼•ç”¨ä¼ é€’åˆ°fä¸­
n1 = 10, n2 = 11, n3 = 12;
std::cout << "Before function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
bound_f();
std::cout << "After function: " << n1 << ' ' << n2 << ' ' << n3 << '\n';
/*
Before function: 10 11 12
In function: 1 11 12
After function: 10 12 12
*/
```

### å­—é¢é‡

#### æ ‡å‡†å­—é¢é‡

##### æ•´æ•°å­—é¢é‡

###### å½¢å¼


|     å­—é¢é‡ç±»å‹     |    å‰ç¼€     |           æ•°ä½            |
| :----------------: | :---------: | :-----------------------: |
| **åå…­è¿›åˆ¶å­—é¢é‡** | `0x` æˆ–`0X` |   ä¸€æˆ–å¤šä¸ªåå…­è¿›åˆ¶æ•°ä½    |
|  **åè¿›åˆ¶å­—é¢é‡**  |     æ—       | éé›¶åè¿›åˆ¶ä½+ä»»æ„åè¿›åˆ¶ä½ |
|  **å…«è¿›åˆ¶å­—é¢é‡**  |  æ•°ä½é›¶`0`  |      ä»»æ„ä¸ªå…«è¿›åˆ¶ä½       |
|  **äºŒè¿›åˆ¶å­—é¢é‡**  | `0b` æˆ–`0B` |     ä¸€æˆ–å¤šä¸ªäºŒè¿›åˆ¶ä½      |

è‹¥æä¾›**æ•´æ•°åç¼€**ï¼Œåˆ™å¯å«æœ‰ä¸‹åˆ—ä¸€æˆ–ä¸¤è€…ï¼ˆè‹¥å‡æä¾›ï¼Œåˆ™å¯ä»¥ä»»æ„é¡ºåºå‡ºç°ï¼‰ï¼š
   -  æ— ç¬¦å·åç¼€ï¼ˆå­—ç¬¦ u æˆ–å­—ç¬¦ Uï¼‰

   -  é•¿åç¼€ï¼ˆå­—ç¬¦ l æˆ–å­—ç¬¦ Lï¼‰æˆ– é•¿é•¿åç¼€ï¼ˆå­—ç¬¦åºåˆ— ll æˆ–å­—ç¬¦åºåˆ— LLï¼‰ (C++11 èµ·)

###### note

æ•´æ•°å­—é¢é‡æ•°ä½é—´å¯æ’å…¥ä½œä¸ºåˆ†éš”ç¬¦çš„å¯é€‰çš„å•å¼•å·ï¼ˆ`'`ï¼‰ï¼Œè¯¥å•å¼•å·åªä¸ºäº†æ–¹ä¾¿ç”¨æˆ·è¯†åˆ«ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥è¯¥ç¬¦å·ã€‚æ²¡æœ‰è´Ÿæ•´æ•°å­—é¢é‡ã€‚ç”±äº[æœ€å¤§åå™¬](https://www.apiref.com/cpp-zh/cpp/language/translation_phases.html#.E6.9C.80.E5.A4.A7.E5.90.9E.E5.99.AC)è§„åˆ™ï¼Œä»¥ `e` å’Œ `E` ç»“æŸçš„åå…­è¿›åˆ¶æ•´æ•°å­—é¢é‡åœ¨åéšè¿ç®—ç¬¦ `+` æˆ– `-` æ—¶ï¼Œæºç ä¸­å¿…é¡»ä»¥ç©ºç™½ç¬¦æˆ–æ‹¬å·å°†å®ƒä»¬ä¸è¿ç®—ç¬¦åˆ†éš”

#### [æµ®ç‚¹å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/floating_literal)

#### [å­—ç¬¦å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/character_literal)

#### [å­—ç¬¦å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/string_literal)

#### [å¸ƒå°”å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/bool_literal)


```cpp
using namespace std::literals::chrono_literals;///500ms
using namespace std::literals::string_literals;///"Hello world"s
using namespace std::literals::complex_literals;

string s1 = "abc\0\0def", s2 = "abc\0\0def"s;
///ä»¥Cå¼å­—ç¬¦ä¸²åˆå§‹åŒ–stringæ—¶ä¼šä»Cå¼å­—ç¬¦ä¸²ç»“å°¾æˆªæ–­ï¼Œè€Œå­—é¢é‡ä¼šå°†â€œ\0â€ä¹Ÿä½œä¸ºä¸€ä¸ªå­—ç¬¦ã€‚
cout << "s1: " << s1.size() << " \"" << s1 << "\"\n";//s1: 3 "abc"
cout << "s2: " << s2.size() << " \"" << s2 << "\"\n";//s2: 8 "abcdef"
```

#### [ç”¨æˆ·å®šä¹‰å­—é¢é‡](https://zh.cppreference.com/w/cpp/language/user_literal)

##### å‚æ•°ä¸åŒ¹é…

|  å®å‚  |             ç¬¬ä¸€å½¢å‚              |                        å¤‡é€‰å½¢å‚ä¸å¤‡æ³¨                        |
| :----: | :-------------------------------: | :----------------------------------------------------------: |
|  æ•´å½¢  |       `unsigned long long`        | `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–[æ— æ³•æ»¡è¶³æ—¶](https://www.cnblogs.com/Braveliu/p/12241837.html)è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰ |
| æµ®ç‚¹å‹ |           `long double`           |   `const char*`ï¼ˆç¬¬ä¸€å½¢å‚ä¸å­˜åœ¨æˆ–æ— æ³•æ»¡è¶³æ—¶è‡ªåŠ¨è½¬æ¢ä½¿ç”¨ï¼‰    |
|  å­—ç¬¦  |     `const <w>char<8|16|32>*`     |                                                              |
| å­—ç¬¦ä¸² | `const <w>char<8|16|32>*, size_t` |            `size_t`ä¼š**è‡ªåŠ¨æ¨æ–­ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦**ã€‚            |

##### å®šä¹‰å­—é¢é‡

ä½¿ç”¨åˆæ³•å‚æ•°è‡ªå®šä¹‰å­—é¢é‡æ“ä½œç¬¦`<constexpr> RT operator"" _name(param) `ä¾¿å®ç°äº†è‡ªå®šä¹‰å­—é¢é‡ï¼Œä¹‹ååœ¨ä½¿ç”¨å­—é¢é‡`value_name`ä¼šè¢«è‡ªåŠ¨ç¿»è¯‘ä¸º`_name(value)`ï¼Œå½“è‡ªå®šä¹‰çš„å­—é¢é‡æ“ä½œç¬¦ç­¾åå«`constexpr`æ—¶ï¼Œè¯¥è½¬æ¢ç»“æœä¼šåœ¨ç¼–è¯‘æ—¶å°±å®Œæˆã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰**åç¼€å¿…é¡»ä»¥ä¸‹åˆ’çº¿å­—ç¬¦`_`å¼€å§‹**ï¼Œæ ‡å‡†åº“çš„åç¼€ä¸ä»¥ä¸‹åˆ’çº¿å¼€å§‹ã€‚

```c++
long double operator"" _mm(long double x) { return x / 1000; }
size_t operator"" _len(char const*, size_t n){return n;}
char const* operator"" _r(char const* s){return s;}
unsigned long operator"" _rs(unsigned long long s){return s;}
string operator"" _rs(char const* s){return 'x' + string(s) + 'y';}///æ— ä¸Šä¸€è¡Œæ‰åŒ¹é…åˆ°æ­¤è¡Œ

cout << 1.0_mm << '\t' << "ABCDEFGH"_len << '\t' << 12_r << '\t' << 512_rs << '\n';///0.001 8 12	x512y
```

## C++14

### autoå®ç°è¿”å›ç±»å‹è‡ªåŠ¨æ¨å¯¼

+ `auto function_name(Args...);`

### lambdaè¡¨è¾¾å¼

1. é€šç”¨æ•è·ï¼šå¸¦æœ‰åˆå§‹åŒ–å™¨çš„æ•è·ç¬¦ï¼Œå®ä¾‹ï¼š`[x = 1]{ return x; // 1 }`

2. ä½¿ç”¨é€šç”¨æ•è·æ•è·ä»…å¯ç§»åŠ¨çš„ç±»å‹ï¼Œå®ä¾‹ï¼š`unique_ptr<T> x = ...; [u=move(u)] {  do_something_with( u );}`

3. æ³›å‹`lambda`è¡¨è¾¾å¼ï¼šå‚æ•°å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ˜¾ç¤ºåœ°å£°æ˜å…·ä½“ç±»å‹ã€‚

4. è¡¨è¾¾å¼æ•æ‰ï¼šå…è®¸ç”¨ä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼åˆå§‹åŒ–æ•æ‰çš„å˜é‡(ä¸1ï¼Œ2ç›¸å…³)ã€‚

### [`constexpr`](# `CPP14: constexpr `)

## C++17

### ç»“æ„åŒ–ç»‘å®š(CPP17)

+ å½¢å¼ï¼šç±»ä¼¼äºpythonä¸­å¯¹è¿”å›å€¼çš„ç›´æ¥åˆ†ç‰‡ã€‚`auto [x,y,z] = obj_var;`æ–¹æ‹¬å·å†…ä¸ºç»“æ„åŒ–ç»‘å®šåçš„å˜é‡çš„åç§°ï¼Œå…¶ä¸­autoå¯ä»¥ä¸cvé™å®šç¬¦ã€å¼•ç”¨ç»„åˆè¡¨è¾¾ä¸åŒçš„ç»‘å®šæ–¹æ³•ã€‚
+ ä½œç”¨ï¼šæ–¹ä¾¿äº†ä»£ç çš„ç¼–å†™ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹å¯ä»¥æ›¿æ¢tupleã€‚æ–¹ä¾¿å¯¹è¢«ç»‘å®šç»“æ„çš„è®¿é—®(ä¾‹å¦‚å¯¹mapä¸­key-valueçš„è®¿é—®ï¼Œå¤„ç†å¤šè¿”å›å€¼å‡½æ•°ç­‰)ã€‚
+ é‡è¦åŸåˆ™ï¼šç»“æ„åŒ–ç»‘å®šçš„æœ¬æ„æ˜¯ä¸€ä¸ªç»‘å®šè€Œéç”³æ˜ï¼Œä»…åœ¨ç¼–è¯‘æ—¶å·²çŸ¥ç»“æ„æ—¶æ‰èƒ½ä½¿ç”¨ç»“æ„åŒ–ç»‘å®šï¼Œä»»ä½•è¿åè¿™ä¸€åŸåˆ™çš„å†™æ³•éƒ½æ˜¯ä¸è¢«ç¼–è¯‘å™¨å…è®¸çš„,ç»“æ„åŒ–ç»‘å®šçŸ¢é‡ä¸æ˜¯è¿™ç§æƒ…å†µ.

#### ç»‘å®šæ–¹å¼(æ‰€å£°æ˜çš„å˜é‡çš„å½¢å¼)

+ å¯ç»‘å®šéƒ¨åˆ†ï¼šæ•°ç»„ã€arrayã€pairã€tupleçš„å„ä¸ªå…ƒç´ ã€‚å®ä½“çš„éé™æ€publicæ•°æ®æˆå‘˜ä¸”è¢«ç»‘å®šæˆå‘˜ä¸èƒ½åˆ†æ•£åœ¨å¤šä¸ªç±»ä¸­ã€‚

1. éå¼•ç”¨ï¼šæ­¤æ—¶å„ä¸ªå˜é‡æ˜¯è¢«ç»‘å®šå˜é‡ä¸­å¯ä»¥è¢«ç»‘å®šçš„å„ä¸ªå±æ€§çš„æ‹·è´ã€‚
2. å¼•ç”¨ï¼šå„ä¸ªå˜é‡ç»‘å®šçš„æ˜¯è¢«ç»‘å®šå˜é‡ä¸­å¯ä»¥è¢«ç»‘å®šéƒ¨åˆ†çš„æœ¬èº«ã€‚

### [æŠ˜å è¡¨è¾¾å¼](https://www.jianshu.com/p/8df794addfed)

å°†äºŒå…ƒè¿ç®—ï¼ˆ`+`ã€`-`ã€`*`ã€` /`ã€` %`ã€` ^`ã€` &`ã€` |`ã€` =`ã€` <`ã€` >`ã€` <<`ã€` >>`ã€` +=`ã€` -=`ã€` *=`ã€` /=`ã€` %=`ã€` ^=`ã€` &=`ã€` |=`ã€` <<=`ã€` >>=`ã€` ==`ã€` !=`ã€` <=`ã€` >=`ã€` &&`ã€` || `ã€`,`ã€` .*`ã€` ->*`ï¼‰ä¸å‚æ•°åŒ…ç»“åˆï¼Œå°†å‚æ•°åŒ…ä¸­çš„å‚æ•°å±•å¼€ä¾æ¬¡è¿›è¡Œè¿ç®—ã€‚Foldè¡¨è¾¾å¼ä¸€å…±æœ‰å››ç§å½¢å¼(äºŒå…ƒæŠ˜å è¦æ±‚ä¸¤ä¸ªopå¿…é¡»ç›¸åŒï¼Œæ‰€æœ‰`op`ä¸­åªæœ‰`&&`ã€`||`ã€ `,`æ”¯æŒpackä¸ºç©ºï¼Œæ­¤æ—¶åˆ†åˆ«ä»£è¡¨`trueã€falseã€void()`)ã€‚

1. ä¸€å…ƒå³æŠ˜å ï¼š`(pack op ...) <=> (pack1 op (... op (pack"N-1" op packN)))`
2. ä¸€å…ƒå·¦æŠ˜å ï¼š`(... op pack) <=> (((pack1 op pack2) op ...) op packN)`
3. äºŒå…ƒå³æŠ˜å ï¼š`(pack op ... op init) <=> (pack1 op (... op (packNâˆ’1 op (packN op I))))`
4. äºŒå…ƒå·¦æŠ˜å ï¼š`(init op ... op pack) <=> ((((init op pack1) op pack2) op ...) op packN)`

```c++
//(1) ( pack op ... )ä¸€å…ƒå³æŠ˜å 
template<class T, class... Args> void push_back_vec(std::vector<T>& v, Args&&... args){
    (v.push_back(args), ...);
}

//(4) (init op ... op pack)äºŒå…ƒå·¦æŠ˜å 
template<class ...Args> void printer(Args&&... args){
    (std::cout << ... << args) << '\n';
}

std::vector<int> v;
push_back_vec(v, 6, 2, 45, 12);///vä¸­çš„å†…å®¹æ˜¯6 2 45 12
printer(1, 2, 3, "abc");   //123abc

template <typename... Args> auto empty_pack_unary_fold_operator_and(Args&&... args){
    return (args && ...);
}

template <typename... Args>auto empty_pack_unary_fold_operator_or(Args&&... args){
    return (args || ...);
}

template <typename... Args>auto empty_pack_unary_fold_operator_comma(Args&&... args){
    return (args , ...);
}

empty_pack_unary_fold_operator_and();///true
empty_pack_unary_fold_operator_or();///false
is_void<decltype(empty_pack_unary_fold_operator_comma())>::value;///true
```

### æ¨¡æ¿ç±»è‡ªåŠ¨ç±»å‹æ¨å¯¼[CTAD](https://zh.cppreference.com/w/cpp/language/class_template_argument_deduction)

#### æ¨æ–­ç±»å‹æ¨¡æ¿å‚æ•°

éœ€è¦ä¸ºæƒ³å®ç°è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„æ¨¡æ¿ç±»æä¾›èƒ½æ¨æ–­å‡ºç±»æ¨¡å‹ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`Deduction Guides`æ¥æä¾›é¢å¤–çš„æ¨¡æ¿å‚æ•°æ¨å¯¼è§„åˆ™ï¼Œæˆ–è€…ä¿®æ­£å·²æœ‰çš„æ¨¡æ¿å‚æ•°æ¨æ–­è§„åˆ™ã€‚

```c++
template<typename T>class Stack {
	public:
		Stack () = default;//
		Stack (T elem) : elems({std::move(elem)}) {}//æ¨å¯¼è§„åˆ™
		Stack(char const*) -> Stack<std::string>;///ä¿®æ­£æ¨å¯¼è§„åˆ™
};

Stack<int> intStack1; // stack of strings
Stack<int> intStack2 = intStack1; // OK in all versions
Stack intStack3 = intStack1; // OK since C++17
Stack stringStack{"bottom"};// OK: Stack<std::string> deduced since C++17
```

#### `auto`æ¨æ–­éç±»å‹æ¨¡æ¿å‚æ•°

```c++
template <auto value> void f() { }///c++17
f<10>();///è‡ªåŠ¨æ¨å¯¼ä¸ºint
```

### ç¼–è¯‘æœŸIF

`if constexpr()`åœ¨ç¼–è¯‘æœŸå†³å®šç¼–è¯‘`if`æ¡ä»¶çš„å“ªä¸ªåˆ†æ”¯ï¼Œæ¯”å¦‚ç”¨åœ¨ç¼–è¯‘æœŸçš„æ¨¡æ¿å®ä¾‹åŒ–ä¸­ã€‚

### æŠ˜å è¡¨è¾¾å¼è¡¥å……

```c++
template <typename... Args> void print(Args... args) {
    std::cout << ... << args << endl;//äºŒå…ƒå·¦æŠ˜å è¡¨è¾¾å¼æ— ç©ºæ ¼éå†è¾“å‡º
    auto printWhiteSpace = [](const auto arg) { std::cout << " " << arg; };
    (..., printWhiteSpace(args));//ä¸€å…ƒå·¦æŠ˜å +lambdaè¡¨è¾¾å¼ç©ºæ ¼éå†è¾“å‡º
}

template<typename... T> void printDoubled (T const&... args) {
    print ((args + args)...);///print(arg1+arg1, arg2+arg2, arg3+arg3);
    print (args + args...);///print((arg1+arg1), (arg2+arg2), (arg3+arg3));
}///å°†æ¯ä¸ªå‚æ•°æ‰“å°ä¸¤æ¬¡

template<typename C, typename... Idx> void printElems (C const& coll, Idx... idx) {
	print (coll[idx]...);///print (coll[2], coll[0], coll[3])ã€å¯¹æ¯ä¸ªidxè°ƒç”¨ä¸€æ¬¡coll[idx];
}

print("hello","world","copyright");
printDoubled(7.5, std::string("hello"), std::complex<float>(4,2));
printElems({"good", "times", "say", "bye"}, 2, 0, 3);
```

### [å˜é•¿`using`å£°æ˜](https://www.cnblogs.com/zwvista/p/9256655.html)

```c++
template<class... Ts> struct overloaded : Ts... { using Ts::operator()...; };///å¯å˜åŸºç±»æ¨¡æ¿ç±»ã€‚usingè¢«å±•å¼€ä¸ºusing A::operator(), B::operator(), C::operator()...
template<class... Ts> overloaded(Ts...) -> overloaded<Ts...>;///æ¨å¯¼æŒ‡å¼•

overloaded s{
    [](int){cout << "int" << endl;},
    [](double){cout << "double" << endl;},
    [](string){cout << "string" << endl;},
};///æ¯ä¸ªåŒ¿åå¯¹è±¡çš„operator()å°†ä¼šæˆä¸ºç»“æ„ä½“çš„çš„æˆå‘˜å‡½æ•°ï¼Œåœ¨så¯¹è±¡å†…éƒ¨å½¢æˆé‡è½½å…³ç³»ã€‚
```

## C++20

### Ranges

### View

### æ¨¡å—Modules

### åç¨‹(Coroutines)

# æ–‡ä»¶ç³»ç»Ÿ

* å®šä¹‰äºå¤´æ–‡ä»¶<filesystem>ï¼Œå­˜åœ¨äºå‘½åç©ºé—´`std::filesystem`ï¼›

## åŸºæœ¬ç±»
1. pathï¼šè·¯å¾„å¤„ç†
2. directory_entryï¼šæ–‡ä»¶å…¥å£
3. directory_iteratorï¼šè·å–æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­æ–‡ä»¶çš„è¿­ä»£å™¨å®¹å™¨
4. file_statusï¼šè·å–å’Œä¿®æ”¹æ–‡ä»¶ï¼ˆæˆ–ç›®å½•ï¼‰çš„å±æ€§

# æ—¶é—´ä¸æ—¥æœŸ

+ C++çš„æ—¶é’Ÿåº“æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯`std::chrono`åº“ï¼ˆchronologyï¼‰ï¼Œä¸€ä¸ªæ˜¯Cæ ·å¼çš„æ—¥æœŸå’Œæ—¶é—´åº“(å¦‚`std::time_t`)ã€‚

## Cé£æ ¼

![ctimeæ•°æ®å…³ç³»](./img/lang/ctime.png)

å›¾ä¸­ä»¥æ•°æ®ç±»å‹ä¸ºä¸­å¿ƒï¼Œå¸¦æ–¹å‘çš„å®çº¿ç®­å¤´è¡¨ç¤ºè¯¥å‡½æ•°èƒ½è¿”å›ç›¸åº”ç±»å‹çš„ç»“æœï¼Œæ—¶é’Ÿå‘¨æœŸé™¤ä»¥`CLOCKS_PER_SEC`æ‰æ˜¯ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ï¼Œè¯¥æ—¶é—´å¯å¤§äºã€ç­‰äºã€å°äºçœŸå®ä¸–ç•Œæ—¶é—´ã€‚

|     `clock_t`      | `time_t` |  `timespec`(C++17)   |   `tm`   |
| :----------------: | :------: | :------------------: | :------: |
| è¿›ç¨‹è¿è¡Œçš„æ—¶é’Ÿå‘¨æœŸ | çºªå…ƒæ—¶é—´ | ä»¥ç§’å’Œçº³ç§’è¡¨ç¤ºçš„æ—¶é—´ | æ—¥å†æ—¶é—´ |

å¯ä»¥é€šè¿‡`strftime`æˆ–è€…`wcsftime`å‡½æ•°æ¥[æŒ‡å®šæ ¼å¼è¾“å‡º](https://zh.cppreference.com/w/cpp/chrono/c/strftime)ï¼Œéœ€è¦æ³¨æ„`tm::tm_yearï¼Œtm::tm_mmon`éœ€è¦åˆ†åˆ«åŠ ä¸Š1900å’Œ1çš„åç§»æ‰æ˜¯çœŸå®æ—¥å†æ—¶é—´ã€‚

é™¤äº†`<ctime>`ä¹‹å¤–ï¼Œä¸ºäº†æ–¹ä¾¿æ—¶é—´çš„è¾“å…¥è¾“å‡ºï¼Œä»C++11å¼€å§‹ï¼Œåœ¨`<iomanip>`å¤´æ–‡ä»¶ä¸­è¿˜å¢åŠ äº†[put_time](https://zh.cppreference.com/w/cpp/io/manip/put_time)ä¸[get_time](https://zh.cppreference.com/w/cpp/io/manip/get_time)ä¸¤ä¸ªå‡½æ•°ã€‚ä¸ºäº†æé«˜æ—¶é—´ç²¾åº¦ï¼ŒC++17ä¸Šå¢åŠ äº†`timespec`ç±»å‹æä¾›äº†çº³ç§’çº§åˆ«çš„ç²¾åº¦ï¼Œ`timespec_get()`ç”¨æ¥è·å–çº³ç§’çº§åˆ«æ—¶é—´ã€‚


```c++
timespec ts;
timespec_get(&ts, TIME_UTC);
char buff[100];
strftime(buff, sizeof buff, "%D %T", std::gmtime(&ts.tv_sec));
printf("Current time: %s.%09ld UTC\n", buff, ts.tv_nsec);
//Current time: 12/27/19 09:03:29.497456000 UTC
```

## `std::chrono`

### `duration` æ—¶é•¿

#### `std::ratio`

  `std::ratio<Num, Denom>`æ¨¡æ¿ç±»æè¿°äº†[ç¼–è¯‘æ—¶çš„æœ‰ç†æ•°](https://zh.cppreference.com/w/cpp/numeric/ratio)å€¼$Num/Denom$ã€‚ratioå¤´æ–‡ä»¶ä¸­å®šä¹‰äº†éƒ¨åˆ†é¢„å®šä¹‰çš„å€¼ã€‚æ­¤å¤–è¿˜å®šä¹‰äº†`ratio_addï¼Œratio_subtractï¼Œratio_multiplyï¼Œratio_divide`æ¥å®Œæˆ`ratio<>`é—´çš„åŠ å‡ä¹˜é™¤å››åˆ™è¿ç®—ã€‚

```cpp
typedef ratio<1,       1000000000000000000> atto;
typedef ratio<1,          1000000000000000> femto;
typedef ratio<1,             1000000000000> pico;
typedef ratio<1,                1000000000> nano;
typedef ratio<1,                   1000000> micro;
typedef ratio<1,                      1000> milli;
typedef ratio<1,                       100> centi;
typedef ratio<1,                        10> deci;
typedef ratio<                       10, 1> deca;
typedef ratio<                      100, 1> hecto;
typedef ratio<                     1000, 1> kilo;
typedef ratio<                  1000000, 1> mega;
typedef ratio<               1000000000, 1> giga;
typedef ratio<            1000000000000, 1> tera;
typedef ratio<         1000000000000000, 1> peta;
typedef ratio<      1000000000000000000, 1> exa;
```

```c++
using sum = std::ratio_add<std::ratio<2, 3>, std::ratio<1, 6>>;
std::cout << "2/3 + 1/6 = " << sum::num << '/' << sum::den << '\n';/// 2/3 + 1/6 = 5/6
```

####  `std::chrono::duration `

è¡¨ç¤ºæ—¶é—´é—´éš”çš„æ¨¡æ¿ç±»ï¼Œæ¨¡æ¿å‚æ•°ä¸ºèŠ‚æ‹æ•°é‡(`Rep`)å’ŒèŠ‚æ‹ç²¾åº¦(`ratio`)ï¼Œæ”¯æŒåŸºäºæ—¶é—´çš„60è¿›åˆ¶çš„å››åˆ™è¿ç®—ã€‚æ ‡å‡†åº“æä¾›çš„å¾ˆå¸¸ç”¨çš„å‡ ä¸ªæ—¶é•¿å•ä½ï¼Œå¹¶é€šè¿‡`duration_cast<TYPE>(soutrce)`å®ç°`duration`ç±»å‹çš„è½¬æ¢ã€‚

```c++
std::chrono::nanoseconds    duration<long long, std::ratio<1, 1000000000>>
std::chrono::microseconds   duration<long long, std::ratio<1, 1000000>>
std::chrono::milliseconds   duration<long long, std::ratio<1, 1000>>
std::chrono::seconds        duration<long long>
std::chrono::minutes        duration<int, std::ratio<60>>
std::chrono::hours          duration<int, std::ratio<3600>>
```

```c++
chrono::hours two_hours(2);
chrono::minutes five_minutes(5);
auto duration = two_hours + five_minutes;
auto seconds = chrono::duration_cast<chrono::seconds>(duration);
cout << "02:05 is " << seconds.count() << " seconds" << endl;
///02:05 is 7500 seconds
```

### `clock` æ—¶é’Ÿ

æ—¶é’Ÿç±»å¿…é¡»æä¾›æ—¶é—´å€¼ï¼ˆ`time_point`ç±»å‹ï¼Œé€šè¿‡é™æ€æˆå‘˜å‡½æ•°`now()`è·å¾—ï¼‰ã€æ—¶é—´ç±»å‹ï¼ˆ`duration`ï¼‰ã€æ—¶é’ŸèŠ‚æ‹ï¼ˆ`rep`ï¼‰å’Œæ—¶é’Ÿç¨³å®šæ€§ï¼ˆ`is_steady`ï¼‰**å››ç§**ä¿¡æ¯ã€‚

æ ‡å‡†åº“ä¸­æä¾›äº†ä¸‰ç§ç±»å‹çš„æ—¶é’Ÿ,å…¶ä¸­çš„`system_clock`æä¾›äº†ä¸¤ä¸ªé™æ€å‡½æ•°`to_time_t()ã€from_time_t()`ç”¨æ¥ä¸`std::time_t`æ¥å›è½¬æ¢ã€‚
1. `std::chrono::system_clock`ï¼šæœ¬åœ°ç³»ç»Ÿçš„å½“å‰æ—¶é—´ (å¯ä»¥è°ƒæ•´)ï¼Œé™æ€æˆå‘˜å‡½æ•°to_time_t()æ”¯æŒé£æ ¼è½¬æ¢
2. `std::chrono::steady_clock`ï¼šä¸èƒ½è¢«è°ƒæ•´çš„ï¼Œç¨³å®šå¢åŠ çš„æ—¶é—´
3. `std::chrono::high_resolution_clock`ï¼šæä¾›æœ€é«˜ç²¾åº¦çš„è®¡æ—¶å‘¨æœŸï¼Œä¸åŒæ ‡å‡†åº“å®ç°çš„è¡Œä¸ºæœ‰å·®å¼‚

![ä¸C-styleè½¬æ¢](./img/lang/conversion.png)

### `time_point` æ—¶é—´ç‚¹

`std::chrono::time_point<clock, duration>`æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·ç¦»æ—¶é’ŸåŸç‚¹çš„å…·ä½“æ—¶é—´ç‚¹çš„ç±»æ¨¡æ¿ï¼Œä»–åŒ…å«äº†æ—¶é’Ÿå’Œæ—¶é•¿ä¸¤ä¸ªä¿¡æ¯ã€‚å®ƒæ”¯æŒåŠ å‡`duration`ã€ç›¸äº’ç›¸å‡ï¼ˆå€¼ä¸º`duration`ï¼‰ï¼Œé™¤äº†ç›¸åŠ å’Œç›¸å‡ï¼Œä¸¤ä¸ªæ—¶é—´ç‚¹è¿˜**æ”¯æŒæ¯”è¾ƒ**æ“ä½œï¼ˆ `==`ï¼Œ`!=`ï¼Œ`<`ï¼Œ`<=`ï¼Œ`>`ï¼Œ`>=`ï¼‰ã€‚

###  `std::chrono_literals` (c++14)

`std::chrono_literals`é€šè¿‡å­—é¢è¿ç®—ç¬¦æ¨¡æ¿æä¾›äº†æ—¶é—´çš„åç¼€æ”¯æŒã€‚

```cpp
constexpr std::chrono::minutes operator ""min(unsigned long long m){
    return std::chrono::minutes(m);
}

auto x = 45min;
auto y = std::chrono::minutes(45);
x == y;//true
```

# æ‚é¡¹

## æƒ¯ç”¨æ³•

### PIML(pointer to implementation)

1. ç›®çš„ï¼šé€šè¿‡ä½¿ç”¨æŒ‡é’ˆçš„æ–¹å¼éšè—å¯¹è±¡çš„å®ç°ç»†èŠ‚ï¼Œå°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½çš„æ–¹æ³•ä¹‹ä¸€ã€‚
2. å®ç°åŸç†ï¼šåˆ©ç”¨äº†å‰ç½®ç”³æ˜ã€‚åœ¨C++è¯­è¨€ä¸­ï¼Œè¦å®šä¹‰æŸä¸ªç±»å‹çš„å˜é‡æˆ–è€…ä½¿ç”¨ç±»å‹çš„æŸä¸ªæˆå‘˜ï¼Œå°±å¿…é¡»çŸ¥é“è¿™ä¸ªç±»çš„å®Œæ•´å®šä¹‰ï¼Œå…¶ä¾‹å¤–æƒ…å†µæ˜¯ï¼šå¦‚æœå®šä¹‰è¿™ä¸ªç±»å‹çš„æŒ‡é’ˆï¼Œæˆ–è€…è¯¥ç±»å‹æ˜¯å‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›ç±»å‹(å³ä½¿æ˜¯ä¼ å€¼ç±»å‹çš„)ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å‰ç½®å£°æ˜å¼•å…¥è¿™ä¸ªç±»å‹çš„åå­—ï¼Œè€Œä¸éœ€è¦æä¾›æš´éœ²å…¶å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œä»è€Œç±»å‹çš„å®Œæ•´å®šä¹‰å¯ä»¥è¢«éšè—åœ¨å…¶ä»–hppå¤´æ–‡ä»¶æˆ–è€…cppå®ç°æ–‡ä»¶ä¸­ï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆä¹Ÿè¢«ç§°ä¸ºä¸é€æ˜æŒ‡é’ˆ(opaque pointer)ã€‚
3. å®ç°æ–¹æ³•ï¼šåœ¨APIçš„å¤´æ–‡ä»¶ä¸­æä¾›æ¥å£ç±»çš„å®šä¹‰ä»¥åŠå®ç°ç±»çš„å‰ç½®å£°æ˜**æ¥å£ç±»ä¸èƒ½includeå®ç°ç±»çš„å¤´æ–‡ä»¶ï¼Œå¦åˆ™ç™½å¹²**ï¼Œå®ç°ç±»çš„æœ¬èº«å®šä¹‰å’Œæˆå‘˜å‡½æ•°çš„å®ç°éƒ½éšè—åœ¨cppæ–‡ä»¶ä¸­å»ï¼ŒåŒæ—¶ä¸ºäº†é¿å…å®ç°ç±»çš„ç¬¦å·æ±¡æŸ“å¤–éƒ¨åå­—ç©ºé—´ï¼Œå®ç°ç±»å¤§å¤šä½œä¸ºæ¥å£ç±»çš„å†…éƒ¨åµŒå¥—ç±»çš„å½¢å¼ã€‚
4. å…¶ä»–ä¼˜ç‚¹ï¼šä¿¡æ¯éšè”½ã€åŠ é€Ÿç¼–è¯‘ã€æ›´å¥½çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€æƒ°æ€§åˆ†é…

### è®¾è®¡è§„åˆ™

#### åˆ†ç¦»ç”³æ˜ä¸å®šä¹‰

C++/C ç¨‹åºè®¾è®¡é£æ ¼çš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼šå£°æ˜ä¸å®šä¹‰ä¸å¯æ··ä¸ºä¸€è°ˆï¼Œç”¨æˆ·åœ¨é˜…è¯»æºä»£ç å£°æ˜æ—¶æ²¡æœ‰å¿…è¦ã€ä¹Ÿä¸åº”è¯¥çŸ¥é“å‡½æ•°æ˜¯å¦éœ€è¦å†…è”ã€é»˜è®¤å‚æ•°æ˜¯ä»€ä¹ˆã€‚

##### å¤´æ–‡ä»¶

ä¸€èˆ¬æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­ç»™å‡ºç±»çš„å®šä¹‰æˆ–å…¨å±€å‡½æ•°çš„å£°æ˜ä¿¡æ¯ï¼Œè€Œåœ¨ä»£ç æ–‡ä»¶ä¸­ç»™å‡ºå…·ä½“çš„ï¼ˆç±»æˆå‘˜å‡½æ•°æˆ–å…¨å±€å‡½æ•°çš„ï¼‰å‡½æ•°å®šä¹‰ã€‚ç„¶ååœ¨å¤šä¸ªç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­åŒ…å«è¯¥å¤´æ–‡ä»¶åï¼Œå°±å¯ä»¥ä½¿ç”¨å…¶ä¸­å®šä¹‰æˆ–å£°æ˜çš„ç±»å’Œå‡½æ•°ã€‚

å¤´æ–‡ä»¶ä¸­ä¸€èˆ¬ä¸åŒ…å«å˜é‡ã€ç»“æ„å’Œç±»å¯¹è±¡çš„å®šä¹‰ï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´é‡å¤å®šä¹‰çš„ç¼–è¯‘é”™è¯¯ã€‚è§£å†³åŠæ³•æ˜¯ï¼Œåœ¨æŸä¸ªä»£ç æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰ï¼Œåœ¨å…¶ä»–ç”¨æˆ·ä»£ç æ–‡ä»¶ä¸­ç”¨`extern`æ¥å¼•ç”¨å®ƒä»¬ï¼Œå¯¹äºæ¨¡æ¿åˆ™ä½¿ç”¨`export`å…³é”®å­—ã€‚

## [ä½œç”¨åŸŸä¸ç”Ÿå‘½æœŸ](https://www.cnblogs.com/wolf-lifeng/p/3156936.html)

ä¸€ä¸ªäº§ç”Ÿå˜é‡çš„è¯­å¥è¦ç»è¿‡å£°æ˜å’Œå®šä¹‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œåœ¨å˜é‡çš„å®šä¹‰çš„è¯­å¥ä¸­å¦‚æœæ²¡æœ‰è¿›è¡Œæ˜¾å¼çš„èµ‹å€¼ã€é‚£ä¹ˆç³»ç»Ÿå°±ä¼šè¿›è¡Œé»˜è®¤çš„åˆå§‹åŒ–æ“ä½œï¼ˆæ•´å½¢èµ‹0ï¼Œå­—ç¬¦ä¸²ç½®ç©ºï¼‰ã€‚é’ˆå¯¹å‡½æ•°å¯ä»¥ç›´æ¥å°†å£°æ˜å’Œå®šä¹‰æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œé’ˆå¯¹å˜é‡ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¯­å¥åŒ…å«äº†ä¸¤ä¸ªé˜¶æ®µï¼Œé€šè¿‡åœ¨è¯­å¥å‰**åŠ `extern`å…³é”®å­—å¯ä»¥é™åˆ¶è¯­å¥åªå®Œæˆå˜é‡çš„å£°æ˜é˜¶æ®µ**ï¼ˆå¦‚å£°æ˜å…¨å±€å˜é‡ï¼Œå…¶å®šä¹‰å°†ç”±ç¼–è¯‘å™¨å»å¯»æ‰¾ï¼‰ã€‚

**ä¸€æ¬¡å®šä¹‰æ³•åˆ™ï¼š**ä¸€ä¸ªå˜é‡å¯ä»¥è¢«å£°æ˜å¤šæ¬¡ï¼Œä½†åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ã€‚å…¨å±€å¯¹è±¡å’Œå…¨å±€å‡½æ•°æˆ–è€…åªæœ‰ä¸€æ¬¡å®šä¹‰ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªç¨‹åºä¸­æœ‰**å¤šä¸ªå®Œå…¨ç›¸åŒçš„å®šä¹‰**ï¼ˆå†…è”å‡½æ•°å’Œå…¨å±€å¸¸é‡çš„æƒ…å†µï¼‰ã€‚

|   é˜¶æ®µ   |                  åŠ¨ä½œ                  |                 å¤‡æ³¨                 |
| :------: | :------------------------------------: | :----------------------------------: |
| **å£°æ˜** |        å¼•å…¥äº†ä¸€ä¸ªåŠ©è®°ç¬¦ï¼ˆåç§°ï¼‰        |         å»ºç«‹ç¬¦å·ã€æ— å†…å­˜åˆ†é…         |
| **å®šä¹‰** | å…³è”åŠ©è®°ç¬¦åˆ°ä¸€æ®µç‰¹å®šçš„å†…å­˜ï¼Œè¿›è¡Œåˆå§‹åŒ– | å†…å­˜åˆ†é…ï¼šå†…å­˜çš„å¤§å°ç”±å˜é‡çš„ç±»å‹å†³å®š |

### åå­—è§£æ

![](img/lang/name-resolve.jpg)

åå­—è§£æçš„é¡ºåºæ˜¯ï¼šä»åå­—çš„è¢«ä½¿ç”¨ä½ç½®å¼€å§‹ï¼Œä»å°ä½œç”¨åŸŸåˆ°å¤§ä½œç”¨åŸŸçš„é¡ºåºè¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“æŸ¥æ‰¾åˆ°è¯¥åå­—çš„å£°æ˜æˆ–å®šä¹‰åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œç»“æŸã€‚å½“åœ¨ä¸¤ä¸ªä¸åŒçš„ä½œç”¨åŸŸä¸­å®šä¹‰ç›¸åŒåç§°çš„å®ä½“çš„æ—¶å€™ï¼Œå°ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„å®ä½“ã€‚å› ä¸ºç¼–è¯‘å™¨ä»å°ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåç§°çš„å®šä¹‰æˆ–å£°æ˜åï¼Œåå­—æŸ¥æ‰¾åŠ¨ä½œåœæ­¢ï¼Œæ‰€ä»¥å°ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ä¼šéšè—å¤§ä½œç”¨åŸŸä¸­å®šä¹‰çš„åç§°ã€‚

|     C++ä½œç”¨åŸŸ      |              è¯´æ˜              |                æ³¨                |
| :----------------: | :----------------------------: | :------------------------------: |
| **åå­—ç©ºé—´ä½œç”¨åŸŸ** |        å¯åµŒå¥—ã€å¯è·¨æ–‡ä»¶        | å…¨å±€ä½œç”¨åŸŸæ˜¯æœ€å¤§çš„åå­—ç©ºé—´ä½œç”¨åŸŸ |
|      **ç±»åŸŸ**      | ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜éƒ½å±äºè¯¥ç±»åŸŸ |   æ¯å®šä¹‰ä¸€ä¸ªç±»å°±ä¼šå¼•å…¥ä¸€ä¸ªç±»åŸŸ   |
|   **å±€éƒ¨ä½œç”¨åŸŸ**   |  èµ·å§‹å’Œç»“æŸäºå‡½æ•°ä½“ä¸¤ç«¯çš„æ‹¬å·  |                                  |
|   **è¯­å¥ä½œç”¨åŸŸ**   |       è¯­å¥å—æ„æˆçš„ä½œç”¨åŸŸ       |                                  |

å°†**å˜é‡å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­å¯èƒ½é€ æˆé“¾æ¥å†²çª**ï¼ˆåŒ…å«è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶éƒ½æœ‰æ­¤å˜é‡çš„å®šä¹‰ï¼‰ï¼Œä½†**å¤´æ–‡ä»¶ä¸­çš„`const`å˜é‡ä¸ä¼šé€ æˆå†²çª**ï¼ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥å˜é‡æ”¾å…¥æ¯ä¸ªæºæ–‡ä»¶çš„åŒ¿å`namespace`ä¸­ï¼‰ã€‚

![](img/lang/finfluce-iled.png)

## æ–‡ä»¶ä¸å†…å­˜åˆ†æ®µ

![](img/lang/C++ Mem.png)

C/C++ä¸»è¦æœ‰ä»¥ä¸‹äº”ç§å†…å­˜å­˜å‚¨åŒºï¼š

**å…¨å±€/é™æ€å­˜å‚¨åŒºåŸŸ**ï¼šå­˜æ”¾**å…¨å±€å˜é‡å’Œé™æ€å˜é‡**ã€‚ç¨‹åºç¼–è¯‘æ—¶å†…å­˜å·²åˆ†é…å¥½ï¼Œå¹¶å­˜åœ¨äºç¨‹åºæ•´ä¸ªè¿è¡ŒæœŸé—´ï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿç»Ÿä¸€é‡Šæ”¾

* C ï¼šå…¨å±€å˜é‡åˆåˆ†ä¸ºåˆå§‹åŒ–çš„å’Œæœªåˆå§‹åŒ–çš„ã€‚åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼ˆ`.data`ï¼‰ï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¸é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸï¼ˆ`.bss`ï¼‰ã€‚åŒæ—¶æœªè¢«åˆå§‹åŒ–çš„å¯¹è±¡å­˜å‚¨åŒºå¯ä»¥é€šè¿‡ `void*`æ¥è®¿é—®å’Œæ“çºµï¼Œç¨‹åºç»“æŸåç”±ç³»ç»Ÿè‡ªè¡Œé‡Šæ”¾ã€‚
* C++ï¼šæ²¡æœ‰åŒºåˆ†ï¼Œå…±åŒå ç”¨åŒä¸€å—å†…å­˜åŒºã€‚

**æ ˆ**ï¼šå­˜æ”¾**å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡**ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚æ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡é«˜ï¼Œä½†æ˜¯å®¹é‡æœ‰é™ã€‚

**å †ï¼ˆåŠ¨æ€å†…å­˜åˆ†é…ï¼‰**ï¼š**é€šè¿‡`new`å’Œ`malloc`ç”±ä½åˆ°é«˜åˆ†é…ï¼Œç”±`delete`æˆ–`free`æ‰‹åŠ¨é‡Šæ”¾æˆ–è€…ç¨‹åºç»“æŸè‡ªåŠ¨é‡Šæ”¾**ã€‚åŠ¨æ€å†…å­˜çš„ç”Ÿå­˜æœŸäººä¸ºå†³å®šï¼Œä½¿ç”¨çµæ´»ã€‚ç¼ºç‚¹æ˜¯å®¹æ˜“åˆ†é…/é‡Šæ”¾ä¸å½“å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œé¢‘ç¹åˆ†é…/é‡Šæ”¾ä¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ã€‚ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSï¼ˆæ“ä½œç³»ç»Ÿï¼‰å›æ”¶

**ç¨‹åºä»£ç åŒº**ï¼š å­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ä¸éƒ¨åˆ†æ•´æ•°å¸¸é‡

**å­—ç¬¦/æ–‡å­—å¸¸é‡åŒº**ï¼š å­˜æ”¾**å¸¸é‡å­—ç¬¦ä¸²**ï¼ˆç¼–è¯‘å™¨ä¿è¯é‡å¤çš„å­—ç¬¦ä¸²å¸¸é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰ï¼Œç¨‹åºç»“æŸæ—¶ç”±ç³»ç»Ÿé‡Šæ”¾ã€‚**ç®€å•çš„æ•°å­—å¸¸é‡ä¼šè¢«ä½œä¸ºç«‹å³æ•°ç¼–ç åˆ°ä»£ç æ®µ**ã€‚

# å…¶ä»–æ¨è

1. **å¼ºçƒˆæ¨è**ç”¨[==**ç½‘ç«™**==](https://cppinsights.io/)ç¿»è¯‘ä»£ç ï¼ŒéªŒè¯è‡ªå·±çš„æƒ³æ³•ã€‚å°¤å…¶æ˜¯`autoã€decltypeã€lambda`ç­‰ä¸€äº›ç« èŠ‚ã€‚
2. [é™ˆç¡•çš„C++å·¥ç¨‹å®è·µç»éªŒè°ˆ](https://github.com/downloads/chenshuo/documents/CppPractice.pdf)
3. [C++17é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/23052754)
4. [C++20é€Ÿè§ˆ](https://zhuanlan.zhihu.com/p/137646370)
5. [Glibc å†…å­˜ç®¡ç†](https://paper.seebug.org/papers/Archive/refs/heap/glibc%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86ptmalloc%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90.pdf)
6. [æ¨¡æ¿ç³»åˆ—ä¹è®²](https://www.cnblogs.com/zhangyachen/p/13919732.html)
7. [C++è¯­è¨€çš„å•å…ƒæµ‹è¯•ä¸ä»£ç è¦†ç›–ç‡](https://paul.pub/gtest-and-coverage/#id-gcov)
8. [çŸ¥æ— æ¶¯ä¹‹std::sortæºç å‰–æ](https://feihu.me/blog/2014/sgi-std-sort/)
9. [C++ä¸æ­£åˆ™è¡¨è¾¾å¼](https://paul.pub/cpp-regex/)
10. [ä¸é‚£ä¹ˆæ–°çš„C++æ ‡å‡†å­¦ä¹ ç¬”è®°](https://missdeer.github.io/cxxstd/)
11. [C++çš„å±æ€§æŒ‡ç¤ºç¬¦](https://blog.csdn.net/duandianR/article/details/72784828)
12. [STLå­¦ä¹ ç¬”è®°](https://github.com/steveLauwh/SGI-STL)
13. [å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)è¯¦è§£](https://www.cnblogs.com/liyulong1982/p/6013002.html)
14. [==äººè¯ç¿»è¯‘å™¨==ï¼šæ‰’å¼€å¤æ‚æŒ‡é’ˆç±»å‹](https://www.cdecl.org/)
15. [æ™ºèƒ½æŒ‡é’ˆçš„æ ‡å‡†ä¹‹äº‰ï¼šBoost vs. Loki](https://dev.gameres.com/Program/Abstract/Design/Boost.htm)
16. [é¢è¯•ç³»åˆ—ä¹‹C++çš„å¯¹è±¡å¸ƒå±€ã€å»ºè®®æ”¶è—ã€‘](https://segmentfault.com/a/1190000023098876)
17. [C++ä¸­çš„inlineç”¨æ³•](https://segmentfault.com/a/1190000023098876)

tree 7ef50041ae4d45068214b22c7d6bb30fa7e34220

IPC/
boost_doc/
concurrent/
cpplint.py
lang/
network/

tree 797684f30e9275f97b08c62aac777aa717810df9

Client.cpp
Server.cpp
aServer.cpp
bin/
client.cpp
connection.hpp
demo.cpp
ip.cpp
port.cpp
serlizrlisze.cpp
server.cpp
# GITå‘½ä»¤è®°å½•

## åŸºæœ¬æ¦‚å¿µ
### ä¸‰ä¸ªåˆ†åŒº
1. å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰ï¼šç›´æ¥ç¼–è¾‘æ“ä½œçš„è‚‰çœ¼å¯è§çš„æ–‡ä»¶ï¼ˆå³æ–‡ä»¶ç®¡ç†å™¨ä¸­çš„æ–‡ä»¶ï¼‰
2. æš‚å­˜åŒºï¼ˆStage æˆ– Indexï¼‰ï¼šå®Œæˆç¼–è¾‘åæš‚å­˜çš„æ–‡ä»¶
3. ç‰ˆæœ¬åº“ï¼ˆcommit Historyï¼‰ï¼šå­˜æ”¾å·²ç»æäº¤çš„æ•°æ®
commit 6238a8030eecf556a28bd576241a0a5cf39fa57a
Merge: 3e6db26 e2c7c70
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:00:53 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }

commit 06b90d7e8963cdc64315917b4d779d898631c680
Merge: 3e6db26 ac944bf
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:06 2022 +0800

    WIP on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

diff --cc code/boost_doc/IO/client.cpp
index 1bfbdc0,1bfbdc0..5bfb7d0
--- a/code/boost_doc/IO/client.cpp
+++ b/code/boost_doc/IO/client.cpp
@@@ -1,136 -1,136 +1,26 @@@
--//
--// client.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Downloads stock quote information from a server.
--    class client
--    {
--        public:
--            /// Constructor starts the asynchronous connect operation.
--            client(boost::asio::io_service& io_service,
--                    const std::string& host, const std::string& service)
--                : connection_(io_service)
--            {
--                // Resolve the host name into an IP address.
--                boost::asio::ip::tcp::resolver resolver(io_service);
--                boost::asio::ip::tcp::resolver::query query(host, service);
--                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
--                    resolver.resolve(query);
--                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--
--                // Start an asynchronous connect operation.
--                connection_.socket().async_connect(endpoint,
--                        boost::bind(&client::handle_connect, this,
--                            boost::asio::placeholders::error, ++endpoint_iterator));
--            }
--
--            /// Handle completion of a connect operation.
--            void handle_connect(const boost::system::error_code& e,
--                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
--            {
--                if (!e)
--                {
--                    // Successfully established connection. Start operation to read the list
--                    // of stocks. The connection::async_read() function will automatically
--                    // decode the data that is read from the underlying socket.
--                    connection_.async_read(stocks_,
--                            boost::bind(&client::handle_read, this,
--                                boost::asio::placeholders::error));
--                }
--                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
--                {
--                    // Try the next endpoint.
--                    connection_.socket().close();
--                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
--                    connection_.socket().async_connect(endpoint,
--                            boost::bind(&client::handle_connect, this,
--                                boost::asio::placeholders::error, ++endpoint_iterator));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // operation the io_service will run out of work to do and the client will
--                    // exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a read operation.
--            void handle_read(const boost::system::error_code& e)
--            {
--                if (!e)
--                {
--                    // Print out the data that was received.
--                    for (std::size_t i = 0; i < stocks_.size(); ++i)
--                    {
--                        std::cout << "Stock number " << i << "\n";
--                        std::cout << "  code: " << stocks_[i].code << "\n";
--                        std::cout << "  name: " << stocks_[i].name << "\n";
--                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
--                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
--                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
--                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
--                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
--                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
--                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
--                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
--                    }
--                }
--                else
--                {
--                    // An error occurred.
--                    std::cerr << e.message() << std::endl;
--                }
--
--                // Since we are not starting a new operation the io_service will run out of
--                // work to do and the client will exit.
--            }
--
--        private:
--            /// The connection to the server.
--            connection connection_;
--
--            /// The data received from the server.
--            std::vector<stock> stocks_;
--    };
--
--} // namespace s11n_example
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--int main(int argc, char* argv[])
++int main()
  {
--    try
--    {
--        // Check command line arguments.
--        if (argc != 3)
--        {
--            std::cerr << "Usage: client <host> <port>" << std::endl;
--            return 1;
--        }
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--        boost::asio::io_service io_service;
--        s11n_example::client client(io_service, argv[1], argv[2]);
--        io_service.run();
--    }
--    catch (std::exception& e)
++    udp_socket.open(local_add.protocol());
++
++    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
++    while (1)
      {
--        std::cerr << e.what() << std::endl;
++//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
++        string s;
++        cin >> s;
++        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
++        cout << "æ”¶åˆ°" << receive_str << endl;
++        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
      }
--
      return 0;
  }
diff --cc code/boost_doc/IO/server.cpp
index 9414436,9414436..356a6ad
--- a/code/boost_doc/IO/server.cpp
+++ b/code/boost_doc/IO/server.cpp
@@@ -1,130 -1,130 +1,26 @@@
--//
--// server.cpp
--// ~~~~~~~~~~
--//
--// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
--//
--// Distributed under the Boost Software License, Version 1.0. (See accompanying
--// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
--//
--
--#include <boost/asio.hpp>
--#include <boost/bind.hpp>
--#include <boost/lexical_cast.hpp>
  #include <iostream>
--#include <vector>
--#include "connection.hpp" // Must come before boost/serialization headers.
--#include <boost/serialization/vector.hpp>
--#include "stock.hpp"
--
--namespace s11n_example {
--
--    /// Serves stock quote information to any client that connects to it.
--    class server
--    {
--        public:
--            /// Constructor opens the acceptor and starts waiting for the first incoming
--            /// connection.
--            server(boost::asio::io_service& io_service, unsigned short port)
--                : acceptor_(io_service,
--                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
--        {
--            // Create the data to be sent to each client.
--            stock s;
--            s.code = "ABC";
--            s.name = "A Big Company";
--            s.open_price = 4.56;
--            s.high_price = 5.12;
--            s.low_price = 4.33;
--            s.last_price = 4.98;
--            s.buy_price = 4.96;
--            s.buy_quantity = 1000;
--            s.sell_price = 4.99;
--            s.sell_quantity = 2000;
--            stocks_.push_back(s);
--            s.code = "DEF";
--            s.name = "Developer Entertainment Firm";
--            s.open_price = 20.24;
--            s.high_price = 22.88;
--            s.low_price = 19.50;
--            s.last_price = 19.76;
--            s.buy_price = 19.72;
--            s.buy_quantity = 34000;
--            s.sell_price = 19.85;
--            s.sell_quantity = 45000;
--            stocks_.push_back(s);
--
--            // Start an accept operation for a new connection.
--            connection_ptr new_conn(new connection(acceptor_.io_service()));
--            acceptor_.async_accept(new_conn->socket(),
--                    boost::bind(&server::handle_accept, this,
--                        boost::asio::placeholders::error, new_conn));
--        }
--
--            /// Handle completion of a accept operation.
--            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
--            {
--                if (!e)
--                {
--                    // Successfully accepted a new connection. Send the list of stocks to the
--                    // client. The connection::async_write() function will automatically
--                    // serialize the data structure for us.
--                    conn->async_write(stocks_,
--                            boost::bind(&server::handle_write, this,
--                                boost::asio::placeholders::error, conn));
--
--                    // Start an accept operation for a new connection.
--                    connection_ptr new_conn(new connection(acceptor_.io_service()));
--                    acceptor_.async_accept(new_conn->socket(),
--                            boost::bind(&server::handle_accept, this,
--                                boost::asio::placeholders::error, new_conn));
--                }
--                else
--                {
--                    // An error occurred. Log it and return. Since we are not starting a new
--                    // accept operation the io_service will run out of work to do and the
--                    // server will exit.
--                    std::cerr << e.message() << std::endl;
--                }
--            }
--
--            /// Handle completion of a write operation.
--            void handle_write(const boost::system::error_code& e, connection_ptr conn)
--            {
--                // Nothing to do. The socket will be closed automatically when the last
--                // reference to the connection object goes away.
--            }
--
--        private:
--            /// The acceptor object used to accept incoming socket connections.
--            boost::asio::ip::tcp::acceptor acceptor_;
++using namespace std;
++#include <boost/asio.hpp>
++//using namespace boost::asio;
  
--            /// The data to be sent to each client.
--            std::vector<stock> stocks_;
--    };
++int main()
++{
++    boost::asio::io_service io_service;
++    boost::asio::ip::udp::socket udp_socket(io_service);
++    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
  
--} // namespace s11n_example
++    udp_socket.open(local_add.protocol());
++    udp_socket.bind(local_add);
  
--int main(int argc, char* argv[])
--{
--    try
++    char receive_str[1024] = { 0 };
++    while (1)
      {
--        // Check command line arguments.
--        if (argc != 2)
--        {
--            std::cerr << "Usage: server <port>" << std::endl;
--            return 1;
--        }
--        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
++        boost::asio::ip::udp::endpoint  sendpoint;
++        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
++        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
++        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
++        memset(receive_str, 0, 1024);
  
--        boost::asio::io_service io_service;
--        s11n_example::server server(io_service, port);
--        io_service.run();
--    }
--    catch (std::exception& e)
--    {
--        std::cerr << e.what() << std::endl;
      }
--
      return 0;
  }

tree 94f9d660f86853c30201186dc175cbc8332d2120

DS/
Function/
IO/
Tool/
log/

commit 9e7a6219082dfec5b0fe5bc5d414f8cb1fe179e6
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:12 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

commit 15bb20c68aecc1011dbf6f9d7d1b2cc886c9b56a
Merge: 3e6db26 c31f95e
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:56 2022 +0800

    On main: first

diff --cc code/boost_doc/IO/Client.cpp
index 5bfb7d0,5bfb7d0..1bfbdc0
--- a/code/boost_doc/IO/Client.cpp
+++ b/code/boost_doc/IO/Client.cpp
@@@ -1,26 -1,26 +1,136 @@@
--#include <iostream>
--using namespace std;
++//
++// client.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Downloads stock quote information from a server.
++    class client
++    {
++        public:
++            /// Constructor starts the asynchronous connect operation.
++            client(boost::asio::io_service& io_service,
++                    const std::string& host, const std::string& service)
++                : connection_(io_service)
++            {
++                // Resolve the host name into an IP address.
++                boost::asio::ip::tcp::resolver resolver(io_service);
++                boost::asio::ip::tcp::resolver::query query(host, service);
++                boost::asio::ip::tcp::resolver::iterator endpoint_iterator =
++                    resolver.resolve(query);
++                boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++
++                // Start an asynchronous connect operation.
++                connection_.socket().async_connect(endpoint,
++                        boost::bind(&client::handle_connect, this,
++                            boost::asio::placeholders::error, ++endpoint_iterator));
++            }
++
++            /// Handle completion of a connect operation.
++            void handle_connect(const boost::system::error_code& e,
++                    boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
++            {
++                if (!e)
++                {
++                    // Successfully established connection. Start operation to read the list
++                    // of stocks. The connection::async_read() function will automatically
++                    // decode the data that is read from the underlying socket.
++                    connection_.async_read(stocks_,
++                            boost::bind(&client::handle_read, this,
++                                boost::asio::placeholders::error));
++                }
++                else if (endpoint_iterator != boost::asio::ip::tcp::resolver::iterator())
++                {
++                    // Try the next endpoint.
++                    connection_.socket().close();
++                    boost::asio::ip::tcp::endpoint endpoint = *endpoint_iterator;
++                    connection_.socket().async_connect(endpoint,
++                            boost::bind(&client::handle_connect, this,
++                                boost::asio::placeholders::error, ++endpoint_iterator));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // operation the io_service will run out of work to do and the client will
++                    // exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
++
++            /// Handle completion of a read operation.
++            void handle_read(const boost::system::error_code& e)
++            {
++                if (!e)
++                {
++                    // Print out the data that was received.
++                    for (std::size_t i = 0; i < stocks_.size(); ++i)
++                    {
++                        std::cout << "Stock number " << i << "\n";
++                        std::cout << "  code: " << stocks_[i].code << "\n";
++                        std::cout << "  name: " << stocks_[i].name << "\n";
++                        std::cout << "  open_price: " << stocks_[i].open_price << "\n";
++                        std::cout << "  high_price: " << stocks_[i].high_price << "\n";
++                        std::cout << "  low_price: " << stocks_[i].low_price << "\n";
++                        std::cout << "  last_price: " << stocks_[i].last_price << "\n";
++                        std::cout << "  buy_price: " << stocks_[i].buy_price << "\n";
++                        std::cout << "  buy_quantity: " << stocks_[i].buy_quantity << "\n";
++                        std::cout << "  sell_price: " << stocks_[i].sell_price << "\n";
++                        std::cout << "  sell_quantity: " << stocks_[i].sell_quantity << "\n";
++                    }
++                }
++                else
++                {
++                    // An error occurred.
++                    std::cerr << e.message() << std::endl;
++                }
  
--    udp_socket.open(local_add.protocol());
++                // Since we are not starting a new operation the io_service will run out of
++                // work to do and the client will exit.
++            }
  
--    char receive_str[1024] = { 0 };//å­—ç¬¦ä¸²
--    while (1)
++        private:
++            /// The connection to the server.
++            connection connection_;
++
++            /// The data received from the server.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--//        boost::asio::ip::udp::endpoint  sendpoint;//è¯·æ±‚çš„IPä»¥åŠç«¯å£
--        string s;
--        cin >> s;
--        udp_socket.send_to(boost::asio::buffer(s.c_str(),s.size()), local_add);
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), local_add);//æ”¶å–
--        cout << "æ”¶åˆ°" << receive_str << endl;
--        memset(receive_str, 0, 1024);//æ¸…ç©ºå­—ç¬¦ä¸²
++        // Check command line arguments.
++        if (argc != 3)
++        {
++            std::cerr << "Usage: client <host> <port>" << std::endl;
++            return 1;
++        }
++
++        boost::asio::io_service io_service;
++        s11n_example::client client(io_service, argv[1], argv[2]);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }
diff --cc code/boost_doc/IO/Server.cpp
index 356a6ad,356a6ad..9414436
--- a/code/boost_doc/IO/Server.cpp
+++ b/code/boost_doc/IO/Server.cpp
@@@ -1,26 -1,26 +1,130 @@@
--#include <iostream>
--using namespace std;
++//
++// server.cpp
++// ~~~~~~~~~~
++//
++// Copyright (c) 2003-2008 Christopher M. Kohlhoff (chris at kohlhoff dot com)
++//
++// Distributed under the Boost Software License, Version 1.0. (See accompanying
++// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
++//
++
  #include <boost/asio.hpp>
--//using namespace boost::asio;
++#include <boost/bind.hpp>
++#include <boost/lexical_cast.hpp>
++#include <iostream>
++#include <vector>
++#include "connection.hpp" // Must come before boost/serialization headers.
++#include <boost/serialization/vector.hpp>
++#include "stock.hpp"
  
--int main()
--{
--    boost::asio::io_service io_service;
--    boost::asio::ip::udp::socket udp_socket(io_service);
--    boost::asio::ip::udp::endpoint local_add(boost::asio::ip::address::from_string("127.0.0.1"), 2000);
++namespace s11n_example {
++
++    /// Serves stock quote information to any client that connects to it.
++    class server
++    {
++        public:
++            /// Constructor opens the acceptor and starts waiting for the first incoming
++            /// connection.
++            server(boost::asio::io_service& io_service, unsigned short port)
++                : acceptor_(io_service,
++                        boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port))
++        {
++            // Create the data to be sent to each client.
++            stock s;
++            s.code = "ABC";
++            s.name = "A Big Company";
++            s.open_price = 4.56;
++            s.high_price = 5.12;
++            s.low_price = 4.33;
++            s.last_price = 4.98;
++            s.buy_price = 4.96;
++            s.buy_quantity = 1000;
++            s.sell_price = 4.99;
++            s.sell_quantity = 2000;
++            stocks_.push_back(s);
++            s.code = "DEF";
++            s.name = "Developer Entertainment Firm";
++            s.open_price = 20.24;
++            s.high_price = 22.88;
++            s.low_price = 19.50;
++            s.last_price = 19.76;
++            s.buy_price = 19.72;
++            s.buy_quantity = 34000;
++            s.sell_price = 19.85;
++            s.sell_quantity = 45000;
++            stocks_.push_back(s);
++
++            // Start an accept operation for a new connection.
++            connection_ptr new_conn(new connection(acceptor_.io_service()));
++            acceptor_.async_accept(new_conn->socket(),
++                    boost::bind(&server::handle_accept, this,
++                        boost::asio::placeholders::error, new_conn));
++        }
++
++            /// Handle completion of a accept operation.
++            void handle_accept(const boost::system::error_code& e, connection_ptr conn)
++            {
++                if (!e)
++                {
++                    // Successfully accepted a new connection. Send the list of stocks to the
++                    // client. The connection::async_write() function will automatically
++                    // serialize the data structure for us.
++                    conn->async_write(stocks_,
++                            boost::bind(&server::handle_write, this,
++                                boost::asio::placeholders::error, conn));
  
--    udp_socket.open(local_add.protocol());
--    udp_socket.bind(local_add);
++                    // Start an accept operation for a new connection.
++                    connection_ptr new_conn(new connection(acceptor_.io_service()));
++                    acceptor_.async_accept(new_conn->socket(),
++                            boost::bind(&server::handle_accept, this,
++                                boost::asio::placeholders::error, new_conn));
++                }
++                else
++                {
++                    // An error occurred. Log it and return. Since we are not starting a new
++                    // accept operation the io_service will run out of work to do and the
++                    // server will exit.
++                    std::cerr << e.message() << std::endl;
++                }
++            }
  
--    char receive_str[1024] = { 0 };
--    while (1)
++            /// Handle completion of a write operation.
++            void handle_write(const boost::system::error_code& e, connection_ptr conn)
++            {
++                // Nothing to do. The socket will be closed automatically when the last
++                // reference to the connection object goes away.
++            }
++
++        private:
++            /// The acceptor object used to accept incoming socket connections.
++            boost::asio::ip::tcp::acceptor acceptor_;
++
++            /// The data to be sent to each client.
++            std::vector<stock> stocks_;
++    };
++
++} // namespace s11n_example
++
++int main(int argc, char* argv[])
++{
++    try
      {
--        boost::asio::ip::udp::endpoint  sendpoint;
--        udp_socket.receive_from(boost::asio::buffer(receive_str, 1024), sendpoint);
--        cout << "æ”¶åˆ°" << sendpoint.address().to_string() <<":"<< receive_str << endl;
--        udp_socket.send_to(boost::asio::buffer("æœåŠ¡ç«¯è¿”å›success"), sendpoint);
--        memset(receive_str, 0, 1024);
++        // Check command line arguments.
++        if (argc != 2)
++        {
++            std::cerr << "Usage: server <port>" << std::endl;
++            return 1;
++        }
++        unsigned short port = boost::lexical_cast<unsigned short>(argv[1]);
  
++        boost::asio::io_service io_service;
++        s11n_example::server server(io_service, port);
++        io_service.run();
++    }
++    catch (std::exception& e)
++    {
++        std::cerr << e.what() << std::endl;
      }
++
      return 0;
  }

commit 1e9db9a0f6857dcc682ad51b4eefe6fe94720fb8
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:38:01 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

commit 703de11243870348c84855d56c5e6ef0fc6d74bd
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:13:07 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®

tree 8abed654a578cbdf739df75a84e100dea95691b4

IPC/
boost_doc/
concurrent/
cpplint.py
lang/
network/

tree 041f6443e88e360593bdb011c83b2565a428d895

Client.cpp
Server.cpp
aServer.cpp
bin/
client.cpp
connection.hpp
demo.cpp
ip.cpp
port.cpp
serlizrlisze.cpp
server.cpp

tree 5bbf5d92a4dd4b6055f208c4121f97ab90ea1db8

.github/
.gitignore
C++å¹¶å‘.md
LeetCodeè®°å½•.md
Linux.md
Linux.md.orig
README.md
code/
flow_sync.md
img/
å·¥å…·åŸºç¡€.md
æ“ä½œç³»ç»Ÿ.md
æ•°æ®åº“.md
æ•°æ®ç»“æ„.md
ç½‘ç»œç¼–ç¨‹.md
è®¡ç®—æœºç½‘ç»œ.md
è¯­è¨€åŸºç¡€.md
ğŸ¤®/

commit c31f95e20845fadff83ef437313ae91ed1fec509
Author: jovy zhang <jovy.zhang@zoom.us>
Date:   Tue Aug 23 17:37:56 2022 +0800

    index on main: 3e6db26 é€šè¿‡ç½‘ç»œä¼ è¾“PODç±»å‹æ•°æ®
